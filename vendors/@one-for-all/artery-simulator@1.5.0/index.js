System.register(["react","./inject-css-11ac49aa.js","rxjs","@one-for-all/utils"],(function(n,e){"use strict";var t,r,i,o,s,a,c,u,d,l,m,f,p;return{setters:[function(n){t=n.default,r=n.useState,i=n.useEffect,o=n.useRef,s=n.useImperativeHandle},function(n){a=n.M,c=n.a,u=n.b,d=n.c,l=n.n,m=n.d,f=n.e},function(n){p=n.noop},function(){}],execute:function(){function h(n,e,t){var r,i,o;n.contentWindow&&(n.contentWindow.__fenceIframeLoad=()=>{null==t||t()}),null==(r=n.contentDocument)||r.open(),null==(i=n.contentDocument)||i.write(`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n    <script>\n      window.onload = (event) => {\n        if (window.__fenceIframeLoad) {\n          window.__fenceIframeLoad();\n        }\n      };\n    <\/script>\n    ${function(n){const e=document.createElement("div");return n.forEach((n=>{const t=document.createElement(n.name);Object.entries(n.attrs).forEach((([n,e])=>{t.setAttribute(n,e)})),n.innerText&&(t.innerHTML=n.innerText),e.appendChild(t)})),e.innerHTML}(e)}\n  </head>\n  <body>\n  </body>\n  </html>\n  `),null==(o=n.contentDocument)||o.close()}var b=t.forwardRef((function({headElements:n,onLoad:e},o){const[s,a]=r();return i((()=>{s&&h(s,n,e)}),[s]),t.createElement("iframe",{className:"simulator-fence",ref:n=>{n&&("function"==typeof o?o(n):o&&"current"in o&&(o.current=n),a(n))}})}));var w=new URL("index-9cf3f96b.js",e.meta.url).href;function v(n,e){const t=Array.from(document.scripts).filter((n=>"systemjs-importmap"===n.type)).map((n=>JSON.parse(n.innerText))).map((n=>JSON.stringify(n))).map((n=>({name:"script",attrs:{type:"systemjs-importmap"},innerText:n}))),r=n.startsWith("http")?n:`${window.origin}${n}`,i=t.concat([{name:"script",attrs:{type:"systemjs-importmap"},innerText:`{\n        "imports": {\n          "TEMPORARY_PATCH_FOR_ARTERY_PLUGINS": "${r}"\n        }\n      }`},{name:"script",attrs:{src:"https://ofapkg.pek3b.qingstor.com/system@6.10.3/system.6.10.3.min.js"}},{name:"script",attrs:{src:w}}]),o=(e||[]).map((n=>({name:"link",attrs:{rel:"stylesheet",href:n}})));return i.concat(o)}l(".artery-simulator {\n  position: relative;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-columns: 1fr;\n  padding: 16px;\n}\n\n.simulator-fence {\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  border: none;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.11), 0 2px 2px rgba(0, 0, 0, 0.11), 0 4px 4px rgba(0, 0, 0, 0.11), 0 6px 8px rgba(0, 0, 0, 0.11), 0 8px 16px rgba(0, 0, 0, 0.11);\n}",{});n("default",t.forwardRef((function({activeOverLayerNodeID:n,activeNode:e,artery:l,className:h,cssURLs:w,isContainer:y,onChange:g,pluginsSrc:x,setActiveOverLayerNodeID:E,setActiveNode:L,overLayerComponents:R},_){const T=o(null),[N,O]=r(),[j,A]=r(!1);return s(_,(()=>({iframe:T.current||null}))),i((()=>{var n,e;if(!(null==(n=T.current)?void 0:n.contentWindow)||!j)return;const t=new m(null==(e=T.current)?void 0:e.contentWindow,"host-side");t.waitForReady().then((()=>{t.send(d,l)})).catch(p),O(t),T.current.contentWindow.__OVER_LAYER_COMPONENTS=R}),[j]),function(n,e){i((()=>{n&&n.addResponders({[a]:e})}),[e,n])}(N,y),function(n,e,t){i((()=>{if(!n)return;const t=n.listen(d).subscribe((n=>{e(n)}));return()=>{t.unsubscribe()}}),[e,n]),i((()=>{n&&n.send(d,t)}),[t,n])}(N,g,l),function(n,e,t){const r=o();i((()=>{if(!n)return;const t=n.listen(u).subscribe((n=>{e(n)}));return()=>{t.unsubscribe()}}),[e,n]),i((()=>{n&&r.current!==(null==t?void 0:t.id)&&(n.send(u,t),r.current=null==t?void 0:t.id)}),[t,n])}(N,L,e),function(n,e,t){i((()=>{if(!n)return;const t=n.listen(c).subscribe((n=>{e(n)}));return()=>{t.unsubscribe()}}),[e,n]),i((()=>{n&&n.send(c,t)}),[t,n])}(N,E,n),t.createElement("div",{className:f("artery-simulator",h)},t.createElement(b,{ref:T,headElements:v(x,w),onLoad:()=>A(!0)}))})))}}}));
