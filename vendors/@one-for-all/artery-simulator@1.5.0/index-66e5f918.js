System.register(["react-dom","react","@one-for-all/artery-renderer","TEMPORARY_PATCH_FOR_ARTERY_PLUGINS","rxjs","@one-for-all/elements-radar","rxjs/operators","@one-for-all/utils","@one-for-all/artery-utils","@one-for-all/artery-engine","./inject-css-11ac49aa.js","@one-for-all/headless-ui","@one-for-all/icon"],(function(){"use strict";var t,e,n,r,i,o,u,a,s,c,f,h,l,p,d,_,v,y,m,g,w,b,x,E,z,S,I,O,A,M,D,k,q,P,j,N,R,C,L,T,B,U,K,$,W,F,H,J,Z,V,Y,X,G,Q,tt;return{setters:[function(e){t=e.default},function(t){e=t.default,n=t.useContext,r=t.useRef,i=t.useEffect,o=t.useState,u=t.useCallback,a=t.useMemo},function(t){s=t.useInstantiateProps,c=t.useNodeComponent,f=t.useBootResult},function(t){h=t.default},function(t){l=t.BehaviorSubject,p=t.Subject,d=t.map,_=t.distinctUntilChanged,v=t.filter,y=t.combineLatest,m=t.noop,g=t.audit,w=t.animationFrames,b=t.tap},function(t){x=t.default},function(t){E=t.filter,z=t.map,S=t.audit,I=t.tap,O=t.distinctUntilChanged},function(t){A=t.logger},function(t){M=t.byArbitrary,D=t._appendTo,k=t._insertLeftSiblingTo,q=t._insertRightSiblingTo,P=t.travel,j=t.parentIdsSeq,N=t.keyPathById,R=t.deleteByID,C=t.insertAfter,L=t.getFirstLevelConcreteChildren,T=t.nodeHasChildNodes},function(t){B=t.generateNodeId},function(t){U=t.D,K=t.f,$=t.g,W=t.d,F=t.c,H=t.b,J=t.a,Z=t.M,V=t.e,Y=t.F,X=t.h,G=t.n},function(t){Q=t.usePopper},function(t){tt=t.default}],execute:function(){var et=e.createContext(new l(new Set));function nt(t,e){const o=n(et),u=r();return i((()=>{const n=new x(e);u.current=n,o.pipe(E((t=>!!t.size))).subscribe((t=>n.track(Array.from(t))));const r=n.getReport$().pipe(z((t=>function(t,e){const n=new Set;return Array.from(t.entries()).map((([t,{relativeRect:r,raw:i}])=>{const o=t.dataset.simulatorNodeId;if(!o)return;if(n.has(o))return;n.add(o);const u=parseInt(t.dataset.simulatorNodeDepth||"0")||0,{x:a,y:s}=document.body.getBoundingClientRect();return{id:o,depth:u,raw:i,relativeRect:r,executor:t.dataset.simulatorNodeExecutor||"",absolutePosition:{height:r.height,width:r.width,x:e?r.x:r.x-a,y:e?r.y:r.y-s}}})).filter((t=>!!t))}(t,e)))).subscribe(t);return()=>{r.unsubscribe()}}),[e]),u}var rt=function({nodes:t,ctx:n}){return t.length?e.createElement(e.Fragment,null,t.map(((t,r)=>e.createElement(Vi,{key:`${t.id}-${r}`,node:t,ctx:n})))):null};var it=e.createContext(0);function ot(t,e){const n=e.value;e.next(n.add(t))}function ut(t,e){const n=e.value;n.delete(t),e.next(n)}var at=32,st=31,ct={};function ft(t){t&&(t.value=!0)}function ht(){}function lt(t){return void 0===t.size&&(t.size=t.__iterate(dt)),t.size}function pt(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?lt(t)+e:e}function dt(){return!0}function _t(t,e,n){return(0===t&&!gt(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function vt(t,e){return mt(t,e,0)}function yt(t,e){return mt(t,e,e)}function mt(t,e,n){return void 0===t?n:gt(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function gt(t){return t<0||0===t&&1/t==-1/0}var wt="@@__IMMUTABLE_ITERABLE__@@";function bt(t){return Boolean(t&&t[wt])}var xt="@@__IMMUTABLE_KEYED__@@";function Et(t){return Boolean(t&&t[xt])}var zt="@@__IMMUTABLE_INDEXED__@@";function St(t){return Boolean(t&&t[zt])}function It(t){return Et(t)||St(t)}var Ot=function(t){return bt(t)?t:Vt(t)},At=function(t){function e(t){return Et(t)?t:Yt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot),Mt=function(t){function e(t){return St(t)?t:Xt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot),Dt=function(t){function e(t){return bt(t)&&!It(t)?t:Gt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot);Ot.Keyed=At,Ot.Indexed=Mt,Ot.Set=Dt;var kt="@@__IMMUTABLE_SEQ__@@";function qt(t){return Boolean(t&&t[kt])}function Pt(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}function jt(t){return bt(t)||Pt(t)}var Nt="@@__IMMUTABLE_ORDERED__@@";function Rt(t){return Boolean(t&&t[Nt])}var Ct="function"==typeof Symbol&&Symbol.iterator,Lt="@@iterator",Tt=Ct||Lt,Bt=function(t){this.next=t};function Ut(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function Kt(){return{value:void 0,done:!0}}function $t(t){return!!Array.isArray(t)||!!Ht(t)}function Wt(t){return t&&"function"==typeof t.next}function Ft(t){var e=Ht(t);return e&&e.call(t)}function Ht(t){var e=t&&(Ct&&t[Ct]||t["@@iterator"]);if("function"==typeof e)return e}Bt.prototype.toString=function(){return"[Iterator]"},Bt.KEYS=0,Bt.VALUES=1,Bt.ENTRIES=2,Bt.prototype.inspect=Bt.prototype.toSource=function(){return this.toString()},Bt.prototype[Tt]=function(){return this};var Jt=Object.prototype.hasOwnProperty;function Zt(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var Vt=function(t){function e(t){return null==t?re():jt(t)?t.toSeq():function(t){var e=ue(t);if(e)return(r=Ht(n=t))&&r===n.entries?e.fromEntrySeq():function(t){var e=Ht(t);return e&&e===t.keys}(t)?e.toSetSeq():e;var n,r;if("object"==typeof t)return new te(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new Bt((function(){if(i===r)return{value:void 0,done:!0};var o=n[e?r-++i:i++];return Ut(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(Ot),Yt=function(t){function e(t){return null==t?re().toKeyedSeq():bt(t)?Et(t)?t.toSeq():t.fromEntrySeq():Pt(t)?t.toSeq():ie(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Vt),Xt=function(t){function e(t){return null==t?re():bt(t)?Et(t)?t.entrySeq():t.toIndexedSeq():Pt(t)?t.toSeq().entrySeq():oe(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Vt),Gt=function(t){function e(t){return(bt(t)&&!It(t)?t:Xt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Vt);Vt.isSeq=qt,Vt.Keyed=Yt,Vt.Set=Gt,Vt.Indexed=Xt,Vt.prototype[kt]=!0;var Qt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[pt(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new Bt((function(){if(i===r)return{value:void 0,done:!0};var o=e?r-++i:i++;return Ut(t,o,n[o])}))},e}(Xt),te=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Jt.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var u=r[e?i-++o:o++];if(!1===t(n[u],u,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new Bt((function(){if(o===i)return{value:void 0,done:!0};var u=r[e?i-++o:o++];return Ut(t,u,n[u])}))},e}(Yt);te.prototype[Nt]=!0;var ee,ne=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=Ft(this._collection),r=0;if(Wt(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=Ft(this._collection);if(!Wt(n))return new Bt(Kt);var r=0;return new Bt((function(){var e=n.next();return e.done?e:Ut(t,r++,e.value)}))},e}(Xt);function re(){return ee||(ee=new Qt([]))}function ie(t){var e=ue(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new te(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function oe(t){var e=ue(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ue(t){return Zt(t)?new Qt(t):$t(t)?new ne(t):void 0}var ae="@@__IMMUTABLE_MAP__@@";function se(t){return Boolean(t&&t[ae])}function ce(t){return se(t)&&Rt(t)}function fe(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function he(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(fe(t)&&fe(e)&&t.equals(e))}var le="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function pe(t){return t>>>1&1073741824|3221225471&t}var de=Object.prototype.valueOf;function _e(t){if(null==t)return ve(t);if("function"==typeof t.hashCode)return pe(t.hashCode(t));var e,n=(e=t).valueOf!==de&&"function"==typeof e.valueOf?e.valueOf(e):e;if(null==n)return ve(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return pe(e)}(n);case"string":return n.length>Ie?function(t){var e=Me[t];void 0===e&&(e=ye(t),Ae===Oe&&(Ae=0,Me={}),Ae++,Me[t]=e);return e}(n):ye(n);case"object":case"function":return function(t){var e;if(xe&&void 0!==(e=be.get(t)))return e;if(void 0!==(e=t[Se]))return e;if(!ge){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Se]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=we(),xe)be.set(t,e);else{if(void 0!==me&&!1===me(t))throw new Error("Non-extensible objects are not allowed as keys.");if(ge)Object.defineProperty(t,Se,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Se]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Se]=e}}return e}(n);case"symbol":return function(t){var e=Ee[t];if(void 0!==e)return e;return e=we(),Ee[t]=e,e}(n);default:if("function"==typeof n.toString)return ye(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function ve(t){return null===t?1108378658:1108378659}function ye(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return pe(e)}var me=Object.isExtensible,ge=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function we(){var t=++ze;return 1073741824&ze&&(ze=0),t}var be,xe="function"==typeof WeakMap;xe&&(be=new WeakMap);var Ee=Object.create(null),ze=0,Se="__immutablehash__";"function"==typeof Symbol&&(Se=Symbol(Se));var Ie=16,Oe=255,Ae=0,Me={},De=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Re(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=Ne(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e,r){return t(e,r,n)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Yt);De.prototype[Nt]=!0;var ke=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&lt(this),this._iter.__iterate((function(i){return t(i,e?n.size-++r:r++,n)}),e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(1,e),i=0;return e&&lt(this),new Bt((function(){var o=r.next();return o.done?o:Ut(t,e?n.size-++i:i++,o.value,o)}))},e}(Xt),qe=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new Bt((function(){var e=n.next();return e.done?e:Ut(t,e.value,e.value,e)}))},e}(Gt),Pe=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){Je(e);var r=bt(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new Bt((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Je(r);var i=bt(r);return Ut(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}}))},e}(Yt);function je(t){var e=Ve(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ye,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new Bt((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function Ne(t,e,n){var r=Ve(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,ct);return o===ct?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate((function(t,i,u){return!1!==r(e.call(n,t,i,u),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(2,i);return new Bt((function(){var i=o.next();if(i.done)return i;var u=i.value,a=u[0];return Ut(r,a,e.call(n,u[1],a,t),i)}))},r}function Re(t,e){var n=this,r=Ve(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=je(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ye,r.__iterate=function(n,r){var i=this,o=0;return r&&lt(t),t.__iterate((function(t,u){return n(t,e?u:r?i.size-++o:o++,i)}),!r)},r.__iterator=function(r,i){var o=0;i&&lt(t);var u=t.__iterator(2,!i);return new Bt((function(){var t=u.next();if(t.done)return t;var a=t.value;return Ut(r,e?a[0]:i?n.size-++o:o++,a[1],t)}))},r}function Ce(t,e,n,r){var i=Ve(t);return r&&(i.has=function(r){var i=t.get(r,ct);return i!==ct&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,ct);return o!==ct&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var u=this,a=0;return t.__iterate((function(t,o,s){if(e.call(n,t,o,s))return a++,i(t,r?o:a-1,u)}),o),a},i.__iteratorUncached=function(i,o){var u=t.__iterator(2,o),a=0;return new Bt((function(){for(;;){var o=u.next();if(o.done)return o;var s=o.value,c=s[0],f=s[1];if(e.call(n,f,c,t))return Ut(i,r?c:a++,f,o)}}))},i}function Le(t,e,n,r){var i=t.size;if(_t(e,n,i))return t;var o=vt(e,i),u=yt(n,i);if(o!=o||u!=u)return Le(t.toSeq().cacheResult(),e,n,r);var a,s=u-o;s==s&&(a=s<0?0:s);var c=Ve(t);return c.size=0===a?a:t.size&&a||void 0,!r&&qt(t)&&a>=0&&(c.get=function(e,n){return(e=pt(this,e))>=0&&e<a?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var u=0,s=!0,c=0;return t.__iterate((function(t,n){if(!s||!(s=u++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==a})),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);if(0===a)return new Bt(Kt);var i=t.__iterator(e,n),u=0,s=0;return new Bt((function(){for(;u++<o;)i.next();if(++s>a)return{value:void 0,done:!0};var t=i.next();return r||1===e||t.done?t:Ut(e,s-1,0===e?void 0:t.value[1],t)}))},c}function Te(t,e,n,r){var i=Ve(t);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,s=0;return t.__iterate((function(t,o,c){if(!a||!(a=e.call(n,t,o,c)))return s++,i(t,r?o:s-1,u)})),s},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(2,o),s=!0,c=0;return new Bt((function(){var t,o,f;do{if((t=a.next()).done)return r||1===i?t:Ut(i,c++,0===i?void 0:t.value[1],t);var h=t.value;o=h[0],f=h[1],s&&(s=e.call(n,f,o,u))}while(s);return 2===i?t:Ut(i,o,f,t)}))},i}function Be(t,e){var n=Et(t),r=[t].concat(e).map((function(t){return bt(t)?n&&(t=At(t)):t=n?ie(t):oe(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&Et(i)||St(t)&&St(i))return i}var o=new Qt(r);return n?o=o.toKeyedSeq():St(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=r.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),o}function Ue(t,e,n){var r=Ve(t);return r.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var u=0,a=!1;return function t(s,c){s.__iterate((function(o,s){return(!e||c<e)&&bt(o)?t(o,c+1):(u++,!1===i(o,n?s:u-1,r)&&(a=!0)),!a}),o)}(t,0),u},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),u=[],a=0;return new Bt((function(){for(;o;){var t=o.next();if(!1===t.done){var s=t.value;if(2===r&&(s=s[1]),e&&!(u.length<e)||!bt(s))return n?t:Ut(r,a++,s,t);u.push(o),o=s.__iterator(r,i)}else o=u.pop()}return{value:void 0,done:!0}}))},r}function Ke(t,e,n){e||(e=Xe);var r=Et(t),i=0,o=t.toSeq().map((function(e,r){return[r,e,i++,n?n(e,r,t):e]})).valueSeq().toArray();return o.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Yt(o):St(t)?Xt(o):Gt(o)}function $e(t,e,n){if(e||(e=Xe),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return We(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return We(e,t,n)?n:t}))}function We(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function Fe(t,e,n,r){var i=Ve(t),o=new Qt(n).map((function(t){return t.size}));return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map((function(t){return t=Ot(t),Ft(i?t.reverse():t)})),u=0,a=!1;return new Bt((function(){var n;return a||(n=o.map((function(t){return t.next()})),a=r?n.every((function(t){return t.done})):n.some((function(t){return t.done}))),a?{value:void 0,done:!0}:Ut(t,u++,e.apply(null,n.map((function(t){return t.value}))))}))},i}function He(t,e){return t===e?t:qt(t)?e:t.constructor(e)}function Je(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ze(t){return Et(t)?At:St(t)?Mt:Dt}function Ve(t){return Object.create((Et(t)?Yt:St(t)?Xt:Gt).prototype)}function Ye(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Vt.prototype.cacheResult.call(this)}function Xe(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ge(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function Qe(t,e){if(!t)throw new Error(e)}function tn(t){Qe(t!==1/0,"Cannot perform this action with an infinite size.")}function en(t){if(Zt(t)&&"string"!=typeof t)return t;if(Rt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}ke.prototype.cacheResult=De.prototype.cacheResult=qe.prototype.cacheResult=Pe.prototype.cacheResult=Ye;var nn=Object.prototype.toString;function rn(t){if(!t||"object"!=typeof t||"[object Object]"!==nn.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e,r=Object.getPrototypeOf(e);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===e}function on(t){return"object"==typeof t&&(jt(t)||Array.isArray(t)||rn(t))}function un(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function an(t,e,n){return jt(t)?t.get(e,n):function(t,e){return jt(t)?t.has(e):on(t)&&Jt.call(t,e)}(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function sn(t){if(Array.isArray(t))return Ge(t);var e={};for(var n in t)Jt.call(t,n)&&(e[n]=t[n]);return e}function cn(t,e,n,r){r||(r=n,n=void 0);var i=fn(jt(t),t,en(e),0,n,r);return i===ct?n:i}function fn(t,e,n,r,i,o){var u=e===ct;if(r===n.length){var a=u?i:e,s=o(a);return s===a?e:s}if(!u&&!on(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(un)+"]: "+e);var c=n[r],f=u?ct:an(e,c,ct),h=fn(f===ct?t:jt(f),f,n,r+1,i,o);return h===f?e:h===ct?function(t,e){if(!on(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(jt(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Jt.call(t,e))return t;var n=sn(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}(e,c):function(t,e,n){if(!on(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(jt(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(Jt.call(t,e)&&n===t[e])return t;var r=sn(t);return r[e]=n,r}(u?t?Ln():{}:e,c,h)}function hn(t,e){return function(t,e,n){return cn(t,e,ct,(function(){return n}))}(this,t,e)}function ln(t,e){return cn(t,e,(function(){return ct}))}function pn(t){return ln(this,t)}function dn(t,e,n,r){return cn(t,[e],n,r)}function _n(t,e,n){return 1===arguments.length?t(this):dn(this,t,e,n)}function vn(t,e,n){return cn(this,t,e,n)}function yn(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=At(e[i]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var e=n?function(e,r){dn(t,r,ct,(function(t){return t===ct?e:n(t,e,r)}))}:function(e,n){t.set(n,e)},i=0;i<r.length;i++)r[i].forEach(e)})):t.constructor(r[0])}function mn(t,e,n){return gn(t,e,function(t){function e(n,r,i){return on(n)&&on(r)&&(o=r,u=Vt(n),a=Vt(o),St(u)===St(a)&&Et(u)===Et(a))?gn(n,[r],e):t?t(n,r,i):r;var o,u,a}return e}(n))}function gn(t,e,n){if(!on(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(jt(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?Mt:At,u=r?function(e){i===t&&(i=sn(i)),i.push(e)}:function(e,r){var o=Jt.call(i,r),u=o&&n?n(i[r],e,r):e;o&&u===i[r]||(i===t&&(i=sn(i)),i[r]=u)},a=0;a<e.length;a++)o(e[a]).forEach(u);return i}function wn(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return cn(this,t,Ln(),(function(t){return gn(t,e)}))}function bn(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return cn(this,t,Ln(),(function(t){return mn(t,e)}))}function xn(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function En(){return this.__ownerID?this:this.__ensureOwner(new ht)}function zn(){return this.__ensureOwner()}function Sn(){return this.__altered}var In=function(t){function e(e){return null==e?Ln():se(e)&&!Rt(e)?e:Ln().withMutations((function(n){var r=t(e);tn(r.size),r.forEach((function(t,e){return n.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ln().withMutations((function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Tn(this,t,e)},e.prototype.remove=function(t){return Tn(this,t,ct)},e.prototype.deleteAll=function(t){var e=Ot(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ln()},e.prototype.sort=function(t){return fr(Ke(this,t))},e.prototype.sortBy=function(t,e){return fr(Ke(this,e,t))},e.prototype.map=function(t,e){var n=this;return this.withMutations((function(r){r.forEach((function(i,o){r.set(o,t.call(e,i,o,n))}))}))},e.prototype.__iterator=function(t,e){return new jn(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Cn(this.size,this._root,t,this.__hash):0===this.size?Ln():(this.__ownerID=t,this.__altered=!1,this)},e}(At);In.isMap=se;var On=In.prototype;On[ae]=!0,On.delete=On.remove,On.removeAll=On.deleteAll,On.setIn=hn,On.removeIn=On.deleteIn=pn,On.update=_n,On.updateIn=vn,On.merge=On.concat=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return yn(this,t)},On.mergeWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return yn(this,e,t)},On.mergeDeep=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return mn(this,t)},On.mergeDeepWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return mn(this,e,t)},On.mergeIn=wn,On.mergeDeepIn=bn,On.withMutations=xn,On.wasAltered=Sn,On.asImmutable=zn,On["@@transducer/init"]=On.asMutable=En,On["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},On["@@transducer/result"]=function(t){return t.asImmutable()};var An=function(t,e){this.ownerID=t,this.entries=e};An.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(he(n,i[o][0]))return i[o][1];return r},An.prototype.update=function(t,e,n,r,i,o,u){for(var a=i===ct,s=this.entries,c=0,f=s.length;c<f&&!he(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===i:a)return this;if(ft(u),(a||!h)&&ft(o),!a||1!==s.length){if(!h&&!a&&s.length>=Fn)return function(t,e,n,r){t||(t=new ht);for(var i=new qn(t,_e(n),[n,r]),o=0;o<e.length;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}(t,s,r,i);var l=t&&t===this.ownerID,p=l?s:Ge(s);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),l?(this.entries=p,this):new An(t,p)}};var Mn=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};Mn.prototype.get=function(t,e,n,r){void 0===e&&(e=_e(n));var i=1<<((0===t?e:e>>>t)&st),o=this.bitmap;return 0==(o&i)?r:this.nodes[$n(o&i-1)].get(t+5,e,n,r)},Mn.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=_e(r));var a=(0===e?n:n>>>e)&st,s=1<<a,c=this.bitmap,f=0!=(c&s);if(!f&&i===ct)return this;var h=$n(c&s-1),l=this.nodes,p=f?l[h]:void 0,d=Bn(p,t,e+5,n,r,i,o,u);if(d===p)return this;if(!f&&d&&l.length>=Hn)return function(t,e,n,r,i){for(var o=0,u=new Array(at),a=0;0!==n;a++,n>>>=1)u[a]=1&n?e[o++]:void 0;return u[r]=i,new Dn(t,o+1,u)}(t,l,c,a,d);if(f&&!d&&2===l.length&&Un(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&Un(d))return d;var _=t&&t===this.ownerID,v=f?d?c:c^s:c|s,y=f?d?Wn(l,h,d,_):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,u=0;u<r;u++)u===e&&(o=1),i[u]=t[u+o];return i}(l,h,_):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),u=0,a=0;a<i;a++)a===e?(o[a]=n,u=-1):o[a]=t[a+u];return o}(l,h,d,_);return _?(this.bitmap=v,this.nodes=y,this):new Mn(t,v,y)};var Dn=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};Dn.prototype.get=function(t,e,n,r){void 0===e&&(e=_e(n));var i=(0===t?e:e>>>t)&st,o=this.nodes[i];return o?o.get(t+5,e,n,r):r},Dn.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=_e(r));var a=(0===e?n:n>>>e)&st,s=i===ct,c=this.nodes,f=c[a];if(s&&!f)return this;var h=Bn(f,t,e+5,n,r,i,o,u);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<Jn)return function(t,e,n,r){for(var i=0,o=0,u=new Array(n),a=0,s=1,c=e.length;a<c;a++,s<<=1){var f=e[a];void 0!==f&&a!==r&&(i|=s,u[o++]=f)}return new Mn(t,i,u)}(t,c,l,a)}else l++;var p=t&&t===this.ownerID,d=Wn(c,a,h,p);return p?(this.count=l,this.nodes=d,this):new Dn(t,l,d)};var kn=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};kn.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(he(n,i[o][0]))return i[o][1];return r},kn.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=_e(r));var a=i===ct;if(n!==this.keyHash)return a?this:(ft(u),ft(o),Kn(this,t,e,n,[r,i]));for(var s=this.entries,c=0,f=s.length;c<f&&!he(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===i:a)return this;if(ft(u),(a||!h)&&ft(o),a&&2===f)return new qn(t,this.keyHash,s[1^c]);var l=t&&t===this.ownerID,p=l?s:Ge(s);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),l?(this.entries=p,this):new kn(t,this.keyHash,p)};var qn=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};qn.prototype.get=function(t,e,n,r){return he(n,this.entry[0])?this.entry[1]:r},qn.prototype.update=function(t,e,n,r,i,o,u){var a=i===ct,s=he(r,this.entry[0]);return(s?i===this.entry[1]:a)?this:(ft(u),a?void ft(o):s?t&&t===this.ownerID?(this.entry[1]=i,this):new qn(t,this.keyHash,[r,i]):(ft(o),Kn(this,t,e,_e(r),[r,i])))},An.prototype.iterate=kn.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Mn.prototype.iterate=Dn.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},qn.prototype.iterate=function(t,e){return t(this.entry)};var Pn,jn=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Rn(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return Nn(t,n.entry)}else if(n.entries){if(r<=(i=n.entries.length-1))return Nn(t,n.entries[this._reverse?i-r:r])}else if(r<=(i=n.nodes.length-1)){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Nn(t,o.entry);e=this._stack=Rn(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(Bt);function Nn(t,e){return Ut(t,e[0],e[1])}function Rn(t,e){return{node:t,index:0,__prev:e}}function Cn(t,e,n,r){var i=Object.create(On);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ln(){return Pn||(Pn=Cn(0))}function Tn(t,e,n){var r,i;if(t._root){var o={value:!1},u={value:!1};if(r=Bn(t._root,t.__ownerID,0,void 0,e,n,o,u),!u.value)return t;i=t.size+(o.value?n===ct?-1:1:0)}else{if(n===ct)return t;i=1,r=new An(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Cn(i,r):Ln()}function Bn(t,e,n,r,i,o,u,a){return t?t.update(e,n,r,i,o,u,a):o===ct?t:(ft(a),ft(u),new qn(e,r,[i,o]))}function Un(t){return t.constructor===qn||t.constructor===kn}function Kn(t,e,n,r,i){if(t.keyHash===r)return new kn(e,r,[t.entry,i]);var o,u=(0===n?t.keyHash:t.keyHash>>>n)&st,a=(0===n?r:r>>>n)&st,s=u===a?[Kn(t,e,n+5,r,i)]:(o=new qn(e,r,i),u<a?[t,o]:[o,t]);return new Mn(e,1<<u|1<<a,s)}function $n(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Wn(t,e,n,r){var i=r?t:Ge(t);return i[e]=n,i}var Fn=8,Hn=16,Jn=8,Zn="@@__IMMUTABLE_LIST__@@";function Vn(t){return Boolean(t&&t[Zn])}var Yn=function(t){function e(e){var n=rr();if(null==e)return n;if(Vn(e))return e;var r=t(e),i=r.size;return 0===i?n:(tn(i),i>0&&i<at?nr(0,i,5,null,new Gn(r.toArray())):n.withMutations((function(t){t.setSize(i),r.forEach((function(e,n){return t.set(n,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=pt(this,t))>=0&&t<this.size){var n=ur(this,t+=this._origin);return n&&n.array[t&st]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=pt(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ar(t,e).set(0,n):ar(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,i=t._root,o={value:!1};e>=sr(t._capacity)?r=ir(r,t.__ownerID,0,e,n,o):i=ir(i,t.__ownerID,t._level,e,n,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t;return nr(t._origin,t._capacity,t._level,i,r)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):rr()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){ar(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},e.prototype.pop=function(){return ar(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ar(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},e.prototype.shift=function(){return ar(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!=typeof i&&$t(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(t){n.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(n[0])},e.prototype.setSize=function(t){return ar(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations((function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,n))}))},e.prototype.slice=function(t,e){var n=this.size;return _t(t,e,n)?this:ar(this,vt(t,n),yt(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=er(this,e);return new Bt((function(){var i=r();return i===tr?{value:void 0,done:!0}:Ut(t,e?--n:n++,i)}))},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=er(this,e);(n=i())!==tr&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?nr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?rr():(this.__ownerID=t,this.__altered=!1,this)},e}(Mt);Yn.isList=Vn;var Xn=Yn.prototype;Xn[Zn]=!0,Xn.delete=Xn.remove,Xn.merge=Xn.concat,Xn.setIn=hn,Xn.deleteIn=Xn.removeIn=pn,Xn.update=_n,Xn.updateIn=vn,Xn.mergeIn=wn,Xn.mergeDeepIn=bn,Xn.withMutations=xn,Xn.wasAltered=Sn,Xn.asImmutable=zn,Xn["@@transducer/init"]=Xn.asMutable=En,Xn["@@transducer/step"]=function(t,e){return t.push(e)},Xn["@@transducer/result"]=function(t){return t.asImmutable()};var Gn=function(t,e){this.array=t,this.ownerID=e};Gn.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&st;if(r>=this.array.length)return new Gn([],t);var i,o=0===r;if(e>0){var u=this.array[r];if((i=u&&u.removeBefore(t,e-5,n))===u&&o)return this}if(o&&!i)return this;var a=or(this,t);if(!o)for(var s=0;s<r;s++)a.array[s]=void 0;return i&&(a.array[r]=i),a},Gn.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&st;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-5,n))===o&&i===this.array.length-1)return this}var u=or(this,t);return u.array.splice(i+1),r&&(u.array[i]=r),u};var Qn,tr={};function er(t,e){var n=t._origin,r=t._capacity,i=sr(r),o=t._tail;return u(t._root,t._level,0);function u(t,a,s){return 0===a?function(t,u){var a=u===i?o&&o.array:t&&t.array,s=u>n?0:n-u,c=r-u;c>at&&(c=at);return function(){if(s===c)return tr;var t=e?--c:s++;return a&&a[t]}}(t,s):function(t,i,o){var a,s=t&&t.array,c=o>n?0:n-o>>i,f=1+(r-o>>i);f>at&&(f=at);return function(){for(;;){if(a){var t=a();if(t!==tr)return t;a=null}if(c===f)return tr;var n=e?--f:c++;a=u(s&&s[n],i-5,o+(n<<i))}}}(t,a,s)}}function nr(t,e,n,r,i,o,u){var a=Object.create(Xn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=u,a.__altered=!1,a}function rr(){return Qn||(Qn=nr(0,0,5))}function ir(t,e,n,r,i,o){var u,a=r>>>n&st,s=t&&a<t.array.length;if(!s&&void 0===i)return t;if(n>0){var c=t&&t.array[a],f=ir(c,e,n-5,r,i,o);return f===c?t:((u=or(t,e)).array[a]=f,u)}return s&&t.array[a]===i?t:(o&&ft(o),u=or(t,e),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function or(t,e){return e&&t&&e===t.ownerID?t:new Gn(t?t.array.slice():[],e)}function ur(t,e){if(e>=sr(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&st],r-=5;return n}}function ar(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new ht,i=t._origin,o=t._capacity,u=i+e,a=void 0===n?o:n<0?o+n:i+n;if(u===i&&a===o)return t;if(u>=a)return t.clear();for(var s=t._level,c=t._root,f=0;u+f<0;)c=new Gn(c&&c.array.length?[void 0,c]:[],r),f+=1<<(s+=5);f&&(u+=f,i+=f,a+=f,o+=f);for(var h=sr(o),l=sr(a);l>=1<<s+5;)c=new Gn(c&&c.array.length?[c]:[],r),s+=5;var p=t._tail,d=l<h?ur(t,a-1):l>h?new Gn([],r):p;if(p&&l>h&&u<o&&p.array.length){for(var _=c=or(c,r),v=s;v>5;v-=5){var y=h>>>v&st;_=_.array[y]=or(_.array[y],r)}_.array[h>>>5&st]=p}if(a<o&&(d=d&&d.removeAfter(r,0,a)),u>=l)u-=l,a-=l,s=5,c=null,d=d&&d.removeBefore(r,0,u);else if(u>i||l<h){for(f=0;c;){var m=u>>>s&st;if(m!==l>>>s&st)break;m&&(f+=(1<<s)*m),s-=5,c=c.array[m]}c&&u>i&&(c=c.removeBefore(r,s,u-f)),c&&l<h&&(c=c.removeAfter(r,s,l-f)),f&&(u-=f,a-=f)}return t.__ownerID?(t.size=a-u,t._origin=u,t._capacity=a,t._level=s,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):nr(u,a,s,c,d)}function sr(t){return t<at?0:t-1>>>5<<5}var cr,fr=function(t){function e(t){return null==t?lr():ce(t)?t:lr().withMutations((function(e){var n=At(t);tn(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):lr()},e.prototype.set=function(t,e){return pr(this,t,e)},e.prototype.remove=function(t){return pr(this,t,ct)},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?hr(e,n,t,this.__hash):0===this.size?lr():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=n,this)},e}(In);function hr(t,e,n,r){var i=Object.create(fr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function lr(){return cr||(cr=hr(Ln(),rr()))}function pr(t,e,n){var r,i,o=t._map,u=t._list,a=o.get(e),s=void 0!==a;if(n===ct){if(!s)return t;u.size>=at&&u.size>=2*o.size?(r=(i=u.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===u.size-1?u.pop():u.set(a,void 0))}else if(s){if(n===u.get(a)[1])return t;r=o,i=u.set(a,[e,n])}else r=o.set(e,u.size),i=u.set(u.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t.__altered=!0,t):hr(r,i)}fr.isOrderedMap=ce,fr.prototype[Nt]=!0,fr.prototype.delete=fr.prototype.remove;var dr="@@__IMMUTABLE_STACK__@@";function _r(t){return Boolean(t&&t[dr])}var vr=function(t){function e(t){return null==t?wr():_r(t)?t:wr().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=pt(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):gr(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&_r(e))return e;tn(e.size);var n=this.size,r=this._head;return e.__iterate((function(t){n++,r={value:t,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):gr(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):wr()},e.prototype.slice=function(e,n){if(_t(e,n,this.size))return this;var r=vt(e,this.size);if(yt(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):gr(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?gr(this.size,this._head,t,this.__hash):0===this.size?wr():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new Qt(this.toArray()).__iterate((function(e,r){return t(e,r,n)}),e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new Qt(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new Bt((function(){if(r){var e=r.value;return r=r.next,Ut(t,n++,e)}return{value:void 0,done:!0}}))},e}(Mt);vr.isStack=_r;var yr,mr=vr.prototype;function gr(t,e,n,r){var i=Object.create(mr);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function wr(){return yr||(yr=gr(0))}mr[dr]=!0,mr.shift=mr.pop,mr.unshift=mr.push,mr.unshiftAll=mr.pushAll,mr.withMutations=xn,mr.wasAltered=Sn,mr.asImmutable=zn,mr["@@transducer/init"]=mr.asMutable=En,mr["@@transducer/step"]=function(t,e){return t.unshift(e)},mr["@@transducer/result"]=function(t){return t.asImmutable()};var br="@@__IMMUTABLE_SET__@@";function xr(t){return Boolean(t&&t[br])}function Er(t){return xr(t)&&Rt(t)}function zr(t,e){if(t===e)return!0;if(!bt(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||Et(t)!==Et(e)||St(t)!==St(e)||Rt(t)!==Rt(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!It(t);if(Rt(t)){var r=t.entries();return e.every((function(t,e){var i=r.next().value;return i&&he(i[1],t)&&(n||he(i[0],e))}))&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,a=e.__iterate((function(e,r){if(n?!t.has(e):i?!he(e,t.get(r,ct)):!he(t.get(r,ct),e))return u=!1,!1}));return u&&t.size===a}function Sr(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Ir(t){if(!t||"object"!=typeof t)return t;if(!bt(t)){if(!on(t))return t;t=Vt(t)}if(Et(t)){var e={};return t.__iterate((function(t,n){e[n]=Ir(t)})),e}var n=[];return t.__iterate((function(t){n.push(Ir(t))})),n}var Or=function(t){function e(e){return null==e?qr():xr(e)&&!Rt(e)?e:qr().withMutations((function(n){var r=t(e);tn(r.size),r.forEach((function(t){return n.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(At(t).keySeq())},e.intersect=function(t){return(t=Ot(t).toArray()).length?Mr.intersect.apply(e(t.pop()),t):qr()},e.union=function(t){return(t=Ot(t).toArray()).length?Mr.union.apply(e(t.pop()),t):qr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Dr(this,this._map.set(t,t))},e.prototype.remove=function(t){return Dr(this,this._map.remove(t))},e.prototype.clear=function(){return Dr(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=!1,i=Dr(this,this._map.mapEntries((function(i){var o=i[1],u=t.call(e,o,o,n);return u!==o&&(r=!0),[u,u]}),e));return r?i:this},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach((function(t){return n.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Vr(Ke(this,t))},e.prototype.sortBy=function(t,e){return Vr(Ke(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(Dt);Or.isSet=xr;var Ar,Mr=Or.prototype;function Dr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function kr(t,e){var n=Object.create(Mr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function qr(){return Ar||(Ar=kr(Ln()))}Mr[br]=!0,Mr.delete=Mr.remove,Mr.merge=Mr.concat=Mr.union,Mr.withMutations=xn,Mr.asImmutable=zn,Mr["@@transducer/init"]=Mr.asMutable=En,Mr["@@transducer/step"]=function(t,e){return t.add(e)},Mr["@@transducer/result"]=function(t){return t.asImmutable()},Mr.__empty=qr,Mr.__make=kr;var Pr,jr=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Qe(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Pr)return Pr;Pr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+pt(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return _t(t,n,this.size)?this:(t=vt(t,this.size),(n=yt(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new Bt((function(){if(o===n)return{value:void 0,done:!0};var u=i;return i+=e?-r:r,Ut(t,e?n-++o:o++,u)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:zr(this,t)},e}(Xt);function Nr(t,e,n){for(var r=en(e),i=0;i!==r.length;)if((t=an(t,r[i++],ct))===ct)return n;return t}function Rr(){tn(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t}Ot.isIterable=bt,Ot.isKeyed=Et,Ot.isIndexed=St,Ot.isAssociative=It,Ot.isOrdered=Rt,Ot.Iterator=Bt,Sr(Ot,{toArray:function(){tn(this.size);var t=new Array(this.size||0),e=Et(this),n=0;return this.__iterate((function(r,i){t[n++]=e?[i,r]:r})),t},toIndexedSeq:function(){return new ke(this)},toJS:function(){return Ir(this)},toKeyedSeq:function(){return new De(this,!0)},toMap:function(){return In(this.toKeyedSeq())},toObject:Rr,toOrderedMap:function(){return fr(this.toKeyedSeq())},toOrderedSet:function(){return Vr(Et(this)?this.valueSeq():this)},toSet:function(){return Or(Et(this)?this.valueSeq():this)},toSetSeq:function(){return new qe(this)},toSeq:function(){return St(this)?this.toIndexedSeq():Et(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return vr(Et(this)?this.valueSeq():this)},toList:function(){return Yn(Et(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return He(this,Be(this,t))},includes:function(t){return this.some((function(e){return he(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){tn(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1})),n},filter:function(t,e){return He(this,Ce(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return tn(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){tn(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return He(this,Ne(this,t,e))},reduce:function(t,e,n){return Ur(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Ur(this,t,e,n,arguments.length<2,!0)},reverse:function(){return He(this,Re(this,!0))},slice:function(t,e){return He(this,Le(this,t,e,!0))},some:function(t,e){return!this.every(Wr(t),e)},sort:function(t){return He(this,Ke(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return lt(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=In().asMutable();return t.__iterate((function(i,o){r.update(e.call(n,i,o,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return zr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Qt(t._cache);var e=t.toSeq().map($r).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Wr(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(dt,null,t)},flatMap:function(t,e){return He(this,function(t,e,n){var r=Ze(t);return t.toSeq().map((function(i,o){return r(e.call(n,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return He(this,Ue(this,t,!0))},fromEntrySeq:function(){return new Pe(this)},get:function(t,e){return this.find((function(e,n){return he(n,t)}),void 0,e)},getIn:function(t,e){return Nr(this,t,e)},groupBy:function(t,e){return function(t,e,n){var r=Et(t),i=(Rt(t)?fr():In()).asMutable();t.__iterate((function(o,u){i.update(e.call(n,o,u,t),(function(t){return(t=t||[]).push(r?[u,o]:o),t}))}));var o=Ze(t);return i.map((function(e){return He(t,o(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,ct)!==ct},hasIn:function(t){return Nr(this,t,ct)!==ct},isSubset:function(t){return t="function"==typeof t.includes?t:Ot(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:Ot(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return he(e,t)}))},keySeq:function(){return this.toSeq().map(Kr).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return $e(this,t)},maxBy:function(t,e){return $e(this,e,t)},min:function(t){return $e(this,t?Fr(t):Jr)},minBy:function(t,e){return $e(this,e?Fr(e):Jr,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return He(this,Te(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Wr(t),e)},sortBy:function(t,e){return He(this,Ke(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return He(this,function(t,e,n){var r=Ve(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var u=0;return t.__iterate((function(t,i,a){return e.call(n,t,i,a)&&++u&&r(t,i,o)})),u},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var u=t.__iterator(2,i),a=!0;return new Bt((function(){if(!a)return{value:void 0,done:!0};var t=u.next();if(t.done)return t;var i=t.value,s=i[0],c=i[1];return e.call(n,c,s,o)?2===r?t:Ut(r,s,c,t):(a=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Wr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=Rt(t),n=Et(t),r=e?1:0;return function(t,e){return e=le(e,3432918353),e=le(e<<15|e>>>-15,461845907),e=le(e<<13|e>>>-13,5),e=le((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=pe((e=le(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Zr(_e(t),_e(e))|0}:function(t,e){r=r+Zr(_e(t),_e(e))|0}:e?function(t){r=31*r+_e(t)|0}:function(t){r=r+_e(t)|0}),r)}(this))}});var Cr=Ot.prototype;Cr[wt]=!0,Cr[Tt]=Cr.values,Cr.toJSON=Cr.toArray,Cr.__toStringMapper=un,Cr.inspect=Cr.toSource=function(){return this.toString()},Cr.chain=Cr.flatMap,Cr.contains=Cr.includes,Sr(At,{flip:function(){return He(this,je(this))},mapEntries:function(t,e){var n=this,r=0;return He(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return He(this,this.toSeq().flip().map((function(r,i){return t.call(e,r,i,n)})).flip())}});var Lr=At.prototype;Lr[xt]=!0,Lr[Tt]=Cr.entries,Lr.toJSON=Rr,Lr.__toStringMapper=function(t,e){return un(e)+": "+un(t)},Sr(Mt,{toKeyedSeq:function(){return new De(this,!1)},filter:function(t,e){return He(this,Ce(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return He(this,Re(this,!1))},slice:function(t,e){return He(this,Le(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=vt(t,t<0?this.count():this.size);var r=this.slice(0,t);return He(this,1===n?r:r.concat(Ge(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return He(this,Ue(this,t,!1))},get:function(t,e){return(t=pt(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=pt(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return He(this,function(t,e){var n=Ve(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate((function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(1,r),u=0;return new Bt((function(){return(!i||u%2)&&(i=o.next()).done?i:u%2?Ut(n,u++,e):Ut(n,u++,i.value,i)}))},n}(this,t))},interleave:function(){var t=[this].concat(Ge(arguments)),e=Fe(this.toSeq(),Xt.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),He(this,n)},keySeq:function(){return jr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return He(this,Te(this,t,e,!1))},zip:function(){var t=[this].concat(Ge(arguments));return He(this,Fe(this,Hr,t))},zipAll:function(){var t=[this].concat(Ge(arguments));return He(this,Fe(this,Hr,t,!0))},zipWith:function(t){var e=Ge(arguments);return e[0]=this,He(this,Fe(this,t,e))}});var Tr=Mt.prototype;Tr[zt]=!0,Tr[Nt]=!0,Sr(Dt,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Br=Dt.prototype;function Ur(t,e,n,r,i,o){return tn(t.size),t.__iterate((function(t,o,u){i?(i=!1,n=t):n=e.call(r,n,t,o,u)}),o),n}function Kr(t,e){return e}function $r(t,e){return[e,t]}function Wr(t){return function(){return!t.apply(this,arguments)}}function Fr(t){return function(){return-t.apply(this,arguments)}}function Hr(){return Ge(arguments)}function Jr(t,e){return t<e?1:t>e?-1:0}function Zr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Br.has=Cr.includes,Br.contains=Br.includes,Br.keys=Br.values,Sr(Yt,Lr),Sr(Xt,Tr),Sr(Gt,Br);var Vr=function(t){function e(t){return null==t?Qr():Er(t)?t:Qr().withMutations((function(e){var n=Dt(t);tn(n.size),n.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(At(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Or);Vr.isOrderedSet=Er;var Yr,Xr=Vr.prototype;function Gr(t,e){var n=Object.create(Xr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Qr(){return Yr||(Yr=Gr(lr()))}function ti(t,e){return ei([],e||ni,t,"",e&&e.length>2?[]:void 0,{"":t})}function ei(t,e,n,r,i,o){if("string"!=typeof n&&!jt(n)&&(Zt(n)||$t(n)||rn(n))){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==r&&i.push(r);var u=e.call(o,r,Vt(n).map((function(r,o){return ei(t,e,r,o,i,n)})),i&&i.slice());return t.pop(),i&&i.pop(),u}return n}function ni(t,e){return St(e)?e.toList():Et(e)?e.toMap():e.toSet()}Xr[Nt]=!0,Xr.zip=Tr.zip,Xr.zipWith=Tr.zipWith,Xr.zipAll=Tr.zipAll,Xr.__empty=Qr,Xr.__make=Gr;const ri=new Image;function ii(t){return"html-element"===t.type?`html-element:${t.name}`:"react-component"===t.type?`react_component:${t.packageName}:${t.packageVersion}:${t.exportName}`:""}function oi(t){const[e,n]=o(t.value);return i((()=>{const e=t.subscribe(n);return()=>{e.unsubscribe()}}),[t]),e}function ui({rootNode:t,node:e,greenZone:n}){return"fallback-contour-green-zone"===n.type?D(t,t.getIn(["id"]),e):"node_without_children"!==n.type||"inner"!==n.position&&"inner-left"!==n.position&&"inner-right"!==n.position?"node_without_children"===n.type&&"left"===n.position?k(t,n.contour.id,e):"node_without_children"===n.type&&"right"===n.position?q(t,n.contour.id,e):"adjacent-with-parent"===n.type&&"left"===n.edge?k(t,n.child.id,e):"adjacent-with-parent"===n.type&&"right"===n.edge?q(t,n.child.id,e):"between-nodes"===n.type?n.left.absolutePosition.height<n.right.absolutePosition.height?q(t,n.left.id,e):n.left.absolutePosition.height>n.right.absolutePosition.height?k(t,n.right.id,e):q(t,n.left.id,e):void 0:D(t,n.contour.id,e)}function ai(t){return t.id=B(t.type),t}function si(t){return P(t,{htmlNode:t=>ai(t),reactComponentNode:t=>ai(t),loopContainerNode:t=>ai(t),composedNode:t=>ai(t),refNode:t=>ai(t),jsxNode:t=>ai(t),routeNode:t=>ai(t)})}function ci(t){const e=t.getData(U);if(e)return{type:"move_node_request",nodeID:e};const n=function(t){try{return JSON.parse(t)}catch(t){return}}(t.getData(K));return n?{type:"insert_node_request",node:si(n)}:void 0}function fi(){return e.createElement("div",null,"")}ri.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var hi=function(){return e.createElement("div",{className:"placeholder-for-container-node-children"},e.createElement(fi))};const li=new Map;function pi(t){return li.get(ii(t))}function di(t){return!!window.__OVER_LAYER_COMPONENTS.find((({packageName:e,exportName:n})=>n===t.exportName))}new l(Or());const _i=new l(void 0),vi=new p,yi=new l(void 0),mi=new l(""),gi=new p,wi=new l(""),bi=new l(!1),xi=new l(void 0),Ei=new l(void 0),zi=new p,Si={node:{id:$,type:"html-element",name:"div"}},Ii=new l(ti({id:"initial",type:"html",nam:"div"})),Oi=new l(Si),Ai=new l(void 0),Mi=new l(void 0),Di=new l(void 0),ki=new l(void 0),qi=new l(void 0),Pi=Ii.pipe(d((t=>t.getIn(["id"]))),_()),ji=zi.pipe(v((()=>!!xi.value)),d((t=>ci(t.dataTransfer))),v((t=>!!t)),d((t=>{if(xi.value)return"move_node_request"===t.type?function({rootNode:t,nodeID:e,greenZone:n}){let r=t;const i=M(t,e);if(!i)return;const o=t.getIn(i);return o?(r=ln(t,i),ui({rootNode:r,node:o,greenZone:n})):void 0}({rootNode:Ii.value,nodeID:t.nodeID,greenZone:xi.value}):"insert_node_request"===t.type?ui({rootNode:Ii.value,node:t.node,greenZone:xi.value}):void 0})),d((t=>t?t.toJS():void 0)),v((t=>!!t)));function Ni(){const[t,e]=o("");return i((()=>{const t=Pi.subscribe(e);return()=>{t.unsubscribe()}}),[]),t}Oi.pipe(d((t=>ti(t.node)))).subscribe(Ii),mi.pipe(d((t=>{if(t)return M(Ii.value,t)}))).subscribe(yi),Di.pipe(d((t=>{if(!t)return;const e=M(Ii.value,t);if(!e)return;return Ii.value.getIn(e).toJS()})),d((t=>{if(t)return{node:t,apiStateSpec:Oi.value.apiStateSpec,sharedStatesSpec:Oi.value.sharedStatesSpec}}))).subscribe(qi),y({activeNode:Ai,contourNodesReport:_i,modalLayerContourNodesReport:Ei,activeOverLayerNodeID:Di}).pipe(d((({activeNode:t,contourNodesReport:e,modalLayerContourNodesReport:n,activeOverLayerNodeID:r})=>r?null==n?void 0:n.find((({id:e})=>e===(null==t?void 0:t.id))):null==e?void 0:e.find((({id:e})=>e===(null==t?void 0:t.id))))),_(((t,e)=>(null==t?void 0:t.id)===(null==e?void 0:e.id)))).subscribe(Mi),Mi.pipe(v((t=>!!t)),d((({absolutePosition:t,relativeRect:e})=>{const{x:n,y:r,height:i}=t;return(null==e?void 0:e.y)<40?{transform:`translate(${n+4}px, ${r+i}px)`}:{transform:`translate(${n+4}px, ${r}px)`}}))).subscribe(ki);const Ri=new W(window.parent,"iframe-side");function Ci(t){Ri.send(H,t)}function Li(t){Ri.send(F,t)}function Ti(t){const e=pi(t);return void 0!==e?Promise.resolve(e):function(t){return Ri.request(Z,t)}(t).then((e=>(function(t,e){const n=ii(t);li.set(n,e)}(t,e),e)))}function Bi(t){const[e,n]=o(!0);return i((()=>{let e=!1;return Ti(function(t){return"html-element"===t.type?{type:"html-element",name:t.name}:{type:"react-component",packageName:t.packageName,packageVersion:t.packageVersion,exportName:t.exportName}}(t)).then((()=>{e||n(!1)})).catch(m),()=>{e=!0}}),[]),e}Ri.waitForReady().then((()=>{})).catch(m),Ri.listen(F).subscribe(Oi),Ri.listen(H).pipe(_(((t,e)=>(null==t?void 0:t.id)===(null==e?void 0:e.id)))).subscribe(Ai),Ri.listen(J).subscribe(Di),ji.subscribe((t=>{Li({...Oi.value,node:t})}));var Ui=function({node:t,ctx:r}){const u=n(it)+1,a=function(t,e,r){const u=s(t,e),[a,c]=o(),f=n(et);return i((()=>(a&&ot(a,f),()=>{a&&ut(a,f)})),[a]),{...u,ref:t=>t&&c(t),"data-simulator-node-id":t.id,"data-simulator-node-depth":r,"data-simulator-node-executor":ii(t)}}(t,r,u);return Bi(t)?null:t.name?t.children&&t.children.length?e.createElement(it.Provider,{value:u},e.createElement(t.name,a,e.createElement(rt,{nodes:t.children||[],ctx:r}))):e.createElement(t.name,a,pi(t)?e.createElement(hi,{parent:t}):void 0):(A.error("name property is required in html node spec,",`please check the spec of node: ${t.id}.`),null)};const Ki={childList:!0};function $i(t){const[e,n]=o((()=>(null==t?void 0:t.firstElementChild)?null==t?void 0:t.firstElementChild:null));return i((()=>{if(!t)return;t.firstElementChild&&n(t.firstElementChild);const e=new MutationObserver(function(t){return e=>{for(const{type:n,target:r}of e){if("childList"!==n)return;if(r.nodeType!==Node.ELEMENT_NODE)return;const e=r.firstElementChild;if(!e)return;t(e)}}}(n));return e.observe(t,Ki),()=>{e.disconnect()}}),[t]),e}var Wi=function(t,e,u){const a=s(t,e),c=function(t,e){const[u,a]=o(),s=$i(u),c=r(),f=n(et);return i((()=>{if(c.current&&ut(c.current,f),s)return s.dataset.simulatorNodeId=t.id,s.dataset.simulatorNodeExecutor=ii(t),s.dataset.simulatorNodeDepth=`${e}`,ot(s,f),c.current=s,()=>{s&&ut(s,f)}}),[s]),a}(t,u);return{nodeProps:a,wrapperProps:{style:{display:"contents"},ref:c}}};class Fi extends e.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(t){super(t),this.state={hasError:!1}}componentDidCatch(t,e){A.error("failed to render component:",t)}render(){return this.state.hasError?null:this.props.children}}var Hi=function({node:t,ctx:r}){const i=n(it)+1,{nodeProps:o,wrapperProps:u}=Wi(t,r,i),a=c(t,r.plugins),s=1===i;return Bi(t)||!a||!s&&di(t)?null:(s&&di(t)&&(o.isOpen=!0,o.container="inside"),t.children&&t.children.length?e.createElement(it.Provider,{value:i},e.createElement(Fi,{},e.createElement("div",u,e.createElement(a,o,e.createElement(rt,{nodes:t.children||[],ctx:r}))))):e.createElement(Fi,{},e.createElement("div",u,e.createElement(a,o,pi(t)?e.createElement(hi,{parent:t}):void 0))))};function Ji({node:t,ctx:n}){var r;const i=t.nodes||t.children;if("html-element"===(null==(r=t.outLayer)?void 0:r.type)){const r={...t.outLayer,children:t.nodes||t.children};e.createElement(Ui,{node:r,ctx:n})}return e.createElement(rt,{nodes:i,ctx:n})}var Zi=function({node:t,ctx:n}){return e.createElement(Vi,{node:t.node,ctx:n})};var Vi=function({node:t,ctx:r}){const i=n(it);return"route-node"===t.type||"jsx-node"===t.type||"ref-node"===t.type?(A.debug("simulator skip render unsupported node:",t),null):"html-element"===t.type?e.createElement(it.Provider,{value:i},e.createElement(Ui,{node:t,ctx:r})):"react-component"===t.type?e.createElement(it.Provider,{value:i},e.createElement(Hi,{node:t,ctx:r})):"composed-node"===t.type?e.createElement(Ji,{node:t,ctx:r}):"loop-container"===t.type?e.createElement(Zi,{node:t,ctx:r}):null};const Yi=new l(new Set);function Xi({artery:t}){const{ctx:n,rootNode:r}=f(t,h)||{};return nt(u((t=>Ei.next(t)),[])),n&&r?e.createElement("div",{className:"simulator-background-layer"},e.createElement(Vi,{node:r,ctx:n})):null}var Gi=function(){const t=oi(qi);return t?e.createElement(et.Provider,{value:Yi},e.createElement(Xi,{artery:t})):null};const Qi=new l(new Set);function to({rootElement:t}){const n=oi(Oi),{ctx:r,rootNode:i}=f(n,h)||{};return nt(u((t=>_i.next(t)),[]),t),r&&i?e.createElement(Vi,{node:i,ctx:r}):null}function eo(){const[t,n]=o();return e.createElement(et.Provider,{value:Qi},e.createElement("div",{className:"simulator-background-layer",ref:t=>{t&&n(t)}},t&&e.createElement(to,{rootElement:t})))}var no=function(){return e.createElement(e.Fragment,null,e.createElement(eo,null),e.createElement(Gi,null))};function ro(t){return t.preventDefault(),t.stopPropagation(),!1}var io=function({contourNode:t}){const n=oi(wi),s=Ni(),c=function({depth:t,absolutePosition:e}){const{height:n,width:r,x:i,y:o}=e;return a((()=>({zIndex:t,height:n,width:r,transform:`translate(${i}px, ${o}px)`})),[n,r,i,o,t])}(t),f=function(t){const e=r(),n=oi(mi),i=oi(yi);return u((r=>!!r.dataTransfer.types.includes("artery_node")||!(!n||!i)&&n!==t&&(void 0===e.current&&(e.current=!!M(i,t)),!e.current)),[n,i])}(t.id),h=function(t){const[e,n]=o(!1);return i((()=>{const e=Mi.pipe(d((e=>(null==e?void 0:e.id)===t)),_()).subscribe(n);return()=>{e.unsubscribe()}}),[]),e}(t.id),[l,p]=o(!1);return e.createElement(e.Fragment,null,e.createElement("div",{id:`contour-${t.id}`,style:c,onClick:()=>{const e=M(Ii.value,t.id);if(!e)return;const n=Ii.value.getIn(e);n&&Ci(n.toJS())},draggable:t.id!==s,onDragStart:e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData(U,t.id),mi.next(t.id),p(!0),e.dataTransfer.setDragImage(ri,0,0)},onDragEnd:()=>{mi.next(""),p(!1),bi.next(!1)},onDragOver:t=>{f(t)&&(bi.next(!0),ro(t),vi.next({x:t.clientX,y:t.clientY}))},onDrag:t=>{ro(t),bi.next(!0)},onDragEnter:e=>{if(f(e))return gi.next(t),ro(e),!1},onDragLeave:()=>{bi.next(!1)},onDrop:t=>(ro(t),zi.next(t),bi.next(!1),!1),className:V("contour-node",{"contour-node--root":s===t.id,"contour-node--active":h,"contour-node--hover-as-parent":n===t.id,"contour-node--dragging":l})}))};var oo=function({currentNodeID:t,onParentClick:n}){const r=oi(Oi),[u,a]=o([]);return i((()=>{const e=j(Ii.value,t);if(!e)return;const n=e.map((t=>{const e=N(Ii.value,t);if(e)return Ii.value.getIn(e)})).filter((t=>{if(!t)return!1;const e=t.getIn(["type"]);return"html-element"===e||"react-component"===e})).toJS();a((null==n?void 0:n.reverse().slice(0,5))||[])}),[r]),u.length?e.createElement("div",{className:"active-node-parents"},u.map((t=>{const{id:r,label:i}=t;return e.createElement("span",{key:r,className:"active-node-parents__parent",onMouseEnter:()=>{wi.next(r)},onMouseLeave:()=>{wi.next("")},onClick:e=>{e.stopPropagation(),wi.next(""),Ci(t),n()}},i||r)}))):null};const uo=[{name:"offset",options:{offset:[0,4]}}];var ao=function(){const t=oi(Ai),n=oi(Mi),{referenceRef:i,Popper:o,handleMouseEnter:u,handleMouseLeave:s,close:c}=Q(),f=r(null),h=oi(ki),l=a((()=>p?p.label?null==p?void 0:p.label:"exportName"in p?p.exportName.toUpperCase():"name"in p?p.name.toUpperCase():p.id:"untitled"),[p=t]);var p;const d=Ni();return n&&n.id!==d?e.createElement("div",{ref:f,className:"active-contour-node-toolbar",style:h},e.createElement("span",{ref:i,className:"active-contour-node-toolbar__parents",onMouseEnter:u(),onMouseLeave:s()},l),e.createElement("span",{onClick:function(){if(!t)return;const e=si(t),n=C(Oi.value.node,t.id,e);n&&Li({...Oi.value,node:n})},className:"active-contour-node-toolbar__action",title:""},e.createElement(tt,{name:"content_copy",size:16})),e.createElement("span",{onClick:function(){if(!Mi.value)return;const t=R(Oi.value.node,Mi.value.id);Li({...Oi.value,node:t}),Ci(void 0)},className:"active-contour-node-toolbar__action",title:""},e.createElement(tt,{name:"delete_forever",size:16})),e.createElement(o,{placement:"bottom-start",modifiers:uo,container:f.current},e.createElement(oo,{currentNodeID:n.id,onParentClick:c}))):null};function so(t){return t.preventDefault(),t.stopPropagation(),!1}const co={height:"100vh",width:"100vw",position:"fixed"};var fo=function(){const[t,n]=o(!1);return i((()=>{t&&xi.next({type:"fallback-contour-green-zone"})}),[t]),e.createElement(e.Fragment,null,e.createElement("div",{id:Y,style:co,className:V("contour-node",{"green-zone-between-nodes--focused":t,"green-zone-between-nodes":t}),onDragOver:t=>{so(t),bi.next(!0),so(t),vi.next({x:t.clientX,y:t.clientY})},onDragEnter:t=>(so(t),n(!0),gi.next(X),so(t),!1),onDragLeave:()=>{n(!1),bi.next(!1)},onDrop:t=>(so(t),zi.next(t),bi.next(!1),n(!1),!1)}))};G(".contour-nodes {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n}\n\n.contour-node {\n  position: absolute;\n  top: 0;\n  border-width: 1px;\n  border-color: transparent;\n}\n.contour-node:hover:not(.contour-node--root, .contour-node--active) {\n  outline: 1px dashed #0084ff;\n}\n\n.contour-node--active {\n  box-shadow: inset 0 0 0 2px #0084ff;\n}\n\n.contour-node--hover-as-parent {\n  border-color: #f85900;\n  border-style: dashed;\n}\n\n.contour-node--dragging {\n  opacity: 0.7;\n  background-color: white;\n}\n\n.active-contour-node-toolbar {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: -30px;\n  z-index: 1;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__parents,\n.active-contour-node-toolbar .active-contour-node-toolbar__action {\n  padding: 4px;\n  margin-right: 4px;\n  color: white;\n  font-size: 12px;\n  border-radius: 1px;\n  background-color: #0084ff;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__parents {\n  display: inline-block;\n  max-width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__action {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  fill: white;\n}\n\n.active-node-parents {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n}\n.active-node-parents .active-node-parents__parent {\n  max-width: 200px;\n  padding: 4px;\n  margin-bottom: 4px;\n  color: white;\n  background-color: #0084ff;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.active-node-parents .active-node-parents__parent:hover {\n  background-color: #f85900;\n}",{});var ho=function(){const t=function(){const t=oi(_i)||[],e=oi(Ei)||[];return oi(Di)?e||[]:t||[]}(),n=oi(Di);return e.createElement(e.Fragment,null,e.createElement("div",{className:"contour-nodes"},t.map((t=>e.createElement(io,{key:`contour-${t.id}`,contourNode:t})))),!n&&e.createElement(fo,null),e.createElement(ao,null))};function lo(t,e){const n=[t.x,t.x+t.width],r=[e.x,e.x+e.width],i=[t.y,t.y+t.height],o=[e.y,e.y+e.height],u=Math.max(n[0],r[0]),a=Math.min(n[1],r[1]),s=Math.max(i[0],o[0]),c=Math.min(i[1],o[1]);return u<a&&s<c}function po(t,e,n){const r=function(t,e,n){const r=M(t,e);if(!r)return[];const i=t.getIn(r);if(!i)return[];const o=L(i).map((t=>t.getIn(["id"])));return n.filter((({id:t})=>o.includes(t)))}(t,e.id,n),i=r.map((t=>{const e=function(t,e){return e.filter((e=>!(e.id===t.id||t.raw.x+t.raw.width+2>e.raw.x||t.raw.y>e.raw.y+e.raw.height||t.raw.y+t.raw.height<e.raw.y)))}(t,r);return function(t,e){return e.map((e=>{const n={x:t.absolutePosition.x+t.absolutePosition.width,y:Math.min(t.absolutePosition.y,e.absolutePosition.y),width:e.absolutePosition.x-(t.absolutePosition.x+t.absolutePosition.width),height:Math.min(Math.abs(t.absolutePosition.y-(e.absolutePosition.y+e.absolutePosition.height)),Math.abs(t.absolutePosition.y+t.absolutePosition.height-e.absolutePosition.y))},r={x:t.raw.x+t.absolutePosition.width,y:Math.min(t.raw.y,e.raw.y),width:n.width,height:n.height};return{left:t,right:e,absolutePosition:n,type:"between-nodes",raw:r}}))}(t,e)})).reduce(((t,e)=>t.concat(e)),[]);var o;return[...(o=r,i.filter((({absolutePosition:t})=>!o.some((e=>lo(e.absolutePosition,t)))))),...function(t,e){const n=e.map((e=>{const n={x:t.raw.x,y:e.raw.y,height:e.absolutePosition.height,width:e.absolutePosition.x-t.absolutePosition.x};return{type:"adjacent-with-parent",parent:t,child:e,edge:"left",raw:n,absolutePosition:{x:t.absolutePosition.x,y:e.absolutePosition.y,height:e.absolutePosition.height,width:e.absolutePosition.x-t.absolutePosition.x}}})),r=e.map((e=>{const n=e.absolutePosition.x+e.absolutePosition.width;return{raw:{x:e.raw.x+e.absolutePosition.width,y:e.raw.y,height:e.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-n},type:"adjacent-with-parent",parent:t,child:e,edge:"right",absolutePosition:{x:n,y:e.absolutePosition.y,height:e.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-n}}}));return n.concat(r).filter((t=>!(t.absolutePosition.height<4||t.absolutePosition.width<4||e.some((({absolutePosition:e})=>lo(e,t.absolutePosition))))))}(e,r)]}function _o({greenZone:t}){const[n,r]=o(),u=!!li.get(t.contour.executor);return i((()=>{const e=vi.pipe(g((()=>w())),d((({x:e})=>function(t,e,n){return e?t<n.x+8?"left":t>n.x+n.width-8?"right":"inner":Math.abs(t-n.x)>n.width/2?"right":"left"}(e,u,t.contour.raw))),b((e=>xi.next({position:e,contour:t.contour,type:"node_without_children"}))),d((e=>function(t,e){const{height:n,width:r,x:i,y:o}=e,u=n-4,a=o+2;return"inner"===t?{height:u,width:r-4,transform:`translate(${i+2}px, ${a}px)`}:"left"===t?{height:u,width:"8px",transform:`translate(${Math.max(i-9,0)}px, ${a}px)`}:"right"===t?{height:u,width:"8px",transform:`translate(${Math.min(i+r+2,window.innerWidth-9)}px, ${a}px)`}:void 0}(e,t.contour.absolutePosition)))).subscribe(r);return()=>{e.unsubscribe()}}),[t]),e.createElement("div",{className:"green-zone green-zone-for-node-without-children",style:n})}function vo(t){return"adjacent-with-parent"===t.type?`adjacent-${t.parent.id}-${t.child.id}-${t.edge}`:`between-${t.left.id}-${t.right.id}`}function yo({greenZones:t}){const n=function(t){const[e,n]=o("");return i((()=>{const e=vi.pipe(S((()=>w())),z((e=>t.filter((({raw:t})=>function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}(e,t))))),z((t=>t.length?t[0]:void 0)),I((t=>t&&xi.next(t))),z((t=>t?vo(t):"")),O()).subscribe(n);return()=>{e.unsubscribe()}}),[t]),e}(t);return e.createElement(e.Fragment,null,t.map((t=>{const r=vo(t);if("between-nodes"===t.type){const{absolutePosition:i}=t;return e.createElement("div",{key:r,className:V("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":r===n}),style:{height:i.height,width:i.width,transform:`translate(${i.x}px, ${i.y}px)`}})}return e.createElement("div",{key:r,className:V("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":r===n}),style:{height:t.absolutePosition.height,width:t.absolutePosition.width,transform:`translate(${t.absolutePosition.x}px, ${t.absolutePosition.y}px)`}})})))}var mo=function(){const t=function(){const[t,e]=o([]);return i((()=>{const t=gi.pipe(_(),g((()=>w())),d((t=>{if(!t||(null==t?void 0:t.id)===Y)return[];const e=_i.value;if(!(null==e?void 0:e.length))return[];const n=M(Ii.value,t.id);if(!n)return[];const r=Ii.value.getIn(n);return T(r)?po(Ii.value,t,e):{contour:t,type:"node_without_children",position:"left"}}))).subscribe(e);return()=>{t.unsubscribe()}}),[]),t}();return function(){const[t,e]=o(!1);return i((()=>{const t=bi.pipe(_()).subscribe(e);return()=>{t.unsubscribe()}}),[]),t}()&&t?Array.isArray(t)?e.createElement(yo,{greenZones:t}):e.createElement(_o,{greenZone:t}):null};function go(){return Ni()===$?null:e.createElement(e.Fragment,null,e.createElement(no,null),e.createElement(mo,null),e.createElement(ho,null))}G("html,\nbody {\n  width: 100%;\n  height: auto;\n}\n\n* {\n  box-sizing: border-box;\n}\n\n.simulator-background-layer {\n  position: relative;\n  z-index: 0;\n}\n\n.artery-simulator-root--modal-open {\n  height: 100vh;\n  overflow: hidden;\n}\n\n.green-zone {\n  top: 0;\n  position: absolute;\n  will-change: width, height, transform;\n}\n\n.green-zone-for-node-without-children {\n  background-color: rgba(0, 128, 0, 0.3607843137);\n  outline: 1px solid #008000;\n}\n\n.green-zone-between-nodes {\n  outline: 1px dashed #008000;\n}\n\n.green-zone-between-nodes--focused {\n  background-color: rgba(0, 128, 0, 0.3607843137);\n}\n\n.placeholder-for-container-node-children {\n  padding: 8px;\n  color: #94a3b8;\n  text-align: center;\n  background-color: #f8fafc;\n}",{});const wo=document.createElement("div");document.body.appendChild(wo),t.render(e.createElement(go,null),wo)}}}));
