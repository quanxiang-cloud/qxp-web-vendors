System.register(["react","react-dom","@one-for-all/ui","lodash","@one-for-all/render-engine"],(function(e){"use strict";var t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,O,v,b,y,x,w,S,_,k,E,Q,T,P,C,N,$,A,R,j,D,I,W,M,L,V,Z,X,U,B,q,Y,z,G,F,H,K,J,ee,te;return{setters:[function(e){t=e.useState,n=e.default,r=e.forwardRef,i=e.memo,o=e.Component,s=e.PureComponent,a=e.createContext,l=e.useEffect,c=e.isValidElement,u=e.cloneElement,h=e.useLayoutEffect,d=e.useMemo,f=e.useContext,p=e.useCallback,m=e.useImperativeHandle,g=e.useRef,O=e.Children},function(e){v=e.unstable_batchedUpdates},function(e){b=e.Tooltip,y=e.Icon,x=e.Button,w=e.Modal,S=e.toast,_=e.Page,k=e.Text,E=e.Select,Q=e.Popper,T=e.Image,P=e.Paragraph,C=e.Link,N=e.Toggle,$=e.Input,A=e.Textarea,R=e.RadioGroup,j=e.Radio,D=e.Grid,I=e.Container,W=e.RadioButtonGroup,M=e.Search,L=e.Tab,V=e.Panel,Z=e.ColorPicker},function(e){X=e.get,U=e.mapValues,B=e.noop,q=e.mergeWith,Y=e.defaults,z=e.cloneDeep,G=e.set,F=e.flow,H=e.identity,K=e.pickBy,J=e.debounce,ee=e.pick},function(e){te=e.SchemaRender}],execute:function(){e("useCtx",WA);var ne,re={exports:{}};
/*!
			  Copyright (c) 2018 Jed Watson.
			  Licensed under the MIT License (MIT), see
			  http://jedwatson.github.io/classnames
			*/ne=re,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&n.push(s)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var a in i)e.call(i,a)&&i[a]&&n.push(a);else n.push(i.toString())}}return n.join(" ")}ne.exports?(t.default=t,ne.exports=t):window.classNames=t}();var ie=re.exports;function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var se={};function ae(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:se}var le=Object.assign,ce=Object.getOwnPropertyDescriptor,ue=Object.defineProperty,he=Object.prototype,de=[];Object.freeze(de);var fe={};Object.freeze(fe);var pe="undefined"!=typeof Proxy,me=Object.toString();function ge(){pe||oe("Proxy not available")}function Oe(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var ve=function(){};function be(e){return"function"==typeof e}function ye(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function xe(e){return null!==e&&"object"==typeof e}function we(e){if(!xe(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===me}function Se(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function _e(e,t,n){ue(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function ke(e,t,n){ue(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ee(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return xe(e)&&!0===e[n]}}function Qe(e){return e instanceof Map}function Te(e){return e instanceof Set}var Pe=void 0!==Object.getOwnPropertySymbols;var Ce="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Pe?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Ne(e){return null===e?null:"object"==typeof e?""+e:e}function $e(e,t){return he.hasOwnProperty.call(e,t)}var Ae=Object.getOwnPropertyDescriptors||function(e){var t={};return Ce(e).forEach((function(n){t[n]=ce(e,n)})),t};function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},De.apply(this,arguments)}function Ie(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,We(e,t)}function We(e,t){return We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},We(e,t)}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ze=Symbol("mobx-stored-annotations");function Xe(e){return Object.assign((function(t,n){Ue(t,n,e)}),e)}function Ue(e,t,n){$e(e,Ze)||_e(e,Ze,De({},e[Ze])),function(e){return e.annotationType_===Ke}(n)||(e[Ze][t]=n)}var Be=Symbol("mobx administration"),qe=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Xt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return gn(this)},t.reportChanged=function(){pn(),On(this),mn()},t.toString=function(){return this.name_},e}(),Ye=Ee("Atom",qe);function ze(e,t,n){void 0===t&&(t=ve),void 0===n&&(n=ve);var r,i=new qe(e);return t!==ve&&Wn(Dn,i,t,r),n!==ve&&In(i,n),i}var Ge={identity:function(e,t){return e===t},structural:function(e,t){return Fr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Fr(e,t,1)}};function Fe(e,t,n){return Gn(e)?e:Array.isArray(e)?Tt.array(e,{name:n}):we(e)?Tt.object(e,void 0,{name:n}):Qe(e)?Tt.map(e,{name:n}):Te(e)?Tt.set(e,{name:n}):"function"!=typeof e||An(e)||zn(e)?e:Se(e)?qn(e):$n(n,e)}function He(e){return e}var Ke="override";function Je(e,t){return{annotationType_:e,options_:t,make_:et,extend_:tt}}function et(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(An(n.value))return 1;var o=nt(e,this,t,n,!1);return ue(r,t,o),2}function tt(e,t,n,r){var i=nt(e,this,t,n);return e.defineProperty_(t,i,r)}function nt(e,t,n,r,i){var o,s,a,l,c,u,h,d;void 0===i&&(i=un.safeDescriptors),d=r,t.annotationType_,d.value;var f,p=r.value;null!=(o=t.options_)&&o.bound&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_));return{value:Wt(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),p,null!=(l=null==(c=t.options_)?void 0:c.autoAction)&&l,null!=(u=t.options_)&&u.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function rt(e,t){return{annotationType_:e,options_:t,make_:it,extend_:ot}}function it(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!$e(e.target_,t)||!zn(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(zn(n.value))return 1;var o=st(e,this,t,n,!1,!1);return ue(r,t,o),2}function ot(e,t,n,r){var i,o=st(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function st(e,t,n,r,i,o){var s;void 0===o&&(o=un.safeDescriptors),s=r,t.annotationType_,s.value;var a,l=r.value;(zn(l)||(l=qn(l)),i)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function at(e,t){return{annotationType_:e,options_:t,make_:lt,extend_:ct}}function lt(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ct(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,De({},this.options_,{get:n.get,set:n.set}),r)}function ut(e,t){return{annotationType_:e,options_:t,make_:ht,extend_:dt}}function ht(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function dt(e,t,n,r){var i,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:Fe,r)}var ft=pt();function pt(e){return{annotationType_:"true",options_:e,make_:mt,extend_:gt}}function mt(e,t,n,r){var i,o,s,a;if(n.get)return $t.make_(e,t,n,r);if(n.set){var l=Wt(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!un.safeDescriptors||e.isPlainObject_,set:l})?0:2:(ue(r,t,{configurable:!0,set:l}),2)}if(r!==e.target_&&"function"==typeof n.value)return Se(n.value)?(null!=(a=this.options_)&&a.autoBind?qn.bound:qn).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?$n.bound:$n).make_(e,t,n,r);var c,u=!1===(null==(i=this.options_)?void 0:i.deep)?Tt.ref:Tt;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(c=e.proxy_)?c:e.target_));return u.make_(e,t,n,r)}function gt(e,t,n,r){var i,o,s;if(n.get)return $t.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!un.safeDescriptors||e.isPlainObject_,set:Wt(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Tt.ref:Tt).extend_(e,t,n,r)}var Ot={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function vt(e){return e||Ot}Object.freeze(Ot);var bt=ut("observable"),yt=ut("observable.ref",{enhancer:He}),xt=ut("observable.shallow",{enhancer:function(e,t,n){return null==e||Dr(e)||xr(e)||Er(e)||Pr(e)?e:Array.isArray(e)?Tt.array(e,{name:n,deep:!1}):we(e)?Tt.object(e,void 0,{name:n,deep:!1}):Qe(e)?Tt.map(e,{name:n,deep:!1}):Te(e)?Tt.set(e,{name:n,deep:!1}):void 0}}),wt=ut("observable.struct",{enhancer:function(e,t){return Fr(e,t)?t:e}}),St=Xe(bt);function _t(e){return!0===e.deep?Fe:!1===e.deep?He:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:Fe;var t,n,r}function kt(e,t,n){if(!ye(t))return Gn(e)?e:we(e)?Tt.object(e,t,n):Array.isArray(e)?Tt.array(e,t):Qe(e)?Tt.map(e,t):Te(e)?Tt.set(e,t):"object"==typeof e&&null!==e?e:Tt.box(e,t);Ue(e,t,bt)}Object.assign(kt,St);var Et,Qt,Tt=le(kt,{box:function(e,t){var n=vt(t);return new Bt(e,_t(n),n.name,!0,n.equals)},array:function(e,t){var n=vt(t);return(!1===un.useProxies||!1===n.proxy?Br:pr)(e,_t(n),n.name)},map:function(e,t){var n=vt(t);return new kr(e,_t(n),n.name)},set:function(e,t){var n=vt(t);return new Tr(e,_t(n),n.name)},object:function(e,t,n){return function(e,t,n,r){var i=Ae(t),o=Ar(e,r)[Be];pn();try{Ce(i).forEach((function(e){o.extend_(e,i[e],!n||(!(e in n)||n[e]))}))}finally{mn()}return e}(!1===un.useProxies||!1===(null==n?void 0:n.proxy)?Ar({},n):function(e,t){var n,r;return ge(),e=Ar(e,t),null!=(r=(n=e[Be]).proxy_)?r:n.proxy_=new Proxy(e,nr)}({},n),e,t)},ref:Xe(yt),shallow:Xe(xt),deep:St,struct:Xe(wt)}),Pt="computed",Ct=at(Pt),Nt=at("computed.struct",{equals:Ge.structural}),$t=function(e,t){if(ye(t))return Ue(e,t,Ct);if(we(e))return Xe(at(Pt,e));var n=we(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Yt(n)};Object.assign($t,Ct),$t.struct=Xe(Nt);var At,Rt=0,jt=1,Dt=null!=(Et=null==(Qt=ce((function(){}),"name"))?void 0:Qt.configurable)&&Et,It={value:"action",configurable:!0,writable:!1,enumerable:!1};function Wt(e,t,n,r){function i(){return Mt(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,Dt&&(It.value=e,Object.defineProperty(i,"name",It)),i}function Mt(e,t,n,r,i){var o=function(e,t,n,r){var i=!1,o=0,s=un.trackingDerivation,a=!t||!s;pn();var l=un.allowStateChanges;a&&(tn(),l=Vt(!0));var c=rn(!0),u={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:c,notifySpy_:i,startTime_:o,actionId_:jt++,parentActionId_:Rt};return Rt=u.actionId_,u}(0,t);try{return n.apply(r,i)}catch(e){throw o.error_=e,e}finally{!function(e){Rt!==e.actionId_&&oe(30);Rt=e.parentActionId_,void 0!==e.error_&&(un.suppressReactionErrors=!0);Zt(e.prevAllowStateChanges_),on(e.prevAllowStateReads_),mn(),e.runAsAction_&&nn(e.prevDerivation_);un.suppressReactionErrors=!1}(o)}}function Lt(e,t){var n=Vt(e);try{return t()}finally{Zt(n)}}function Vt(e){var t=un.allowStateChanges;return un.allowStateChanges=e,t}function Zt(e){un.allowStateChanges=e}At=Symbol.toPrimitive;var Xt,Ut,Bt=function(e,t){function n(t,n,r,i,o){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=Ge.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=o,s.value_=n(t,void 0,r),s}Ie(n,e);var r=n.prototype;return r.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==un.UNCHANGED&&this.setNewValue_(e)},r.prepareNewValue_=function(e){if(rr(this)){var t=or(this,{object:this,type:hr,newValue:e});if(!t)return un.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?un.UNCHANGED:e},r.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),sr(this)&&lr(this,{type:hr,object:this,newValue:e,oldValue:t})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(e){return ir(this,e)},r.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:hr,newValue:this.value_,oldValue:void 0}),ar(this,e)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return Ne(this.get())},r[t]=function(){return this.valueOf()},n}(qe,At),qt=Ee("ObservableValue",Bt),Yt=function(e){function t(e){this.dependenciesState_=Xt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Xt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Gt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ut.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||oe(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Wt("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Ge.structural:Ge.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var n=t.prototype;return n.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Xt.UP_TO_DATE_)return;e.lowestObserverState_=Xt.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Xt.UP_TO_DATE_&&(e.dependenciesState_=Xt.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},n.get=function(){if(this.isComputing_&&oe(32,this.name_,this.derivation),0!==un.inBatch||0!==this.observers_.size||this.keepAlive_){if(gn(this),Ht(this)){var e=un.trackingContext;this.keepAlive_&&!e&&(un.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Xt.STALE_)return;e.lowestObserverState_=Xt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Xt.POSSIBLY_STALE_?t.dependenciesState_=Xt.STALE_:t.dependenciesState_===Xt.UP_TO_DATE_&&(e.lowestObserverState_=Xt.UP_TO_DATE_)}))}(this),un.trackingContext=e}}else Ht(this)&&(this.warnAboutUntrackedRead_(),pn(),this.value_=this.computeValue_(!1),mn());var t=this.value_;if(Ft(t))throw t.cause;return t},n.set=function(e){if(this.setter_){this.isRunningSetter_&&oe(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else oe(34,this.name_)},n.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Xt.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Ft(e)||Ft(n)||!this.equals_(e,n);return r&&(this.value_=n),r},n.computeValue_=function(e){this.isComputing_=!0;var t,n=Vt(!1);if(e)t=Kt(this,this.derivation,this.scope_);else if(!0===un.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Gt(e)}return Zt(n),this.isComputing_=!1,t},n.suspend_=function(){this.keepAlive_||(Jt(this),this.value_=void 0)},n.observe_=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){var n,r;void 0===t&&(t=fe);var i,o=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var s=jn(t),a=!1;i=new vn(o,(function(){a||(a=!0,s((function(){a=!1,i.isDisposed_||i.track(l)})))}),t.onError,t.requiresObservable)}else i=new vn(o,(function(){this.track(l)}),t.onError,t.requiresObservable);function l(){e(i)}return i.schedule_(),i.getDisposer_()}((function(){var o=n.get();if(!r||t){var s=tn();e({observableKind:"computed",debugObjectName:n.name_,type:hr,object:n,newValue:o,oldValue:i}),nn(s)}r=!1,i=o}))},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return Ne(this.get())},n[e]=function(){return this.valueOf()},t}(Symbol.toPrimitive),zt=Ee("ComputedValue",Yt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Xt||(Xt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Ut||(Ut={}));var Gt=function(e){this.cause=void 0,this.cause=e};function Ft(e){return e instanceof Gt}function Ht(e){switch(e.dependenciesState_){case Xt.UP_TO_DATE_:return!1;case Xt.NOT_TRACKING_:case Xt.STALE_:return!0;case Xt.POSSIBLY_STALE_:for(var t=rn(!0),n=tn(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(zt(s)){if(un.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return nn(n),on(t),!0}if(e.dependenciesState_===Xt.STALE_)return nn(n),on(t),!0}}return sn(e),nn(n),on(t),!1}}function Kt(e,t,n){var r=rn(!0);sn(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++un.runId;var i,o=un.trackingDerivation;if(un.trackingDerivation=e,un.inBatch++,!0===un.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new Gt(e)}return un.inBatch--,un.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Xt.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&dn(l,e),l.diffValue_=0}for(;i--;){var c=n[i];1===c.diffValue_&&(c.diffValue_=0,hn(c,e))}r!==Xt.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),on(r),i}function Jt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)dn(t[n],e);e.dependenciesState_=Xt.NOT_TRACKING_}function en(e){var t=tn();try{return e()}finally{nn(t)}}function tn(){var e=un.trackingDerivation;return un.trackingDerivation=null,e}function nn(e){un.trackingDerivation=e}function rn(e){var t=un.allowStateReads;return un.allowStateReads=e,t}function on(e){un.allowStateReads=e}function sn(e){if(e.dependenciesState_!==Xt.UP_TO_DATE_){e.dependenciesState_=Xt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Xt.UP_TO_DATE_}}var an=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ln=!0,cn=!1,un=function(){var e=ae();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(ln=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new an).version&&(ln=!1),ln?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new an):(setTimeout((function(){cn||oe(35)}),1),new an)}();function hn(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function dn(e,t){e.observers_.delete(t),0===e.observers_.size&&fn(e)}function fn(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,un.pendingUnobservations.push(e))}function pn(){un.inBatch++}function mn(){if(0==--un.inBatch){yn();for(var e=un.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Yt&&n.suspend_())}un.pendingUnobservations=[]}}function gn(e){var t=un.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&un.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&un.inBatch>0&&fn(e),!1)}function On(e){e.lowestObserverState_!==Xt.STALE_&&(e.lowestObserverState_=Xt.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Xt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Xt.STALE_})))}var vn=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Xt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ut.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,un.pendingReactions.push(this),yn())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){pn(),this.isScheduled_=!1;var e=un.trackingContext;if(un.trackingContext=this,Ht(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}un.trackingContext=e,mn()}},t.track=function(e){if(!this.isDisposed_){pn(),this.isRunning_=!0;var t=un.trackingContext;un.trackingContext=this;var n=Kt(this,e,void 0);un.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Jt(this),Ft(n)&&this.reportExceptionInDerivation_(n.cause),mn()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(un.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";un.suppressReactionErrors||console.error(n,e),un.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(pn(),Jt(this),mn()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[Be]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){oe("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"boolean"==typeof n[n.length-1]&&(e=n.pop());var i=Jn(n);if(!i)return oe("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Ut.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled");i.isTracing_=e?Ut.BREAK:Ut.LOG}(this,e)},e}(),bn=function(e){return e()};function yn(){un.inBatch>0||un.isRunningReactions||bn(xn)}function xn(){un.isRunningReactions=!0;for(var e=un.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}un.isRunningReactions=!1}var wn=Ee("Reaction",vn);var Sn="action",_n="autoAction",kn="<unnamed action>",En=Je(Sn),Qn=Je("action.bound",{bound:!0}),Tn=Je(_n,{autoAction:!0}),Pn=Je("autoAction.bound",{autoAction:!0,bound:!0});function Cn(e){return function(t,n){return be(t)?Wt(t.name||kn,t,e):be(n)?Wt(t,n,e):ye(n)?Ue(t,n,e?Tn:En):ye(t)?Xe(Je(e?_n:Sn,{name:t,autoAction:e})):void 0}}var Nn=Cn(!1);Object.assign(Nn,En);var $n=Cn(!0);function An(e){return be(e)&&!0===e.isMobxAction}Object.assign($n,Tn),Nn.bound=Xe(Qn),$n.bound=Xe(Pn);var Rn=function(e){return e()};function jn(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Rn}var Dn="onBO";function In(e,t,n){return Wn("onBUO",e,t,n)}function Wn(e,t,n,r){var i="function"==typeof r?qr(t,n):qr(t),o=be(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var Mn="always";function Ln(e){!0===e.isolateGlobalState&&function(){if((un.pendingReactions.length||un.inBatch||un.isRunningReactions)&&oe(36),cn=!0,ln){var e=ae();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),un=new an}}();var t,n,r=e.useProxies,i=e.enforceActions;if(void 0!==r&&(un.useProxies=r===Mn||"never"!==r&&"undefined"!=typeof Proxy),"ifavailable"===r&&(un.verifyProxies=!0),void 0!==i){var o=i===Mn?Mn:"observed"===i;un.enforceActions=o,un.allowStateChanges=!0!==o&&o!==Mn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(un[t]=!!e[t])})),un.allowStateReads=!un.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=bn,bn=function(e){return t((function(){return n(e)}))})}function Vn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Vn)),n}var Zn=0;function Xn(){this.message="FLOW_CANCELLED"}Xn.prototype=Object.create(Error.prototype);var Un=rt("flow"),Bn=rt("flow.bound",{bound:!0}),qn=Object.assign((function(e,t){if(ye(t))return Ue(e,t,Un);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=this,i=arguments,o=++Zn,s=Nn(r+" - runid: "+o+" - init",n).apply(t,i),a=void 0,l=new Promise((function(t,n){var i=0;function l(e){var t;a=void 0;try{t=Nn(r+" - runid: "+o+" - yield "+i++,s.next).call(s,e)}catch(e){return n(e)}u(t)}function c(e){var t;a=void 0;try{t=Nn(r+" - runid: "+o+" - yield "+i++,s.throw).call(s,e)}catch(e){return n(e)}u(t)}function u(e){if(!be(null==e?void 0:e.then))return e.done?t(e.value):(a=Promise.resolve(e.value)).then(l,c);e.then(u,n)}e=n,l(void 0)}));return l.cancel=Nn(r+" - runid: "+o+" - cancel",(function(){try{a&&Yn(a);var t=s.return(void 0),n=Promise.resolve(t.value);n.then(ve,ve),Yn(n),e(new Xn)}catch(t){e(t)}})),l};return i.isMobXFlow=!0,i}),Un);function Yn(e){be(e.cancel)&&e.cancel()}function zn(e){return!0===(null==e?void 0:e.isMobXFlow)}function Gn(e){return function(e,t){return!!e&&(void 0!==t?!!Dr(e)&&e[Be].values_.has(t):Dr(e)||!!e[Be]||Ye(e)||wn(e)||zt(e))}(e)}function Fn(e,t,n){return e.set(t,n),n}function Hn(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!Gn(e))return e;if(qt(e)||zt(e))return Hn(e.get(),t);if(t.has(e))return t.get(e);if(xr(e)){var n=Fn(t,e,new Array(e.length));return e.forEach((function(e,r){n[r]=Hn(e,t)})),n}if(Pr(e)){var r=Fn(t,e,new Set);return e.forEach((function(e){r.add(Hn(e,t))})),r}if(Er(e)){var i=Fn(t,e,new Map);return e.forEach((function(e,n){i.set(n,Hn(e,t))})),i}var o=Fn(t,e,{});return function(e){if(Dr(e))return e[Be].ownKeys_();oe(38)}(e).forEach((function(n){he.propertyIsEnumerable.call(e,n)&&(o[n]=Hn(e[n],t))})),o}function Kn(e,t){return Hn(e,new Map)}function Jn(e){switch(e.length){case 0:return un.trackingDerivation;case 1:return qr(e[0]);case 2:return qr(e[0],e[1])}}function er(e,t){void 0===t&&(t=void 0),pn();try{return e.apply(t)}finally{mn()}}function tr(e){return e[Be]}qn.bound=Xe(Bn);var nr={has:function(e,t){return tr(e).has_(t)},get:function(e,t){return tr(e).get_(t)},set:function(e,t,n){var r;return!!ye(t)&&(null==(r=tr(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!ye(t)&&(null==(n=tr(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=tr(e).defineProperty_(t,n))||r},ownKeys:function(e){return tr(e).ownKeys_()},preventExtensions:function(e){oe(13)}};function rr(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function ir(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Oe((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function or(e,t){var n=tn();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&((t=r[i](t))&&!t.type&&oe(14),t);i++);return t}finally{nn(n)}}function sr(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function ar(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Oe((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function lr(e,t){var n=tn(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);nn(n)}}function cr(e,t,n){var r=Ar(e,n)[Be];pn();try{0,null!=t||(t=function(e){return $e(e,Ze)||_e(e,Ze,De({},e[Ze])),e[Ze]}(e)),Ce(t).forEach((function(e){return r.make_(e,t[e])}))}finally{mn()}return e}var ur="splice",hr="update",dr={get:function(e,t){var n=e[Be];return t===Be?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?$e(mr,t)?mr[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[Be];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){oe(15)}},fr=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new qe(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return ir(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ar(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&oe("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&oe(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Ur(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=de),rr(this)){var o=or(this,{object:this.proxy_,type:ur,index:e,removedCount:t,added:n});if(!o)return de;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=sr(this),o=i||r?{observableKind:"array",object:this.proxy_,type:hr,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&lr(this,o)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=sr(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ur,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&lr(this,o)},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var n=this.values_;if(e<n.length){this.atom_;var r=n[e];if(rr(this)){var i=or(this,{type:hr,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else e===n.length?this.spliceWithArray_(e,0,[t]):oe(17,e,n.length)},e}();function pr(e,t,n,r){void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),ge();var i=new fr(n,t,r,!1);ke(i.values_,Be,i);var o=new Proxy(i.values_,dr);if(i.proxy_=o,e&&e.length){var s=Vt(!0);i.spliceWithArray_(0,0,e),Zt(s)}return o}var mr={clear:function(){return this.splice(0)},replace:function(e){var t=this[Be];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[Be];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[Be].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Be],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Be].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Be],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return un.trackingDerivation&&oe(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){un.trackingDerivation&&oe(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Be],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function gr(e,t){"function"==typeof Array.prototype[e]&&(mr[e]=t(e))}function Or(e){return function(){var t=this[Be];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function vr(e){return function(t,n){var r=this,i=this[Be];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function br(e){return function(){var t=this,n=this[Be];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}gr("concat",Or),gr("flat",Or),gr("includes",Or),gr("indexOf",Or),gr("join",Or),gr("lastIndexOf",Or),gr("slice",Or),gr("toString",Or),gr("toLocaleString",Or),gr("every",vr),gr("filter",vr),gr("find",vr),gr("findIndex",vr),gr("flatMap",vr),gr("forEach",vr),gr("map",vr),gr("some",vr),gr("reduce",br),gr("reduceRight",br);var yr=Ee("ObservableArrayAdministration",fr);function xr(e){return xe(e)&&yr(e[Be])}var wr={},Sr="add",_r="delete",kr=function(e,t){function n(e,t,n){var r=this;void 0===t&&(t=Fe),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Be]=wr,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,be(Map)||oe(18),this.keysAtom_=ze("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,Lt(!0,(function(){r.merge(e)}))}var r=n.prototype;return r.has_=function(e){return this.data_.has(e)},r.has=function(e){var t=this;if(!un.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Bt(this.has_(e),He,"ObservableMap.key?",!1);this.hasMap_.set(e,r),In(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},r.set=function(e,t){var n=this.has_(e);if(rr(this)){var r=or(this,{type:n?hr:Sr,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},r.delete=function(e){var t=this;if((this.keysAtom_,rr(this))&&!or(this,{type:_r,object:this,name:e}))return!1;if(this.has_(e)){var n=sr(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:_r,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return er((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&lr(this,r),!0}return!1},r.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==un.UNCHANGED){var r=sr(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:hr,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&lr(this,i)}},r.addValue_=function(e,t){var n=this;this.keysAtom_,er((function(){var r,i=new Bt(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=sr(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Sr,object:this,name:e,newValue:t}:null;r&&lr(this,i)},r.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},r.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},r.values=function(){var e=this,t=this.keys();return Jr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},r.entries=function(){var e=this,t=this.keys();return Jr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},r[e]=function(){return this.entries()},r.forEach=function(e,t){for(var n,r=Ve(this);!(n=r()).done;){var i=n.value,o=i[0],s=i[1];e.call(t,s,o,this)}},r.merge=function(e){var t=this;return Er(e)&&(e=new Map(e)),er((function(){we(e)?function(e){var t=Object.keys(e);if(!Pe)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return he.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):Qe(e)?(e.constructor!==Map&&oe(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&oe(20,e)})),this},r.clear=function(){var e=this;er((function(){en((function(){for(var t,n=Ve(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},r.replace=function(e){var t=this;return er((function(){for(var n,r=function(e){if(Qe(e)||Er(e))return e;if(Array.isArray(e))return new Map(e);if(we(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return oe(21,e)}(e),i=new Map,o=!1,s=Ve(t.data_.keys());!(n=s()).done;){var a=n.value;if(!r.has(a))if(t.delete(a))o=!0;else{var l=t.data_.get(a);i.set(a,l)}}for(var c,u=Ve(r.entries());!(c=u()).done;){var h=c.value,d=h[0],f=h[1],p=t.data_.has(d);if(t.set(d,f),t.data_.has(d)){var m=t.data_.get(d);i.set(d,m),p||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),O=i.keys(),v=g.next(),b=O.next();!v.done;){if(v.value!==b.value){t.keysAtom_.reportChanged();break}v=g.next(),b=O.next()}t.data_=i})),this},r.toString=function(){return"[object ObservableMap]"},r.toJSON=function(){return Array.from(this)},r.observe_=function(e,t){return ar(this,e)},r.intercept_=function(e){return ir(this,e)},je(n,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Map"}}]),n}(Symbol.iterator,Symbol.toStringTag),Er=Ee("ObservableMap",kr);var Qr={},Tr=function(e,t){function n(e,t,n){void 0===t&&(t=Fe),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[Be]=Qr,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,be(Set)||oe(22),this.atom_=ze(this.name_),this.enhancer_=function(e,r){return t(e,r,n)},e&&this.replace(e)}var r=n.prototype;return r.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.clear=function(){var e=this;er((function(){en((function(){for(var t,n=Ve(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},r.forEach=function(e,t){for(var n,r=Ve(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},r.add=function(e){var t=this;if((this.atom_,rr(this))&&!or(this,{type:Sr,object:this,newValue:e}))return this;if(!this.has(e)){er((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=sr(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Sr,object:this,newValue:e}:null;n&&lr(this,r)}return this},r.delete=function(e){var t=this;if(rr(this)&&!or(this,{type:_r,object:this,oldValue:e}))return!1;if(this.has(e)){var n=sr(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:_r,object:this,oldValue:e}:null;return er((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&lr(this,r),!0}return!1},r.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},r.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Jr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},r.keys=function(){return this.values()},r.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Jr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},r.replace=function(e){var t=this;return Pr(e)&&(e=new Set(e)),er((function(){Array.isArray(e)||Te(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&oe("Cannot initialize set from "+e)})),this},r.observe_=function(e,t){return ar(this,e)},r.intercept_=function(e){return ir(this,e)},r.toJSON=function(){return Array.from(this)},r.toString=function(){return"[object ObservableSet]"},r[e]=function(){return this.values()},je(n,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Set"}}]),n}(Symbol.iterator,Symbol.toStringTag),Pr=Ee("ObservableSet",Tr),Cr=Object.create(null),Nr="remove",$r=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=ft),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new qe("ObservableObject.keys"),this.isPlainObject_=we(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Yt)return n.set(t),!0;if(rr(this)){var r=or(this,{type:hr,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==un.UNCHANGED){var i=sr(this),o=i?{type:hr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&lr(this,o)}return!0},t.get_=function(e){return un.trackingDerivation&&!$e(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),$e(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!un.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Bt(e in this.target_,He,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[Ze])&&n[e])return;oe(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==he;){var i=ce(r,e);if(i){var o=t.make_(this,e,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}Ir(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&Ir(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{pn();var r=this.delete_(e);if(!r)return r;if(rr(this)){var i=or(this,{object:this.proxy_||this.target_,name:e,type:Sr,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=De({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else ue(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{mn()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{pn();var i=this.delete_(e);if(!i)return i;if(rr(this)){var o=or(this,{object:this.proxy_||this.target_,name:e,type:Sr,newValue:t});if(!o)return null;t=o.newValue}var s=jr(e),a={configurable:!un.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else ue(this.target_,e,a);var l=new Bt(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{mn()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{pn();var r=this.delete_(e);if(!r)return r;if(rr(this))if(!or(this,{object:this.proxy_||this.target_,name:e,type:Sr,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=jr(e),o={configurable:!un.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else ue(this.target_,e,o);this.values_.set(e,new Yt(t)),this.notifyPropertyAddition_(e,void 0)}finally{mn()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!$e(this.target_,e))return!0;if(rr(this)&&!or(this,{object:this.proxy_||this.target_,name:e,type:Nr}))return null;try{var n,r;pn();var i,o=sr(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(i=ce(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Bt&&(a=s.value_),On(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),o){var l={type:Nr,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&lr(this,l)}}finally{mn()}return!0},t.observe_=function(e,t){return ar(this,e)},t.intercept_=function(e){return ir(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=sr(this);if(i){var o=i?{type:Sr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&lr(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ce(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Ar(e,t){var n;if($e(e,Be))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new $r(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:pt(e):void 0}(t));return _e(e,Be,i),e}var Rr=Ee("ObservableObjectAdministration",$r);function jr(e){return Cr[e]||(Cr[e]={get:function(){return this[Be].getObservablePropValue_(e)},set:function(t){return this[Be].setObservablePropValue_(e,t)}})}function Dr(e){return!!xe(e)&&Rr(e[Be])}function Ir(e,t,n){var r;null==(r=e.target_[Ze])||delete r[n]}var Wr,Mr,Lr=0,Vr=function(){};Wr=Vr,Mr=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Wr.prototype,Mr):void 0!==Wr.prototype.__proto__?Wr.prototype.__proto__=Mr:Wr.prototype=Mr;var Zr=function(e,t,n){function r(t,n,r,i){var o;void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this;var s=new fr(r,n,i,!0);if(s.proxy_=Me(o),ke(Me(o),Be,s),t&&t.length){var a=Vt(!0);o.spliceWithArray(0,0,t),Zt(a)}return o}Ie(r,e);var i=r.prototype;return i.concat=function(){this[Be].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return xr(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return Jr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},je(r,[{key:"length",get:function(){return this[Be].getArrayLength_()},set:function(e){this[Be].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Vr,Symbol.toStringTag,Symbol.iterator);function Xr(e){ue(Zr.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[Be].get_(e)},set:function(t){this[Be].set_(e,t)}}}(e))}function Ur(e){if(e>Lr){for(var t=Lr;t<e+100;t++)Xr(t);Lr=e}}function Br(e,t,n){return new Zr(e,t,n)}function qr(e,t){if("object"==typeof e&&null!==e){if(xr(e))return void 0!==t&&oe(23),e[Be].atom_;if(Pr(e))return e[Be];if(Er(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||oe(25,t,zr(e)),n}if(Dr(e)){if(!t)return oe(26);var r=e[Be].values_.get(t);return r||oe(27,t,zr(e)),r}if(Ye(e)||zt(e)||wn(e))return e}else if(be(e)&&wn(e[Be]))return e[Be];oe(28)}function Yr(e,t){return e||oe(29),void 0!==t?Yr(qr(e,t)):Ye(e)||zt(e)||wn(e)||Er(e)||Pr(e)?e:e[Be]?e[Be]:void oe(24,e)}function zr(e,t){var n;if(void 0!==t)n=qr(e,t);else{if(An(e))return e.name;n=Dr(e)||Er(e)||Pr(e)?Yr(e):qr(e)}return n.name_}Object.entries(mr).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&_e(Zr.prototype,t,n)})),Ur(1e3);var Gr=he.toString;function Fr(e,t,n){return void 0===n&&(n=-1),Hr(e,t,n)}function Hr(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Gr.call(e);if(s!==Gr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Kr(e),t=Kr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(be(l)&&l instanceof l&&be(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return i[u]===t;if(r.push(e),i.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!Hr(e[u],t[u],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(u=d.length,Object.keys(t).length!==u)return!1;for(;u--;)if(!$e(t,h=d[u])||!Hr(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Kr(e){return xr(e)?e.slice():Qe(e)||Er(e)||Te(e)||Pr(e)?Array.from(e.entries()):e}function Jr(e){return e[Symbol.iterator]=ei,e}function ei(){return this}if(["Symbol","Map","Set"].forEach((function(e){void 0===ae()[e]&&oe("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:zr},$mobx:Be}),!t)throw new Error("mobx-react-lite requires React with Hooks support");if(!cr)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function ti(e){e()}function ni(e){return Vn(qr(e,t));var t}var ri="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function ii(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+oi}}var oi=1e4;var si=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var ai=ri?function(e){var t=new Map,n=1,r=new e((function(e){var n=t.get(e);n&&(n.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,i,o){var s=n++;return r.register(o,s,e),e.current=ii(i),e.current.finalizationRegistryCleanupToken=s,t.set(s,e.current),e.current},recordReactionAsCommitted:function(e){r.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(ri):function(){var e,t=new Set;function n(){void 0===e&&(e=setTimeout(r,1e4))}function r(){e=void 0;var r=Date.now();t.forEach((function(e){var n=e.current;n&&r>=n.cleanAt&&(n.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&n()}return{addReactionToTrack:function(e,r,i){var o;return e.current=ii(r),o=e,t.add(o),n(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),r())},resetCleanupScheduleForTests:function(){var n,r;if(t.size>0){try{for(var i=si(t),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.current;a&&(a.reaction.dispose(),s.current=null)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),li=ai.addReactionToTrack,ci=ai.recordReactionAsCommitted,ui=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function hi(e){return"observer".concat(e)}var di=function(){};function fi(){return new di}var pi="function"==typeof Symbol&&Symbol.for,mi=pi?Symbol.for("react.forward_ref"):"function"==typeof r&&r((function(e){return null})).$$typeof,gi=pi?Symbol.for("react.memo"):"function"==typeof i&&i((function(e){return null})).$$typeof;function Oi(e,t){var o;if(gi&&e.$$typeof===gi)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var s=null!==(o=null==t?void 0:t.forwardRef)&&void 0!==o&&o,a=e,l=e.displayName||e.name;if(mi&&e.$$typeof===mi&&(s=!0,"function"!=typeof(a=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var c=function(e,t){return function(e,t){void 0===t&&(t="observed");var r=ui(n.useState(fi),1)[0],i=ui(n.useState(),2)[1],o=function(){return i([])},s=n.useRef(null);if(!s.current)var a=new vn(hi(t),(function(){l.mounted?o():l.changedBeforeMount=!0})),l=li(s,a,r);var c,u,h=s.current.reaction;if(n.useDebugValue(h,ni),n.useEffect((function(){return ci(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,o())):(s.current={reaction:new vn(hi(t),(function(){o()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){s.current.reaction.dispose(),s.current=null}}),[]),h.track((function(){try{c=e()}catch(e){u=e}})),u)throw u;return c}((function(){return a(e,t)}),l)};return""!==l&&(c.displayName=l),e.contextTypes&&(c.contextTypes=e.contextTypes),s&&(c=r(c)),function(e,t){Object.keys(e).forEach((function(n){vi[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}(e,c=i(c)),c}var vi={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};!function(e){e||(e=ti),Ln({reactionScheduler:e})}(v);var bi=0;var yi={};function xi(e){return yi[e]||(yi[e]=function(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react "+e+" ("+bi+")";return bi++,t}(e)),yi[e]}function wi(e,t){if(Si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.hasOwnProperty.call(t,n[i])||!Si(e[n[i]],t[n[i]]))return!1;return!0}function Si(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function _i(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var ki=xi("patchMixins"),Ei=xi("patchedDefinition");function Qi(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t.locks++;try{var s;return null!=e&&(s=e.apply(this,i)),s}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(n,i)}))}}function Ti(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Qi.call.apply(Qi,[this,e,t].concat(r))}}function Pi(e,t,n){var r=function(e,t){var n=e[ki]=e[ki]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var i=Object.getOwnPropertyDescriptor(e,t);if(!i||!i[Ei]){var o=e[t],s=Ci(e,t,i?i.enumerable:void 0,r,o);Object.defineProperty(e,t,s)}}function Ci(e,t,n,r,i){var o,s=Ti(i,r);return(o={})[Ei]=!0,o.get=function(){return s},o.set=function(i){if(this===e)s=Ti(i,r);else{var o=Ci(this,t,n,r,i);Object.defineProperty(this,t,o)}},o.configurable=!0,o.enumerable=n,o}var Ni=Be||"$mobx",$i=xi("isMobXReactObserver"),Ai=xi("isUnmounted"),Ri=xi("skipRender"),ji=xi("isForcingUpdate");function Di(e){var t=e.prototype;if(e[$i]){var n=Ii(t);console.warn("The provided component class ("+n+") \n                has already been declared as an observer component.")}else e[$i]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==s)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==Mi)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=Mi;Li(t,"props"),Li(t,"state");var r=t.render;if("function"!=typeof r){var i=Ii(t);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return t.render=function(){return Wi.call(this,r)},Pi(t,"componentWillUnmount",(function(){var e;if(null==(e=this.render[Ni])||e.dispose(),this[Ai]=!0,!this.render[Ni]){var t=Ii(this);console.warn("The reactive render of an observer class component ("+t+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),e}function Ii(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function Wi(e){var t=this;_i(this,Ri,!1),_i(this,ji,!1);var n=Ii(this),r=e.bind(this),i=!1,s=new vn(n+".render()",(function(){if(!i&&(i=!0,!0!==t[Ai])){var e=!0;try{_i(t,ji,!0),t[Ri]||o.prototype.forceUpdate.call(t),e=!1}finally{_i(t,ji,!1),e&&s.dispose()}}}));function a(){i=!1;var e=void 0,t=void 0;if(s.track((function(){try{t=Lt(!1,r)}catch(t){e=t}})),e)throw e;return t}return s.reactComponent=this,a[Ni]=s,this.render=a,a.call(this)}function Mi(e,t){return this.state!==t||!wi(this.props,e)}function Li(e,t){var n=xi("reactProp_"+t+"_valueHolder"),r=xi("reactProp_"+t+"_atomHolder");function i(){return this[r]||_i(this,r,ze("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=!1;return rn&&on&&(e=rn(!0)),i.call(this).reportObserved(),rn&&on&&on(e),this[n]},set:function(e){this[ji]||wi(this[n],e)?_i(this,n,e):(_i(this,n,e),_i(this,Ri,!0),i.call(this).reportChanged(),_i(this,Ri,!1))}})}function Vi(e){return!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(o,e)||Object.prototype.isPrototypeOf.call(s,e)?Di(e):Oi(e)}if(!o)throw new Error("mobx-react requires React to be available");if(!Tt)throw new Error("mobx-react requires mobx to be available");var Zi=a({dragDropManager:void 0}),Xi={exports:{}},Ui={};Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()||Object.assign;
/** @license React v17.0.2
			 * react-jsx-runtime.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */
var Bi=n,qi=60103;if(Ui.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var Yi=Symbol.for;qi=Yi("react.element"),Ui.Fragment=Yi("react.fragment")}var zi,Gi=Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fi=Object.prototype.hasOwnProperty,Hi={key:!0,ref:!0,__self:!0,__source:!0};function Ki(e,t,n){var r,i={},o=null,s=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(s=t.ref),t)Fi.call(t,r)&&!Hi.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:qi,type:e,key:o,ref:s,props:i,_owner:Gi.current}}function Ji(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(o=new Error(t.replace(/%s/g,(function(){return r[s++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}Ui.jsx=Ki,Ui.jsxs=Ki,Xi.exports=Ui,function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(zi||(zi={}));var eo="dnd-core/INIT_COORDS",to="dnd-core/BEGIN_DRAG",no="dnd-core/PUBLISH_DRAG_SOURCE",ro="dnd-core/HOVER",io="dnd-core/DROP",oo="dnd-core/END_DRAG";function so(e,t){return{type:eo,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function lo(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)}function co(e,t){return e.filter((function(e){return e!==t}))}function uo(e){return"object"===ao(e)}function ho(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e,t){1===e&&i.push(t)})),i}var fo={type:eo,payload:{clientOffset:null,sourceClientOffset:null}};function po(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,o=n.clientOffset,s=n.getSourceClientOffset,a=e.getMonitor(),l=e.getRegistry();e.dispatch(so(o)),mo(t,a,l);var c=vo(t,a);if(null!==c){var u=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");go(s),u=s(c)}e.dispatch(so(o,u));var h=l.getSource(c),d=h.beginDrag(a,c);if(null!=d){Oo(d),l.pinSource(c);var f=l.getSourceType(c);return{type:to,payload:{itemType:f,item:d,sourceId:c,clientOffset:o||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}else e.dispatch(fo)}}function mo(e,t,n){Ji(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Ji(n.getSource(e),"Expected sourceIds to be registered.")}))}function go(e){Ji("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function Oo(e){Ji(uo(e),"Item must be an object.")}function vo(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function bo(e){return function(){if(e.getMonitor().isDragging())return{type:no}}}function yo(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function xo(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clientOffset;wo(t);var i=t.slice(0),o=e.getMonitor(),s=e.getRegistry();So(i,o,s);var a=o.getItemType();return _o(i,s,a),ko(i,o,s),{type:ro,payload:{targetIds:i,clientOffset:r||null}}}}function wo(e){Ji(Array.isArray(e),"Expected targetIds to be an array.")}function So(e,t,n){Ji(t.isDragging(),"Cannot call hover while not dragging."),Ji(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];Ji(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array."),Ji(n.getTarget(i),"Expected targetIds to be registered.")}}function _o(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];yo(t.getTargetType(i),n)||e.splice(r,1)}}function ko(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){To(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();Co(n);var i=$o(n);i.forEach((function(i,o){var s=No(i,o,r,n),a={type:io,payload:{dropResult:Qo(Qo({},t),s)}};e.dispatch(a)}))}}function Co(e){Ji(e.isDragging(),"Cannot call drop while not dragging."),Ji(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function No(e,t,n,r){var i=n.getTarget(e),o=i?i.drop(r,e):void 0;return function(e){Ji(void 0===e||uo(e),"Drop result must either be an object or undefined.")}(o),void 0===o&&(o=0===t?{}:r.getDropResult()),o}function $o(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Ao(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){Ji(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:oo}}}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Do=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jo(this,"store",void 0),jo(this,"monitor",void 0),jo(this,"backend",void 0),jo(this,"isSetUp",!1),jo(this,"handleRefCountChange",(function(){var e=r.store.getState().refCount>0;r.backend&&(e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1))})),this.store=t,this.monitor=n,t.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:po(e),publishDragSource:bo(e),hover:xo(e),drop:Po(e),endDrag:Ao(e)}}(this);return Object.keys(n).reduce((function(r,i){var o,s=n[i];return r[i]=(o=s,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o.apply(e,r);void 0!==s&&t(s)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}],n&&Ro(t.prototype,n),r&&Ro(t,r),e}();function Io(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Wo="function"==typeof Symbol&&Symbol.observable||"@@observable",Mo=function(){return Math.random().toString(36).substring(7).split("").join(".")},Lo={INIT:"@@redux/INIT"+Mo(),REPLACE:"@@redux/REPLACE"+Mo(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Mo()}};function Vo(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Zo(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Io(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Io(1));return n(Zo)(e,t)}if("function"!=typeof e)throw new Error(Io(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Io(3));return o}function h(e){if("function"!=typeof e)throw new Error(Io(4));if(l)throw new Error(Io(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(Io(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function d(e){if(!Vo(e))throw new Error(Io(7));if(void 0===e.type)throw new Error(Io(8));if(l)throw new Error(Io(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error(Io(10));i=e,d({type:Lo.REPLACE})}function p(){var e,t=h;return e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Io(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}},e[Wo]=function(){return this},e}return d({type:Lo.INIT}),(r={dispatch:d,subscribe:h,getState:u,replaceReducer:f})[Wo]=p,r}var Xo=function(e,t){return e===t};function Uo(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function Bo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xo;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case eo:case to:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case ro:return Uo(e.clientOffset,n.clientOffset)?e:Yo(Yo({},e),{},{clientOffset:n.clientOffset});case oo:case io:return Go;default:return e}}var Ho="dnd-core/ADD_SOURCE",Ko="dnd-core/ADD_TARGET",Jo="dnd-core/REMOVE_SOURCE",es="dnd-core/REMOVE_TARGET";function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){rs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var is={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case to:return ns(ns({},e),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case no:return ns(ns({},e),{},{isSourcePublic:!0});case ro:return ns(ns({},e),{},{targetIds:n.targetIds});case es:return-1===e.targetIds.indexOf(n.targetId)?e:ns(ns({},e),{},{targetIds:co(e.targetIds,n.targetId)});case io:return ns(ns({},e),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case oo:return ns(ns({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ho:case Ko:return e+1;case Jo:case es:return e-1;default:return e}}var as=[],ls=[];function cs(e,t){if(e===as)return!1;if(e===ls||void 0===t)return!0;var n,r=(n=e,t.filter((function(e){return n.indexOf(e)>-1})));return r.length>0}function us(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ro:break;case Ho:case Ko:case es:case Jo:return as;default:return ls}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,o=void 0===i?[]:i,s=ho(r,o),a=s.length>0||!Bo(r,o);if(!a)return as;var l=o[o.length-1],c=r[r.length-1];return l!==c&&(l&&s.push(l),c&&s.push(c)),s}function hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){ps(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:us(e.dirtyHandlerIds,{type:t.type,payload:fs(fs({},t.payload),{},{prevTargetIds:lo(e,"dragOperation.targetIds",[])})}),dragOffset:Fo(e.dragOffset,t),refCount:ss(e.refCount,t),dragOperation:os(e.dragOperation,t),stateId:hs(e.stateId)}}function gs(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}as.__IS_NONE__=!0,ls.__IS_ALL__=!0;var bs=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vs(this,"store",void 0),vs(this,"registry",void 0),this.store=t,this.registry=n}var t,n,r;return t=e,n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},r=n.handlerIds;Ji("function"==typeof e,"listener must be a function."),Ji(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var i=this.store.getState().stateId,o=function(){var n=t.store.getState(),o=n.stateId;try{o===i||o===i+1&&!cs(n.dirtyHandlerIds,r)||e()}finally{i=o}};return this.store.subscribe(o)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Ji("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Ji(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Ji(t,"Expected to find a valid target. targetId=".concat(e)),!(!this.isDragging()||this.didDrop())&&yo(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Ji(t,"Expected to find a valid source. sourceId=".concat(e)),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!yo(r,i))return!1;var o=this.getTargetIds();if(!o.length)return!1;var s=o.indexOf(e);return n?s===o.length-1:s>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,i=e.initialClientOffset,o=e.initialSourceClientOffset,r&&i&&o?gs((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),i):null;var e,t,n,r,i,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?gs(t,n):null;var e,t,n}}],n&&Os(t.prototype,n),r&&Os(t,r),e}(),ys=0;function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function ws(e,t){t&&Array.isArray(e)?e.forEach((function(e){return ws(e,!1)})):Ji("string"==typeof e||"symbol"===xs(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function Ss(e){ks.length||_s(),ks[ks.length]=e}var _s,ks=[],Es=0;function Qs(){for(;Es<ks.length;){var e=Es;if(Es+=1,ks[e].call(),Es>1024){for(var t=0,n=ks.length-Es;t<n;t++)ks[t]=ks[t+Es];ks.length-=Es,Es=0}}ks.length=0,Es=0}var Ts="undefined"!=typeof global?global:self,Ps=Ts.MutationObserver||Ts.WebKitMutationObserver;function Cs(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}_s="function"==typeof Ps?function(e){var t=1,n=new Ps(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(Qs):Cs(Qs),Ss.requestFlush=_s,Ss.makeRequestCallFromTimer=Cs;var Ns=[],$s=[],As=Ss.makeRequestCallFromTimer((function(){if($s.length)throw $s.shift()}));function Rs(e){var t;(t=Ns.length?Ns.pop():new js).task=e,Ss(t)}var js=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){Rs.onerror?Rs.onerror(e):($s.push(e),As())}finally{this.task=null,Ns[Ns.length]=this}},e}();function Ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ws(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ls(e){var t=(ys++).toString();switch(e){case zi.SOURCE:return"S".concat(t);case zi.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Vs(e){switch(e[0]){case"S":return zi.SOURCE;case"T":return zi.TARGET;default:Ji(!1,"Cannot parse handler ID: ".concat(e))}}function Zs(e,t){var n=e.entries(),r=!1;do{var i=n.next(),o=i.done;if(Ws(i.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var Xs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Is(this,"types",new Map),Is(this,"dragSources",new Map),Is(this,"dropTargets",new Map),Is(this,"pinnedSourceId",null),Is(this,"pinnedSource",null),Is(this,"store",void 0),this.store=t}var t,n,r;return t=e,n=[{key:"addSource",value:function(e,t){ws(e),function(e){Ji("function"==typeof e.canDrag,"Expected canDrag to be a function."),Ji("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Ji("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(zi.SOURCE,e,t);return this.store.dispatch(function(e){return{type:Ho,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){ws(e,!0),function(e){Ji("function"==typeof e.canDrop,"Expected canDrop to be a function."),Ji("function"==typeof e.hover,"Expected hover to be a function."),Ji("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(zi.TARGET,e,t);return this.store.dispatch(function(e){return{type:Ko,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return Zs(this.dragSources,e)||Zs(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ji(this.isSourceId(e),"Expected a valid source ID.");var n=t&&e===this.pinnedSourceId,r=n?this.pinnedSource:this.dragSources.get(e);return r}},{key:"getTarget",value:function(e){return Ji(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Ji(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Ji(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return Vs(e)===zi.SOURCE}},{key:"isTargetId",value:function(e){return Vs(e)===zi.TARGET}},{key:"removeSource",value:function(e){var t=this;Ji(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:Jo,payload:{sourceId:e}}}(e)),Rs((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){Ji(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:es,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Ji(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Ji(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=Ls(e);return this.types.set(r,t),e===zi.SOURCE?this.dragSources.set(r,n):e===zi.TARGET&&this.dropTargets.set(r,n),r}}],n&&Ds(t.prototype,n),r&&Ds(t,r),e}();function Us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Bs(r),o=new bs(i,new Xs(i)),s=new Do(i,o),a=e(s,t,n);return s.receiveBackend(a),s}function Bs(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Zo(ms,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var qs=["children"];function Ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gs(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Fs=0,Hs=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Ks=i((function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Js(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[Hs]||(i[Hs]={dragDropManager:Us(e,t,n,r)});return i[Hs]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(Gs(e,qs)),r=Ys(n,2),i=r[0],o=r[1];return l((function(){if(o){var e=Js();return++Fs,function(){0==--Fs&&(e[Hs]=null)}}}),[]),Xi.exports.jsx(Zi.Provider,Object.assign({value:i},{children:t}),void 0)}));function Js(){return"undefined"!=typeof global?global:window}var ea=i((function(e){var t=e.connect,n=e.src;return l((function(){if("undefined"!=typeof Image){var e=!1,r=new Image;return r.src=n,r.onload=function(){t(r),e=!0},function(){e&&t(null)}}})),null}));function ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ra=!1,ia=!1,oa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),na(this,"internalMonitor",void 0),na(this,"sourceId",null),this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Ji(!ra,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ra=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ra=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Ji(!ia,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ia=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ia=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&ta(t.prototype,n),r&&ta(t,r),e}();function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la=!1,ca=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aa(this,"internalMonitor",void 0),aa(this,"targetId",null),this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Ji(!la,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return la=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{la=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&sa(t.prototype,n),r&&sa(t,r),e}();function ua(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function ha(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!c(t)){var r=t;return e(r,n),r}var i=t;ua(i);var o=n?function(t){return e(t,n)}:e;return fa(i,o)}}(r);t[n]=function(){return i}}})),t}function da(e,t){"function"==typeof e?e(t):e.current=t}function fa(e,t){var n=e.ref;return Ji("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),u(e,n?{ref:function(e){da(n,e),da(t,e)}}:{ref:t})}function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function ma(e){return null!==e&&"object"===pa(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function ga(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),va(this,"hooks",ha({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,ma(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,ma(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}})),va(this,"handlerId",null),va(this,"dragSourceRef",null),va(this,"dragSourceNode",void 0),va(this,"dragSourceOptionsInternal",null),va(this,"dragSourceUnsubscribe",void 0),va(this,"dragPreviewRef",null),va(this,"dragPreviewNode",void 0),va(this,"dragPreviewOptionsInternal",null),va(this,"dragPreviewUnsubscribe",void 0),va(this,"lastConnectedHandlerId",null),va(this,"lastConnectedDragSource",null),va(this,"lastConnectedDragSourceOptions",null),va(this,"lastConnectedDragPreview",null),va(this,"lastConnectedDragPreviewOptions",null),va(this,"backend",void 0),this.backend=t}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!ga(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!ga(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}])&&Oa(t.prototype,n),r&&Oa(t,r),e}();function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wa=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xa(this,"hooks",ha({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,ma(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}})),xa(this,"handlerId",null),xa(this,"dropTargetRef",null),xa(this,"dropTargetNode",void 0),xa(this,"dropTargetOptionsInternal",null),xa(this,"unsubscribeDropTarget",void 0),xa(this,"lastConnectedHandlerId",null),xa(this,"lastConnectedDropTarget",null),xa(this,"lastConnectedDropTargetOptions",null),xa(this,"backend",void 0),this.backend=t}var t,n,r;return t=e,(n=[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!ga(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}])&&ya(t.prototype,n),r&&ya(t,r),e}();var Sa="undefined"!=typeof window?h:l;function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qa=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ea(this,"spec",void 0),Ea(this,"monitor",void 0),Ea(this,"connector",void 0),this.spec=t,this.monitor=n,this.connector=r}var t,n,r;return t=e,(n=[{key:"beginDrag",value:function(){var e,t=this.spec,n=this.monitor;return null!==(e="object"===_a(t.item)?t.item:"function"==typeof t.item?t.item(n):{})&&void 0!==e?e:null}},{key:"canDrag",value:function(){var e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}},{key:"isDragging",value:function(e,t){var n=this.spec,r=this.monitor,i=n.isDragging;return i?i(r):t===e.getSourceId()}},{key:"endDrag",value:function(){var e=this.spec,t=this.monitor,n=this.connector,r=e.end;r&&r(t.getItem(),t),n.reconnect()}}])&&ka(t.prototype,n),r&&ka(t,r),e}();function Ta(){var e=f(Zi).dragDropManager;return Ji(null!=e,"Expected drag drop context"),e}function Pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Na(e,t,n){var r=Ta(),i=function(e,t,n){var r=d((function(){return new Qa(e,t,n)}),[t,n]);return l((function(){r.spec=e}),[e]),r}(e,t,n),o=function(e){return d((function(){var t=e.type;return Ji(null!=t,"spec.type must be defined"),t}),[e])}(e);Sa((function(){if(null!=o){var e=function(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return[i,function(){return r.removeSource(i)}]}(o,i,r),s=Pa(e,2),a=s[0],l=s[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),l}}),[r,t,n,i,o])}function $a(e){return function(e){if(Array.isArray(e))return Aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e,t){var n=$a(t||[]);return null==t&&"function"!=typeof e&&n.push(e),d((function(){return"function"==typeof e?e():e}),n)}var ja=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n};function Da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wa(e,n,r){var i=Da(t((function(){return n(e)})),2),o=i[0],s=i[1],a=p((function(){var t=n(e);ja(o,t)||(s(t),r&&r())}),[o,e,r]);return Sa(a),[o,a]}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return La(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return La(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function La(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Va(e,t,n){return function(e,t,n){var r=Ma(Wa(e,t,n),2),i=r[0],o=r[1];return Sa((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),i}(t,e||function(){return{}},(function(){return n.reconnect()}))}function Za(e){return d((function(){return e.hooks.dragSource()}),[e])}function Xa(e){return d((function(){return e.hooks.dragPreview()}),[e])}function Ua(e,t){var n=Ra(e,t);Ji(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var r,i=(r=Ta(),d((function(){return new oa(r)}),[r])),o=function(e,t){var n=Ta(),r=d((function(){return new ba(n.getBackend())}),[n]);return Sa((function(){return r.dragSourceOptions=e||null,r.reconnect(),function(){return r.disconnectDragSource()}}),[r,e]),Sa((function(){return r.dragPreviewOptions=t||null,r.reconnect(),function(){return r.disconnectDragPreview()}}),[r,t]),r}(n.options,n.previewOptions);return Na(n,i,o),[Va(n.collect,i,o),Za(o),Xa(o)]}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ya=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qa(this,"spec",void 0),qa(this,"monitor",void 0),this.spec=t,this.monitor=n}var t,n,r;return t=e,(n=[{key:"canDrop",value:function(){var e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}},{key:"hover",value:function(){var e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}},{key:"drop",value:function(){var e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}}])&&Ba(t.prototype,n),r&&Ba(t,r),e}();function za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ga(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fa(e,t,n){var r=Ta(),i=function(e,t){var n=d((function(){return new Ya(e,t)}),[t]);return l((function(){n.spec=e}),[e]),n}(e,t),o=function(e){var t=e.accept;return d((function(){return Ji(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]}),[t])}(e);Sa((function(){var e=function(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return[i,function(){return r.removeTarget(i)}]}(o,i,r),s=za(e,2),a=s[0],l=s[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),l}),[r,t,i,n,o.map((function(e){return e.toString()})).join("|")])}function Ha(e){return d((function(){return e.hooks.dropTarget()}),[e])}function Ka(e,t){var n,r=Ra(e,t),i=(n=Ta(),d((function(){return new ca(n)}),[n])),o=function(e){var t=Ta(),n=d((function(){return new wa(t.getBackend())}),[t]);return Sa((function(){return n.dropTargetOptions=e||null,n.reconnect(),function(){return n.disconnectDropTarget()}}),[e]),n}(r.options);return Fa(r,i,o),[Va(r.collect,i,o),Ha(o)]}function Ja(e){var t=null;return function(){return null==t&&(t=e()),t}}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tl(this,"entered",[]),tl(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}var t,n,r;return t=e,n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e){return i.push(e)})),i}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}],n&&el(t.prototype,n),r&&el(t,r),e}(),rl=Ja((function(){return/firefox/i.test(navigator.userAgent)})),il=Ja((function(){return Boolean(window.safari)}));function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var al=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sl(this,"xs",void 0),sl(this,"ys",void 0),sl(this,"c1s",void 0),sl(this,"c2s",void 0),sl(this,"c3s",void 0);for(var r=t.length,i=[],o=0;o<r;o++)i.push(o);i.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var s,a,l=[],c=[],u=0;u<r-1;u++)s=t[u+1]-t[u],a=n[u+1]-n[u],l.push(s),c.push(a/s);for(var h=[c[0]],d=0;d<l.length-1;d++){var f=c[d],p=c[d+1];if(f*p<=0)h.push(0);else{s=l[d];var m=l[d+1],g=s+m;h.push(3*g/((g+m)/f+(g+s)/p))}}h.push(c[c.length-1]);for(var O,v=[],b=[],y=0;y<h.length-1;y++){O=c[y];var x=h[y],w=1/l[y],S=x+h[y+1]-O-O;v.push((O-x-S)*w),b.push(S*w*w)}this.xs=t,this.ys=n,this.c1s=h,this.c2s=v,this.c3s=b}var t,n,r;return t=e,n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,o=this.c3s,s=t.length-1;if(e===t[s])return n[s];for(var a,l=0,c=o.length-1;l<=c;){var u=t[a=Math.floor(.5*(l+c))];if(u<e)l=a+1;else{if(!(u>e))return n[a];c=a-1}}var h=e-t[s=Math.max(0,c)],d=h*h;return n[s]+r[s]*h+i[s]*d+o[s]*h*d}}],n&&ol(t.prototype,n),r&&ol(t,r),e}();function ll(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function cl(e){return{x:e.clientX,y:e.clientY}}function ul(e,t,n,r,i){var o,s,a,l="IMG"===(o=t).nodeName&&(rl()||!(null!==(s=document.documentElement)&&void 0!==s&&s.contains(o))),c=ll(l?e:t),u={x:n.x-c.x,y:n.y-c.y},h=e.offsetWidth,d=e.offsetHeight,f=r.anchorX,p=r.anchorY,m=function(e,t,n,r){var i=e?t.width:n,o=e?t.height:r;return il()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(l,t,h,d),g=m.dragPreviewWidth,O=m.dragPreviewHeight,v=i.offsetX,b=i.offsetY,y=0===b||b;return{x:0===v||v?v:new al([0,.5,1],[u.x,u.x/h*g,u.x+g-h]).interpolate(f),y:y?b:(a=new al([0,.5,1],[u.y,u.y/d*O,u.y+O-d]).interpolate(p),il()&&l&&(a+=(window.devicePixelRatio-1)*O),a)}}var hl,dl="__NATIVE_FILE__",fl="__NATIVE_URL__",pl="__NATIVE_TEXT__",ml="__NATIVE_HTML__",gl=Object.freeze({__proto__:null,FILE:dl,URL:fl,TEXT:pl,HTML:ml});function Ol(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bl=(vl(hl={},dl,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),vl(hl,ml,{exposeProperties:{html:function(e,t){return Ol(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),vl(hl,fl,{exposeProperties:{urls:function(e,t){return Ol(e,t,"").split("\n")},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),vl(hl,pl,{exposeProperties:{text:function(e,t){return Ol(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),hl);function yl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xl(this,"item",void 0),xl(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&yl(t.prototype,n),r&&yl(t,r),e}();function Sl(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(bl).filter((function(e){return bl[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var El=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kl(this,"ownerDocument",null),kl(this,"globalContext",void 0),kl(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=n}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){var e;return null!==(e=this.globalContext)&&void 0!==e&&e.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}}])&&_l(t.prototype,n),r&&_l(t,r),e}();function Ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(n),!0).forEach((function(t){Cl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nl=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Cl(this,"options",void 0),Cl(this,"actions",void 0),Cl(this,"monitor",void 0),Cl(this,"registry",void 0),Cl(this,"enterLeaveCounter",void 0),Cl(this,"sourcePreviewNodes",new Map),Cl(this,"sourcePreviewNodeOptions",new Map),Cl(this,"sourceNodes",new Map),Cl(this,"sourceNodeOptions",new Map),Cl(this,"dragStartSourceIds",null),Cl(this,"dropTargetIds",[]),Cl(this,"dragEnterTargetIds",[]),Cl(this,"currentNativeSource",null),Cl(this,"currentNativeHandle",null),Cl(this,"currentDragSourceNode",null),Cl(this,"altKeyPressed",!1),Cl(this,"mouseMoveTimeoutTimer",null),Cl(this,"asyncEndDragFrameId",null),Cl(this,"dragOverTargetIds",null),Cl(this,"lastClientOffset",null),Cl(this,"hoverRafId",null),Cl(this,"getSourceClientOffset",(function(e){var t=i.sourceNodes.get(e);return t&&ll(t)||null})),Cl(this,"endDragNativeItem",(function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)})),Cl(this,"isNodeInDocument",(function(e){return Boolean(e&&i.document&&i.document.body&&i.document.body.contains(e))})),Cl(this,"endDragIfSourceWasRemovedFromDOM",(function(){var e=i.currentDragSourceNode;null==e||i.isNodeInDocument(e)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()})),Cl(this,"handleTopDragStartCapture",(function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]})),Cl(this,"handleTopDragStart",(function(e){if(!e.defaultPrevented){var t=i.dragStartSourceIds;i.dragStartSourceIds=null;var n=cl(e);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:n});var r=e.dataTransfer,o=Sl(r);if(i.monitor.isDragging()){if(r&&"function"==typeof r.setDragImage){var s=i.monitor.getSourceId(),a=i.sourceNodes.get(s),l=i.sourcePreviewNodes.get(s)||a;if(l){var c=i.getCurrentSourcePreviewNodeOptions(),u=ul(a,l,n,{anchorX:c.anchorX,anchorY:c.anchorY},{offsetX:c.offsetX,offsetY:c.offsetY});r.setDragImage(l,u.x,u.y)}}try{null==r||r.setData("application/json",{})}catch(e){}i.setCurrentDragSourceNode(e.target),i.getCurrentSourcePreviewNodeOptions().captureDraggingState?i.actions.publishDragSource():setTimeout((function(){return i.actions.publishDragSource()}),0)}else if(o)i.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}})),Cl(this,"handleTopDragEndCapture",(function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()})),Cl(this,"handleTopDragEnterCapture",(function(e){if(i.dragEnterTargetIds=[],i.enterLeaveCounter.enter(e.target)&&!i.monitor.isDragging()){var t=e.dataTransfer,n=Sl(t);n&&i.beginDragNativeItem(n,t)}})),Cl(this,"handleTopDragEnter",(function(e){var t=i.dragEnterTargetIds;(i.dragEnterTargetIds=[],i.monitor.isDragging())&&(i.altKeyPressed=e.altKey,t.length>0&&i.actions.hover(t,{clientOffset:cl(e)}),t.some((function(e){return i.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())))})),Cl(this,"handleTopDragOverCapture",(function(){i.dragOverTargetIds=[]})),Cl(this,"handleTopDragOver",(function(e){var t=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));i.altKeyPressed=e.altKey,i.lastClientOffset=cl(e),null===i.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(i.hoverRafId=requestAnimationFrame((function(){i.monitor.isDragging()&&i.actions.hover(t||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null}))),(t||[]).some((function(e){return i.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))})),Cl(this,"handleTopDragLeaveCapture",(function(e){i.isDraggingNativeItem()&&e.preventDefault(),i.enterLeaveCounter.leave(e.target)&&i.isDraggingNativeItem()&&setTimeout((function(){return i.endDragNativeItem()}),0)})),Cl(this,"handleTopDropCapture",(function(e){var t;(i.dropTargetIds=[],i.isDraggingNativeItem())?(e.preventDefault(),null===(t=i.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Sl(e.dataTransfer)&&e.preventDefault();i.enterLeaveCounter.reset()})),Cl(this,"handleTopDrop",(function(e){var t=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(t,{clientOffset:cl(e)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()})),Cl(this,"handleSelectStart",(function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))})),this.options=new El(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new nl(this.isNodeInDocument)}var t,n,r;return t=e,n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}},{key:"teardown",value:function(){var e,t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(e=this.window)||void 0===e||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var i=function(t){return r.handleDragStart(t,e)},o=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Tl({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return Tl({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(gl).some((function(t){return gl[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new wl(bl[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){var e;return null===(e=t.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){var e;return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.rootElement&&(null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}}],n&&Pl(t.prototype,n),r&&Pl(t,r),e}(),$l=function(e,t,n){return new Nl(e,t,n)},Al=[],Rl=[];function jl(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=Al.indexOf(o);-1===s&&(s=Al.push(o)-1,Rl[s]={}),n=Rl[s]&&Rl[s][r]?Rl[s][r]:Rl[s][r]=a()}else n=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var s="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(s,e),e}}var Dl={toolbar:"index_m_toolbar__248a8a34",actions:"index_m_actions__248a8a34",btnSave:"index_m_btnSave__248a8a34"};jl(".index_m_toolbar__248a8a34 {\n  position: fixed;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  background: var(--gray-50);\n  box-shadow: 0px 8px 24px 4px rgba(148, 163, 184, 0.25);\n}\n\n.index_m_toolbar__248a8a34 .index_m_actions__248a8a34 .index_m_btnSave__248a8a34 {\n  margin-right: 16px;\n}",{});const Il=()=>n.createElement("div",{className:"w-1 h-20 bg-gray-200 mx-16"});var Wl=Vi((function({docLink:e="",hideTestPreview:r}){const i=WA(),{page:o,designer:s,registry:a}=i,[c,u]=t(!1),[h,f]=t([]),[p,m]=t(0),g=d((()=>({"ofa-ui@latest":a.toComponentMap()})),[]);function O(){var e;const t=Kn(o.schema);window.__isDev__&&console.log("save page schema: ",t),null==(e=i.onSave)||e.call(i,t)}function v(){return h.length>1&&p<h.length-1}function S(){return h.length>1&&p>0&&p<h.length}return l((()=>{const e=function(e,t,n){var r;void 0===n&&(n=fe);var i,o,s,a,l=null!=(r=n.name)?r:"Reaction",c=Nn(l,n.onError?(i=n.onError,o=t,function(){try{return o.apply(this,arguments)}catch(e){i.call(this,e)}}):t),u=!n.scheduler&&!n.delay,h=jn(n),d=!0,f=!1,p=n.compareStructural?Ge.structural:n.equals||Ge.default,m=new vn(l,(function(){d||u?g():f||(f=!0,h(g))}),n.onError,n.requiresObservable);function g(){if(f=!1,!m.isDisposed_){var t=!1;m.track((function(){var n=Lt(!1,(function(){return e(m)}));t=d||!p(s,n),a=s,s=n})),(d&&n.fireImmediately||!d&&t)&&c(s,a,m),d=!1}}return m.schedule_(),m.getDisposer_()}((()=>JSON.stringify(Kn(o.schema))),(e=>{f((t=>t[0]===e?t:50===t.length?[e,...t.slice(0,-1)]:[e,...t]))}));return e}),[]),n.createElement("div",{className:ie("bg-gray-50 h-44 flex justify-between items-center px-16",Dl.toolbar)},n.createElement("div",{className:Dl.brand},s.vdoms.title),n.createElement("div",{className:ie("flex items-center",Dl.actions)},n.createElement(b,{position:"top",label:"撤销"},n.createElement(y,{name:"undo",className:"mr-16",clickable:v(),disabled:!v(),onClick:function(){m((e=>{const t=e<h.length-1?e+1:h.length-1;return e!==t&&t>0&&o.setSchema(JSON.parse(h[t])),t}))}})),n.createElement(b,{position:"top",label:"重做"},n.createElement(y,{name:"redo",clickable:S(),disabled:!S(),onClick:function(){m((e=>{const t=e>0?e-1:0;return e!==t&&o.setSchema(JSON.parse(h[t])),t}))}})),n.createElement(Il,null),n.createElement(b,{position:"top",label:"点击前往查看如何使用页面设计器"},n.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},n.createElement(y,{name:"help_doc",color:"gray",clickable:!0}))),window.__isDev__&&!r&&n.createElement(n.Fragment,null,n.createElement(Il,null),n.createElement(b,{position:"top",label:"测试预览"},n.createElement(y,{name:"eye-open",color:"gray",clickable:!0,onClick:()=>u(!0)}))),n.createElement(Il,null),n.createElement(x,{iconName:"preview",onClick:function(){var e;const t=Kn(o.schema);window.__isDev__&&console.log("preview render schema: ",t),null==(e=i.onSave)||e.call(i,t,{draft:!0,silent:!0});const n=document.createElement("a");Object.assign(n,{href:location.href.replace(/\/page-design/,"/page-preview"),rel:"noopener noreferrer",target:"_blank"}),n.click()}},"预览"),n.createElement(Il,null),n.createElement(x,{iconName:"save",modifier:"primary",onClick:O,className:Dl.btnSave},"保存"),n.createElement(x,{iconName:"save",modifier:"primary",onClick:function(){O(),history.back()}},"保存并退出")),c&&n.createElement(w,{title:"测试预览",onClose:()=>u(!1),fullscreen:!0},function(){const e=Kn(o.schema);return window.__isDev__&&console.log("preview page schema: ",e),n.createElement(te,{schema:e,plugins:{repository:g}})}()))})),Ml="index_m_sourcePanel__22fa578c",Ll="index_m_group__22fa578c",Vl="index_m_active__22fa578c";function Zl(e){return n.createElement("div",{className:ie("flex flex-col items-center mb-20 cursor-pointer",{[Vl]:e.active},Ll,e.className),onClick:e.onHover},n.createElement(y,{name:e.icon,color:"gray",clickable:!0,changeable:!0}),n.createElement("p",{className:"text-gray-600 text-10"},e.label))}jl(".index_m_sourcePanel__22fa578c {\n  width: var(--pg-source-panel-wid);\n  background: var(--pg-panel-bg-color);\n  box-shadow: var(--pg-box-shadow);\n}\n\n.index_m_sourcePanel__22fa578c .index_m_group__22fa578c:first-of-type {\n  margin-top: 20px;\n}\n\n.index_m_sourcePanel__22fa578c .index_m_group__22fa578c.index_m_active__22fa578c p, .index_m_sourcePanel__22fa578c .index_m_group__22fa578c:hover p {\n  color: var(--blue-600);\n}\n\n.index_m_sourcePanel__22fa578c .index_m_group__22fa578c.index_m_active__22fa578c svg, .index_m_sourcePanel__22fa578c .index_m_group__22fa578c:hover svg {\n  color: var(--blue-600);\n  fill: var(--blue-400);\n}",{});const Xl=[{name:"comps",label:"组件库",icon:"application_management"},{name:"page_tree",label:"页面层级",icon:"option-set"},{name:"data_source",label:"数据源",icon:"database"}],Ul={comps:"平台组件库",templates:"区块模板",page_tree:"页面层级",data_source:"数据源"};var Bl="index_m_comps__68483ef9",ql="index_m_cate__68483ef9",Yl="index_m_title__68483ef9",zl="index_m_elems__68483ef9",Gl="index_m_sourceElem__68483ef9",Fl="index_m_dragging__68483ef9";jl(".index_m_comps__68483ef9 {\n  font-size: 12px;\n  line-height: 20px;\n}\n\n.index_m_comps__68483ef9 .index_m_cate__68483ef9 {\n  margin-bottom: 12px;\n}\n\n.index_m_comps__68483ef9 .index_m_cate__68483ef9 > .index_m_title__68483ef9 {\n  color: #94A3B8;\n}\n\n.index_m_comps__68483ef9 .index_m_cate__68483ef9 > .index_m_elems__68483ef9 {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 4px;\n}\n\n.index_m_sourceElem__68483ef9 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 60px;\n  height: 60px;\n  border: 1px solid #E2E8F0;\n  box-sizing: border-box;\n  border-radius: 4px;\n  cursor: pointer;\n  color: #475569;\n}\n\n.index_m_sourceElem__68483ef9:hover {\n  border: 1px dashed var(--blue-600);\n  background-color: var(--gray-100);\n}\n\n.index_m_sourceElem__68483ef9.index_m_dragging__68483ef9 {\n  opacity: 0.5;\n  cursor: move;\n}",{});var Hl=Object.defineProperty,Kl=Object.getOwnPropertySymbols,Jl=Object.prototype.hasOwnProperty,ec=Object.prototype.propertyIsEnumerable,tc=(e,t,n)=>t in e?Hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nc=(e,t)=>{for(var n in t||(t={}))Jl.call(t,n)&&tc(e,n,t[n]);if(Kl)for(var n of Kl(t))ec.call(t,n)&&tc(e,n,t[n]);return e};function rc(e){const{page:t,registry:r,designer:i}=WA(),o=e.name.toLowerCase();function s(n){const{defaultStyle:s,defaultConfig:a}=e;t.appendNode({exportName:o,label:r.getLabelByElemType(o),defaultConfig:Kn(a),defaultStyle:nc({},s)},n,{from:"source"}),!i.panelPinned&&i.setPanelOpen(!1)}const[{isDragging:a},l]=Ua((()=>({type:"source_elem",item:{exportName:o,label:e.label},collect:e=>({isDragging:e.isDragging()}),end:(e,n)=>{const r=n.getDropResult();(null==r?void 0:r.exportName)&&(window.__isDev__&&console.log("[source-elem] dropped %o onto: %o, pos: %s",e,r,t.dragPos),s(r))}})));return n.createElement("div",{className:ie(Gl,{[Fl]:a}),ref:l,onClick:()=>s()},n.createElement("div",{className:"w-full h-40 flex items-center justify-center bg-gray-50"},n.createElement(y,{name:e.icon||"insert_drive_file",size:48})),n.createElement("div",null,e.label))}var ic=Object.defineProperty,oc=Object.defineProperties,sc=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,lc=Object.prototype.hasOwnProperty,cc=Object.prototype.propertyIsEnumerable,uc=(e,t,n)=>t in e?ic(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const hc=[{label:"布局组件",value:"layout"},{label:"基础组件",value:"basic"},{label:"表单组件",value:"form"},{label:"高级组件",value:"advanced"},{label:"其它",value:"others"}];var dc=Vi((function(){const{registry:e}=WA();return n.createElement("div",{className:Bl},hc.map((({label:t,value:r})=>{const i=X(e.elements,r,[]);return Array.isArray(i)&&i.length?n.createElement("div",{className:ql,key:r},n.createElement("div",{className:Yl},t),n.createElement("div",{className:zl},i.map((e=>{return e.hidden?null:n.createElement(rc,(t=((e,t)=>{for(var n in t||(t={}))lc.call(t,n)&&uc(e,n,t[n]);if(ac)for(var n of ac(t))cc.call(t,n)&&uc(e,n,t[n]);return e})({},e),r={key:e.name},oc(t,sc(r))));var t,r})))):null})))}));var fc=r((function({rowHeight:e,indent:r,dropOverClassName:i,dropBetweenClassName:o},s){const[a,l]=t({type:"none",index:0,depth:0}),c=a.index*e;function u(){l({type:"none",index:0,depth:0})}return m(s,(()=>({setIndicatorState:l,clearIndicatorState:u}))),n.createElement("div",{title:a.depth.toString()},n.createElement("div",{style:{marginLeft:a.depth*r+"px",height:"over"===a.type?e:0,transform:`translate(0px, ${c}px)`,borderWidth:"between"===a.type?1:2},hidden:"none"===a.type,className:ie("outline-tree-node-indicator",{[`${i}`]:"over"===a.type,[`${o}`]:"between"===a.type})}))}));function pc(e){return U(e,(e=>"constant_property"===e.type?e.value:"shared_state_property"===e.type||"api_result_property"===e.type?e.fallback:"functional_property"===e.type?B:e))}function mc(e,t){return q(e,t,((e,t)=>e?"constant_property"===e.type?Object.assign({},e,{value:null!=t?t:e.value}):"shared_state_property"===e.type||"api_result_property"===e.type?Object.assign({},e,{fallback:t}):e:{type:"constant_property",value:t}))}function gc(){return gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gc.apply(this,arguments)}let Oc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<Oc.length;e++)Oc[e]+=Oc[e-1];function vc(e){for(let t=1;t<Oc.length;t+=2)if(Oc[t]>e)return Oc[t-1]<=e;return!1}function bc(e){return e>=127462&&e<=127487}function yc(e,t,n=!0,r=!0){return(n?xc:wc)(e,t,r)}function xc(e,t,n){if(t==e.length)return t;t&&Sc(e.charCodeAt(t))&&_c(e.charCodeAt(t-1))&&t--;let r=kc(e,t);for(t+=Qc(r);t<e.length;){let i=kc(e,t);if(8205==r||8205==i||n&&vc(i))t+=Qc(i),r=i;else{if(!bc(i))break;{let n=0,r=t-2;for(;r>=0&&bc(kc(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function wc(e,t,n){for(;t>0;){let r=xc(e,t-2,n);if(r<t)return r;t--}return 0}function Sc(e){return e>=56320&&e<57344}function _c(e){return e>=55296&&e<56320}function kc(e,t){let n=e.charCodeAt(t);if(!_c(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return Sc(r)?r-56320+(n-55296<<10)+65536:n}function Ec(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Qc(e){return e<65536?1:2}function Tc(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=yc(e,i));return r}function Pc(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=yc(e,r)}return!0===r?-1:e.length}class Cc{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),$c.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),$c.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new jc(this),i=new jc(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new jc(this,e)}iterRange(e,t=this.length){return new Dc(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ic(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Nc(e):$c.from(Nc.split(e,[])):Cc.empty}}class Nc extends Cc{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Wc(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new Nc(Rc(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=Ac(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new Nc(t,e.length+i.length));else{let e=t.length>>1;n.push(new Nc(t.slice(0,e)),new Nc(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof Nc))return super.replace(e,t,n);let r=Ac(this.text,Ac(n.text,Rc(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new Nc(r,i):$c.from(Nc.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new Nc(n,r)),n=[],r=-1);return r>-1&&t.push(new Nc(n,r)),t}}class $c extends Cc{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new $c(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof $c))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new Nc(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof $c)for(let t of e.children)u(t);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof Nc&&a&&(t=c[c.length-1])instanceof Nc&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new Nc(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:$c.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return h(),1==s.length?s[0]:new $c(s,t)}}function Ac(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function Rc(e,t,n){return Ac(e,[""],t,n)}Cc.empty=new Nc([""],0);class jc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Nc?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof Nc?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof Nc){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof Nc?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Dc{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new jc(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Ic{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Cc.prototype[Symbol.iterator]=function(){return this.iter()},jc.prototype[Symbol.iterator]=Dc.prototype[Symbol.iterator]=Ic.prototype[Symbol.iterator]=function(){return this});class Wc{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}const Mc=/\r\n?|\n/;var Lc=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Lc||(Lc={}));class Vc{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){Bc(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Vc(e)}composeDesc(e){return this.empty?e:e.empty?this:Yc(this,e)}mapDesc(e,t=!1){return e.empty?this:qc(this,e,t)}mapPos(e,t=-1,n=Lc.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=Lc.Simple&&l>=e&&(n==Lc.TrackDel&&r<e&&l>e||n==Lc.TrackBefore&&r<e||n==Lc.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vc(e)}}class Zc extends Vc{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Bc(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return qc(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Cc.empty);n.push(o?e.slice(i,i+o):Cc.empty)}i+=o}return new Zc(t,n)}compose(e){return this.empty?e:e.empty?this:Yc(this,e,!0)}map(e,t=!1){return e.empty?this:qc(this,e,t,!0)}iterChanges(e,t=!1){Bc(this,e,t)}get desc(){return new Vc(this.sections)}filter(e){let t=[],n=[],r=[],i=new zc(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);Xc(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;Xc(t,e,o),o>0&&Uc(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);Xc(t,e,-1),Xc(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new Zc(t,n),filtered:new Vc(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&Xc(r,t-o,-1);let n=new Zc(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof Zc){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Cc.of(c.split(n||Mc)):c:Cc.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&Xc(r,e-o,-1),Xc(r,s-e,h),Uc(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new Zc(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Cc.empty);n[r]=Cc.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new Zc(t,n)}}function Xc(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function Uc(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Cc.empty);e.push(n)}}function Bc(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Cc.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function qc(e,t,n,r=!1){let i=[],o=r?[]:null,s=new zc(e),a=new zc(t);for(let e=0,t=0;;)if(-1==s.ins)e+=s.len,s.next();else if(-1==a.ins&&t<e){let n=Math.min(a.len,e-t);a.forward(n),Xc(i,n,-1),t+=n}else if(a.ins>=0&&(s.done||t<e||t==e&&(a.len<s.len||a.len==s.len&&!n))){for(Xc(i,a.ins,-1);e>t&&!s.done&&e+s.len<t+a.len;)e+=s.len,s.next();t+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?new Zc(i,o):new Vc(i);throw new Error("Mismatched change set lengths")}{let n=0,r=e+s.len;for(;;)if(a.ins>=0&&t>e&&t+a.len<r)n+=a.ins,t+=a.len,a.next();else{if(!(-1==a.ins&&t<r))break;{let e=Math.min(a.len,r-t);n+=e,a.forward(e),t+=e}}Xc(i,n,s.ins),o&&Uc(o,i,s.text),e=r,s.next()}}}function Yc(e,t,n=!1){let r=[],i=n?[]:null,o=new zc(e),s=new zc(t);for(let e=!1;;){if(o.done&&s.done)return i?new Zc(r,i):new Vc(r);if(0==o.ins)Xc(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;Xc(r,t,n,e),i&&n&&Uc(i,r,s.text)}else-1==s.ins?(Xc(r,o.off?0:o.len,t,e),i&&Uc(i,r,o.textBit(t))):(Xc(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&Uc(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else Xc(r,0,s.ins,e),i&&Uc(i,r,s.text),s.next()}}class zc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Cc.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Cc.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Gc{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Gc(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Fc.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Fc.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Fc.range(e.anchor,e.head)}}class Fc{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Fc.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Fc([this.main])}addRange(e,t=!0){return Fc.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Fc.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Fc(e.ranges.map((e=>Gc.fromJSON(e))),e.main)}static single(e,t=e){return new Fc([Fc.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return Hc(e.slice(),t);n=i.to}return new Fc(e,t)}static cursor(e,t=0,n,r){return new Gc(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n){let r=(null!=n?n:33554431)<<5;return t<e?new Gc(t,e,24|r):new Gc(e,t,r|(t>e?4:0))}}function Hc(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?Fc.range(s,o):Fc.range(o,s))}}return new Fc(e,t)}function Kc(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Jc=0;class eu{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.extensions=i,this.id=Jc++,this.default=e([])}static define(e={}){return new eu(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:tu),!!e.static,e.enables)}of(e){return new nu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new nu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new nu(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function tu(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class nu{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Jc++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||c.some((t=>(1&vu(e,t))>0))){let t=n(e);if(s?!ru(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure(e,t){let a=n(e),l=t.config.address[i];if(null!=l){let n=bu(t,l);if(s?ru(a,n,r):r(a,n))return e.values[o]=n,0}return e.values[o]=a,1}}}}function ru(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function iu(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=bu(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)vu(e,t);return e.values[s]=a(e),1},update(e,n){if(!o.some((t=>1&vu(e,t))))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=r.some((t=>1&vu(e,t))),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&tu(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const ou=eu.define({static:!0});class su{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new su(Jc++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ou).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,ou.of({field:this,create:e})]}get extension(){return this}}const au=4,lu=3,cu=2,uu=1,hu=0;function du(e){return t=>new pu(t,e)}const fu={lowest:du(au),low:du(lu),default:du(cu),high:du(uu),highest:du(hu),fallback:du(au),extend:du(uu),override:du(hu)};class pu{constructor(e,t){this.inner=e,this.prec=t}}class mu{of(e){return new gu(this,e)}reconfigure(e){return mu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class gu{constructor(e,t){this.compartment=e,this.inner=t}}class Ou{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a>=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof gu&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof gu){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof pu)o(e.inner,e.prec);else if(e instanceof su)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof nu)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,cu),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))n instanceof su?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=c&&c[e]||[];if(t.every((e=>0==e.type)))if(s[r.id]=a.length<<1|1,tu(o,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[r.id]=l.length<<1,l.push((e=>iu(e,r,t)))}}let u=l.map((e=>e(s)));return new Ou(e,o,u,s,a,i)}}function vu(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function bu(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const yu=eu.define(),xu=eu.define({combine:e=>e.some((e=>e)),static:!0}),wu=eu.define({combine:e=>e.length?e[0]:void 0,static:!0}),Su=eu.define(),_u=eu.define(),ku=eu.define(),Eu=eu.define({combine:e=>!!e.length&&e[0]});class Qu{constructor(e,t){this.type=e,this.value=t}static define(){return new Tu}}class Tu{of(e){return new Qu(this,e)}}class Pu{constructor(e){this.map=e}of(e){return new Cu(this,e)}}class Cu{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Cu(this.type,t)}is(e){return this.type==e}static define(e={}){return new Pu(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Cu.reconfigure=Cu.define(),Cu.appendConfig=Cu.define();class Nu{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&Kc(n,t.newLength),i.some((e=>e.type==Nu.time))||(this.annotations=i.concat(Nu.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Nu.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function $u(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Au(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=Zc.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Cu.mapEffects(e.effects,i).concat(Cu.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Ru(e,t,n){let r=t.selection,i=Iu(t.annotations);return t.userEvent&&(i=i.concat(Nu.userEvent.of(t.userEvent))),{changes:t.changes instanceof Zc?t.changes:Zc.of(t.changes||[],n,e.facet(wu)),selection:r&&(r instanceof Fc?r:Fc.single(r.anchor,r.head)),effects:Iu(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function ju(e,t,n){let r=Ru(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=Au(r,Ru(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=new Nu(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(ku),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=Au(e,Ru(t,o,e.changes.newLength),!0))}return r==e?e:new Nu(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(Su)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:$u(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=Zc.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.invertedDesc}e=new Nu(t,r,e.selection&&e.selection.map(i),Cu.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(_u);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof Nu?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Nu?i[0]:ju(t,Iu(i),!1)}return e}(i):i)}Nu.time=Qu.define(),Nu.userEvent=Qu.define(),Nu.addToHistory=Qu.define(),Nu.remote=Qu.define();const Du=[];function Iu(e){return null==e?Du:Array.isArray(e)?e:[e]}var Wu=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Wu||(Wu={}));const Mu=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Lu;try{Lu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function Vu(e){return t=>{if(!/\S/.test(t))return Wu.Space;if(function(e){if(Lu)return Lu.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Mu.test(n)))return!0}return!1}(t))return Wu.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Wu.Word;return Wu.Other}}class Zu{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)vu(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return vu(this,n),bu(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return ju(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(mu.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(Cu.reconfigure)?(n=null,r=t.value):t.is(Cu.appendConfig)&&(n=null,r=Iu(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=Ou.resolve(r,i,this),t=new Zu(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new Zu(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:Fc.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=Iu(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=Cu.mapEffects(o,l).concat(Cu.mapEffects(Iu(s.effects),c))}return{changes:r,selection:Fc.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Zc?e:Zc.of(e,this.doc.length,this.facet(Zu.lineSeparator))}toText(e){return Cc.of(e.split(this.facet(Zu.lineSeparator)||Mc))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(vu(this,t),bu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof su&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n){let i=n[t],o=e[t];r.push(i.init((e=>i.spec.fromJSON(o,e))))}return Zu.create({doc:e.doc,selection:Fc.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ou.resolve(e.extensions||[],new Map),n=e.doc instanceof Cc?e.doc:Cc.of((e.doc||"").split(t.staticFacet(Zu.lineSeparator)||Mc)),r=e.selection?e.selection instanceof Fc?e.selection:Fc.single(e.selection.anchor,e.selection.head):Fc.single(0);return Kc(r,n.length),t.staticFacet(xu)||(r=r.asSingle()),new Zu(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Zu.tabSize)}get lineBreak(){return this.facet(Zu.lineSeparator)||"\n"}get readOnly(){return this.facet(Eu)}phrase(e){for(let t of this.facet(Zu.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(yu))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Vu(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=yc(t,o,!1);if(i(t.slice(e,o))!=Wu.Word)break;o=e}for(;s<r;){let e=yc(t,s);if(i(t.slice(s,e))!=Wu.Word)break;s=e}return o==s?null:Fc.range(o+n,s+n)}}function Xu(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Zu.allowMultipleSelections=xu,Zu.tabSize=eu.define({combine:e=>e.length?e[0]:4}),Zu.lineSeparator=wu,Zu.readOnly=Eu,Zu.phrases=eu.define(),Zu.languageData=yu,Zu.changeFilter=Su,Zu.transactionFilter=_u,Zu.transactionExtender=ku,mu.reconfigure=Cu.define();const Uu="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Bu="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),qu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Yu{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=qu[Uu]||1;return qu[Uu]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[Bu]||new Gu(e)).mount(Array.isArray(t)?t:[t])}}let zu=null;class Gu{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(zu)return e.adoptedStyleSheets=[zu.sheet].concat(e.adoptedStyleSheets),e[Bu]=zu;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),zu=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Bu]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}class Fu{eq(e){return this==e}range(e,t=e){return new Hu(e,t,this)}}Fu.prototype.startSide=Fu.prototype.endSide=0,Fu.prototype.point=!1,Fu.prototype.mapMode=Lc.TrackDel;class Hu{constructor(e,t,n){this.from=e,this.to=t,this.value=n}}function Ku(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Ju{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new Ju(r,i,n,s):null,pos:o}}}class eh{constructor(e,t,n=eh.empty,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(Ku)),this.isEmpty)return t.length?eh.of(t):this;let s=new rh(this,null,-1).goto(0),a=0,l=[],c=new th;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(new Hu(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?eh.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new eh(n,t,i,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return ih.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ih.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=nh(o,s,n),l=new sh(o,a,i),c=new sh(s,a,i);n.iterGaps(((e,t,n)=>ah(l,e,c,t,n,r))),n.empty&&0==n.length&&ah(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=nh(i,o),a=new sh(i,s,0).goto(n),l=new sh(o,s,0).goto(n);for(;;){if(a.to!=l.to||!lh(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){var o;let s=new sh(e,null,i,null===(o=r.filterPoint)||void 0===o?void 0:o.bind(r)).goto(t),a=t,l=s.openStart;for(;;){let e=Math.min(s.to,n);if(s.point?(r.point(a,e,s.point,s.activeForPoint(s.to),l),l=s.openEnd(e)+(s.to>e?1:0)):e>a&&(r.span(a,e,s.active,l),l=s.openEnd(e)),s.to>n)break;a=s.to,s.next()}return l}static of(e,t=!1){let n=new th;for(let r of e instanceof Hu?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Ku(t,r)>0)return e.slice().sort(Ku);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}eh.empty=new eh([],[],null,-1),eh.empty.nextLayer=eh.empty;class th{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Ju(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new th)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(eh.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=new eh(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function nh(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class rh{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.to-e.to||this.endSide-e.endSide}}class ih{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new rh(o,t,n,i));return 1==r.length?r[0]:new ih(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)oh(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)oh(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),oh(this.heap,0)}}}function oh(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class sh{constructor(e,t,n,r=(()=>!0)){this.minPoint=n,this.filterPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ih.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ch(this.active,e),ch(this.activeTo,e),ch(this.activeRank,e),this.minActive=hh(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;uh(this.active,t,n),uh(this.activeTo,t,r),uh(this.activeRank,t,i),e&&uh(e,t,this.cursor.from),this.minActive=hh(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ch(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point)if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{if(this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.to>e&&this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function ah(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&lh(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!lh(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function lh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function ch(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function uh(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function hh(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}for(var dh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},fh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},ph="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),mh="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),gh="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Oh="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),vh="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),bh=ph&&(Oh||+ph[1]<57)||gh&&Oh,yh=0;yh<10;yh++)dh[48+yh]=dh[96+yh]=String(yh);for(yh=1;yh<=24;yh++)dh[yh+111]="F"+yh;for(yh=65;yh<=90;yh++)dh[yh]=String.fromCharCode(yh+32),fh[yh]=String.fromCharCode(yh);for(var xh in dh)fh.hasOwnProperty(xh)||(fh[xh]=dh[xh]);function wh(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Sh(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function _h(e,t){if(!t.anchorNode)return!1;try{return Sh(e,t.anchorNode)}catch(e){return!1}}function kh(e){return 3==e.nodeType?Ih(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Eh(e,t,n,r){return!!n&&(Th(e,t,n,r,-1)||Th(e,t,n,r,1))}function Qh(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Th(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Ph(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Qh(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?Ph(e):0}}}function Ph(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const Ch={left:0,right:0,top:0,bottom:0};function Nh(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function $h(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class Ah{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let Rh,jh=null;function Dh(e){if(e.setActive)return e.setActive();if(jh)return e.focus(jh);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==jh?{get preventScroll(){return jh={preventScroll:!0},!0}}:void 0),!jh){jh=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function Ih(e,t,n=t){let r=Rh||(Rh=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function Wh(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function Mh(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class Lh{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Lh(e.parentNode,Qh(e),t)}static after(e,t){return new Lh(e.parentNode,Qh(e)+1,t)}}const Vh=[];class Zh{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t=this.dom,n=t.firstChild;for(let r of this.children){if(r.dirty){if(!r.dom&&n){let e=Zh.get(n);e&&(e.parent||e.constructor!=r.constructor)||r.reuseDOM(n)}r.sync(e),r.dirty=0}if(e&&!e.written&&e.node==t&&n!=r.dom&&(e.written=!0),r.dom.parentNode==t){for(;n&&n!=r.dom;)n=Xh(n);n=r.dom.nextSibling}else t.insertBefore(r.dom,n)}for(n&&e&&e.node==t&&(e.written=!0);n;)n=Xh(n)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==Ph(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Zh.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Vh){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Uh(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function Xh(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Zh.prototype.breakAfter=0;class Uh{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Bh(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function qh(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,Bh(e,c,u,a,l,r,0,i,o)}let Yh="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},zh="undefined"!=typeof document?document:{documentElement:{style:{}}};const Gh=/Edge\/(\d+)/.exec(Yh.userAgent),Fh=/MSIE \d/.test(Yh.userAgent),Hh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yh.userAgent),Kh=!!(Fh||Hh||Gh),Jh=!Kh&&/gecko\/(\d+)/i.test(Yh.userAgent),ed=!Kh&&/Chrome\/(\d+)/.exec(Yh.userAgent),td="webkitFontSmoothing"in zh.documentElement.style,nd=!Kh&&/Apple Computer/.test(Yh.vendor),rd=nd&&(/Mobile\/\w+/.test(Yh.userAgent)||Yh.maxTouchPoints>2);var id={mac:rd||/Mac/.test(Yh.platform),windows:/Win/.test(Yh.platform),linux:/Linux|X11/.test(Yh.platform),ie:Kh,ie_version:Fh?zh.documentMode||6:Hh?+Hh[1]:Gh?+Gh[1]:0,gecko:Jh,gecko_version:Jh?+(/Firefox\/(\d+)/.exec(Yh.userAgent)||[0,0])[1]:0,chrome:!!ed,chrome_version:ed?+ed[1]:0,ios:rd,android:/Android\b/.test(Yh.userAgent),webkit:td,safari:nd,webkit_version:td?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=zh.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class od extends Zh{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof od&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new od(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Lh(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ad(this.dom,e,t)}}class sd extends Zh{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(Mh(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof sd&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(qh(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new sd(this.mark,t,o)}domAtPos(e){return fd(this.dom,this.children,e)}coordsAt(e,t){return md(this,e,t)}}function ad(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?id.chrome||id.gecko||(t?(i--,s=1):(o++,s=-1)):n<0?i--:o++;let a=Ih(e,i,o).getClientRects();if(!a.length)return Ch;let l=a[(s?s<0:n>=0)?0:a.length-1];return id.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?Nh(l,s<0):l||null}class ld extends Zh{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||ld)(e,t,n)}split(e){let t=ld.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof ld&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ld&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Cc.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Cc.empty}domAtPos(e){return 0==e?Lh.before(this.dom):Lh.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return Ch;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:Nh(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class cd extends ld{domAtPos(e){let{topView:t,text:n}=this.widget;return t?ud(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new Lh(n,Math.min(e,n.nodeValue.length)))):new Lh(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?hd(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?ud(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>ad(r,e,t))):ad(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function ud(e,t,n,r,i,o){if(n instanceof sd){for(let s of n.children){let n=Sh(s.dom,r),a=n?r.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return n?ud(e,t,s,r,i,o):i(s,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function hd(e,t,n,r){if(n instanceof sd)for(let i of n.children){let n=0,o=Sh(i.dom,r);if(Sh(i.dom,e))return n+(o?hd(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class dd extends Zh{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof dd&&e.side==this.side}split(){return new dd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Lh.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof od){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof sd&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return Cc.empty}}function fd(e,t,n){let r=0;for(let i=0;r<t.length;r++){let o=t[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==e)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return Lh.after(n)}return new Lh(e,0)}function pd(e,t,n){let r,{children:i}=e;n>0&&t instanceof sd&&i.length&&(r=i[i.length-1])instanceof sd&&r.mark.eq(t.mark)?pd(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function md(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let o,s=e.children[i],a=r+s.length;if((n<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(o=e.children[i+1]).length||o.getSide()>0)){let e=0;if(a==r){if(s.getSide()<=0)continue;e=n=-s.getSide()}let i=s.coordsAt(Math.max(0,t-r),n);return e&&i?Nh(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=kh(r);return i[i.length-1]||null}function gd(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Od(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function vd(e,t,n){if(t)for(let r in t)n&&r in n||e.removeAttribute(r);if(n)for(let r in n)t&&t[r]==n[r]||e.setAttribute(r,n[r])}od.prototype.children=ld.prototype.children=dd.prototype.children=Vh;class bd{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var yd=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(yd||(yd={}));class xd extends Fu{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new wd(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?4e8:-5e8:t>0?1e8:-1e8,new _d(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-4e8,n=3e8;else{let{start:i,end:o}=kd(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new _d(e,t,n,r,e.widget||null,!0)}static line(e){return new Sd(e)}static set(e,t=!1){return eh.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}xd.none=eh.empty;class wd extends xd{constructor(e){let{start:t,end:n}=kd(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof wd&&this.tagName==e.tagName&&this.class==e.class&&Od(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}wd.prototype.point=!1;class Sd extends xd{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Sd&&Od(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Sd.prototype.mapMode=Lc.TrackBefore,Sd.prototype.point=!0;class _d extends xd{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Lc.TrackBefore:Lc.TrackAfter:Lc.TrackDel}get type(){return this.startSide<this.endSide?yd.WidgetRange:this.startSide<=0?yd.WidgetBefore:yd.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof _d&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function kd(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function Ed(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}_d.prototype.point=!0;class Qd extends Zh{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof Qd))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),qh(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new Qd;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Od(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){pd(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=gd(t,this.attrs||{})),n&&(this.attrs=gd({class:n},this.attrs||{}))}domAtPos(e){return fd(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(Mh(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(vd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&Zh.get(n)instanceof sd;)n=n.lastChild;if(!n||"BR"!=n.nodeName&&0==(null===(t=Zh.get(n))||void 0===t?void 0:t.isEditable)&&(!id.ios||!this.children.some((e=>e instanceof od)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof od))return null;let n=kh(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return md(this,e,t)}become(e){return!1}get type(){return yd.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof Qd)return i;if(o>t)break}r=o+i.breakAfter}return null}}class Td extends Zh{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Td&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Lh.before(this.dom):Lh.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Td(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return Vh}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Cc.empty}domBoundsAround(){return null}become(e){return e instanceof Td&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Pd{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsBelow=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Td&&e.type==yd.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Qd),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Cd(new dd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(Cd(new od(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i){let o=t-e;if(n instanceof _d)if(n.block){let{type:e}=n;e!=yd.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Td(n.widget||new Nd("div"),o,e))}else{let s=ld.create(n.widget||new Nd("span"),o,n.startSide),a=this.atCursorPos&&!s.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!s.isEditable&&(e<t||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(Cd(new dd(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(Cd(s,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}filterPoint(e,t,n,r){if(r<this.disallowBlockEffectsBelow&&n instanceof _d){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}return!0}static build(e,t,n,r,i){let o=new Pd(e,t,n,i);return o.openEnd=eh.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Cd(e,t){for(let n of t)e=new sd(n,[e],e.length);return e}class Nd extends bd{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const $d=[],Ad=eu.define(),Rd=eu.define(),jd=eu.define(),Dd=eu.define(),Id=eu.define(),Wd=eu.define(),Md=Cu.define({map:(e,t)=>e.map(t)}),Ld=Cu.define({map:(e,t)=>e.map(t)});class Vd{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new Vd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Zd=Cu.define({map:(e,t)=>e.map(t)});function Xd(e,t,n){let r=e.facet(Dd);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Ud=eu.define({combine:e=>!e.length||e[0]});class Bd{constructor(e,t){this.field=e,this.get=t}}class qd{from(e){return new Bd(this,e)}static define(){return new qd}}qd.decorations=qd.define(),qd.atomicRanges=qd.define(),qd.scrollMargins=qd.define();let Yd=0;const zd=eu.define();class Gd{constructor(e,t,n){this.id=e,this.create=t,this.fields=n,this.extension=zd.of(this)}static define(e,t){let{eventHandlers:n,provide:r,decorations:i}=t||{},o=[];if(r)for(let e of Array.isArray(r)?r:[r])o.push(e);return n&&o.push(Fd.from((e=>({plugin:e,handlers:n})))),i&&o.push(qd.decorations.from(i)),new Gd(Yd++,e,o)}static fromClass(e,t){return Gd.define((t=>new e(t)),t)}}const Fd=qd.define();class Hd{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){if(this.spec)for(let{field:n,get:r}of this.spec.fields)n==e&&t.push(r(this.value))}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Xd(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xd(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Xd(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Kd=eu.define(),Jd=eu.define(),ef=eu.define(),tf=eu.define();class nf{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new nf(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new nf(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new nf(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class rf{constructor(e,t,n=$d){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Zc.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new nf(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var of=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(of||(of={}));const sf=of.LTR,af=of.RTL;function lf(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const cf=lf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),uf=lf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hf=Object.create(null),df=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);hf[t]=n,hf[n]=-t}const ff=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class pf{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?af:sf}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const mf=[];function gf(e){return[new pf(0,e,0)]}let Of="";function vf(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=pf.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=yc(e.text,s,c);if(Of=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return Fc.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?Fc.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):Fc.cursor(u+e.from,i?-1:1,l.level):Fc.cursor(i?e.to:e.from,i?-1:1,n)}const bf="￿";class yf{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Zu.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=bf}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=Zh.get(r),o=Zh.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:xf(r))||xf(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=Zh.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function xf(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class wf{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Sf extends Zh{constructor(e){super(),this.view=e,this.compositionDeco=xd.none,this.decorations=[],this.pluginDecorationLength=0,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Qd],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new nf(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=xd.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=kf(e);if(!n)return xd.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==o.nodeType?o.nodeValue:new yf([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),bf)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,bf)!=u)return xd.none;a=l-u.length}else if(c.doc.sliceString(a,l,bf)!=u)return xd.none;let h=Zh.get(o);h instanceof cd?h=h.widget.topView:h&&(h.parent=null);return xd.set(xd.replace({widget:new Ef(o,s,h)}).range(a,l))}(this.view,e.changes)),(id.ie||id.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new Tf;return eh.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=nf.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let e=id.chrome||id.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Td&&e.widget instanceof _f&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=Pd.build(this.view.state.doc,s,a,this.decorations,this.pluginDecorationLength),{i:d,off:f}=n.findPos(o,1),{i:p,off:m}=n.findPos(i,-1);Bh(this,p,m,d,f,l,c,u,h)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||id.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(id.gecko&&r.empty&&(1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new Lh(e,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&Eh(i.node,i.offset,a.anchorNode,a.anchorOffset)&&Eh(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{id.android&&id.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=wh(this.root);if(r.empty){if(id.gecko){let e=(t=i.node,n=i.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=Qf(i.node,i.offset,1==e?1:-1);t&&(i=new Lh(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(o.node,o.offset);else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}var t,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new Lh(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new Lh(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=wh(this.root);if(!e.empty||!e.assoc||!t.modify)return;let n=Qd.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!i||!o||i.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(Ud)?this.root.activeElement==this.dom:_h(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=Zh.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Qd)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=yd.WidgetBefore&&i.type!=yd.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==yd.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(){let e=[],{from:t,to:n}=this.view.viewState.viewport,r=this.view.contentDOM.clientWidth,i=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1;for(let s=0,a=0;a<this.children.length;a++){let l=this.children[a],c=s+l.length;if(c>n)break;if(s>=t){let t=l.dom.getBoundingClientRect();if(e.push(t.height),i){let e=l.dom.lastChild,n=e?kh(e):[];if(n.length){let e=n[n.length-1],i=this.view.textDirection==of.LTR?e.right-t.left:t.right-e.left;i>o&&(o=i,this.minWidth=r,this.minWidthFrom=s,this.minWidthTo=c)}}}s=c+l.breakAfter}return e}measureTextSize(){for(let e of this.children)if(e instanceof Qd){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=kh(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Uh(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(xd.replace({widget:new _f(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return xd.set(e)}updateDeco(){let e=this.view.pluginField(qd.decorations);return this.pluginDecorationLength=e.length,this.decorations=[...e,...this.view.state.facet(ef),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let e of this.view.pluginField(qd.scrollMargins))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=$h(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let d=0,f=0;if("nearest"==i)t.top<e.top?(f=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+f+s)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+s,n<0&&t.top-f<e.top&&(f=-(e.top+f-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;f=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(d=-(e.left-t.left+o),n>0&&t.right>e.right+d&&(d=t.right-e.right+d+o)):t.right>e.right&&(d=t.right-e.right+o,n<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+o))):d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,d||f)if(h)c.scrollBy(d,f);else{if(f){let e=u.scrollTop;u.scrollTop+=f,f=u.scrollTop-e}if(d){let e=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-e}t={left:t.left-d,top:t.top-f,right:t.right-d,bottom:t.bottom-f}}if(h)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==of.LTR)}}class _f extends bd{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function kf(e){let t=e.observer.selectionRange,n=t.focusNode&&Qf(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof Qd){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!Zh.get(t);)t=t.previousSibling;let i=t?Zh.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof Qd)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class Ef extends bd{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return cd}}function Qf(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=Ph(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}class Tf{constructor(){this.changes=[]}compareRange(e,t){Ed(e,t,this.changes)}comparePoint(e,t){Ed(e,t,this.changes)}}function Pf(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Cf(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Nf(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function $f(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Af(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Rf(e,t,n){let r,i,o,s,a,l,c,u;for(let h=e.firstChild;h;h=h.nextSibling){let e=kh(h);for(let d=0;d<e.length;d++){let f=e[d];i&&Nf(i,f)&&(f=$f(Af(f,i.bottom),i.top));let p=Pf(t,f),m=Cf(n,f);if(0==p&&0==m)return 3==h.nodeType?jf(h,t,n):Rf(h,t,n);(!r||s>m||s==m&&o>p)&&(r=h,i=f,o=p,s=m),0==p?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=h,c=f):n<f.top&&(!u||u.top>f.top)&&(l=h,u=f):c&&Nf(c,f)?c=Af(c,f.bottom):u&&Nf(u,f)&&(u=$f(u,f.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?jf(r,h,n):o||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:Rf(r,h,n)}function jf(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=Ih(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(id.chrome||id.gecko){Ih(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function Df(e,{x:t,y:n},r,i=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,u=n-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;s=e.elementAtHeight(u),s.type!=yd.Text;)for(;u=i>0?s.bottom+t:s.top-t,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:If(e,a,s,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:If(e,a,s,t,n);let d=e.dom.ownerDocument,f=e.root.elementFromPoint?e.root:d,p=f.elementFromPoint(t,n);p&&!e.contentDOM.contains(p)&&(p=null),p||(t=Math.max(a.left+1,Math.min(a.right-1,t)),p=f.elementFromPoint(t,n),p&&!e.contentDOM.contains(p)&&(p=null));let m,g=-1;if(p&&0!=(null===(o=e.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(d.caretPositionFromPoint){let e=d.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(d.caretRangeFromPoint){let e=d.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),id.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return Ih(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=Qd.find(e.docView,h);if(!r)return u>s.top+s.height/2?s.to:s.from;({node:m,offset:g}=Rf(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function If(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+Pc(s,o,e.state.tabSize)}function Wf(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i);for(let s=t,a=null;;){let t=vf(i,o,e.textDirection,s,n),l=Of;if(!t){if(i.number==(n?e.state.doc.lines:1))return s;l="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=Fc.cursor(n?i.from:i.to)}if(a){if(!a(l))return s}else{if(!r)return t;a=r(l)}s=t}}function Mf(e,t,n){let r=e.pluginField(qd.atomicRanges);for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.from>n.from?Fc.cursor(r,1):Fc.cursor(i,-1),e=!0)}));if(!e)return n}}class Lf{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Bf){let n=Bf[t];e.contentDOM.addEventListener(t,(r=>{"keydown"==t&&this.keydown(e,r)||Uf(e,r)&&!this.ignoreDuringComposition(r)&&(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r))})),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),id.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(Fd);for(let n of t)for(let t in n.handlers)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{Uf(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){Xd(t.state,e)}}return!1}runScrollHandlers(e,t){for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){Xd(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),this.screenKeyEvent(e,t))return!0;if(id.android&&id.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!id.ios||!(n=Vf.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Wh(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(id.safari&&Date.now()-this.compositionEndedAt<500)&&(this.compositionEndedAt=0,!0))}screenKeyEvent(e,t){let n=9==t.keyCode&&Date.now()<this.lastEscPress+2e3;return 27==t.keyCode?this.lastEscPress=Date.now():Zf.indexOf(t.keyCode)<0&&(this.lastEscPress=0),n}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!id.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Vf=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Zf=[16,17,18,20,91,92,224,225];class Xf{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Zu.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Ad);return n.length?n[0](t):id.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(Rd);return n.length?n[0](t):id.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=wh(e.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=ip(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Uf(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Zh.get(r))&&n.ignoreEvent(t))return!1;return!0}const Bf=Object.create(null),qf=id.ie&&id.ie_version<15||id.ios&&id.webkit_version<604;function Yf(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=sp&&r.selection.ranges.every((e=>e.empty))&&sp==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:Fc.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Fc.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Bf.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select")};let zf=0;function Gf(e,t,n,r){if(1==r)return Fc.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return Fc.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=yc(i.text,o,!1):a=yc(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=yc(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=yc(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return Fc.range(s+i.from,a+i.from)}(e.state,t,n);{let n=Qd.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,Fc.range(i,o)}}Bf.touchstart=(e,t)=>{zf=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Bf.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Bf.mousedown=(e,t)=>{if(e.observer.flush(),zf>Date.now()-2e3&&1==ip(t))return;let n=null;for(let r of e.state.facet(jd))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=Jf(e,t),r=ip(t),i=e.state.selection,o=n,s=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),s=null)},get(t,a,l){let c;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?c=o:(c=o=Jf(e,t),s=t),!c||!n)return i;let u=Gf(e,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let t=Gf(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=i<u.from?Fc.range(i,o):Fc.range(o,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l?i.addRange(u):Fc.create([u])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>Dh(e.contentDOM))),e.inputState.startMouseSelection(new Xf(e,t,n,r))}};let Ff=(e,t)=>e>=t.top&&e<=t.bottom,Hf=(e,t,n)=>Ff(t,n)&&e>=n.left&&e<=n.right;function Kf(e,t,n,r){let i=Qd.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Hf(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&Hf(n,r,a)?1:s&&Ff(r,s)?-1:1}function Jf(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Kf(e,n,t.clientX,t.clientY)}}const ep=id.ie&&id.ie_version<=11;let tp=null,np=0,rp=0;function ip(e){if(!ep)return e.detail;let t=tp,n=rp;return tp=e,rp=Date.now(),np=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(np+1)%3:1}function op(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Bf.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Bf.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&op(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else op(e,t,t.dataTransfer.getData("Text"),!0)},Bf.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=qf?null:t.clipboardData;n?(Yf(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),Yf(e,n.value)}),50)}(e)};let sp=null;function ap(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}Bf.copy=Bf.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;sp=i?n:null;let o=qf?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},Bf.focus=Bf.blur=e=>{setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)},Bf.beforeprint=e=>{e.viewState.printing=!0,e.requestMeasure(),setTimeout((()=>{e.viewState.printing=!1,e.requestMeasure()}),2e3)},Bf.compositionstart=Bf.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),ap(e,!0)))},Bf.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&ap(e,!1)}),50)},Bf.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Bf.beforeinput=(e,t)=>{var n;let r;if(id.chrome&&id.android&&(r=Vf.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const lp=["pre-wrap","normal","pre-line","break-spaces"];class cp{constructor(){this.doc=Cc.empty,this.lineWrapping=!1,this.direction=of.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForStyle(e,t){return lp.indexOf(e)>-1!=this.lineWrapping||this.direction!=t}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=lp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s||this.direction!=t;if(this.lineWrapping=s,this.direction=t,this.lineHeight=n,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class up{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class hp{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new hp(this.from,this.length+e.length,this.top,this.height+e.height,t)}moveY(e){return e?new hp(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map((t=>t.moveY(e))):this.type):this}}var dp=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(dp||(dp={}));const fp=.001;class pp{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>fp&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return pp.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],u=i.lineAt(s,dp.ByPosNoHeight,t,0,0),h=u.to>=a?u:i.lineAt(a,dp.ByPosNoHeight,t,0,0);for(c+=h.to-a,a=h.to;o>0&&u.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<u.from&&(u=i.lineAt(s,dp.ByPosNoHeight,t,0,0));l+=u.from-s,s=u.from;let d=yp.build(n,e,l,c);i=i.replace(s,a,d)}return i.updateHeight(n,0)}static empty(){return new gp(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new vp(pp.of(e.slice(0,t)),o,pp.of(e.slice(n)))}}pp.prototype.size=1;class mp extends pp{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new hp(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class gp extends mp{constructor(e,t){super(e,t,yd.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof gp||r instanceof Op&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Op?r=new gp(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):pp.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Op extends pp{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(t,r),a=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:l,length:c}=t.line(i+a);return new hp(l,c,n+s*a,s,yd.Text)}lineAt(e,t,n,r,i){if(t==dp.ByHeight)return this.blockAt(e,n,r,i);if(t==dp.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new hp(t,r-t,0,0,yd.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(e);return new hp(a,l,r+s*(c-o),s,yd.Text)}forEachLine(e,t,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-s)),o(new hp(t.from,t.length,r,a,yd.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Op?n[n.length-1]=new Op(e.length+r):n.push(null,new Op(r-1))}if(e>0){let t=n[0];t instanceof Op?n[0]=new Op(e+t.length):n.unshift(new Op(e-1),null)}return pp.of(n)}decomposeLeft(e,t){t.push(new Op(e-1),null)}decomposeRight(e,t){t.push(null,new Op(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1,a=e.heightChanged;for(r.from>t&&n.push(new Op(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=fp&&(s=-2);let a=new gp(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new Op(i-o).updateHeight(e,o));let l=pp.of(n);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=fp||Math.abs(s-this.lines(e.doc,t).lineHeight)>=fp,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class vp extends pp{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==dp.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==dp.ByPosNoHeight?dp.ByPosNoHeight:dp.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,dp.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&bp(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),bp(i,e)}return pp.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?pp.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function bp(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Op&&(r=e[t+1])instanceof Op&&e.splice(t-1,3,new Op(n.length+1+r.length))}class yp{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof gp?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new gp(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new mp(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new gp(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Op(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gp)return e;let t=new gp(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=yd.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=yd.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof gp||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new gp(0,-1));let n=e;for(let e of this.nodes)e instanceof gp&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new yp(n,e);return eh.spans(t,n,r,i,0),i.finish(n)}}class xp{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Ed(e,t,this.changes,5)}}class wp{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return xd.replace({widget:new Sp(this.size,e)}).range(this.from,this.to)}}class Sp extends bd{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class _p{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new cp,this.scaler=Np,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=pp.empty().applyChanges(e.facet(ef),Cc.empty,this.heightOracle.setDoc(e.doc),[new nf(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=xd.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new kp(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?Np:new $p(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:Ap(e,this.scaler))}))}update(e,t=null){let n=this.state;this.state=e.state;let r=this.state.facet(ef),i=e.changedRanges,o=nf.extendWithRanges(i,function(e,t,n){let r=new xp;return eh.compare(e,t,n,r,0),r.changes}(e.startState.facet(ef),r,e?e.changes:Zc.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(r,n.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||2&e.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace,o="rtl"==n.direction?of.RTL:of.LTR,s=this.heightOracle.mustRefreshForStyle(i,o),a=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight,l=0,c=0;if(this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8),a){this.mustMeasureContent=!1,this.contentDOMHeight=t.clientHeight;let e=parseInt(n.paddingTop)||0,r=parseInt(n.paddingBottom)||0;this.paddingTop==e&&this.paddingBottom==r||(l|=8,this.paddingTop=e,this.paddingBottom=r)}let u=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+t),bottom:Math.max(o,s)-(n.top+t)}}(t,this.paddingTop),h=u.top-this.pixelViewport.top,d=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(a=!0)),!this.inView)return 0;let p=t.clientWidth;if(this.contentDOMWidth==p&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=p,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights();if(r.mustRefreshForHeights(t)&&(s=!0),s||r.lineWrapping&&Math.abs(p-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:a}=e.docView.measureTextSize();s=r.refresh(i,o,n,a,p/a,t),s&&(e.docView.minWidth=0,l|=8)}h>0&&d>0?c=Math.max(h,d):h<0&&d<0&&(c=Math.min(h,d)),r.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(r,0,s,new up(this.viewport.from,t)),r.heightChanged&&(l|=2)}let m=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new kp(r.lineAt(o-1e3*n,dp.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),dp.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,dp.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new kp(r.lineAt(n-500,dp.ByHeight,i,0,0).from,r.lineAt(n+o+500,dp.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new kp(this.heightMap.lineAt(n,dp.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,dp.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,dp.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,dp.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new wp(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.heightOracle.direction!=of.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,o=Ep(n.from,n.to,this.state);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=Qp(o,(this.visibleTop-n.top-e)/n.height),i=Qp(o,(this.visibleBottom-n.top+e)/n.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=Qp(o,(this.pixelViewport.left-t)/e),i=Qp(o,(this.pixelViewport.right+t)/e)}let s=[];r>n.from&&s.push({from:n.from,to:r}),i<n.to&&s.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&Pp(s,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&Pp(s,a.to-10,a.to+10);for(let{from:r,to:i}of s)i-r>1e3&&t.push(Cp(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new wp(r,i,this.gapSize(n,r,i,o)))}return t}gapSize(e,t,n,r){let i=Tp(r,n)-Tp(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){wp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=xd.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.state.facet(ef);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];eh.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Ap(this.heightMap.lineAt(e,dp.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ap(this.heightMap.lineAt(this.scaler.fromDOM(e),dp.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ap(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kp{constructor(e,t){this.from=e,this.to=t}}function Ep(e,t,n){let r=[],i=e,o=0;return eh.spans(n.facet(ef),e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function Qp({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function Tp(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function Pp(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let o=[];i.from<t&&o.push({from:i.from,to:t}),i.to>n&&o.push({from:n,to:i.to}),e.splice(r,1,...o),r+=o.length-1}}}function Cp(e,t){for(let n of e)if(t(n))return n}const Np={toDOM:e=>e,fromDOM:e=>e,scale:1};class $p{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,dp.ByPos,e,0,0).top,s=t.lineAt(i,dp.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function Ap(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new hp(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>Ap(e,t))):e.type)}const Rp=eu.define({combine:e=>e.join(" ")}),jp=eu.define({combine:e=>e.indexOf(!0)>-1}),Dp=Yu.newName(),Ip=Yu.newName(),Wp=Yu.newName(),Mp={"&light":"."+Ip,"&dark":"."+Wp};function Lp(e,t,n){return new Yu(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const Vp=Lp("."+Dp,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Mp),Zp={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Xp=id.ie&&id.ie_version<=11;class Up{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new Ah,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(id.ie&&id.ie_version<=11||id.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Xp&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(Ud)?t.root.activeElement!=this.dom:!_h(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((id.ie&&id.ie_version<=11||id.android&&id.chrome)&&!t.state.selection.main.empty&&n.focusNode&&Eh(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=wh(e),n=id.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);Eh(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Zp),Xp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Xp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null;let t=this.view.state;Wh(this.view.contentDOM,e.key,e.keyCode)?this.processRecords():this.flush(),this.view.state==t&&this.view.update([])})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&_h(this.dom,this.selectionRange);if(t<0&&!i)return;this.selectionChanged=!1;let o=this.view.state;this.onChange(t,n,r),this.view.state==o&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=Bp(t,e.previousSibling||e.target.previousSibling,-1),r=Bp(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Bp(e,t,n){for(;t;){let r=Zh.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function qp(e,t,n,r){let i,o,s=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return;let{from:a,to:l}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new wf(n,r)),i==n&&o==r||t.push(new wf(i,o)));return t}(e),u=new yf(c,e.state);u.readRange(r.startDOM,r.endDOM);let h=s.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||id.android&&u.text.length<l-a)&&(h=s.to,d="end");let f=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(a,l,bf),u.text,h-a,d);f&&(id.chrome&&13==e.inputState.lastKeyCode&&f.toB==f.from+2&&"￿￿"==u.text.slice(f.from,f.toB)&&f.toB--,i={from:a+f.from,to:a+f.toA,insert:Cc.of(u.text.slice(f.from,f.toB).split(bf))}),o=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?Fc.single(n+t,r+t):null}(c,a)}else if(e.hasFocus||!e.state.facet(Ud)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!Sh(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!Sh(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);i==s.head&&a==s.anchor||(o=Fc.single(a,i))}if(i||o)if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4&&(i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}),i){let t=e.state;if(id.ios&&e.inputState.flushIOSKey(e))return;if(id.android&&(i.from==s.from&&i.to==s.to&&1==i.insert.length&&2==i.insert.lines&&Wh(e.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&0==i.insert.length&&Wh(e.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&0==i.insert.length&&Wh(e.contentDOM,"Delete",46)))return;let n,r=i.insert.toString();if(e.state.facet(Wd).some((t=>t(e,i.from,i.to,r))))return;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=s.from<i.from?t.sliceDoc(s.from,i.from):"",o=s.to>i.to?t.sliceDoc(i.to,s.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let r=t.changes(i),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=r.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let o=e.state.sliceDoc(i.from,i.to),l=kf(e)||e.state.doc.lineAt(s.head),c=s.to-i.to,u=s.to-s.from;n=t.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:r,range:a||n.map(r)};let h=n.to-c,d=h-o.length;if(n.to-n.from!=u||e.state.sliceDoc(d,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let f=t.changes({from:d,to:h,insert:i.insert}),p=n.to-s.to;return{changes:f,range:a?Fc.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a})}else if(o&&!o.main.eq(s)){let t=!1,n="select";e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n})}}class Yp{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new _p(e.state||Zu.create()),this.plugins=this.state.facet(zd).map((e=>new Hd(e)));for(let e of this.plugins)e.update(this);this.observer=new Up(this,((e,t,n)=>{qp(this,e,t,n)}),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new Lf(this),this.docView=new Sf(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof Nu?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=this.state;for(let t of e){if(t.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=t.state}if(this.destroyed)return void(this.viewState.state=r);if(r.facet(Zu.phrases)!=this.state.facet(Zu.phrases))return this.setState(r);t=new rf(this,r,e);let i=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(i&&(i=i.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;i=new Vd(e.empty?e:Fc.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Md)?i=new Vd(e.value):e.is(Ld)?i=new Vd(e.value,"center"):e.is(Zd)&&(i=e.value)}this.viewState.update(t,i),this.bidiCache=Hp.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(tf)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Rp)!=t.state.facet(Rp)&&(this.viewState.mustMeasureContent=!0),(n||i||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Id))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new _p(e),this.plugins=e.facet(zd).map((e=>new Hd(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new Sf(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(zd),n=e.state.facet(zd);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new Hd(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let o=i.map((e=>{try{return e.read(this)}catch(e){return Xd(this.state,e),Fp}})),s=new rf(this,this.state),a=!1,l=!1;s.flags|=r,t?t.flags|=r:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<i.length;e++)if(o[e]!=Fp)try{let t=i[e];t.write&&t.write(o[e],this)}catch(e){Xd(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Id))e(t)}get themeClasses(){return Dp+" "+(this.state.facet(jp)?Wp:Ip)+" "+this.state.facet(Rp)}updateAttrs(){let e=Kp(this,Kd,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ud)?"true":"false",class:"cm-content",style:`${id.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Kp(this,Jd,t),this.observer.ignore((()=>{vd(this.contentDOM,this.contentAttrs,t),vd(this.dom,this.editorAttrs,e)})),this.editorAttrs=e,this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(Yp.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(tf),Yu.mount(this.root,this.styleModules.concat(Vp).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}pluginField(e){let t=[];for(let n of this.plugins)n.update(this).takeField(e,t);return t}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}blockAtHeight(e,t){let n=Gp(t,this);return this.elementAtHeight(e-n).moveY(n)}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}visualLineAtHeight(e,t){let n=Gp(t,this);return this.lineBlockAtHeight(e-n).moveY(n)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}viewportLines(e,t){let n=Gp(t,this);for(let t of this.viewportLineBlocks)e(t.moveY(n))}get viewportLineBlocks(){return this.viewState.viewportLines}visualLineAt(e,t=0){return this.lineBlockAt(e).moveY(t+this.viewState.paddingTop)}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Mf(this,e,Wf(this,e,t,n))}moveByGroup(e,t){return Mf(this,e,Wf(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==Wu.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.posAtCoords({x:n==(e.textDirection==of.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=r)return Fc.cursor(r,n?-1:1)}let s=Qd.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return Fc.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Mf(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return Fc.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i-u);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!=r?r:e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(d+n)*o,c=Df(e,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return Fc.cursor(c,t.assoc,void 0,a)}}(this,e,t,n))}scrollPosIntoView(e){this.dispatch({effects:Md.of(Fc.cursor(e))})}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Df(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return Nh(n,i[pf.find(i,e-r.from,-1,t)].dir==of.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>zp)return gf(e.length);let t=this.textDirection;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=function(e,t){let n=e.length,r=t==sf?1:2,i=t==sf?2:1;if(!e||1==r&&!ff.test(e))return gf(n);for(let t=0,i=r,s=r;t<n;t++){let n=(o=e.charCodeAt(t))<=247?cf[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?uf[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),mf[t]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let e=0,t=r,i=r;e<n;e++){let r=mf[e];if(128==r)e<n-1&&t==mf[e+1]&&24&t?r=mf[e]=t:mf[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==mf[r];)r++;let o=e&&8==t||r<n&&8==mf[r]?1==i?1:8:256;for(let t=e;t<r;t++)mf[t]=o;e=r-1}else 8==r&&1==i&&(mf[e]=1);t=r,7&r&&(i=r)}for(let t,o,s,a=0,l=0,c=0;a<n;a++)if(o=hf[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(df[e+1]==-o){let t=df[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(mf[a]=mf[df[e]]=n),l=e;break}}else{if(189==df.length)break;df[l++]=a,df[l++]=t,df[l++]=c}else if(2==(s=mf[a])||1==s){let e=s==r;c=e?0:1;for(let t=l-3;t>=0;t-=3){let n=df[t+2];if(2&n)break;if(e)df[t+2]|=2;else{if(4&n)break;df[t+2]|=4}}}for(let e=0;e<n;e++)if(256==mf[e]){let t=e+1;for(;t<n&&256==mf[t];)t++;let i=1==(e?mf[e-1]:r),o=i==(1==(t<n?mf[t]:r))?i?1:2:r;for(let n=e;n<t;n++)mf[n]=o;e=t-1}let s=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=mf[e++];for(;e<n&&r==(1!=mf[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=mf[--n];for(;n>t&&r==(2!=mf[n-1]);)n--;s.push(new pf(n,e,r?2:1))}else s.push(new pf(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==mf[e++];for(;e<n&&r==(2==mf[e]);)e++;s.push(new pf(t,e,r?1:2))}return s}(e.text,this.textDirection);return this.bidiCache.push(new Hp(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||id.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Dh(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Zd.of(new Vd("number"==typeof e?Fc.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Gd.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=Yu.newName(),r=[Rp.of(n),tf.of(Lp(`.${n}`,e))];return t&&t.dark&&r.push(jp.of(!0)),r}static baseTheme(e){return fu.lowest(tf.of(Lp("."+Dp,e,Mp)))}}Yp.scrollTo=Md,Yp.centerOn=Ld,Yp.styleModule=tf,Yp.inputHandler=Wd,Yp.exceptionSink=Dd,Yp.updateListener=Id,Yp.editable=Ud,Yp.mouseSelectionStyle=jd,Yp.dragMovesSelection=Rd,Yp.clickAddsSelectionRange=Ad,Yp.decorations=ef,Yp.darkTheme=jp,Yp.contentAttributes=Jd,Yp.editorAttributes=Kd,Yp.lineWrapping=Yp.contentAttributes.of({class:"cm-lineWrapping"}),Yp.announce=Cu.define();const zp=4096;function Gp(e,t){return(null==e?t.contentDOM.getBoundingClientRect().top:e)+t.viewState.paddingTop}const Fp={};class Hp{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:of.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new Hp(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function Kp(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&gd(o,n)}return n}const Jp=id.mac?"mac":id.windows?"win":id.linux?"linux":"key";function em(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const tm=Yp.domEventHandlers({keydown:(e,t)=>sm(im(t.state),e,t,"editor")}),nm=eu.define({enables:tm}),rm=new WeakMap;function im(e){let t=e.facet(nm),n=rm.get(t);return n||rm.set(t,n=function(e,t=Jp){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=om={view:t,prefix:n,scope:e};return setTimeout((()=>{om==r&&(om=null)}),4e3),!0}]})}let c=l.join(" ");i(c,!1);let u=a[c]||(a[c]={preventDefault:!1,commands:[]});u.commands.push(o),s&&(u.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])o(t,e,n.run,n.preventDefault),n.shift&&o(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let om=null;function sm(e,t,n,r){let i=function(e){var t=!(bh&&(e.ctrlKey||e.altKey||e.metaKey)||(mh||vh)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?fh:dh)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,s="",a=!1;om&&om.view==n&&om.scope==r&&(s=om.prefix+" ",(a=Zf.indexOf(t.keyCode)<0)&&(om=null));let l,c=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(a=!0)}return!1},u=e[r];if(u){if(c(u[s+em(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(l=dh[t.keyCode])&&l!=i){if(c(u[s+em(l,t,!0)]))return!0}else if(o&&t.shiftKey&&c(u[s+em(i,t,!0)]))return!0}return a}const am=!id.ios,lm=eu.define({combine:e=>Xu(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function cm(e={}){return[lm.of(e),hm,fm]}class um{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const hm=Gd.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(lm).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(lm)!=e.state.facet(lm);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(lm),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==of.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=pm(e),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=gm(e,n),d=gm(e,r),f=h.type==yd.Text?h:null,p=d.type==yd.Text?d:null;e.lineWrapping&&(f&&(f=mm(e,n,f)),p&&(p=mm(e,r,p)));if(f&&p&&f.from==p.from)return g(O(t.from,t.to,f));{let n=f?O(t.from,null,f):v(h,!1),r=p?O(null,t.to,p):v(d,!0),i=[];return(f||h).to<(p||d).from-1?i.push(m(c,n.bottom,u,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==yd.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new um(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function O(t,n,r){let o=1e9,s=-1e9,a=[];function l(t,n,l,h,d){let f=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);o=Math.min(f.top,p.top,o),s=Math.max(f.bottom,p.bottom,s),d==of.LTR?a.push(i&&n?c:f.left,i&&h?u:p.right):a.push(!i&&h?c:p.left,!i&&n?u:f.right)}let h=null!=t?t:r.from,d=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<d)for(let i=Math.max(r.from,h),o=Math.min(r.to,d);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,o),null==n&&a>=d,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==t,d,null==n,e.textDirection),{top:o,bottom:s,horizontal:a}}function v(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||am:t.drawRangeCursor){let e=Om(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),dm={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};am&&(dm[".cm-line"].caretColor="transparent !important");const fm=fu.highest(Yp.theme(dm));function pm(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==of.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function mm(e,t,n){let r=Fc.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:yd.Text}}function gm(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==yd.Text))return e;return n}function Om(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=pm(e);return new um(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const vm=Cu.define({map:(e,t)=>null==e?null:t.mapPos(e)}),bm=su.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(vm)?t.value:e),e))}),ym=Gd.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(bm);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(bm)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(bm),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(bm)!=e&&this.view.dispatch({effects:vm.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function xm(){return[bm,ym]}function wm(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,a+o.index+o[0].length,o)}class Sm{constructor(e){let{regexp:t,decoration:n,boundary:r,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof n?n:()=>n,this.boundary=r,this.maxLength=i}createDeco(e){let t=new th;for(let{from:n,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))wm(e.state.doc,this.regexp,n,r,((n,r,i)=>t.add(n,r,this.getDeco(i,e,n))));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[];if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;){let t=c.index+n.from;u.push(this.getDeco(c,e,t).range(t,t+c[0].length))}else wm(e.state.doc,this.regexp,a,l,((t,n,r)=>u.push(this.getDeco(r,e,t).range(t,n))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const _m=null!=/x/.unicode?"gu":"g",km=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮\ufeff￹-￼]",_m),Em={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Qm=null;const Tm=eu.define({combine(e){let t=Xu(e,{render:null,specialChars:km,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Qm&&"undefined"!=typeof document&&document.body){let t=document.body.style;Qm=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Qm||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,_m)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,_m)),t}});function Pm(e={}){return[Tm.of(e),Cm||(Cm=Gd.fromClass(class{constructor(e){this.view=e,this.decorations=xd.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Tm)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Sm({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=kc(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=Tc(e.text,t,r-e.from);return xd.replace({widget:new $m((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=xd.replace({widget:new Nm(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Tm);e.startState.facet(Tm)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Cm=null;class Nm extends bd{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Em[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class $m extends bd{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Am(){return jm}const Rm=xd.line({class:"cm-activeLine"}),jm=Gd.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){if(!r.empty)return xd.none;let i=e.lineBlockAt(r.head);i.from>t&&(n.push(Rm.range(i.from)),t=i.from)}return xd.set(n)}},{decorations:e=>e.decorations});class Dm extends bd{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}const Im=Qu.define(),Wm=Qu.define(),Mm=eu.define(),Lm=eu.define({combine:e=>Xu(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const Vm=su.define({create:()=>rg.empty,update(e,t){let n=t.state.facet(Lm),r=t.annotation(Im);if(r){let i=t.docChanged?Fc.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=zm.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?Gm(a,a.length,n.minDepth,o):Km(a,t.startState.selection),new rg(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(Wm);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(Nu.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=zm.fromTransaction(t),s=t.annotation(Nu.time),a=t.annotation(Nu.userEvent);return o?e=e.addChanges(o,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new rg(e.done.map(zm.fromJSON),e.undone.map(zm.fromJSON))});function Zm(e={}){return[Vm,Lm.of(e),Yp.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Um:"historyRedo"==e.inputType?Bm:null;return!!n&&(e.preventDefault(),n(t))}})]}function Xm(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(Vm,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const Um=Xm(0,!1),Bm=Xm(1,!1),qm=Xm(0,!0),Ym=Xm(1,!0);class zm{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new zm(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new zm(e.changes&&Zc.fromJSON(e.changes),[],e.mapped&&Vc.fromJSON(e.mapped),e.startSelection&&Fc.fromJSON(e.startSelection),e.selectionsAfter.map(Fc.fromJSON))}static fromTransaction(e,t){let n=Hm;for(let t of e.startState.facet(Mm)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new zm(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Hm)}static selection(e){return new zm(void 0,Hm,void 0,void 0,e)}}function Gm(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function Fm(e,t){return e.length?t.length?e.concat(t):e:t}const Hm=[];function Km(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Gm(e,e.length-1,1e9,n.setSelAfter(r)))}return[zm.selection([t])]}function Jm(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function eg(e,t){if(!e.length)return e;let n=e.length,r=Hm;for(;n;){let i=tg(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[zm.selection(r)]:Hm}function tg(e,t,n){let r=Fm(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Hm,n);if(!e.changes)return zm.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new zm(i,Cu.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const ng=/^(input\.type|delete)($|\.)/;class rg{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new rg(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||ng.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];o>=t&&i<=s&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==n)?Gm(o,o.length-1,i,new zm(e.changes.compose(s.changes),Fm(e.effects,s.effects),s.mapped,s.startSelection,Hm)):Gm(o,o.length,i,e),new rg(o,Hm,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Hm;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=i[i.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new rg(Km(this.done,e),this.undone,t,n);var o,s}addMapping(e){return new rg(eg(this.done,e),eg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Im.of({side:e,rest:Jm(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?Hm:r.slice(0,r.length-1);return i.mapped&&(n=eg(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Im.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}rg.empty=new rg(Hm,Hm);const ig=[{key:"Mod-z",run:Um,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Bm,preventDefault:!0},{key:"Mod-u",run:qm,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ym,preventDefault:!0}],og=1024;let sg=0;class ag{constructor(e,t){this.from=e,this.to=t}}class lg{constructor(e={}){this.id=sg++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=ug.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}lg.closedBy=new lg({deserialize:e=>e.split(" ")}),lg.openedBy=new lg({deserialize:e=>e.split(" ")}),lg.group=new lg({deserialize:e=>e.split(" ")}),lg.contextHash=new lg({perNode:!0}),lg.lookAhead=new lg({perNode:!0}),lg.mounted=new lg({perNode:!0});const cg=Object.create(null);class ug{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):cg,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new ug(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(lg.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(lg.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}ug.none=new ug("",Object.create(null),0,8);class hg{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new ug(n.name,r,n.id,n.flags):n)}return new hg(t)}}const dg=new WeakMap,fg=new WeakMap;class pg{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(lg.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e,t=0){let n=null!=e&&dg.get(this)||this.topNode,r=new _g(n);return null!=e&&(r.moveTo(e,t),dg.set(this,r._tree)),r}fullCursor(){return new _g(this.topNode,1)}get topNode(){return new yg(this,0,0,null)}resolve(e,t=0){let n=bg(dg.get(this)||this.topNode,e,t,!1);return dg.set(this,n),n}resolveInner(e,t=0){let n=bg(fg.get(this)||this.topNode,e,t,!0);return fg.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let e=this.cursor(),o=()=>e.node;;){let s=!1;if(e.from<=i&&e.to>=r&&(e.type.isAnonymous||!1!==t(e.type,e.from,e.to,o))){if(e.firstChild())continue;e.type.isAnonymous||(s=!0)}for(;s&&n&&n(e.type,e.from,e.to,o),s=e.type.isAnonymous,!e.nextSibling();){if(!e.parent())return;s=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Tg(ug.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new pg(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new pg(ug.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=og,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new mg(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,O,v){let{id:b,start:y,end:x,size:w}=a,S=u;for(;w<0;){if(a.next(),-1==w){let t=o[b];return n.push(t),void O.push(y-e)}if(-3==w)return void(c=b);if(-4==w)return void(u=b);throw new RangeError(`Unrecognized record size: ${w}`)}let _,k,E=l[b],Q=y-e;if(x-y<=i&&(k=m(a.pos-t,v))){let t=new Uint16Array(k.size-k.skip),n=a.pos-k.size,i=t.length;for(;a.pos>n;)i=g(k.start,t,i);_=new gg(t,x-k.start,r),Q=k.start-e}else{let e=a.pos-w;a.next();let t=[],n=[],r=b>=s?b:-1,o=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(f(t,n,y,o,a.end,l,r,S),o=t.length,l=a.end),a.next()):h(y,e,t,n,r);if(r>=0&&o>0&&o<t.length&&f(t,n,y,o,y,l,r,S),t.reverse(),n.reverse(),r>-1&&o>0){let e=d(E);_=Tg(E,t,n,0,t.length,0,x-y,e,e)}else _=p(E,t,n,x-y,S-x)}n.push(_),O.push(Q)}function d(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof pg){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(lg.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}function f(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r,i=0,o){if(c){let e=[lg.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[lg.lookAhead,i];o=o?[e].concat(o):[e]}return new pg(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let O=[],v=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,O,v,-1);let b=null!==(t=e.length)&&void 0!==t?t:O.length?v[0]+O[0].length:0;return new pg(l[e.topID],O.reverse(),v.reverse(),b)}(e)}}pg.empty=new pg(ug.none,[],[],0);class mg{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new mg(this.buffer,this.index)}}class gg{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ug.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(Og(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n,r){let i=this.buffer,o=new Uint16Array(t-e);for(let r=e,s=0;r<t;)o[s++]=i[r++],o[s++]=i[r++]-n,o[s++]=i[r++]-n,o[s++]=i[r++]-e;return new gg(o,r-n,this.set)}}function Og(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function vg(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function bg(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof yg&&e.index<0?null:e.parent;if(!t)return e;e=t}if(r)for(let r=e,o=r.parent;o;r=o,o=r.parent)r instanceof yg&&r.index<0&&(null===(i=o.enter(t,n,!0))||void 0===i?void 0:i.from)!=r.from&&(e=o);for(;;){let i=e.enter(t,n,r);if(!i)return e;e=i}}class yg{constructor(e,t,n,r){this.node=e,this._from=t,this.index=n,this._parent=r}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o.node,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o._from;if(Og(r,n,c,c+l.length))if(l instanceof gg){if(2&i)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new Sg(new wg(o,l,e,c),null,s)}else if(1&i||!l.type.isAnonymous||kg(l)){let s;if(!(1&i)&&l.props&&(s=l.prop(lg.mounted))&&!s.overlay)return new yg(s.tree,c,e,o);let a=new yg(l,c,e,o);return 1&i||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(1&i||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent.node.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e,-2)}enter(e,t,n=!0,r=!0){let i;if(n&&(i=this.node.prop(lg.mounted))&&i.overlay){let n=e-this.from;for(let{from:e,to:r}of i.overlay)if((t>0?e<=n:e<n)&&(t<0?r>=n:r>n))return new yg(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r?0:2)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new _g(this)}get tree(){return this.node}toTree(){return this.node}resolve(e,t=0){return bg(this,e,t,!1)}resolveInner(e,t=0){return bg(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vg(this,e)}getChild(e,t=null,n=null){let r=xg(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return xg(this,e,t,n)}toString(){return this.node.toString()}}function xg(e,t,n,r){let i=e.cursor,o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}class wg{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Sg{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Sg(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n,r=!0){if(!r)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Sg(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sg(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sg(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get cursor(){return new _g(this)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1],s=n.buffer[this.index+2];e.push(n.slice(r,i,o,s)),t.push(0)}return new pg(this.type,e,t,this.to-this.from)}resolve(e,t=0){return bg(this,e,t,!1)}resolveInner(e,t=0){return bg(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vg(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=xg(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return xg(this,e,t,n)}}class _g{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof yg)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof yg?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=!0,r=!0){return this.buffer?!!r&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n&&!(1&this.mode),r))}parent(){if(!this.buffer)return this.yieldNode(1&this.mode?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=1&this.mode?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n.node.children.length;r!=i;r+=e){let e=n.node.children[r];if(1&this.mode||e instanceof gg||!e.type.isAnonymous||kg(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Sg(this.buffer,t,this.stack[e]);return this.bufferNode=new Sg(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function kg(e){return e.children.some((e=>e instanceof gg||!e.type.isAnonymous||kg(e)))}const Eg=new WeakMap;function Qg(e,t){if(!e.isAnonymous||t instanceof gg||t.type!=e)return 1;let n=Eg.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof pg)){n=1;break}n+=Qg(e,r)}Eg.set(t,n)}return n}function Tg(e,t,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=Qg(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,f=r[c],p=Qg(e,n[c]);for(c++;c<s;c++){let t=Qg(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-f;h.push(Tg(e,n,r,i,c,f,t,null,l))}d.push(f+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class Pg{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new Pg(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new Pg(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Cg{startParse(e,t,n){return"string"==typeof e&&(e=new Ng(e)),n=n?n.length?n.map((e=>new ag(e.from,e.to))):[new ag(0,0)]:[new ag(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class Ng{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new lg({perNode:!0});const $g=new lg;class Ag{constructor(e,t,n,r=[]){this.data=e,this.topNode=n,Zu.prototype.hasOwnProperty("tree")||Object.defineProperty(Zu.prototype,"tree",{get(){return Dg(this)}}),this.parser=t,this.extension=[Ug.of(this),Zu.languageData.of(((e,t,n)=>e.facet(Rg(e,t,n))))].concat(r)}isActiveAt(e,t,n=-1){return Rg(e,t,n)==this.data}findRegions(e){let t=e.facet(Ug);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop($g)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(lg.mounted);if(i){if(i.tree.prop($g)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof pg&&r(i,e.positions[n]+t)}};return r(Dg(e),0),n}get allowsNesting(){return!0}}function Rg(e,t,n){let r=e.facet(Ug);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=Dg(e).topNode;r;r=r.enter(t,n,!0,!1))i=r.type.prop($g)||i;return i}Ag.setState=Cu.define();class jg extends Ag{constructor(e,t){super(e,t,t.topNode),this.parser=t}static define(e){let t=(n=e.languageData,eu.define({combine:n?e=>e.concat(n):void 0}));var n;return new jg(t,e.parser.configure({props:[$g.add((e=>e.isTop?t:void 0))]}))}configure(e){return new jg(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.wrappers.length>0}}function Dg(e){let t=e.field(Ag.state,!1);return t?t.tree:pg.empty}class Ig{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Wg=null;class Mg{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new Ig(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=pg.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;let r=Date.now()+e;for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let e=this.parse.advance();if(e){if(this.fragments=this.withoutTempSkipped(Pg.addTree(e,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=e,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(Date.now()>r)return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Pg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Wg;Wg=this;try{return e()}finally{Wg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Lg(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=Pg.applyChanges(n,t),r=pg.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new Mg(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=Lg(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Cg{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=Wg;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new pg(ug.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Wg}}function Lg(e,t,n){return Pg.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class Vg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Vg(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=new Mg(e.facet(Ug).parser,e,[],pg.empty,0,{from:0,to:t},[],null);return n.work(20,t)||n.takeTree(),new Vg(n)}}Ag.state=su.define({create:Vg.init,update(e,t){for(let e of t.effects)if(e.is(Ag.setState))return e.value;return t.startState.facet(Ug)!=t.state.facet(Ug)?Vg.init(t.state):e.apply(t)}});let Zg=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Zg=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const Xg=Gd.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ag.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ag.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Zg(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Ag.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Math.min(this.chunkBudget,100,e?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work(o,r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Ag.setState.of(new Vg(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Xd(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return this.working||this.workScheduled>0}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ug=eu.define({combine:e=>e.length?e[0]:null,enables:[Ag.state,Xg]});class Bg{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const qg=eu.define(),Yg=eu.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function zg(e){let t=e.facet(Yg);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Gg(e,t){let n="",r=e.tabSize;if(9==e.facet(Yg).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function Fg(e,t){e instanceof Zu&&(e=new Hg(e));for(let n of e.state.facet(qg)){let r=n(e,t);if(null!=r)return r}let n=Dg(e.state);return n?function(e,t,n){return eO(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class Hg{constructor(e,t={}){this.state=e,this.options=t,this.unit=zg(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return Tc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Kg=new lg;function Jg(e){let t=e.type.prop(Kg);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(lg.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>oO(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?tO:null}function eO(e,t,n){for(;e;e=e.parent){let r=Jg(e);if(r)return r(new nO(n,t,e))}return null}function tO(){return 0}class nO extends Hg{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(rO(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?eO(e,this.pos,this.base):0}}function rO(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function iO({closing:e,align:t=!0,units:n=1}){return r=>oO(r,t,n,e)}function oO(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}function sO({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}function aO(){return Zu.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=Fg(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=Gg(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const lO=eu.define(),cO=new lg;function uO(e,t,n){for(let r of e.facet(lO)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=Dg(e);if(0==r.length)return null;let i=null;for(let o=r.resolveInner(n);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let r=o.type.prop(cO);if(r){let s=r(o,e);s&&s.from<=n&&s.from>=t&&s.to>n&&(i=s)}}return i}(e,t,n)}class hO extends Fu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}hO.prototype.elementClass="",hO.prototype.toDOM=void 0,hO.prototype.mapMode=Lc.TrackBefore,hO.prototype.startSide=hO.prototype.endSide=-1,hO.prototype.point=!0;const dO=eu.define(),fO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>eh.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},pO=eu.define();function mO(e){return[vO(),pO.of(Object.assign(Object.assign({},fO),e))]}const gO=Yp.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),OO=eu.define({combine:e=>e.some((e=>e))});function vO(e){let t=[bO,gO];return e&&!1===e.fixed&&t.push(OO.of(!0)),t}const bO=Gd.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(pO).map((t=>new SO(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(OO),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(OO)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=eh.iter(this.view.state.facet(dO),this.view.viewport.from),r=[],i=this.gutters.map((e=>new wO(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let n of e.type)if(n.type==yd.Text){t=n;break}}else t=e.type==yd.Text?e:void 0;if(t){r.length&&(r=[]),xO(n,r,e.from);for(let e of i)e.line(this.view,t,r)}}for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(pO),n=e.state.facet(pO),r=e.docChanged||e.heightChanged||e.viewportChanged||!eh.eq(e.startState.facet(dO),e.state.facet(dO),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new SO(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:qd.scrollMargins.from((e=>0!=e.gutters.length&&e.fixed?e.view.textDirection==of.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}:null))});function yO(e){return Array.isArray(e)?e:[e]}function xO(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class wO{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=eh.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),xO(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let n=new _O(e,t.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class SO{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,i,r)&&r.preventDefault()}));this.markers=yO(t.markers(e)),t.initialSpacer&&(this.spacer=new _O(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=yO(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!eh.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class _O{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const kO=eu.define(),EO=eu.define({combine:e=>Xu(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})});class QO extends hO{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function TO(e,t){return e.state.facet(EO).formatNumber(t,e.state)}const PO=pO.compute([EO],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(kO),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new QO(TO(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(EO)!=e.state.facet(EO),initialSpacer:e=>new QO(TO(e,NO(e.state.doc.lines))),updateSpacer(e,t){let n=TO(t.view,NO(t.view.state.doc.lines));return n==e.number?e:new QO(n)},domEventHandlers:e.facet(EO).domEventHandlers})));function CO(e={}){return[EO.of(e),vO(),PO]}function NO(e){let t=9;for(;t<e;)t=10*t+9;return t}const $O=new class extends hO{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},AO=dO.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges)if(r.empty){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push($O.range(i)))}return eh.of(t)}));function RO(){return AO}function jO(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const DO=Cu.define({map:jO}),IO=Cu.define({map:jO});function WO(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const MO=su.define({create:()=>xd.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(DO)&&!VO(e,n.value.from,n.value.to)?e=e.update({add:[zO.range(n.value.from,n.value.to)]}):n.is(IO)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>Yp.decorations.from(e)});function LO(e,t,n){var r;let i=null;return null===(r=e.field(MO,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function VO(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function ZO(e,t){return e.field(MO,!1)?t:t.concat(Cu.appendConfig.of(YO()))}function XO(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return Yp.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const UO=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of WO(e)){let n=uO(e.state,t.from,t.to);if(n)return e.dispatch({effects:ZO(e.state,[DO.of(n),XO(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(MO,!1))return!1;let t=[];for(let n of WO(e)){let r=LO(e.state,n.from,n.to);r&&t.push(IO.of(r),XO(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=uO(t,i.from,i.to);o&&n.push(DO.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:ZO(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(MO,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(IO.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],BO={placeholderDOM:null,placeholderText:"…"},qO=eu.define({combine:e=>Xu(e,BO)});function YO(e){let t=[MO,KO];return e&&t.push(qO.of(e)),t}const zO=xd.replace({widget:new class extends bd{toDOM(e){let{state:t}=e,n=t.facet(qO),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=LO(e.state,n.from,n.to);r&&e.dispatch({effects:IO.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),GO={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{}};class FO extends hO{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function HO(e={}){let t=Object.assign(Object.assign({},GO),e),n=new FO(t,!0),r=new FO(t,!1),i=Gd.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(Ug)!=e.state.facet(Ug)||e.startState.field(MO,!1)!=e.state.field(MO,!1))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new th;for(let i of e.viewportLineBlocks){let o=LO(e.state,i.from,i.to)?r:uO(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,mO({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||eh.empty},initialSpacer:()=>new FO(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=LO(e.state,t.from,t.to);if(r)return e.dispatch({effects:IO.of(r)}),!0;let i=uO(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:DO.of(i)}),!0)}})}),YO()]}const KO=Yp.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),JO=Yp.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ev="()[]{}",tv=eu.define({combine:e=>Xu(e,{afterCursor:!0,brackets:ev,maxScanDistance:1e4})}),nv=xd.mark({class:"cm-matchingBracket"}),rv=xd.mark({class:"cm-nonmatchingBracket"}),iv=su.define({create:()=>xd.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(tv);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=lv(t.state,e.head,-1,r)||e.head>0&&lv(t.state,e.head-1,1,r)||r.afterCursor&&(lv(t.state,e.head,1,r)||e.head<t.state.doc.length&&lv(t.state,e.head+1,-1,r));if(!i)continue;let o=i.matched?nv:rv;n.push(o.range(i.start.from,i.start.to)),i.end&&n.push(o.range(i.end.from,i.end.to))}return xd.set(n,!0)},provide:e=>Yp.decorations.from(e)}),ov=[iv,JO];function sv(e={}){return[tv.of(e),ov]}function av(e,t,n){let r=e.prop(t<0?lg.openedBy:lg.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function lv(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||ev,s=Dg(e),a=s.resolveInner(t,n);for(let r=a;r;r=r.parent){let i=av(r.type,n,o);if(i&&r.from<r.to)return cv(e,t,n,r,i,o)}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolve(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function cv(e,t,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor;if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(av(c.type,n,o))l++;else if(av(c.type,-n,o)&&(l--,0==l))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function uv(e,t){return Fc.create(e.ranges.map(t),e.mainIndex)}function hv(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function dv({state:e,dispatch:t},n){let r=uv(e.selection,n);return!r.eq(e.selection)&&(t(hv(e,r)),!0)}function fv(e,t){return Fc.cursor(t?e.to:e.from)}function pv(e,t){return dv(e,(n=>n.empty?e.moveByChar(n,t):fv(n,t)))}const mv=e=>pv(e,e.textDirection!=of.LTR),gv=e=>pv(e,e.textDirection==of.LTR);function Ov(e,t){return dv(e,(n=>n.empty?e.moveByGroup(n,t):fv(n,t)))}function vv(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function bv(e,t,n){let r,i,o=Dg(e).resolveInner(t.head),s=n?lg.closedBy:lg.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;vv(e,t,s)?o=t:r=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?lv(e,o.from,1):lv(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,Fc.cursor(i,n?-1:1)}function yv(e,t){return dv(e,(n=>{if(!n.empty)return fv(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const xv=e=>yv(e,!1),wv=e=>yv(e,!0);function Sv(e,t){let{state:n}=e,r=uv(n.selection,(n=>n.empty?e.moveVertically(n,t,e.dom.clientHeight):fv(n,t)));if(r.eq(n.selection))return!1;let i=e.coordsAtPos(n.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return e.dispatch(hv(n,r),{effects:i&&i.top>o.top&&i.bottom<o.bottom?Yp.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top}):void 0}),!0}const _v=e=>Sv(e,!1),kv=e=>Sv(e,!0);function Ev(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=Fc.cursor(r.from+n))}return i}const Qv=e=>dv(e,(t=>Ev(e,t,!0))),Tv=e=>dv(e,(t=>Ev(e,t,!1)));function Pv(e,t){let n=uv(e.state.selection,(e=>{let n=t(e);return Fc.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(hv(e.state,n)),!0)}function Cv(e,t){return Pv(e,(n=>e.moveByChar(n,t)))}const Nv=e=>Cv(e,e.textDirection!=of.LTR),$v=e=>Cv(e,e.textDirection==of.LTR);function Av(e,t){return Pv(e,(n=>e.moveByGroup(n,t)))}function Rv(e,t){return Pv(e,(n=>e.moveVertically(n,t)))}const jv=e=>Rv(e,!1),Dv=e=>Rv(e,!0);function Iv(e,t){return Pv(e,(n=>e.moveVertically(n,t,e.dom.clientHeight)))}const Wv=e=>Iv(e,!1),Mv=e=>Iv(e,!0),Lv=e=>Pv(e,(t=>Ev(e,t,!0))),Vv=e=>Pv(e,(t=>Ev(e,t,!1))),Zv=({state:e,dispatch:t})=>(t(hv(e,{anchor:0})),!0),Xv=({state:e,dispatch:t})=>(t(hv(e,{anchor:e.doc.length})),!0),Uv=({state:e,dispatch:t})=>(t(hv(e,{anchor:e.selection.main.anchor,head:0})),!0),Bv=({state:e,dispatch:t})=>(t(hv(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function qv({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:Fc.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function Yv(e,t,n){if(e instanceof Yp)for(let r of e.pluginField(qd.atomicRanges))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const zv=(e,t)=>qv(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=Tc(r,o.tabSize)%zg(o)||zg(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=yc(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return Yv(e,i,t)})),Gv=e=>zv(e,!1),Fv=e=>zv(e,!0),Hv=(e,t)=>qv(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=yc(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return Yv(e,r,t)})),Kv=e=>Hv(e,!1),Jv=e=>qv(e,(t=>{let n=e.lineBlockAt(t).to;return Yv(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function eb(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function tb(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of eb(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push(Fc.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push(Fc.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:Fc.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function nb(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of eb(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const rb=ib(!1);function ib(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=Dg(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(lg.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new Hg(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=Fg(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",Gg(t,l)];return s&&c.push(Gg(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Cc.of(c)},range:Fc.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function ob(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:Fc.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const sb=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ob(e,((t,n)=>{n.push({from:t.from,insert:e.facet(Yg)})})),{userEvent:"input.indent"})),!0),ab=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ob(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=Tc(r,e.tabSize),o=0,s=Gg(e,Math.max(0,i-zg(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),lb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>dv(e,(t=>bv(e.state,t,e.textDirection!=of.LTR))),shift:e=>Pv(e,(t=>bv(e.state,t,e.textDirection!=of.LTR)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>dv(e,(t=>bv(e.state,t,e.textDirection==of.LTR))),shift:e=>Pv(e,(t=>bv(e.state,t,e.textDirection==of.LTR)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>tb(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>nb(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>tb(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>nb(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=Fc.create([n.main]):n.main.empty||(r=Fc.create([Fc.cursor(n.main.head)])),!!r&&(t(hv(e,r)),!0)}},{key:"Mod-Enter",run:ib(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=eb(e).map((({from:t,to:n})=>Fc.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:Fc.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=uv(e.selection,(t=>{var n;let r=Dg(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return Fc.range(r.to,r.from)}));return t(hv(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:ab},{key:"Mod-]",run:sb},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Hg(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=ob(e,((t,i,o)=>{let s=Fg(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=Gg(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(eb(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=uv(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,i=uv(e.selection,(t=>{let i=lv(e,t.head,-1)||lv(e,t.head,1)||t.head>0&&lv(e,t.head-1,1)||t.head<e.doc.length&&lv(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?Fc.range(t.anchor,o):Fc.cursor(o)}));return!!r&&(t(hv(e,i)),!0)}(e,t,!1)}].concat([{key:"ArrowLeft",run:mv,shift:Nv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>Ov(e,e.textDirection!=of.LTR),shift:e=>Av(e,e.textDirection!=of.LTR)},{mac:"Cmd-ArrowLeft",run:Tv,shift:Vv},{key:"ArrowRight",run:gv,shift:$v,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>Ov(e,e.textDirection==of.LTR),shift:e=>Av(e,e.textDirection==of.LTR)},{mac:"Cmd-ArrowRight",run:Qv,shift:Lv},{key:"ArrowUp",run:xv,shift:jv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Zv,shift:Uv},{mac:"Ctrl-ArrowUp",run:_v,shift:Wv},{key:"ArrowDown",run:wv,shift:Dv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Xv,shift:Bv},{mac:"Ctrl-ArrowDown",run:kv,shift:Mv},{key:"PageUp",run:_v,shift:Wv},{key:"PageDown",run:kv,shift:Mv},{key:"Home",run:Tv,shift:Vv},{key:"Mod-Home",run:Zv,shift:Uv},{key:"End",run:Qv,shift:Lv},{key:"Mod-End",run:Xv,shift:Bv},{key:"Enter",run:rb},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Gv,shift:Gv},{key:"Delete",run:Fv},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Kv},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Hv(e,!0)},{mac:"Mod-Backspace",run:e=>qv(e,(t=>{let n=e.lineBlockAt(t).from;return Yv(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:Jv}].concat([{key:"Ctrl-b",run:mv,shift:Nv,preventDefault:!0},{key:"Ctrl-f",run:gv,shift:$v},{key:"Ctrl-p",run:xv,shift:jv},{key:"Ctrl-n",run:wv,shift:Dv},{key:"Ctrl-a",run:e=>dv(e,(t=>Fc.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>Pv(e,(t=>Fc.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>dv(e,(t=>Fc.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>Pv(e,(t=>Fc.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Fv},{key:"Ctrl-h",run:Gv},{key:"Ctrl-k",run:Jv},{key:"Ctrl-Alt-h",run:Kv},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Cc.of(["",""])},range:Fc.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:yc(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:yc(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:Fc.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:kv}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),cb={key:"Tab",run:sb,shift:ab},ub={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},hb=Cu.define({map(e,t){let n=t.mapPos(e,-1,Lc.TrackAfter);return null==n?void 0:n}}),db=Cu.define({map:(e,t)=>t.mapPos(e)}),fb=new class extends Fu{};fb.startSide=1,fb.endSide=-1;const pb=su.define({create:()=>eh.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=eh.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(hb)?e=e.update({add:[fb.range(n.value,n.value+1)]}):n.is(db)&&(e=e.update({filter:e=>e!=n.value}));return e}});function mb(){return[yb,pb]}const gb="()[]{}<>";function Ob(e){for(let t=0;t<gb.length;t+=2)if(gb.charCodeAt(t)==e)return gb.charAt(t+1);return Ec(e<128?e:e+1)}function vb(e,t){return e.languageDataAt("closeBrackets",t)[0]||ub}const bb="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),yb=Yp.inputHandler.of(((e,t,n,r)=>{if((bb?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==Qc(kc(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=vb(e,e.selection.main.head),r=n.brackets||ub.brackets;for(let i of r){let o=Ob(kc(i,0));if(t==i)return o==i?Eb(e,i,r.indexOf(i+i+i)>-1):_b(e,i,o,n.before||ub.before);if(t==o&&wb(e,e.selection.main.from))return kb(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),xb=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=vb(e,e.selection.main.head).brackets||ub.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return Qc(kc(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&Sb(e.doc,t.head)==Ob(kc(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:Fc.cursor(t.head-i.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0})),!r}}];function wb(e,t){let n=!1;return e.field(pb).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function Sb(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Qc(kc(n,0)))}function _b(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:hb.of(o.to+t.length),range:Fc.range(o.anchor+t.length,o.head+t.length)};let s=Sb(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:hb.of(o.head+t.length),range:Fc.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function kb(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&Sb(e.doc,t.head)==n?Fc.cursor(t.head+n.length):r=t));return r?null:e.update({selection:Fc.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>db.of(e)))})}function Eb(e,t,n){let r=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:hb.of(i.to+t.length),range:Fc.range(i.anchor+t.length,i.head+t.length)};let o=i.head,s=Sb(e.doc,o);if(s==t){if(Qb(e,o))return{changes:{insert:t+t,from:o},effects:hb.of(o+t.length),range:Fc.cursor(o+t.length)};if(wb(e,o)){let r=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:Fc.cursor(o+t.length*(r?3:1)),effects:db.of(o)}}}else{if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&Qb(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:hb.of(o+t.length),range:Fc.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=Wu.Word){let n=e.sliceDoc(o-1,o);if(n!=t&&e.charCategorizer(o)(n)!=Wu.Word&&!function(e,t,n){let r=Dg(e).resolveInner(t,-1);for(let i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;let i=r.to==t&&r.parent;if(!i)break;r=i}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:hb.of(o+t.length),range:Fc.cursor(o+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Qb(e,t){let n=Dg(e).resolveInner(t+1);return n.parent&&n.from==t}const Tb=eu.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Pb(e,t){let n=e.plugin(Cb),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const Cb=Gd.fromClass(class{constructor(e){this.input=e.state.facet(Rb),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Tb);this.top=new Nb(e,!0,t.topContainer),this.bottom=new Nb(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Tb);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Nb(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Nb(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Rb);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:qd.scrollMargins.from((e=>({top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()})))});class Nb{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$b(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$b(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $b(e){let t=e.nextSibling;return e.remove(),t}const Ab=Yp.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),Rb=eu.define({enables:[Cb,Ab]});function jb(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)Db(e,arguments[t]);return e}function Db(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)Db(e,t[n])}}const Ib="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class Wb{constructor(e,t,n=0,r=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(Ib(e)):Ib,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return kc(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Ec(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Qc(e);let r=this.normalize(t);for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i);if(s)return this.value=s,this;if(e==r.length-1)break;i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}"undefined"!=typeof Symbol&&(Wb.prototype[Symbol.iterator]=function(){return this});const Mb={from:-1,to:-1,match:/.*/.exec("")},Lb="gm"+(null==/x/.unicode?"":"u");class Vb{constructor(e,t,n,r=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=Mb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Ub(e,t,n,r,i);this.re=new RegExp(t,Lb+((null==n?void 0:n.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const Zb=new WeakMap;class Xb{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=Zb.get(e);if(!r||r.from>=n||r.to<=t){let r=new Xb(t,e.sliceString(t,n));return Zb.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),Zb.set(e,new Xb(o,i)),new Xb(t,i.slice(t-o,n-o))}}class Ub{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=Mb,this.matchPos=r,this.re=new RegExp(t,Lb+((null==n?void 0:n.ignoreCase)?"i":"")),this.flat=Xb.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xb.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Bb(e){let t=jb("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:qb.of(!1),selection:Fc.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:jb("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:qb.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},jb("label",e.state.phrase("Go to line"),": ",t)," ",jb("button",{class:"cm-button",type:"submit"},e.state.phrase("go"))),pos:-10}}"undefined"!=typeof Symbol&&(Vb.prototype[Symbol.iterator]=Ub.prototype[Symbol.iterator]=function(){return this});const qb=Cu.define(),Yb=su.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(qb)&&(e=n.value);return e},provide:e=>Rb.from(e,(e=>e?Bb:null))}),zb=Yp.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Gb={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!0},Fb=eu.define({combine:e=>Xu(e,Gb,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function Hb(e){let t=[ny,ty];return e&&t.push(Fb.of(e)),t}const Kb=xd.mark({class:"cm-selectionMatch"}),Jb=xd.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ey(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==Wu.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==Wu.Word)}const ty=Gd.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Fb),{state:n}=e,r=n.selection;if(r.ranges.length>1)return xd.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return xd.none;let e=n.wordAt(o.head);if(!e)return xd.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return xd.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!ey(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==Wu.Word&&e(t.sliceDoc(r-1,r))==Wu.Word}(s,n,o.from,o.to))return xd.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return xd.none}let a=[];for(let r of e.visibleRanges){let e=new Wb(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||ey(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(Jb.range(r,i)):(r>=o.to||i<=o.from)&&a.push(Kb.range(r,i)),a.length>t.maxMatches))return xd.none}}return xd.set(a)}},{decorations:e=>e.decorations}),ny=Yp.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const ry=eu.define({combine(e){var t;return{top:e.reduce(((e,t)=>null!=e?e:t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>null!=e?e:t.caseSensitive||t.matchCase),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new Ty(e))}}});class iy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Lb),!0}catch(e){return!1}}(this.search)),this.unquoted=this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new cy(this):new ay(this)}getCursor(e,t=0,n=e.length){return this.regexp?ly(this,e,t,n):sy(this,e,t,n)}}class oy{constructor(e){this.spec=e}}function sy(e,t,n,r){return new Wb(t,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase())}class ay extends oy{constructor(e){super(e)}nextMatch(e,t,n){let r=sy(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=sy(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=sy(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let n=sy(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=sy(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function ly(e,t,n,r){return new Vb(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}class cy extends oy{nextMatch(e,t,n){let r=ly(this.spec,e,n,e.length).next();return r.done&&(r=ly(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=ly(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=ly(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=ly(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const uy=Cu.define(),hy=Cu.define(),dy=su.define({create:e=>new fy(_y(e).create(),null),update(e,t){for(let n of t.effects)n.is(uy)?e=new fy(n.value.create(),e.panel):n.is(hy)&&(e=new fy(e.query,n.value?Sy:null));return e},provide:e=>Rb.from(e,(e=>e.panel))});class fy{constructor(e,t){this.query=e,this.panel=t}}const py=xd.mark({class:"cm-searchMatch"}),my=xd.mark({class:"cm-searchMatch cm-searchMatch-selected"}),gy=Gd.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(dy))}update(e){let t=e.state.field(dy);(t!=e.startState.field(dy)||e.docChanged||e.selectionSet)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return xd.none;let{view:n}=this,r=new th;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state.doc,s,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?my:py)}))}return r.finish()}},{decorations:e=>e.decorations});function Oy(e){return t=>{let n=t.state.field(dy,!1);return n&&n.query.spec.valid?e(t,n):ky(t)}}const vy=Oy(((e,{query:t})=>{let{from:n,to:r}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,r);return!(!i||i.from==n&&i.to==r)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ny(e,i),userEvent:"select.search"}),!0)})),by=Oy(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main,o=t.prevMatch(n.doc,r,i);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:Ny(e,o),userEvent:"select.search"}),!0)})),yy=Oy(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:Fc.create(n.map((e=>Fc.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),xy=Oy(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n.doc,r,r);if(!o)return!1;let s,a,l=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n.doc,o.from,o.to)),o){let e=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-e,head:o.to-e}}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:o?Ny(e,o):void 0,userEvent:"input.replace"}),!0})),wy=Oy(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));return!!n.length&&(e.dispatch({changes:n,userEvent:"input.replace.all"}),!0)}));function Sy(e){return e.state.facet(ry).createPanel(e)}function _y(e,t){var n;let r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),o=null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:e.facet(ry).caseSensitive;return t&&!i?t:new iy({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}const ky=e=>{let t=e.state.field(dy,!1);if(t&&t.panel){let n=Pb(e,Sy);if(!n)return!1;let r=n.dom.querySelector("[name=search]");if(r!=e.root.activeElement){let n=_y(e.state,t.query.spec);n.valid&&e.dispatch({effects:uy.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[hy.of(!0),t?uy.of(_y(e.state,t.query.spec)):Cu.appendConfig.of(Ay)]});return!0},Ey=e=>{let t=e.state.field(dy,!1);if(!t||!t.panel)return!1;let n=Pb(e,Sy);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:hy.of(!1)}),!0},Qy=[{key:"Mod-f",run:ky,scope:"editor search-panel"},{key:"F3",run:vy,shift:by,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:vy,shift:by,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ey,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new Wb(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(Fc.range(t.value.from,t.value.to))}return t(e.update({selection:Fc.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=Pb(e,Bb);if(!t){let n=[qb.of(!0)];null==e.state.field(Yb,!1)&&n.push(Cu.appendConfig.of([Yb,zb])),e.dispatch({effects:n}),t=Pb(e,Bb)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=Fc.create(n.ranges.map((t=>e.wordAt(t.head)||Fc.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new Wb(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((e=>e.from==i.value.from)))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new Wb(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(Fc.range(i.from,i.to),!1),effects:Yp.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class Ty{constructor(e){this.view=e;let t=this.query=e.state.field(dy).query.spec;function n(e,t,n){return jb("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=jb("input",{value:t.search,placeholder:Py(e,"Find"),"aria-label":Py(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=jb("input",{value:t.replace,placeholder:Py(e,"Replace"),"aria-label":Py(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=jb("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=jb("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=jb("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>vy(e)),[Py(e,"next")]),n("prev",(()=>by(e)),[Py(e,"previous")]),n("select",(()=>yy(e)),[Py(e,"all")]),jb("label",null,[this.caseField,Py(e,"match case")]),jb("label",null,[this.reField,Py(e,"regexp")]),...e.state.readOnly?[]:[jb("br"),this.replaceField,n("replace",(()=>xy(e)),[Py(e,"replace")]),n("replaceAll",(()=>wy(e)),[Py(e,"replace all")]),jb("button",{name:"close",onclick:()=>Ey(e),"aria-label":Py(e,"close"),type:"button"},["×"])]])}commit(){let e=new iy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:uy.of(e)}))}keydown(e){!function(e,t,n){return sm(im(e.state),t,e,n)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?by:vy)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),xy(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(uy)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ry).top}}function Py(e,t){return e.state.phrase(t)}const Cy=/[\s\.,:;?!]/;function Ny(e,{from:t,to:n}){let r=e.state.doc.lineAt(t).from,i=e.state.doc.lineAt(n).to,o=Math.max(r,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r)for(let e=0;e<30;e++)if(!Cy.test(a[e+1])&&Cy.test(a[e])){a=a.slice(e);break}if(s!=i)for(let e=a.length-1;e>a.length-30;e--)if(!Cy.test(a[e-1])&&Cy.test(a[e])){a=a.slice(0,e);break}return Yp.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${e.state.doc.lineAt(t).number}`)}const $y=Yp.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ay=[dy,fu.lowest(gy),$y],Ry="undefined"!=typeof navigator&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),jy="-10000px";class Dy{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){let t=e.state.facet(this.facet),n=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let t=0;t<n.length;t++){let i=n[t],o=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(o=e)}if(o<0)r[t]=this.createTooltipView(i);else{let n=r[t]=this.tooltipViews[o];n.update&&n.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=n,this.tooltipViews=r,!0}}function Iy(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Wy=eu.define({combine:e=>{var t,n,r;return{position:Ry?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||Iy}}}),My=Gd.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(Wy);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Dy(e,Zy,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(Wy);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=jy,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(Wy).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=e.pos[i],c=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1){a.style.top=jy;continue}let u=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,d=c.right-c.left,f=c.bottom-c.top,p=s.offset||Vy,m=this.view.textDirection==of.LTR,g=c.width>n.right-n.left?m?n.left:n.right-c.width:m?Math.min(l.left-(u?14:0)+p.x,n.right-d):Math.max(n.left,l.left-d+(u?14:0)-p.x),O=!!o.above;!o.strictSide&&(O?l.top-(c.bottom-c.top)-p.y<n.top:l.bottom+(c.bottom-c.top)+p.y>n.bottom)&&O==n.bottom-l.bottom>l.top-n.top&&(O=!O);let v=O?l.top-f-h-p.y:l.bottom+h+p.y,b=g+d;if(!0!==s.overlap)for(let e of r)e.left<b&&e.right>g&&e.top<v+f&&e.bottom>v&&(v=O?e.top-f-2-h:e.bottom+h+2);"absolute"==this.position?(a.style.top=v-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=v+"px",a.style.left=g+"px"),u&&(u.style.left=l.left+(m?p.x:-p.x)-(g+14-7)+"px"),!0!==s.overlap&&r.push({left:g,top:v,right:b,bottom:v+f}),a.classList.toggle("cm-tooltip-above",O),a.classList.toggle("cm-tooltip-below",!O),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=jy}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Ly=Yp.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Vy={x:0,y:0},Zy=eu.define({enables:[My,Ly]}),Xy=eu.define();class Uy{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Dy(e,Xy,(e=>this.createHostedView(e)))}static create(e){return new Uy(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const By=Zy.compute([Xy],(e=>{let t=e.facet(Xy).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:Uy.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class qy{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){var e;clearTimeout(this.restartTimeout);let{lastMove:t}=this,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null==n)return;let r=this.view.coordsAtPos(n);if(null==r||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((e=>e.from<=n&&e.to>=n)),o=i&&i.dir==of.RTL?-1:1,s=this.source(this.view,n,t.x<r.left?-o:o);if(null===(e=s)||void 0===e?void 0:e.then){let e=this.pending={pos:n};s.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Xd(this.view.state,e,"hover tooltip")))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let e=0;e<c.length;e++){let t=c[e];if(Math.max(t.top-i,i-t.bottom,t.left-r,r-t.right)<=o)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Yy(e,t={}){let n=Cu.define(),r=su.define({create:()=>null,update(e,r){if(e&&t.hideOnChange&&(r.docChanged||r.selection))return null;for(let e of r.effects){if(e.is(n))return e.value;if(e.is(zy))return null}if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,Lc.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);return n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),n}return e},provide:e=>Xy.from(e)});return[r,Gd.define((i=>new qy(i,e,r,n,t.hoverTime||300))),By]}const zy=Cu.define();class Gy{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=Dg(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(ex(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function Fy(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Hy(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=Fy(t)+Fy(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,span:n}:null}}class Ky{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Jy(e){return e.selection.main.head}function ex(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const tx=Qu.define();function nx(e,t){let n=t.completion.apply||t.completion.label,r=t.source;"string"==typeof n?e.dispatch({changes:{from:r.from,to:r.to,insert:n},selection:{anchor:r.from+n.length},userEvent:"input.complete",annotations:tx.of(t.completion)}):n(e,t.completion,r.from,r.to)}const rx=new WeakMap;function ix(e){if(!Array.isArray(e))return e;let t=rx.get(e);return t||rx.set(e,t=Hy(e)),t}class ox{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=kc(e,t),r=Qc(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(kc(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=kc(e,0);return r==t[0]?[0,0,Qc(r)]:r==n[0]?[-200,0,Qc(r)]:null}let s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=kc(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=Qc(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,f=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),O=0;r<l&&u<a;){let l=kc(e,r);s<0&&(c<a&&l==t[c]&&(i[c++]=r),d<a&&(l==t[d]||l==n[d]?(0==d&&(f=r),p=r+1,d++):d=0));let v,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=Ec(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!r||1==b&&m||0==O&&0!=b)&&(t[u]==l||n[u]==l&&(h=!0)?o[u++]=r:o.length&&(g=!1)),O=b,r+=Qc(l)}return u==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):d==a&&0==f?[-200-e.length,0,p]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==a?[-900-e.length,f,p]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let e of t){let t=e+(this.astral?Qc(kc(n,e)):1);i>1&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return r}}const sx=eu.define({combine:e=>Xu(e,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function ax(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class lx{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(sx);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let e=1;e<n.length;){let t=n[e++],s=n[e++];t>o&&r.appendChild(document.createTextNode(i.slice(o,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(t,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.range=ax(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return nx(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ax(t.options.length,t.selected,this.view.state.facet(sx).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let e=t.options[t.selected];e.completion.info&&(this.info=this.dom.appendChild(function(e,t){let n=document.createElement("div");n.className="cm-tooltip cm-completionInfo";let{info:r}=e.completion;if("string"==typeof r)n.textContent=r;else{let i=r(e.completion);i.then?i.then((e=>n.appendChild(e)),(e=>Xd(t.state,e,"completion info"))):n.appendChild(i)}return n}(e,this.view)),this.view.requestMeasure(this.placeInfo))}}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,o=this.view.textDirection==of.RTL,s=t.left,a=innerWidth-t.right;return o&&s<Math.min(n.width,a)?o=!1:!o&&a<Math.min(n.width,s)&&(o=!0),{top:i,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox");for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=e[i];const s=r.appendChild(document.createElement("li"));s.id=t+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,o);t&&s.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function cx(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class ux{constructor(e,t,n,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ux(this.options,fx(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=0;for(let i of e)if(i.hasResult())if(!1===i.result.filter)for(let e of i.result.options)n.push(new Ky(e,i,[1e9-r++]));else{let e,r=new ox(t.sliceDoc(i.from,i.to));for(let t of i.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new Ky(t,i,e)))}n.sort(mx);let i=[],o=null;for(let e of n.sort(mx)){if(300==i.length)break;o&&o.label==e.completion.label&&o.detail==e.completion.detail&&o.type==e.completion.type&&o.apply==e.completion.apply?cx(e.completion)>cx(o)&&(i[i.length-1]=e):i.push(e),o=e.completion}return i}(e,t);if(!o.length)return null;let s=0;if(r&&r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length&&!s;t++)o[t].completion==e&&(s=t)}return new ux(o,fx(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=Sx,e=>new lx(e,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s);var a}map(e){return new ux(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class hx{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new hx(px,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(sx),r=(n.override||t.languageDataAt("autocomplete",Jy(t)).map(ix)).map((t=>(this.active.find((e=>e.source==t))||new Ox(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?ux.build(r,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new Ox(e.source,0):e)));for(let t of e.effects)t.is(wx)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new hx(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:dx}}const dx={"aria-autocomplete":"list","aria-expanded":"false"};function fx(e,t){return{"aria-autocomplete":"list","aria-expanded":"true","aria-activedescendant":e+"-"+t,"aria-controls":e}}const px=[];function mx(e,t){let n=t.match[0]-e.match[0];return n||e.completion.label.localeCompare(t.completion.label)}function gx(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class Ox{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=gx(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new Ox(r.source,0));for(let t of e.effects)if(t.is(bx))r=new Ox(r.source,1,t.value?Jy(e.state):-1);else if(t.is(yx))r=new Ox(r.source,0);else if(t.is(xx))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new Ox(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(Jy(e.startState))?new Ox(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ox(this.source,this.state,e.mapPos(this.explicitPos))}}class vx extends Ox{constructor(e,t,n,r,i,o){super(e,2,t),this.result=n,this.from=r,this.to=i,this.span=o}hasResult(){return!0}handleUserEvent(e,t,n){let r=e.changes.mapPos(this.from),i=e.changes.mapPos(this.to,1),o=Jy(e.state);if((this.explicitPos<0?o<=r:o<this.from)||o>i||"delete"==t&&Jy(e.startState)==this.from)return new Ox(this.source,"input"==t&&n.activateOnTyping?1:0);let s=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return this.span&&(r==i||this.span.test(e.state.sliceDoc(r,i)))?new vx(this.source,s,this.result,r,i,this.span):new Ox(this.source,1,s)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ox(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new vx(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1),this.span)}}const bx=Cu.define(),yx=Cu.define(),xx=Cu.define({map:(e,t)=>e.map((e=>e.map(t)))}),wx=Cu.define(),Sx=su.define({create:()=>hx.start(),update:(e,t)=>e.update(t),provide:e=>[Zy.from(e,(e=>e.tooltip)),Yp.contentAttributes.from(e,(e=>e.attrs))]});function _x(e,t="option"){return n=>{let r=n.state.field(Sx,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let i,o=1;"page"==t&&(i=function(e,t){let n=e.plugin(My);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let s=r.open.selected+o*(e?1:-1),{length:a}=r.open.options;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:wx.of(s)}),!0}}class kx{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Ex=Gd.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Sx).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Sx);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Sx)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!gx(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&r.time-Date.now()>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){Xd(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==gx(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Sx);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=Jy(t),r=new Gy(t,n,e.explicitPos==n),i=new kx(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:yx.of(null)}),Xd(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(sx);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new vx(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:Jy(i.updates.length?i.updates[0].startState:this.view.state),i.done.span&&!1!==i.done.filter?ex(i.done.span,!0):null);for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(Sx).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new Ox(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:xx.of(t)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:bx.of(!1)})),20),this.composing=0}}}),Qx=Yp.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Tx{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class Px{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Lc.TrackDel),n=e.mapPos(this.to,1,Lc.TrackDel);return null==t||null==n?null:new Px(this.field,t,n)}}class Cx{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,s=/^\t*/.exec(i)[0].length;for(let t=0;t<s;t++)n+=e.facet(Yg);r.push(t+n.length-s),i=n+i.slice(s)}n.push(i),t+=i.length+1}let s=this.fieldPositions.map((e=>new Px(e.field,r[e.line]+e.from,r[e.line]+e.to)));return{text:n,ranges:s}}static parse(e){let t,n=[],r=[],i=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1;for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:s&&n[t].name==s)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:s}),a=t;for(let e of i)e.field>=a&&e.field++}i.push(new Tx(a,r.length,t.index,t.index+s.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}r.push(o)}return new Cx(r,i)}}let Nx=xd.widget({widget:new class extends bd{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),$x=xd.mark({class:"cm-snippetField"});class Ax{constructor(e,t){this.ranges=e,this.active=t,this.deco=xd.set(e.map((e=>(e.from==e.to?Nx:$x).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new Ax(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const Rx=Cu.define({map:(e,t)=>e&&e.map(t)}),jx=Cu.define(),Dx=su.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(Rx))return n.value;if(n.is(jx)&&e)return new Ax(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>Yp.decorations.from(e,(e=>e?e.deco:xd.none))});function Ix(e,t){return Fc.create(e.filter((e=>e.field==t)).map((e=>Fc.range(e.from,e.to))))}function Wx(e){let t=Cx.parse(e);return(e,n,r,i)=>{let{text:o,ranges:s}=t.instantiate(e.state,r),a={changes:{from:r,to:i,insert:Cc.of(o)}};if(s.length&&(a.selection=Ix(s,0)),s.length>1){let t=new Ax(s,0),n=a.effects=[Rx.of(t)];void 0===e.state.field(Dx,!1)&&n.push(Cu.appendConfig.of([Dx,Zx,Ux,Qx]))}e.dispatch(e.state.update(a))}}function Mx(e){return({state:t,dispatch:n})=>{let r=t.field(Dx,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==i+e));return n(t.update({selection:Ix(r.ranges,i),effects:Rx.of(o?null:new Ax(r.ranges,i))})),!0}}const Lx=[{key:"Tab",run:Mx(1),shift:Mx(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(Dx,!1)&&(t(e.update({effects:Rx.of(null)})),!0)}],Vx=eu.define({combine:e=>e.length?e[0]:Lx}),Zx=fu.highest(nm.compute([Vx],(e=>e.facet(Vx))));function Xx(e,t){return Object.assign(Object.assign({},t),{apply:Wx(e)})}const Ux=Yp.domEventHandlers({mousedown(e,t){let n,r=t.state.field(Dx,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!i||i.field==r.active)&&(t.dispatch({selection:Ix(r.ranges,i.field),effects:Rx.of(r.ranges.some((e=>e.field>i.field))?new Ax(r.ranges,i.field):null)}),!0)}});function Bx(e={}){return[Sx,sx.of(e),Ex,Yx,Qx]}const qx=[{key:"Ctrl-Space",run:e=>!!e.state.field(Sx,!1)&&(e.dispatch({effects:bx.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Sx,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:yx.of(null)}),!0)}},{key:"ArrowDown",run:_x(!0)},{key:"ArrowUp",run:_x(!1)},{key:"PageDown",run:_x(!0,"page")},{key:"PageUp",run:_x(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Sx,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(nx(e,t.open.options[t.open.selected]),!0)}}],Yx=fu.highest(nm.computeN([sx],(e=>e.facet(sx).defaultKeymap?[qx]:[])));function zx(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const Gx=zx(tw,0),Fx=zx(ew,0),Hx=zx(((e,t)=>ew(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from,to:i.to})}return t}(t))),0),Kx=[{key:"Mod-/",run:e=>{let t=Jx(e.state);return t.line?Gx(e):!!t.block&&Hx(e)}},{key:"Alt-A",run:Fx}];function Jx(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function ew(e,t,n=t.selection.ranges){let r=n.map((e=>Jx(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function tw(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9;for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>i&&(e==o||o>a.from)){i=a.from;let e=Jx(t,n).line;if(!e)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+e.length)==e?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:c,token:e,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)!s&&o||e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const nw=2e3;function rw(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>nw?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Tc(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function iw(e,t){let n=rw(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=rw(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>nw||n.off>nw||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(Fc.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=Pc(n.text,s,e.tabSize,!0);if(r>-1){let t=Pc(n.text,a,e.tabSize);o.push(Fc.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?Fc.create(a.concat(r.ranges)):Fc.create(a):r}}:null}function ow(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return Yp.mouseSelectionStyle.of(((e,n)=>t(n)?iw(e,n):null))}let sw=0;class aw{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=sw++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new aw([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new cw;return t=>t.modified.indexOf(e)>-1?t:cw.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let lw=0;class cw{constructor(){this.instances=[],this.id=lw++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new aw(r,e,t);for(let e of t)e.instances.push(i);let o=uw(t);for(let t of e.set)for(let e of o)r.push(cw.get(t,e));return i}}function uw(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of uw(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function hw(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?null:'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new gw(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return dw.add(t)}const dw=new lg,fw=eu.define({combine:e=>e.length?Ow.combinedMatch(e):null}),pw=eu.define({combine:e=>e.length?e[0].match:null});function mw(e){return e.facet(fw)||e.facet(pw)}class gw{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}class Ow{constructor(e,t){let n;function r(e){let t=Yu.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.map=Object.create(null),this.all="string"==typeof t.all?t.all:t.all?r(t.all):null;for(let t of e){let e=(t.class||r(Object.assign({},t,{tag:null})))+(this.all?" "+this.all:""),n=t.tag;if(Array.isArray(n))for(let t of n)this.map[t.id]=e;else this.map[n.id]=e}this.module=n?new Yu(n):null,this.scope=t.scope||null,this.match=this.match.bind(this);let i=[bw];this.module&&i.push(Yp.styleModule.of(this.module)),this.extension=i.concat(fw.of(this)),this.fallback=i.concat(pw.of(this))}match(e,t){if(this.scope&&t!=this.scope)return null;for(let t of e.set){let n=this.map[t.id];if(void 0!==n)return t!=e&&(this.map[e.id]=n),n}return this.map[e.id]=this.all}static combinedMatch(e){if(1==e.length)return e[0].match;let t=e.some((e=>e.scope))?void 0:Object.create(null);return(n,r)=>{let i=t&&t[n.id];if(void 0!==i)return i;let o=null;for(let t of e){let e=t.match(n,r);e&&(o=o?o+" "+e:e)}return t&&(t[n.id]=o),o}}static define(e,t){return new Ow(e,t||{})}static get(e,t,n){let r=mw(e);return r&&r(t,n||ug.none)}}class vw{constructor(e){this.markCache=Object.create(null),this.tree=Dg(e.state),this.decorations=this.buildDeco(e,mw(e.state))}update(e){let t=Dg(e.state),n=mw(e.state),r=n!=e.startState.facet(fw);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return xd.none;let n=new th;for(let{from:r,to:i}of e.visibleRanges)ww(this.tree,r,i,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=xd.mark({class:r})))}));return n.finish()}}const bw=fu.high(Gd.fromClass(vw,{decorations:e=>e.decorations})),yw=[""];class xw{constructor(e,t,n){this.at=e,this.style=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i,o){let{type:s,from:a,to:l}=e;if(a>=n||l<=t)return;yw[i]=s.name,s.isTop&&(o=s);let c=r,u=s.prop(dw),h=!1;for(;u;){if(!u.context||Sw(u.context,yw,i)){for(let e of u.tags){let t=this.style(e,o);t&&(c&&(c+=" "),c+=t,1==u.mode?r+=(r?" ":"")+t:0==u.mode&&(h=!0))}break}u=u.next}if(this.startSpan(e.from,c),h)return;let d=e.tree&&e.tree.prop(lg.mounted);if(d&&d.overlay){let s=e.node.enter(d.overlay[0].from+a,1),u=e.firstChild();for(let h=0,f=a;;h++){let p=h<d.overlay.length?d.overlay[h]:null,m=p?p.from+a:l,g=Math.max(t,f),O=Math.min(n,m);if(g<O&&u)for(;e.from<O&&(this.highlightRange(e,g,O,r,i+1,o),this.startSpan(Math.min(n,e.to),c),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;f=p.to+a,f>t&&(this.highlightRange(s.cursor,Math.max(t,p.from+a),Math.min(n,f),r,i,d.tree.type),this.startSpan(f,c))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i+1,o),this.startSpan(Math.min(n,e.to),c)}}while(e.nextSibling());e.parent()}}}function ww(e,t,n,r,i){let o=new xw(t,r,i);o.highlightRange(e.cursor(),t,n,"",0,e.type),o.flush(n)}function Sw(e,t,n){if(e.length>n-1)return!1;for(let r=n-1,i=e.length-1;i>=0;i--,r--){let n=e[i];if(n&&n!=t[r])return!1}return!0}const _w=aw.define,kw=_w(),Ew=_w(),Qw=_w(Ew),Tw=_w(Ew),Pw=_w(),Cw=_w(Pw),Nw=_w(Pw),$w=_w(),Aw=_w($w),Rw=_w(),jw=_w(),Dw=_w(),Iw=_w(Dw),Ww=_w(),Mw={comment:kw,lineComment:_w(kw),blockComment:_w(kw),docComment:_w(kw),name:Ew,variableName:_w(Ew),typeName:Qw,tagName:_w(Qw),propertyName:Tw,attributeName:_w(Tw),className:_w(Ew),labelName:_w(Ew),namespace:_w(Ew),macroName:_w(Ew),literal:Pw,string:Cw,docString:_w(Cw),character:_w(Cw),attributeValue:_w(Cw),number:Nw,integer:_w(Nw),float:_w(Nw),bool:_w(Pw),regexp:_w(Pw),escape:_w(Pw),color:_w(Pw),url:_w(Pw),keyword:Rw,self:_w(Rw),null:_w(Rw),atom:_w(Rw),unit:_w(Rw),modifier:_w(Rw),operatorKeyword:_w(Rw),controlKeyword:_w(Rw),definitionKeyword:_w(Rw),moduleKeyword:_w(Rw),operator:jw,derefOperator:_w(jw),arithmeticOperator:_w(jw),logicOperator:_w(jw),bitwiseOperator:_w(jw),compareOperator:_w(jw),updateOperator:_w(jw),definitionOperator:_w(jw),typeOperator:_w(jw),controlOperator:_w(jw),punctuation:Dw,separator:_w(Dw),bracket:Iw,angleBracket:_w(Iw),squareBracket:_w(Iw),paren:_w(Iw),brace:_w(Iw),content:$w,heading:Aw,heading1:_w(Aw),heading2:_w(Aw),heading3:_w(Aw),heading4:_w(Aw),heading5:_w(Aw),heading6:_w(Aw),contentSeparator:_w($w),list:_w($w),quote:_w($w),emphasis:_w($w),strong:_w($w),link:_w($w),monospace:_w($w),strikethrough:_w($w),inserted:_w(),deleted:_w(),changed:_w(),invalid:_w(),meta:Ww,documentMeta:_w(Ww),annotation:_w(Ww),processingInstruction:_w(Ww),definition:aw.defineModifier(),constant:aw.defineModifier(),function:aw.defineModifier(),standard:aw.defineModifier(),local:aw.defineModifier(),special:aw.defineModifier()},Lw=Ow.define([{tag:Mw.link,textDecoration:"underline"},{tag:Mw.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Mw.emphasis,fontStyle:"italic"},{tag:Mw.strong,fontWeight:"bold"},{tag:Mw.strikethrough,textDecoration:"line-through"},{tag:Mw.keyword,color:"#708"},{tag:[Mw.atom,Mw.bool,Mw.url,Mw.contentSeparator,Mw.labelName],color:"#219"},{tag:[Mw.literal,Mw.inserted],color:"#164"},{tag:[Mw.string,Mw.deleted],color:"#a11"},{tag:[Mw.regexp,Mw.escape,Mw.special(Mw.string)],color:"#e40"},{tag:Mw.definition(Mw.variableName),color:"#00f"},{tag:Mw.local(Mw.variableName),color:"#30a"},{tag:[Mw.typeName,Mw.namespace],color:"#085"},{tag:Mw.className,color:"#167"},{tag:[Mw.special(Mw.variableName),Mw.macroName],color:"#256"},{tag:Mw.definition(Mw.propertyName),color:"#00c"},{tag:Mw.comment,color:"#940"},{tag:Mw.meta,color:"#7a757a"},{tag:Mw.invalid,color:"#f00"}]);class Vw{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Zw{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=xd.set(e.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?xd.widget({widget:new tS(e),diagnostic:e}).range(e.from):xd.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new Zw(r,t,Xw(r))}}function Xw(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new Vw(e,n,i.diagnostic),!1})),r}const Uw=Cu.define(),Bw=Cu.define(),qw=Cu.define(),Yw=su.define({create:()=>new Zw(xd.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=Xw(n,e.selected.diagnostic,i)||Xw(n,null,i)}e=new Zw(n,e.panel,r)}for(let n of t.effects)n.is(Uw)?e=Zw.init(n.value,e.panel,t.state):n.is(Bw)?e=new Zw(e.diagnostics,n.value?rS.open:null,e.selected):n.is(qw)&&(e=new Zw(e.diagnostics,e.panel,n.value));return e},provide:e=>[Rb.from(e,(e=>e.panel)),Yp.decorations.from(e,(e=>e.diagnostics))]}),zw=xd.mark({class:"cm-lintRange cm-lintRange-active"});function Gw(e,t,n){let{diagnostics:r}=e.state.field(Yw),i=[],o=2e8,s=0;return r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))})),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:Fw(e,i)})}:null}function Fw(e,t){return jb("ul",{class:"cm-tooltip-lint"},t.map((t=>eS(e,t,!1))))}const Hw=e=>{let t=e.state.field(Yw,!1);return!(!t||!t.panel)&&(e.dispatch({effects:Bw.of(!1)}),!0)},Kw=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(Yw,!1);var n,r;t&&t.panel||e.dispatch({effects:(n=e.state,r=[Bw.of(!0)],n.field(Yw,!1)?r:r.concat(Cu.appendConfig.of([Yw,Yp.decorations.compute([Yw],(e=>{let{selected:t,panel:n}=e.field(Yw);return t&&n&&t.from!=t.to?xd.set([zw.range(t.from,t.to)]):xd.none})),Yy(Gw),oS])))});let i=Pb(e,rS.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:e=>{let t=e.state.field(Yw,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}];function Jw(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function eS(e,t,n){var r;let i=n?Jw(t.actions):[];return jb("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},jb("span",{class:"cm-diagnosticText"},t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=Xw(e.state.field(Yw).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),jb("u",s.slice(a,a+1)),s.slice(a+1)];return jb("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),t.source&&jb("div",{class:"cm-diagnosticSource"},t.source))}class tS extends bd{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return jb("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class nS{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=eS(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class rS{constructor(e){this.view=e,this.items=[];this.list=jb("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)Hw(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=Jw(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=Xw(this.view.state.field(Yw).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=jb("div",{class:"cm-panel-lint"},this.list,jb("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Hw(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Yw).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Yw),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==s.diagnostic){l=e;break}l<0?(a=new nS(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new nS(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=Xw(this.view.state.field(Yw).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:qw.of(t)})}static open(e){return new rS(e)}}function iS(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const oS=Yp.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:iS("#d11")},".cm-lintRange-warning":{backgroundImage:iS("orange")},".cm-lintRange-info":{backgroundImage:iS("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),sS=[CO(),RO(),Pm(),Zm(),HO(),cm(),xm(),Zu.allowMultipleSelections.of(!0),aO(),Lw.fallback,sv(),mb(),Bx(),ow(),Am(),Hb(),nm.of([...xb,...lb,...Qy,...ig,...UO,...Kx,...qx,...Kw])],aS="#abb2bf",lS="#7d8799",cS="#2c313a",uS="#282c34",hS="#353a42",dS="#528bff",fS=Yp.theme({"&":{color:aS,backgroundColor:uS},".cm-content":{caretColor:dS},"&.cm-focused .cm-cursor":{borderLeftColor:dS},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:aS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:cS},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:uS,color:lS,border:"none"},".cm-activeLineGutter":{backgroundColor:cS},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:hS},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:hS,borderBottomColor:hS},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:cS,color:aS}}},{dark:!0});var pS=Yp.theme({"&":{backgroundColor:"#fff"}},{dark:!1});function mS(e){var{value:n,selection:r,onChange:i,onUpdate:o,extensions:s=[],autoFocus:a,theme:c="light",height:u="",minHeight:h="",maxHeight:d="",placeholder:f="",width:p="",minWidth:m="",maxWidth:g="",editable:O=!0,indentWithTab:v=!0,basicSetup:b=!0,root:y}=e,[x,w]=t(e.container),[S,_]=t(),[k,E]=t(),Q=Yp.theme({"&":{height:u,minHeight:h,maxHeight:d,width:p,minWidth:m,maxWidth:g}}),T=[Yp.updateListener.of((e=>{if(e.docChanged&&"function"==typeof i){var t=e.state.doc.toString();i(t,e)}})),Q];return v&&T.unshift(nm.of([cb])),b&&T.unshift(sS),f&&T.unshift(function(e){return Gd.fromClass(class{constructor(t){this.view=t,this.placeholder=xd.set([xd.widget({widget:new Dm(e),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?xd.none:this.placeholder}},{decorations:e=>e.decorations})}(f)),"light"===c?T.push(pS):T.push(fS),!1===O&&T.push(Yp.editable.of(!1)),o&&"function"==typeof o&&T.push(Yp.updateListener.of(o)),T=T.concat(s),l((()=>{if(x&&!k){var e=Zu.create({doc:n,selection:r,extensions:T});if(E(e),!S){var t=new Yp({state:e,parent:x,root:y});_(t)}}}),[x,k]),l((()=>()=>{S&&S.destroy()}),[S]),l((()=>{if(S){var e=S.state.doc.toString();n!==e&&S.dispatch({changes:{from:0,to:e.length,insert:n||""}})}}),[n,S]),l((()=>{S&&S.dispatch({effects:Cu.reconfigure.of(T)})}),[c,s,f,u,h,d,p,m,g,O,v,b]),l((()=>{a&&S&&S.focus()}),[a,S]),{state:k,setState:E,view:S,setView:_,container:x,setContainer:w}}var gS,OS=["className","value","selection","extensions","onChange","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","root"],vS=n.forwardRef(((e,t)=>{var{className:n,value:r,selection:i,extensions:o=[],onChange:s,onUpdate:a,autoFocus:c,theme:u="light",height:h,minHeight:d,maxHeight:f,width:p,minWidth:O,maxWidth:v,basicSetup:b,placeholder:y,indentWithTab:x,editable:w,root:S}=e,_=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,OS),k=g(null),{state:E,view:Q,container:T,setContainer:P}=mS({container:k.current,root:S,value:r,autoFocus:c,theme:u,height:h,minHeight:d,maxHeight:f,width:p,minWidth:O,maxWidth:v,basicSetup:b,placeholder:y,indentWithTab:x,editable:w,selection:i,onChange:s,onUpdate:a,extensions:o});return m(t,(()=>({editor:T,state:E,view:Q}))),l((()=>(P(k.current),()=>{Q&&Q.destroy()})),[]),Xi.exports.jsx("div",gc({ref:k,className:"cm-theme-"+u+(n?" "+n:"")},_))}));vS.displayName="CodeMirror";class bS{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new bS(e,[],t,n,n,0,[],0,r?new yS(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=65535&e,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(t-1)-(262144&e?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,e,l+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(e,t,n,r=4,i=!1){if(0==e){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new bS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new xS(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.storeNode(0,i.pos,i.pos,4,!0),i.pushState(r,this.pos),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new yS(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class yS{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(gS||(gS={}));class xS{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class wS{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new wS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new wS(this.stack,this.pos,this.index)}}class SS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const _S=new SS;class kS{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=_S,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=_S,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class ES{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;e:for(;0!=(o&e[i]);){let n=e[i+1];for(let r=i+3;r<n;r+=2)if((e[r+1]&o)>0){let n=e[r];if(a.allows(n)&&(-1==t.token.value||t.token.value==n||s.overrides(n,t.token.value))){t.acceptToken(n);break}}for(let r=t.next,o=0,s=e[i+2];o<s;){let a=o+s>>1,l=n+a+(a<<1),c=e[l],u=e[l+1];if(r<c)s=a;else{if(!(r>=u)){i=e[l+2],t.advance();continue e}o=a+1}}break}}(this.data,e,t,this.id)}}ES.prototype.contextual=ES.prototype.fallback=ES.prototype.extend=!1;class QS{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function TS(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}const PS="undefined"!=typeof process&&/\bparse\b/.test(process.env.LOG);let CS=null;var NS,$S;function AS(e,t,n){let r=e.fullCursor();for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(NS||(NS={}));class RS{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?AS(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?AS(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof pg){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(lg.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class jS{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new SS))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new SS,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new SS,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(VS(s,a+2),t,n,r));break}a=VS(s,a+2)}s[a]==t&&(r=this.putAction(VS(s,a+1),t,n,r))}return r}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}($S||($S={}));class DS{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new kS(t,r),this.tokens=new jS(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[bS.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new RS(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw PS&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1)e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=PS?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(lg.contextHash)||0)==n))return e.useNode(s,r),PS&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof pg)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof pg&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),PS&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,d=h?e:e.split();if(d.apply(l,c,u),PS&&console.log(o+this.stackID(d)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return IS(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=PS?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),PS&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10;e++){if(PS&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;PS&&(h=this.stackID(u)+" -> ")}for(let e of s.recoverByInsert(a))PS&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),PS&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),IS(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),pg.build({buffer:wS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(CS||(CS=new WeakMap)).get(e);return t||CS.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function IS(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class WS{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const MS=e=>e;class LS extends Cg{constructor(e){if(super(),this.wrappers=[],13!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (13)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new hg(t.map(((t,i)=>ug.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),this.strict=!1,this.bufferLength=og;let o=TS(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=TS(e.states,Uint32Array),this.data=TS(e.stateData),this.goto=TS(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new ES(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new DS(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return VS(n,o+2);break}i=n[o=VS(n,o+2)]}if(i==t||0==i)return VS(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=VS(this.data,n+2)}if(t==VS(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=VS(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}overrides(e,t){let n=ZS(this.data,this.tokenPrecTable,t);return n<0||ZS(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(LS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new WS(e,n,r)}static deserialize(e){return new LS(e)}}function VS(e,t){return e[t]|e[t+1]<<16}function ZS(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}const XS=280,US=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],BS=new class{constructor(e){this.start=e.start,this.shift=e.shift||MS,this.reduce=e.reduce||MS,this.reuse=e.reuse||MS,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>5==t||6==t||284==t?e:285==t,strict:!1}),qS=new QS(((e,t)=>{let{next:n}=e;(125==n||-1==n||t.context)&&t.canShift(282)&&e.acceptToken(282)}),{contextual:!0,fallback:!0}),YS=new QS(((e,t)=>{let n,{next:r}=e;US.indexOf(r)>-1||(47!=r||47!=(n=e.peek(1))&&42!=n)&&125!=r&&59!=r&&-1!=r&&!t.context&&t.canShift(279)&&e.acceptToken(279)}),{contextual:!0}),zS=new QS(((e,t)=>{let{next:n}=e;if((43==n||45==n)&&(e.advance(),n==e.next)){e.advance();let n=!t.context&&t.canShift(1);e.acceptToken(n?1:2)}}),{contextual:!0}),GS=new QS((e=>{for(let t=!1,n=0;;n++){let{next:r}=e;if(r<0){n&&e.acceptToken(XS);break}if(96==r){n?e.acceptToken(XS):e.acceptToken(281,1);break}if(123==r&&t){1==n?e.acceptToken(3,1):e.acceptToken(XS,-1);break}if(10==r&&n){e.advance(),e.acceptToken(XS);break}92==r&&e.advance(),t=36==r,e.advance()}}));const FS={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:472,finally:474,return:478,throw:482,break:486,continue:490,debugger:494},HS={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},KS={__proto__:null,"<":129},JS=LS.deserialize({version:13,states:"$1jO`QYOOO'QQ!LdO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ!LS'#Ef'#EfO0aQ!LdO'#IrO2wQ!LdO'#IsO3eQWO'#EzO3jQpO'#FaOOQ!LS'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ!LS'#Is'#IsOOQ!LQ'#Ir'#IrOOQQ'#J['#J[O5dQWO'#HnO5iQ!LYO'#HoOOQQ'#If'#IfOOQQ'#Hp'#HpQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ!LZO'#HdO){QYO'#HfO:nQ!LZO'#HhO:yQ!LZO'#HjO5iQ!LYO'#HlO){QYO'#DWOOOS'#Hr'#HrO;UOSO,59qOOQ!LS,59q,59qO=gQbO'#ChO=qQYO'#HsO>UQWO'#ItO@TQbO'#ItO'dQYO'#ItO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JPOBTQWO'#JOOBTQWO'#JOOB]QWO,5:yOBbQWO'#I}OBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ!LS,5:S,5:SOC[QYO,5:SOEYQ!LdO,5:^OEvQWO,5:dOFaQ!LYO'#I|O7VQWO'#I{OFhQWO'#I{OFpQWO,5:xOFuQWO'#I{OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ!LS,5;h,5;hOOQ!LS,5;i,5;iONXQWO,5;iOOQ!LS,5;j,5;jO){QYO'#H}ON^Q!LYO,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JTO! PQpO'#JTO! iQpO'#JTO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#H|'#H|O3rO!bO,5;nO!!aQpO'#FeOOQ!LS,5;n,5;nO!!}Q,UO'#CrOOQ!LS'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&|Q&jO'#F{O!'oQ,UO'#IoOOQ!LS'#Io'#IoO!'yQWO'#InO!(XQWO'#ImOOQ!LS'#Cs'#CsOOQ!LS'#C|'#C|O!(aQWO'#DOOJdQWO'#FjOJdQWO'#FlO!(fQWO'#FnO!(kQWO'#FoO!(pQWO'#FuOJdQWO'#FzO!(uQWO'#E^O!)^QWO,5<RO`QYO,5>YOOQQ'#Ii'#IiOOQQ,5>Z,5>ZOOQQ-E;n-E;nO!+YQ!LdO,5:UOOQ!LQ'#Cp'#CpO!+yQ#tO,5<vOOQO'#Cf'#CfO!,[QWO'#CqO!,dQ!LYO'#IjO5_QWO'#IjO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#J`O){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ!LYO,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ!LQ'#I}'#I}O!/ZQ!LYO'#J]O5iQ!LYO,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ!LYO,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>O,5>OO){QYO,5>OO5iQ!LYO,5>QOOQQ,5>S,5>SO!8VQWO,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8[Q`O,59rOOOS-E;p-E;pOOQ!LS1G/]1G/]O!8aQbO,5>_O'dQYO,5>_OOQO,5>d,5>dO!8kQYO'#HsOOQO-E;q-E;qO!8xQWO,5?`O!9QQbO,5?`O!9XQWO,5?jOOQ!LS1G/c1G/cO!9aQpO'#DTOOQO'#Iv'#IvO){QYO'#IvO!:OQpO'#IvO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IuO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JQO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?kO!>wQWO'#HxOOQO-E;v-E;vO!9XQWO,5?jOOQ!LQ1G0e1G0eO!@TQ&jO'#D|OOQ!LS,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ!LS1G/n1G/nOOQ!LS1G0O1G0OOOQ!LQ'#EV'#EVO){QYO,5?hO!@gQ!LYO,5?hO!@xQ!LYO,5?hO!APQWO,5?gO!AXQWO'#HzO!APQWO,5?gOOQ!LQ1G0d1G0dO7VQWO,5?gOOQ!LS1G0b1G0bO!AsQ!LdO1G0bO!BdQ!LbO,5:rOOQ!LS'#Fq'#FqO!CQQ!LdO'#IoOGTQYO1G0bO!EPQ#tO'#IwO!EZQWO,5:WO!E`QbO'#IxO){QYO'#IxO!EjQWO,5:]OOQ!LS'#DT'#DTOOQ!LS1G0k1G0kO!EoQWO1G0kO!HQQ!LdO1G0mO!HXQ!LdO1G0mO!JlQ!LdO1G0mO!JsQ!LdO1G0mO!LzQ!LdO1G0mO!M_Q!LdO1G0mO#!OQ!LdO1G0mO#!VQ!LdO1G0mO#$jQ!LdO1G0mO#$qQ!LdO1G0mO#&fQ!LdO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IsOOQ!LS1G1T1G1TO#-iQ!LdO,5>iOOQ!LQ-E;{-E;{O#.YQ!LdO1G0mOOQ!LS1G0m1G0mO#0[Q!LdO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JU'#JUOOQO'#H{'#H{O#1pQpO1G1]OOQ!LS1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#IrO#2YQWO,5;}OLXQYO,5;}OOOO-E;z-E;zOOQ!LS1G1Y1G1YOOQ!LS,5<P,5<PO#2_QpO,5<POOQ!LS,59a,59aOITQWO'#C{OOOS'#Hq'#HqO#2dOSO,59eOOQ!LS,59e,59eO){QYO1G1lO!(kQWO'#IPO#2oQWO,5<eOOQ!LS,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JXO5qQWO'#JXO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#JYO#4bQWO'#JYOITQWO'#JYO#4gQWO,5<cOOQ!LQ'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&wQ&jO'#F|O!&wQ&jO'#GOO#5YQWO'#GPO!(pQWO'#GSOOQO'#IR'#IRO#5_Q&jO,5<gOOQ!LS,5<g,5<gO#5fQ&jO'#F|O#5tQ&jO'#F}O#5|Q&jO'#F}OOQ!LS,5<u,5<uOJdQWO,5?YOJdQWO,5?YO#6RQWO'#ISO#6^QWO,5?XOOQ!LS'#Ch'#ChO#7QQ#tO,59jOOQ!LS,59j,59jO#7sQ#tO,5<UO#8fQ#tO,5<WO#8pQWO,5<YOOQ!LS,5<Z,5<ZO#8uQWO,5<aO#8zQ#tO,5<fOGTQYO1G1mO#9[QWO1G1mOOQQ1G3t1G3tOOQ!LS1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9aQWO1G2bO#9oQWO,59]O#:xQWO'#EWOOQ!LQ,5?U,5?UO#;SQ!LYO,5?UOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;bQWO1G0bO#;gQWO'#ChO#;rQWO'#JaO#;zQWO,5=dO#<PQWO'#JaO#<UQWO'#JaO#<^QWO'#I[O#<lQWO,5?zO#<tQbO1G1VOOQ!LS1G1X1G1XO5qQWO1G2}O#<{QWO1G2}O#=QQWO1G2}O#=VQWO1G2}OOQQ1G2}1G2}O#=[Q#tO1G2bO7VQWO'#JOO7VQWO'#EaO7VQWO'#IUO#=mQ!LYO,5?wOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#=xQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#=}QWO1G2jO#>VQ&jO'#GhOOQQ1G2l1G2lO!&wQ&jO'#IWO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>_Q#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#>pQWO'#J_O#>{QWO,5=`OOQQ1G.j1G.jO#?QQ!LYO1G.jO#?]QWO1G.jO#?bQWO1G.jO5iQ!LYO1G.jO#?jQbO,5?|O#?tQWO,5?|O#@PQYO,5=gO#@WQWO,5=gO7VQWO,5?|OOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@]QYO1G3]O#DWQYO'#H[OOQQ1G3`1G3`O:^QWO1G3fO#DeQWO1G3fO5iQ!LYO1G3jOOQQ1G3l1G3lOOQ!LQ'#Fx'#FxO5iQ!LYO1G3nO5iQ!LYO1G3pOOOS1G/^1G/^O#DmQ`O,5<TO#DuQbO1G3yOOQO1G4O1G4OO){QYO,5>_O#EPQWO1G4zO#EXQWO1G5UO#EaQWO,5?bOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#EfQ7^O,59}OOQO,5:{,5:{O#EpQ&jO'#HtO#FWQWO,5?aOOQ!LS1G/h1G/hO#F`Q&jO'#HyO#FtQWO,5?lOOQ!LQ1G0f1G0fO!;OQ&jO,59}O#F|QbO1G5VO7VQWO,5>dOOQ!LQ'#ES'#ESO#GWQ!LrO'#ETO!?{Q&jO'#D}OOQO'#Hw'#HwO#GrQ&jO,5:hOOQ!LS,5:h,5:hO#GyQ&jO'#D}O#H[Q&jO'#D}O#HcQ&jO'#EYO#HfQ&jO'#ETO#HsQ&jO'#ETO!?{Q&jO'#ETO#IWQWO1G0PO#I]Q`O1G0POOQ!LS1G0P1G0PO){QYO1G0POITQWO1G0POOQ!LS1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#IdQ!LdO1G5SO){QYO1G5SO#ItQ!LYO1G5SO#JVQWO1G5RO7VQWO,5>fOOQO,5>f,5>fO#J_QWO,5>fOOQO-E;x-E;xO#JVQWO1G5RO#JmQ!LdO,59jO#LlQ!LdO,5<UO#NnQ!LdO,5<WO$!pQ!LdO,5<fOOQ!LS7+%|7+%|O$$xQ!LdO7+%|O$%iQWO'#HuO$%sQWO,5?cOOQ!LS1G/r1G/rO$%{QYO'#HvO$&YQWO,5?dO$&bQbO,5?dOOQ!LS1G/w1G/wOOQ!LS7+&V7+&VO$&lQ7^O,5:^O){QYO7+&iO$&vQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$'TQMhO,5;vOLXQYO,5;uOOQO-E;y-E;yOOQ!LS7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$'`QWO1G1iOOQ!LS1G1k1G1kO$'eQ`O,59gOOOS-E;o-E;oOOQ!LS1G/P1G/PO$'lQ!LdO7+'WOOQ!LS,5>k,5>kO$(]QWO,5>kOOQ!LS1G2P1G2PP$(bQWO'#IPPOQ!LS-E;}-E;}O$)RQ#tO1G2[O$)tQ#tO1G2^O$*OQ#tO1G2`OOQ!LS1G1x1G1xO$*VQWO'#IOO$*eQWO,5?sO$*eQWO,5?sO$*mQWO,5?sO$*xQWO,5?sOOQO1G1z1G1zO$+WQ#tO1G1yO$+hQWO'#IQO$+xQWO,5?tOITQWO,5?tO$,QQ`O,5?tOOQ!LS1G1}1G1}O5iQ!LYO,5<hO5iQ!LYO,5<iO$,[QWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$,aQWO,5<jO5iQ!LYO,5<kO$,[QWO,5<nOOQO-E<P-E<POOQ!LS1G2R1G2RO!&wQ&jO,5<hO$,iQWO,5<iO!&wQ&jO,5<jO!&wQ&jO,5<iO$,tQ#tO1G4tO$-OQ#tO1G4tOOQO,5>n,5>nOOQO-E<Q-E<QO!-uQ&jO,59lO){QYO,59lO$-]QWO1G1tOJdQWO1G1{O$-bQ!LdO7+'XOOQ!LS7+'X7+'XOGTQYO7+'XOOQ!LS7+%[7+%[O$.RQ`O'#JZO#IWQWO7+'|O$.]QWO7+'|O$.eQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$.oQ!LbO'#ChO$/PQ!LbO,5<lO$/nQWO,5<lOOQ!LQ1G4p1G4pOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$/sQWO'#IZO$0UQWO,5?{OOQO1G3O1G3OO5qQWO,5?{O$0UQWO,5?{O$0^QWO,5?{OOQO,5>v,5>vOOQO-E<Y-E<YOOQ!LS7+&q7+&qO$0cQWO7+(iO5iQ!LYO7+(iO5qQWO7+(iO$0hQWO7+(iO$0mQWO7+'|OOQ!LQ,5>p,5>pOOQ!LQ-E<S-E<SOOQQ7+(W7+(WO$0{Q!LbO7+(TOITQWO7+(TO$1VQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$1^QWO'#J^O$1iQWO,5=SOOQO,5>r,5>rOOQO-E<U-E<UOOQQ7+(Z7+(ZO$2cQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$2jQWO1G2vO$2xQ#tO1G2vO5iQ!LYO1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$3ZQWO'#IYO$3fQWO,5?yO$3nQ&jO,5?yOOQ!LQ1G2z1G2zOOQQ7+$U7+$UO$3vQWO7+$UO5iQ!LYO7+$UO$3{QWO7+$UO){QYO1G5hO){QYO1G5iO$4QQYO1G3RO$4XQWO1G3RO$4^QYO1G3RO$4eQ!LYO1G5hOOQQ7+(k7+(kO5iQ!LYO7+(uO`QYO7+(wOOQQ'#Jd'#JdOOQQ'#I]'#I]O$4oQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$4|QWO'#H_OOQQ7+)Q7+)QO$5RQYO7+)QO7VQWO7+)QOOQQ7+)U7+)UOOQQ7+)Y7+)YOOQQ7+)[7+)[OOQO1G4|1G4|O$9PQ7^O1G0gO$9ZQWO1G0gOOQO1G/i1G/iO$9fQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>`,5>`OOQO-E;r-E;rOOQO,5>e,5>eOOQO-E;w-E;wO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$9pQ!LYO,5:oO$9{Q!LYO,5:oO!,rQpO,5:iOOQO-E;u-E;uOOQ!LS1G0S1G0SO!?{Q&jO,5:iO$:ZQ&jO,5:iO$:lQ!LrO,5:oO$;WQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;_Q&jO,5:oO$;lQ!LYO,5:oOOQ!LS7+%k7+%kO#IWQWO7+%kO#I]Q`O7+%kOOQ!LS7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<QQ!LdO7+*nO){QYO7+*nOOQO1G4Q1G4QO7VQWO1G4QO$<bQWO7+*mO$<jQ!LdO1G2[O$>lQ!LdO1G2^O$@nQ!LdO1G1yO$BvQ#tO,5>aOOQO-E;s-E;sO$CQQbO,5>bO){QYO,5>bOOQO-E;t-E;tO$C[QWO1G5OO$CdQ7^O1G0bO$EkQ7^O1G0mO$ErQ7^O1G0mO$GsQ7^O1G0mO$GzQ7^O1G0mO$IoQ7^O1G0mO$JSQ7^O1G0mO$LaQ7^O1G0mO$LhQ7^O1G0mO$NiQ7^O1G0mO$NpQ7^O1G0mO%!eQ7^O1G0mO%!xQ!LdO<<JTO%#iQ7^O1G0mO%%XQ7^O'#IoO%'UQ7^O1G1QOLXQYO'#F^OOQO'#JV'#JVOOQO1G1b1G1bO%'cQWO1G1aO%'hQ7^O,5>iOOOO7+'T7+'TOOOS1G/R1G/ROOQ!LS1G4V1G4VOJdQWO7+'zO%'rQWO,5>jO5qQWO,5>jOOQO-E;|-E;|O%(QQWO1G5_O%(QQWO1G5_O%(YQWO1G5_O%(eQ`O,5>lO%(oQWO,5>lOITQWO,5>lOOQO-E<O-E<OO%(tQ`O1G5`O%)OQWO1G5`OOQO1G2S1G2SOOQO1G2T1G2TO5iQ!LYO1G2TO$,[QWO1G2TO5iQ!LYO1G2SO%)WQWO1G2UOITQWO1G2UOOQO1G2V1G2VO5iQ!LYO1G2YO!,rQpO1G2SO#5TQWO1G2TO%)]QWO1G2UO%)eQWO1G2TOJdQWO7+*`OOQ!LS1G/W1G/WO%)pQWO1G/WOOQ!LS7+'`7+'`O%)uQ#tO7+'gO%*VQ!LdO<<JsOOQ!LS<<Js<<JsOITQWO'#ITO%*vQWO,5?uOOQQ<<Kh<<KhOITQWO<<KhO#IWQWO<<KhO%+OQWO<<KhO%+WQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+bQ!LdO<<IhOOQ!LS<<Ih<<IhOOQO,5>u,5>uO%,RQWO,5>uO%,WQWO,5>uOOQO-E<X-E<XO%,`QWO1G5gO%,`QWO1G5gO5qQWO1G5gO%,hQWO<<LTOOQQ<<LT<<LTO%,mQWO<<LTO5iQ!LYO<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$0{Q!LbO<<KoOOQQ<<Kp<<KpO$1VQ`O<<KpO%,rQ&jO'#IVO%,}QWO,5?xOLXQYO,5?xOOQQ1G2n1G2nO#GWQ!LrO'#ETO!?{Q&jO'#GrOOQO'#IX'#IXO%-VQ&jO,5=]OOQQ,5=],5=]O%-^Q&jO'#ETO%-iQ&jO'#ETO%.QQ&jO'#ETO%.[Q&jO'#GrO%.mQWO7+(bO%.rQWO7+(bO%.zQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/UQWO7+(bOOQQ7+(e7+(eO5iQ!LYO7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/dQWO,5>tOOQO-E<W-E<WOOQO'#Gu'#GuO%/oQWO1G5eO5iQ!LYO<<GpOOQQ<<Gp<<GpO%/wQWO<<GpO%/|QWO7++SO%0RQWO7++TOOQQ7+(m7+(mO%0WQWO7+(mO%0]QYO7+(mO%0dQWO7+(mO){QYO7++SO){QYO7++TOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<Z-E<ZOOQQ1G3b1G3bO%0iQWO,5=wOOQQ,5=y,5=yO:^QWO<<LlO%0nQWO<<LlOLXQYO7+&ROOQO7+%T7+%TO%0sQ7^O1G5VO:^QWO7+%TOOQO1G0T1G0TO%0}Q!LdO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1XQ!LYO1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1dQ!LYO1G0ZO%1rQ&jO1G0TO%2TQ!LYO1G0ZO%2iQ!LrO1G0ZO%2sQ&jO1G0TO!?{Q&jO1G0ZOOQ!LS<<IV<<IVOOQ!LS<<Ig<<IgO:^QWO<<IgO%2zQ!LdO<<NYOOQO7+)l7+)lO%3[Q!LdO7+'gO%5dQbO1G3|O%5nQ7^O7+%|O%5{Q7^O,59jO%7xQ7^O,5<UO%9uQ7^O,5<WO%;rQ7^O,5<fO%=bQ7^O7+'WO%=oQ7^O7+'XO%=|QWO,5;xOOQO7+&{7+&{O%>RQ#tO<<KfOOQO1G4U1G4UO%>cQWO1G4UO%>nQWO1G4UO%>|QWO7+*yO%>|QWO7+*yOITQWO1G4WO%?UQ`O1G4WO%?`QWO7+*zOOQO7+'o7+'oO5iQ!LYO7+'oOOQO7+'n7+'nO$,[QWO7+'pO%?hQ`O7+'pOOQO7+'t7+'tO5iQ!LYO7+'nO$,[QWO7+'oO%?oQWO7+'pOITQWO7+'pO#5TQWO7+'oO%?tQ#tO<<MzOOQ!LS7+$r7+$rO%@OQ`O,5>oOOQO-E<R-E<RO#IWQWOANASOOQQANASANASOITQWOANASO%@YQ!LbO7+'rOOQQAN=eAN=eO5qQWO1G4aOOQO1G4a1G4aO%@gQWO1G4aO%@lQWO7++RO%@lQWO7++RO5iQ!LYOANAoO%@tQWOANAoOOQQANAoANAoO%@yQWOANASO%ARQ`OANASOOQQANAZANAZOOQQANA[ANA[O%A]QWO,5>qOOQO-E<T-E<TO%AhQ7^O1G5dO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<V-E<VOOQQ1G2w1G2wO$:lQ!LrO,5:oO!?{Q&jO,5=^O%ArQ&jO,5=^O%BTQ&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%.mQWO<<K|O%B_QWO<<K|O%BgQ`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ!LYO<<LPO#5YQWO<<LPO5_QWO<<LPO%BqQ&jO1G4`O%ByQWO7++POOQQAN=[AN=[O5iQ!LYOAN=[OOQQ<<Nn<<NnOOQQ<<No<<NoOOQQ<<LX<<LXO%CRQWO<<LXO%CWQYO<<LXO%C_QWO<<NnO%CdQWO<<NoOOQQ1G3c1G3cOOQQANBWANBWO:^QWOANBWO%CiQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%0}Q!LdO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%CsQ!LYO7+%uO!?{Q&jO7+%oO%DOQ!LYO7+%uO%D^Q&jO7+%oO%DoQ!LYO7+%uOOQ!LSAN?RAN?RO%ETQ!LdO<<KfO%G]Q7^O<<JTO%GjQ7^O1G1yO%IYQ7^O1G2[O%KVQ7^O1G2^O%MSQ7^O<<JsO%MaQ7^O<<IhOOQO1G1d1G1dOOQO7+)p7+)pO%MnQWO7+)pO%MyQWO<<NeO%NRQ`O7+)rOOQO<<KZ<<KZO5iQ!LYO<<K[O$,[QWO<<K[OOQO<<KY<<KYO5iQ!LYO<<KZO%N]Q`O<<K[O$,[QWO<<KZOOQQG26nG26nO#IWQWOG26nOOQO7+){7+){O5qQWO7+){O%NdQWO<<NmOOQQG27ZG27ZO5iQ!LYOG27ZOITQWOG26nOLXQYO1G4]O%NlQWO7++OO5iQ!LYO1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%2iQ!LrO1G0ZO%NtQ&jO1G2xO%.mQWOANAhOOQQANAhANAhOITQWOANAhO& VQWOANAhO& _Q`OANAhOOQQANAkANAkO5iQ!LYOANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)z7+)zOOQQG22vG22vOOQQANAsANAsO& iQWOANAsOOQQANDYANDYOOQQANDZANDZO& nQYOG27rOOQO<<Ia<<IaO%0}Q!LdO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&%lQ!LYO<<IaO!?{Q&jO<<IZO&%wQ!LYO<<IaO&&VQ7^O7+'gOOQO<<M[<<M[OOQOAN@vAN@vO5iQ!LYOAN@vOOQOAN@uAN@uO$,[QWOAN@vO5iQ!LYOAN@uOOQQLD,YLD,YOOQO<<Mg<<MgOOQQLD,uLD,uO#IWQWOLD,YO&'uQ7^O7+)wOOQO7+(d7+(dO5iQ!LYO7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%.mQWOG27SOITQWOG27SOOQQG27VG27VO5iQ!LYOG27VOOQQG27_G27_O:^QWOLD-^OOQOAN>{AN>{OOQOAN>uAN>uO%0}Q!LdOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&(PQ!LYOAN>{O&([Q7^O<<KfOOQOG26bG26bO5iQ!LYOG26bOOQOG26aG26aOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ!LYO<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%.mQWOLD,nOOQQLD,qLD,qOOQQ!$(!x!$(!xOOQOG24gG24gOOQOG24aG24aO%0}Q!LdOG24gO:^QWOG24aO){QYOG24gOOQOLD+|LD+|OOQOANAjANAjO5iQ!LYOANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%0}Q!LdOLD*ROOQOG27UG27UO5iQ!LYOG27UO#5YQWOG27UOOQO!$'Mm!$'MmOOQOLD,pLD,pO5iQ!LYOLD,pOOQO!$(![!$(![OLXQYO'#DrO&)zQbO'#IrOLXQYO'#DjO&*RQ!LdO'#ChO&*lQbO'#ChO&*|QYO,5:vOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#H}O&,|QWO,5<TO&.`QWO,5;ROLXQYO,5;fO!(aQWO'#DOO!(aQWO'#DOOITQWO'#FjO&-UQWO'#FjOITQWO'#FlO&-UQWO'#FlOITQWO'#FzO&-UQWO'#FzOLXQYO,5?kO&*|QYO1G0bO&.gQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&-UQWO,5<pOITQWO,5<rO&-UQWO,5<rOITQWO,5<_O&-UQWO,5<_O&*|QYO1G1mOLXQYO7+&iOITQWO1G1{O&-UQWO1G1{O&*|QYO7+'XO&*|QYO7+%|OITQWO7+'zO&-UQWO7+'zO&.qQWO'#E[O&.vQWO'#E[O&/OQWO'#EzO&/TQWO'#EgO&/YQWO'#JPO&/eQWO'#I}O&/pQWO,5:vO&/uQ#tO,5<QO&/|QWO'#FsO&0RQWO'#FsO&0WQWO,5<RO&0`QWO,5:vO&0hQ7^O1G0}O&0oQWO,5<aO&0tQWO,5<aO&0yQWO1G1mO&1OQWO1G0bO&1TQ#tO1G2`O&1[Q#tO1G2`O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(pQWO'#FuO!(pQWO'#FuOJdQWO,5<tOJdQWO,5<t",stateData:"&2X~O'WOS'XOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&X!RO&Z!SO&]!TO&_!UO&a!VO'ZPO'dQO'mYO'zaO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'U[X'd[X'n[X'u[X'v[X~O!]$lX~P$zOR!WO'S!XO'T!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z![O'dQO'mYO'zaO~O!Q!`O!R!]O!O'hP!O'rP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z9YO'dQO'mYO'zaO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'dQO'mYO'zaO~O!Q!rO#U!uO#V!rO'Z9ZO!c'oP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O_'fX'U'fX!c'fX!O'fX!T'fX%Q'fX!]'fX~P.jO!{#eO#o#eOP'gXZ'gX_'gXj'gXu'gXv'gXx'gX!R'gX!a'gX!b'gX!d'gX!j'gX#['gX#]'gX#^'gX#_'gX#`'gX#a'gX#b'gX#e'gX#g'gX#i'gX#j'gX'd'gX'n'gX'u'gX'v'gX~O#c'gX'U'gX!O'gX!c'gXn'gX!T'gX%Q'gX!]'gX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO'Z#pO'd#sO'_'aP~O!d$XO~O!]$ZO~O_$[O'U$[O~O'Z$`O~O!d$XO'Z$`O'[$bO'`$cO~Oc$iO!d$XO'Z$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO'Z$`O'[$bO^(SP~O!n$sO~Ox$tO!T$uO'Z$`O~Ox$tO!T$uO%Z$yO'Z$`O~O'Z$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'[$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'R%lO'U$[O~O_$[O'R%oO'U$[O~O_$[O'R%qO'U$[O~OR!WO'S!XO'T%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'd[X'n[X'u[X'v[X~O!O[X!OdX~P;aO!Q%wO!O&gX!O&lX!R&gX!R&lX~P'dO!R%yO!O'hX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O!O'hX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'[$bO~O]&SOk&SO!Q&VO'e&PO!S'iP!S'tP~P@aO!O'qX!R'qX!]'qX!c'qX'n'qX~O!{'qX#W#PX!S'qX~PAYO!{&^O!O'sX!R'sX~O!R&_O!O'rX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO'Z$`O~Oc&kO!d$XO'Z$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'dQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'n!fa'u!fa'v!fa~O_!fa'U!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'n&nO!R'pX_'pX'U'pX~O!c'pX~PE{O!R&sO!c'oX~O!c&uO~Ox$tO!T$uO#V&vO'Z$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z9YO'dQO'mYO'zaO~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'Z&zO'd#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO'Z&zO'd#sO~O'_'kP~PJdO!Q'QO!c'lP~P){O'e'SO'mYO~OP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!T!bO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'Z'bO'dQO'mYO'z:kO~O!d!zO~O!R#bO_$]a'U$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'wX#w'wX#z'wX$R'wX~Ou'lO~P! POu'lO!T'wX#w'wX#z'wX$R'wX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'n$eX'u$eX'v$eX~OSfX!RfX!{fX'_fX'_$eX~P!!iOk'{O~OR'|O'S'}O'T(PO~Ou(ROx(SO'n#[O'u(UO'v(WO~O'_(QO~P!#rO'_(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'd#sO~O!Q(_O'Z([O!c'{P~P!$aO#W(aO~O!Q(eO'Z(bO!O'|P~P!$aO_(nOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'[$bO'e(gO~O!S(pO~P!&XO!b!yOu'cXx'cX'n'cX'u'cX'v'cX!R'cX!{'cX~O'_'cX#m'cX~P!'TOS(vO!{(uO!R'bX'_'bX~O!R(wO'_'aX~O'Z(yO~O!d)OO~O'Z&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO'Z$`O!c'oP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O_!^a!R!^a'U!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)fOS)[O!T&cO!o)ZO%Q)YO'`$cO~O'Z$zO'_'aP~O!])_O!T'^X_'^X'U'^X~O!d$XO'`$cO~O!d$XO'Z$`O'`$cO~O!]!wO#W&|O~O])jO%R)kO'Z)gO!S(TP~O!R)lO^(SX~O'e'SO~OZ)pO~O^)qO~O!T$kO'Z$`O'[$bO^(SP~Ox$tO!Q)vO!R&_O!T$uO'Z$`O!O'rP~O]&YOk&YO!Q)wO'e'SO!S'tP~O!R)xO_(PX'U(PX~O!{)|O'`$cO~OS*PO!T#yO'`$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'Z(yO!S(RP~Oc$iO~O%RtO'Z$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'dQO'mYO'zaO~O!T!bO#t!lO'Z9YO~P!1RO^*dO_$[O'U$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&U*uO&V*tOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&X&Sa&Z&Sa&]&Sa&_&Sa&a&Sa'Q&Sa'Z&Sa'd&Sa'm&Sa'z&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O'Z*xO~On*{O~O!O&ga!R&ga~P!)fO!Q+PO!O&gX!R&gX~P){O!R%yO!O'ha~O!O'ha~P>^O!R&_O!O'ra~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'`!ZX~O!]+UO!{+TO!R#TX!R'jX!S#TX!S'jX!]'jX!d'jX'`'jX~O!]+WO!d$XO'`$cO!R!VX!S!VX~O]&QOk&QOx&RO'e(gO~OP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!T!bO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'dQO'mYO'z:kO~O'Z9vO~P!;^O!R+[O!S'iX~O!S+^O~O!]+UO!{+TO!R#TX!S#TX~O!R+_O!S'tX~O!S+aO~O]&QOk&QOx&RO'[$bO'e(gO~O!X+bO!Y+bO~P!>[Ox$tO!Q+dO!T$uO'Z$`O!O&lX!R&lX~O_+hO!W+kO!X+gO!Y+gO!r+oO!s+mO!t+nO!u+lO!x+pO'[$bO'e(gO'm+eO~O!S+jO~P!?]OS+uO!T&cO!o+tO~O!{+{O!R'pa!c'pa_'pa'U'pa~O!]!wO~P!@gO!R&sO!c'oa~Ox$tO!Q,OO!T$uO#U,QO#V,OO'Z$`O!R&nX!c&nX~O_#Oi!R#Oi'U#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)fO#W!za!R!za!c!za!{!za!T!za_!za'U!za!O!za~P!#rO#W'cXP'cXZ'cX_'cXj'cXv'cX!a'cX!d'cX!j'cX#['cX#]'cX#^'cX#_'cX#`'cX#a'cX#b'cX#c'cX#e'cX#g'cX#i'cX#j'cX'U'cX'd'cX!c'cX!O'cX!T'cXn'cX%Q'cX!]'cX~P!'TO!R,ZO'_'kX~P!#rO'_,]O~O!R,^O!c'lX~P!)fO!c,aO~O!O,bO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'dQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'dQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'dQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'dQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'u#Zi~P!MrO'u!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'dQO'u!}O_#Zi!R#Zi#i#Zi#j#Zi'U#Zi'n#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'v#Zi~P#!^O'v#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'dQO'u!}O'v#OO~O_#Zi!R#Zi#j#Zi'U#Zi'n#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'd[X'n[X'u[X'v[X!R[X!S[X~O#m[X~P#']OP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO#i9fO#j9gO'dQO'n#[O'u!}O'v#OO~O#m,dO~P#)gOP'gXZ'gXj'gXu'gXv'gXx'gX!a'gX!b'gX!d'gX!j'gX#['gX#]'gX#^'gX#_'gX#`'gX#a'gX#b'gX#e'gX#g'gX#i'gX#j'gX'd'gX'n'gX'u'gX'v'gX!R'gX~O!{9kO#o9kO#c'gX#m'gX!S'gX~P#+bO_&qa!R&qa'U&qa!c&qan&qa!O&qa!T&qa%Q&qa!]&qa~P!)fOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'd#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'U#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)fO#z,fO~O#z,gO~O!]'kO!{,hO!T$OX#w$OX#z$OX$R$OX~O!Q,iO~O!T'nO#w,kO#z'mO$R,lO~O!R9hO!S'fX~P#)gO!S,mO~O$R,oO~OR'|O'S'}O'T,rO~O],uOk,uO!O,vO~O!RdX!]dX!cdX!c$eX'ndX~P!!iO!c,|O~P!#rO!R,}O!]!wO'n&nO!c'{X~O!c-SO~O!O$eX!R$eX!]$lX~P!!iO!R-UO!O'|X~P!#rO!]-WO~O!O-YO~O!Q(_O'Z$`O!c'{P~Oj-^O!]!wO!d$XO'`$cO'n&nO~O!])_O~O!S-dO~P!&XO!X-eO!Y-eO'[$bO'e(gO~Ox-gO'e(gO~O!x-hO~O'Z$zO!R&vX'_&vX~O!R(wO'_'aa~Ou-mOv-mOx-nO'nra'ura'vra!Rra!{ra~O'_ra#mra~P#6fOu(ROx(SO'n$^a'u$^a'v$^a!R$^a!{$^a~O'_$^a#m$^a~P#7[Ou(ROx(SO'n$`a'u$`a'v$`a!R$`a!{$`a~O'_$`a#m$`a~P#7}O]-oO~O#W-pO~O'_$na!R$na#m$na!{$na~P!#rO#W-sO~OS-|O!T&cO!o-{O%Q-zO~O'_-}O~O]#qOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'd#sO~Oh.PO'Z.OO~P#9tO!])_O!T'^a_'^a'U'^a~O#W.VO~OZ[X!RdX!SdX~O!R.WO!S(TX~O!S.YO~OZ.ZO~O].]O'Z)gO~O!T$kO'Z$`O^'OX!R'OX~O!R)lO^(Sa~O!c.`O~P!)fO].bO~OZ.cO~O^.dO~OS-|O!T&cO!o-{O%Q-zO'`$cO~O!R)xO_(Pa'U(Pa~O!{.jO~OS.mO!T#yO~O'e'SO!S(QP~OS.wO!T.sO!o.vO%Q.uO'`$cO~OZ/RO!R/PO!S(RX~O!S/SO~O^/UO_$[O'U$[O~O]/VO~O]/WO'Z(yO~O#c/XO%r/YO~P0zO!{#eO#c/XO%r/YO~O_/ZO~P){O_/]O~O%{/aOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&X%yi&Z%yi&]%yi&_%yi&a%yi'Q%yi'Z%yi'd%yi'm%yi'z%yi!S%yi`%yi&Q%yi~O`/gO!S/eO&Q/fO~P`O!TSO!d/jO~O!R#bOn$]a~O!O&gi!R&gi~P!)fO!R%yO!O'hi~O!R&_O!O'ri~O!O/nO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/tO'e(gO!R&hX!S&hX~P@aO!R+[O!S'ia~O]&YOk&YO!Q)wO'e'SO!R&mX!S&mX~O!R+_O!S'ta~O!O'si!R'si~P!)fO_$[O!]!wO!d$XO!j0OO!{/|O'U$[O'`$cO'n&nO~O!S0RO~P!?]O!X0SO!Y0SO'[$bO'e(gO'm+eO~O!W0TO~P#GyO!TSO!W0TO!u0VO!x0WO~P#GyO!W0TO!s0YO!t0YO!u0VO!x0WO~P#GyO!T&cO~O!T&cO~P!#rO!R'pi!c'pi_'pi'U'pi~P!)fO!{0cO!R'pi!c'pi_'pi'U'pi~O!R&sO!c'oi~Ox$tO!T$uO#V0eO'Z$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Ura'dra!cra!Ora!Tranra%Qra!]ra~P#6fO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'U$^a'd$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7[O#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'U$`a'd$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#7}O#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'U$na'd$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'U#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)fO!R&iX'_&iX~PJdO!R,ZO'_'ka~O!Q0mO!R&jX!c&jX~P){O!R,^O!c'la~O!R,^O!c'la~P!)fO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1QO#x^O$P1RO~O!S1VO~On1WO~P!#rO_$Yq!R$Yq'U$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)fO!O1XO~O],uOk,uO~Ou(ROx(SO'v(WO'n$xi'u$xi!R$xi!{$xi~O'_$xi#m$xi~P$(jOu(ROx(SO'n$zi'u$zi'v$zi!R$zi!{$zi~O'_$zi#m$zi~P$)]O#m1YO~P!#rO!Q1[O'Z$`O!R&rX!c&rX~O!R,}O!c'{a~O!R,}O!]!wO!c'{a~O!R,}O!]!wO'n&nO!c'{a~O'_$gi!R$gi#m$gi!{$gi~P!#rO!Q1cO'Z(bO!O&tX!R&tX~P!$aO!R-UO!O'|a~O!R-UO!O'|a~P!#rO!]!wO~O!]!wO#c1mO~Oj1qO!]!wO'n&nO~O!R'bi'_'bi~P!#rO!{1tO!R'bi'_'bi~P!#rO!c1wO~O_$Zq!R$Zq'U$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)fO!R1{O!T'}X~P!#rO!T&cO%Q2OO~O!T&cO%Q2OO~P!#rO!T$eX$u[X_$eX'U$eX~P!!iO$u2SOugXxgX!TgX'ngX'ugX'vgX_gX'UgX~O$u2SO~O]2YO%R2ZO'Z)gO!R&}X!S&}X~O!R.WO!S(Ta~OZ2_O~O^2`O~O]2cO~OS2eO!T&cO!o2dO%Q2OO~O_$[O'U$[O~P!#rO!T#yO~P!#rO!R2jO!{2lO!S(QX~O!S2mO~Ox(kO!W2vO!X2oO!Y2oO!r2uO!s2tO!t2tO!x2sO'[$bO'e(gO'm+eO~O!S2rO~P$1nOS2}O!T.sO!o2|O%Q2{O~OS2}O!T.sO!o2|O%Q2{O'`$cO~O'Z(yO!R&|X!S&|X~O!R/PO!S(Ra~O]3XO'e3WO~O]3YO~O^3[O~O!c3_O~P){O_3aO~O_3aO~P){O#c3cO%r3dO~PE{O`/gO!S3hO&Q/fO~P`O!]3jO~O&V3kOP&SqQ&SqX&Sq]&Sq_&Sqb&Sqc&Sqh&Sqj&Sqk&Sql&Sqq&Sqs&Sqx&Sq{&Sq|&Sq}&Sq!T&Sq!_&Sq!d&Sq!g&Sq!h&Sq!i&Sq!j&Sq!k&Sq!n&Sq#d&Sq#t&Sq#x&Sq%P&Sq%R&Sq%T&Sq%U&Sq%X&Sq%Z&Sq%^&Sq%_&Sq%a&Sq%n&Sq%t&Sq%v&Sq%x&Sq%z&Sq%}&Sq&T&Sq&X&Sq&Z&Sq&]&Sq&_&Sq&a&Sq'Q&Sq'Z&Sq'd&Sq'm&Sq'z&Sq!S&Sq%{&Sq`&Sq&Q&Sq~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'U$[O~O_$[O!]!wO!{3tO'U$[O~O!X3xO!Y3xO'[$bO'e(gO'm+eO~O_$[O!]!wO!d$XO!j3yO!{3tO'U$[O'`$cO'n&nO~O!W3zO~P$:ZO!W3zO!u3}O!x4OO~P$:ZO_$[O!]!wO!j3yO!{3tO'U$[O'n&nO~O!R'pq!c'pq_'pq'U'pq~P!)fO!R&sO!c'oq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'U$xi'd$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$(jO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'U$zi'd$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$)]O#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'U$gi'd$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ia'_&ia~P!#rO!R&ja!c&ja~P!)fO!R,^O!c'li~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'dQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~O#[#Zi~P$CqO#[9]O~P$CqOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O'dQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~Oj#Zi~P$EyOj9_O~P$EyOP#^Oj9_Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O'dQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HROZ9jO!a9aO#a9aO#b9aO#c9aO~P$HROP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO'dQO#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'v#Zi!R#Zi!S#Zi~O'u#Zi~P$JgO'u!}O~P$JgOP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO'dQO'u!}O#i#Zi#j#Zi#m#Zi'n#Zi!R#Zi!S#Zi~O'v#Zi~P$LoO'v#OO~P$LoOP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO#i9fO'dQO'u!}O'v#OO~O#j#Zi#m#Zi'n#Zi!R#Zi!S#Zi~P$NwO_#ky!R#ky'U#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)fOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'd#Zi!R#Zi!S#Zi~P!#rO!b!yOP'cXZ'cXj'cXu'cXv'cXx'cX!a'cX!d'cX!j'cX#['cX#]'cX#^'cX#_'cX#`'cX#a'cX#b'cX#c'cX#e'cX#g'cX#i'cX#j'cX#m'cX'd'cX'n'cX'u'cX'v'cX!R'cX!S'cX~O#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&qa!S&qa~P#)gO!]!wO'n&nO!R&ra!c&ra~O!R,}O!c'{i~O!R,}O!]!wO!c'{i~O!O&ta!R&ta~P!#rO!]4gO~O!R-UO!O'|i~P!#rO!R-UO!O'|i~O!O4mO~O!]!wO#c4sO~Oj4tO!]!wO'n&nO~O!O4vO~O'_$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'U$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)fO!R1{O!T'}a~O!T&cO%Q4{O~O!T&cO%Q4{O~P!#rO_#Oy!R#Oy'U#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)fOZ5OO~O]5QO'Z)gO~O!R.WO!S(Ti~O]5TO~O^5UO~O'e'SO!R&yX!S&yX~O!R2jO!S(Qa~O!S5cO~P$1nOx-gO'e(gO'm+eO~O!W5fO!X5eO!Y5eO!x0WO'[$bO'e(gO'm+eO~O!s5gO!t5gO~P%-iO!X5eO!Y5eO'[$bO'e(gO'm+eO~O!T.sO~O!T.sO%Q5iO~O!T.sO%Q5iO~P!#rOS5nO!T.sO!o5mO%Q5iO~OZ5sO!R&|a!S&|a~O!R/PO!S(Ri~O]5vO~O!c5wO~O!c5xO~O!c5yO~O!c5yO~P){O_5{O~O!]6OO~O!c6QO~O!R'si!S'si~P#)gO_$[O'U$[O~P!)fO_$[O!{6VO'U$[O~O_$[O!]!wO!{6VO'U$[O~O!X6[O!Y6[O'[$bO'e(gO'm+eO~O_$[O!]!wO!j6]O!{6VO'U$[O'n&nO~O!d$XO'`$cO~P%2TO!W6^O~P%1rO!R'py!c'py_'py'U'py~P!)fO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'U$iq'd$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&ji!c&ji~P!)fO#m#Oq!R#Oq!S#Oq~P#)gOu-mOv-mOx-nOPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'dra'nra'ura'vra!Rra!Sra~Ou(ROx(SOP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'd$^a'n$^a'u$^a'v$^a!R$^a!S$^a~Ou(ROx(SOP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'd$`a'n$`a'u$`a'v$`a!R$`a!S$`a~OP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'd$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6hO~O'_$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ri!c&ri~O!]!wO'n&nO!R&ri!c&ri~O!R,}O!c'{q~O!O&ti!R&ti~P!#rO!R-UO!O'|q~O!O6oO~P!#rO!O6oO~O!R'by'_'by~P!#rO!R&wa!T&wa~P!#rO!T$tq_$tq'U$tq~P!#rOZ6wO~O!R.WO!S(Tq~O]6zO~O!T&cO%Q6{O~O!T&cO%Q6{O~P!#rO!{6|O!R&ya!S&ya~O!R2jO!S(Qi~P#)gO!X7SO!Y7SO'[$bO'e(gO'm+eO~O!W7UO!x4OO~P%ArO!T.sO%Q7XO~O!T.sO%Q7XO~P!#rO]7`O'e7_O~O!R/PO!S(Rq~O!c7bO~O!c7bO~P){O!c7dO~O!c7eO~O!R#Ty!S#Ty~P#)gO_$[O!{7kO'U$[O~O_$[O!]!wO!{7kO'U$[O~O!X7nO!Y7nO'[$bO'e(gO'm+eO~O_$[O!]!wO!j7oO!{7kO'U$[O'n&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'U$|y'd$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'd$gi!R$gi!S$gi~P!#rOu(ROx(SO'v(WOP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'd$xi'n$xi'u$xi!R$xi!S$xi~Ou(ROx(SOP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'd$zi'n$zi'u$zi'v$zi!R$zi!S$zi~O#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&rq!c&rq~O!R,}O!c'{y~O!O&tq!R&tq~P!#rO!O7uO~P!#rO!R.WO!S(Ty~O!R2jO!S(Qq~O!X8RO!Y8RO'[$bO'e(gO'm+eO~O!T.sO%Q8UO~O!T.sO%Q8UO~P!#rO!c8XO~O&V8YOP&S!ZQ&S!ZX&S!Z]&S!Z_&S!Zb&S!Zc&S!Zh&S!Zj&S!Zk&S!Zl&S!Zq&S!Zs&S!Zx&S!Z{&S!Z|&S!Z}&S!Z!T&S!Z!_&S!Z!d&S!Z!g&S!Z!h&S!Z!i&S!Z!j&S!Z!k&S!Z!n&S!Z#d&S!Z#t&S!Z#x&S!Z%P&S!Z%R&S!Z%T&S!Z%U&S!Z%X&S!Z%Z&S!Z%^&S!Z%_&S!Z%a&S!Z%n&S!Z%t&S!Z%v&S!Z%x&S!Z%z&S!Z%}&S!Z&T&S!Z&X&S!Z&Z&S!Z&]&S!Z&_&S!Z&a&S!Z'Q&S!Z'Z&S!Z'd&S!Z'm&S!Z'z&S!Z!S&S!Z%{&S!Z`&S!Z&Q&S!Z~O_$[O!{8_O'U$[O~O_$[O!]!wO!{8_O'U$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'd$iq!R$iq!S$iq~P!#rO!R&yq!S&yq~P#)gO_$[O!{8tO'U$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'd$|y!R$|y!S$|y~P!#rOn'fX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'ndX~P;aOP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!TSO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'Z'bO'dQO'mYO'z:kO~O!R9hO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_:pO!d#vO#V9sO#t$TO$_9oO$a9qO$d$UO'Z&zO'd#sO~O#d'iO~P&-UO!S[X!SdX~P;aO#W9[O~O!]!wO#W9[O~O!{9kO~O#c9aO~O!{9tO!R'sX!S'sX~O!{9kO!R'qX!S'qX~O#W9uO~O'_9wO~P!#rO#W9|O~O#W9}O~O!]!wO#W:OO~O!]!wO#W9uO~O#m:PO~P#)gO#W:QO~O#W:RO~O#W:SO~O#W:TO~O#m:UO~P!#rO#m:VO~P!#rO#x~!b!r!t!u#U#V'z$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'z#]}'W'X#z'W'Z'e~",goto:"#Ed(XPPPPPPPP(YP(jP*^PPPP-uPP.[3n5b5uP5uPPP5uP7c5uP5uP7gPP7lP8Q<cPPPP<gPPPP<g?XPPP?_AjP<gPDTPPPPE{<gPPPPPGt<gPPJuKrPPPPKvM`PMhNiPKr<g<g!#p!&k!+^!+^!.mPPP!.t!1j<gPPPPPPPPPP!4aP!5rPP<g!7PP<gP<g<g<g<gP<g!9dPP!<]P!?Q!?Y!?^!?^P!<YP!?b!?bP!BVP!BZ<g<g!Ba!ET5uP5uP5u5uP!FW5u5u!HO5u!JQ5u!Kr5u5u!L`!NY!NY!N^!NY!NfP!NYP5u# b5u#!l5u5u-uPPP##yPP#$c#$cP#$cP#$x#$cPP#%OP#$uP#$u#%bMd#$u#&P#&V#&Y(Y#&](YP#&d#&d#&dP(YP(YP(YP(YPP(YP#&j#&mP#&m(YPPP(YP(YP(YP(YP(YP(Y(Y#&q#&{#'R#'X#'g#'m#'s#'}#(T#(d#(j#(x#)O#)U#)d#)y#+]#+k#+q#+w#+}#,T#,_#,e#,k#,u#-X#-_PPPPPPPP#-ePP#.X#2VPP#3m#3t#3|PP#8Y#:m#@i#@l#@o#@z#@}PP#AQ#AU#As#Bj#Bn#CSPP#CW#C^#CbP#Ce#Ci#Cl#D[#Dr#Dw#Dz#D}#ET#EW#E[#E`mhOSj}!n$Z%b%e%f%h*m*r/a/dQ$hmQ$opQ%YyS&U!b+[Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+b&]S+g&c+iQ+y&kQ-e(qQ/O*_Y0S+k+l+m+n+oS2o.s2qU3x0T0V0YU5e2t2u2vS6[3z3}S7S5f5gQ7n6^R8R7U$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!j'd#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ(z$QQ)j$kQ*`%VQ*g%_Q,T9lQ.Q)_Q.])kQ/W*eQ2Y.WQ3U/PQ4X9mR5Q2ZpeOSjy}!n$Z%X%b%e%f%h*m*r/a/dR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:m:n[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+U+d,O,Q/j0eQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+x&j&kQ-R(_Q.U)eQ.[)kQ.^)lQ.a)pQ.y*YS.}*^*_Q0a+yQ1Z,}Q2X.WQ2].ZQ2b.cQ3T/OQ4d1[Q5P2ZQ5S2_Q6v5OR7x6w!Y$em!j$g$h$i&T&i&j&k(i)d)e+X+f+x+y-_.U/y0P0U0a1p3w3|6Y7l8`Q)]$aQ)}${Q*Q$|Q*[%SQ.e)uQ.x*XU.|*]*^*_Q3O.yS3S.}/OQ5`2nQ5r3TS7Q5a5dS8P7R7TQ8j8QR8y8kW#|a$c(w:kS${t%XQ$|uQ$}vR){$y$V#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+u,Z-U-W-p-z-|.j.m.u.w1Y1c1m1t1{2O2S2e2{2}4g4s4{5i5n6{7X8U9j9n9o9p9q9r9s9x9y9z9{9|9}:Q:R:U:V:k:q:rT'}#s(OV({$Q9l9mU&Y!b$u+_Q'T!{Q)o$nQ.n*RQ1u-mR5[2j&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,e,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ&W!bR/u+[Y&Q!b&U&]+[+bS(i#y(oS+f&c+iS-_(j(qQ-`(kQ-f(rQ.p*TU0P+g+k+lU0U+m+n+oS0Z+p2sQ1p-eQ1r-gQ1s-hS2n.s2qU3w0S0T0VQ3{0WQ3|0YS5a2o2vS5d2t2uU6Y3x3z3}Q6_4OS7R5e5fQ7T5gS7l6[6^S8Q7S7UQ8`7nR8k8RlhOSj}!n$Z%b%e%f%h*m*r/a/dQ%j!QS&w!v9[Q)b$fQ*V%OQ*W%PQ+v&hS,X&|9uS-r)S:OQ.S)cQ.r*UQ/h*tQ/i*uQ/q+VQ0X+mQ0_+wS1z-s:SQ2T.TS2W.V:TQ3n/sQ3q/zQ4Q0`Q4}2UQ6P3kQ6S3pQ6W3vQ6`4RQ7f6QQ7i6XQ8[7jQ8o8YQ8q8^R8|8s$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dU(t#z&{1OT)W$_,e$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dQ'e#`S)V$_,eR-t)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ%e{Q%f|Q%h!OQ%i!PR/`*pQ&d!iQ)X$aQ+s&gS-y)])uS0[+q+rW1}-v-w-x.eS4P0]0^U4z2P2Q2RU6t4y5W5XQ7w6uR8f7zT+h&c+iS+f&c+iU0P+g+k+lU0U+m+n+oS0Z+p2sS2n.s2qU3w0S0T0VQ3{0WQ3|0YS5a2o2vS5d2t2uU6Y3x3z3}Q6_4OS7R5e5fQ7T5gS7l6[6^S8Q7S7UQ8`7nR8k8RS+h&c+iT2p.s2qS&q!q/^Q-Q(^Q-](iS0O+f2nQ1`-RS1j-^-fU3y0U0Z5dQ4c1ZS4q1q1sU6]3{3|7TQ6j4dQ6s4tR7o6_Q!xXS&p!q/^Q)T$YQ)`$dQ)f$jQ+|&qQ-P(^Q-[(iQ-a(lQ.R)aQ.z*ZS/}+f2nS1_-Q-RS1i-]-fQ1l-`Q1o-bQ3Q.{W3u0O0U0Z5dQ4b1ZQ4f1`S4k1j1sQ4r1rQ5p3RW6Z3y3{3|7TS6i4c4dQ6n4mQ6q4qQ7O5_Q7]5qS7m6]6_Q7q6jQ7s6oQ7v6sQ7}7PQ8W7^Q8a7oQ8d7uQ8h8OQ8w8iQ9P8xQ9T9QQ:^:XQ:g:bR:h:c$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tS!xn!k!j:W#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR:^:m$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+X+f+x+y-_.U/y0P0U0a1p3w3|6Y7l8`S$jn!kQ)a$eQ*Z%SW.{*[*]*^*_U3R.|.}/OQ5_2nS5q3S3TU7P5`5a5dQ7^5rU8O7Q7R7TS8i8P8QS8x8j8kQ9Q8y!j:X#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ:b:lR:c:m$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+U+d,O,Q/j0eQ*h%_!h:Y#]#k'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR:]&VS&Z!b$uR/w+_$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!j'd#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tQ'T!{!k:Z#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9W!R9c'c't+Y,e/o/r0p0x0y0z0{1P1U3o4W4]4^5^6R6b6f6g7{:d!d#XZ!_$_%v%|&x'P'`'a'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9W}9e'c't+Y,e/o/r0p0z0{1P1U3o4W4]4^5^6R6b6f6g7{:d!`#]Z!_$_%v%|&x'P'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9Wl(Y#t&})R,{-T-i-j0j1x4a4u:_:i:jx:n'c't+Y,e/o/r0p1P1U3o4W4]4^5^6R6b6f6g7{:d!`:q&y'h(](c+r,W,p-X-u-x.i.k0^0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7ZZ:r0}4[6c7p8b&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nS#l`#mR1R,h&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,h,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,h,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!k:l#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+t,i-n-{.v/X/Y/Z/]/a/d/f1Q2d2|3a3c3d5m5{t#za!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:r!|&{!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:UQ)P$UQ,t(Rc1O9j9o9q9s9y9{9}:R:Vt#wa!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:rS(l#y(oQ)Q$VQ-b(m!|:`!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:Ub:a9j9o9q9s9y9{9}:R:VQ:e:oR:f:pt#za!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:r!|&{!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:Uc1O9j9o9q9s9y9{9}:R:VlfOSj}!n$Z%b%e%f%h*m*r/a/dQ(d#xQ*y%oQ*z%qR1b-U$U#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+u,Z-U-W-p-z-|.j.m.u.w1Y1c1m1t1{2O2S2e2{2}4g4s4{5i5n6{7X8U9j9n9o9p9q9r9s9x9y9z9{9|9}:Q:R:U:V:k:q:rQ*O$|Q.l*QQ2h.kR5Z2iT(n#y(oS(n#y(oT2p.s2qQ)`$dQ-a(lQ.R)aQ.z*ZQ3Q.{Q5p3RQ7O5_Q7]5qQ7}7PQ8W7^Q8h8OQ8w8iQ9P8xR9T9Ql(V#t&})R,{-T-i-j0j1x4a4u:_:i:j!`9x&y'h(](c+r,W,p-X-u-x.i.k0^0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7ZZ9y0}4[6c7p8bn(X#t&})R,y,{-T-i-j0j1x4a4u:_:i:j!b9z&y'h(](c+r,W,p-X-u-x.i.k0^0g0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7Z]9{0}4[6c6d7p8bpeOSjy}!n$Z%X%b%e%f%h*m*r/a/dQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/a/dR%UxQ*S$}R.h){qeOSjy}!n$Z%X%b%e%f%h*m*r/a/dQ.t*XS2z.x.yW5h2w2x2y3OU7W5j5k5lU8S7V7Y7ZQ8l8TR8z8mQ%]yR*c%XR3X/RR7`5sS$lp$qR.^)lQ%bzR*m%cR*s%iT/b*r/dQjOQ!nST$^j!nQ(O#sR,q(OQ!YQR%t!YQ!^RU%z!^%{+QQ%{!_R+Q%|Q+]&WR/v+]Q,[&}R0k,[Q,_'PS0n,_0oR0o,`Q+i&cR0Q+iS!eR$tU&`!e&a+RQ&a!fR+R%}Q+`&ZR/x+`Q&t!sQ+}&rU,R&t+}0fR0f,SQ'q#iR,j'qQ#m`R'w#mQ#cZU'g#c*|9iQ*|9WR9i'tQ-O(^W1]-O1^4e6kU1^-P-Q-RS4e1_1`R6k4f#q(T#t&y&}'h(](c(|(})R+r,U,V,W,p,y,z,{-T-X-i-j-u-x.i.k0^0g0h0i0j0}1a1e1x2R2g2i2y4U4Y4Z4[4a4h4n4u4w4|5X5l6a6c6d6e6l6r7Z7p8b:_:i:jQ-V(cU1d-V1f4iQ1f-XR4i1eQ(o#yR-c(oQ(x#}R-l(xQ1|-uR4x1|Q)y$wR.g)yQ2k.nS5]2k6}R6}5^Q*U%OR.q*UQ2q.sR5b2qQ/Q*`S3V/Q5tR5t3XQ.X)hW2[.X2^5R6xQ2^.[Q5R2]R6x5SQ)m$lR._)mQ/d*rR3g/dWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/_*mS/b*r/dR3f/aQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*w%mS/T*c*fQ/k*vQ/l*yQ/m*zS/{+f2nQ1g-ZQ1h-[Q1n-aQ2a.bQ2f.iQ3P.zQ3Z/VQ3e/`Y3s/}0O0U0Z5dQ4j1iQ4l1kQ4o1oQ5V2cQ5Y2gQ5o3QQ5u3Y[6T3r3u3y3{3|7TQ6m4kQ6p4pQ6y5TQ7[5pQ7a5vW7g6U6Z6]6_Q7r6nQ7t6qQ7y6zQ7|7OQ8V7]U8Z7h7m7oQ8c7sQ8e7vQ8g7}Q8n8WS8p8]8aQ8u8dQ8v8hQ8{8rQ9O8wQ9R8}Q9S9PR9U9TQ$fmQ&h!jU)c$g$h$iQ+V&TU+w&i&j&kQ-Z(iS.T)d)eQ/s+XQ/z+fS0`+x+yQ1k-_Q2U.UQ3p/yS3v0P0UQ4R0aQ4p1pS6X3w3|Q7j6YQ8^7lR8s8`S#ua:kR)^$cU#}a$c:kR-k(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+r&fQ,U9nQ,V9pQ,W9rQ,p'|Q,y(VQ,z(XQ,{(YQ-T(aQ-X(eQ-i(uQ-j(vd-u)Y-z.u2O2{4{5i6{7X8UQ-x)[Q.i)|Q.k*PQ0^+uQ0g9xQ0h9zQ0i9|Q0j,ZQ0}9jQ1a-UQ1e-WQ1x-pQ2R-|Q2g.jQ2i.mQ2y.wQ4U:QQ4Y9oQ4Z9qQ4[9sQ4a1YQ4h1cQ4n1mQ4u1tQ4w1{Q4|2SQ5X2eQ5l2}Q6a:UQ6c9}Q6d9yQ6e9{Q6l4gQ6r4sQ7Z5nQ7p:RQ8b:VQ:_:kQ:i:qR:j:rlgOSj}!n$Z%b%e%f%h*m*r/a/dS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*v%lQ+S&RQ+q&eQ,n'vQ-w)ZQ/[*iQ0]+tQ1T,iQ1v-nQ2Q-{Q2x.vQ3]/XQ3^/YQ3`/ZQ3b/]Q3i/fQ4_1QQ5W2dQ5k2|Q5z3aQ5|3cQ5}3dQ7Y5mR7c5{!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+t-n-{.v/X/Y/Z/]/a/d/f2d2|3a3c3d5m5{Q!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,i1QQ)n$mS*}%w+PS+Y&V/tQ+c&^Q+z&oQ,Y&|Q,`'QQ,c9VQ,e9XQ,s(QQ-q)SQ/o+TQ/r+WQ0b+{Q0l,^Q0p9[Q0q9]Q0r9^Q0s9_Q0t9`Q0u9aQ0v9bQ0w9cQ0x9dQ0y9eQ0z9fQ0{9gQ0|,dQ1P9kQ1U9hQ1y-sQ2V.VQ3o9tQ3r/|Q4S0cQ4V0mQ4W9uQ4]9wQ4^:OQ5^2lQ6R3mQ6U3tQ6b:PQ6f:SQ6g:TQ7h6VQ7{6|Q8]7kQ8r8_Q8}8tQ9W!WR:d:nR!aRR&X!bS&T!b+[S+X&U&]R/y+bR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,P&sQ,S&vQ.f)xS0d,O,QR4T0e`!dR!]!`$t%w&_)v+dh!qUrs!r!u$X&s&v)x,O,Q0eQ/^*kQ/p+UQ3l/jT:[&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+O%w+dT+Z&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1S,hT(`#v(hR(f#xQ-v)YQ2P-zQ2w.uQ4y2OQ5j2{Q6u4{Q7V5iQ7z6{Q8T7XR8m8UlhOSj}!n$Z%b%e%f%h*m*r/a/dQ%[yR*b%XV$xrs*kR.o*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/c*r/d",nodeNames:"⚠ ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try catch finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:330,context:BS,nodeProps:[[lg.closedBy,3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],[lg.group,-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,238,240,242,244,246,248,249,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],[lg.openedBy,30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T,T%jg$UW'W+{OX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T,T'YR$UW'X+{O!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.xy0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`y1g]$UW'mqOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`&i2k_$UW#zS'Z%k'epOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T%r5lU'v%j$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T%R=tU'[!R#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T&i?gVu%n$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T,TCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du,TJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl,TKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko,TL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko,TMSR$UWU+{O!^%T!_#o%T#p~%T+{M`ROzM]z{Mi{~M]+{MlTOzM]z{Mi{!PM]!P!QM{!Q~M]+{NQOU+{,TNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl,T! ^_$UWU+{}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T+{!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]+{!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]+{!#|UU+{}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd+{!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`+{!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`+{!%sTU+{OYG{Z#OG{#O#PH_#P#QFx#Q~G{+{!&VTOY!$`YZM]Zz!$`z{!${{~!$`+{!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]+{!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M],T!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|,T!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|,T!*PY$UWU+{OYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq,T!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|,T!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl,T!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko,T!-lV$UWT+{OY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e+{!.WQT+{OY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T+c!8rR'`d!a%Y#x&s'zP!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'_!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T%w!<YV'n%o$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T$`!<vRv$W$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T&e!=kRx&]$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'd#wO!^%T!_#o%T#p~%T~!?OO!T~%r!?VT'u%j$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T$u!?oR!S$knQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T,T!@gr$UW'W+{#zS'Z%k'epOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`,T!CO_$UW'X+{#zS'Z%k'epOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[YS,zS,GS,0,1,2,3,4,5,6,7,8,qS],topRules:{Script:[0,7]},dialects:{jsx:11335,ts:11337},dynamicPrecedences:{149:1,176:1},specialized:[{term:287,get:(e,t)=>function(e,t){return"extends"==e&&t.dialectEnabled(1)?4:-1}(e,t)<<1},{term:287,get:e=>FS[e]||-1},{term:297,get:e=>HS[e]||-1},{term:63,get:e=>KS[e]||-1}],tokenPrec:11358}),e_=[Xx("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Xx("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Xx("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Xx("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"block",type:"keyword"}),Xx("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Xx('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Xx('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],t_=jg.define({parser:JS.configure({props:[Kg.add({IfStatement:sO({except:/^\s*({|else\b)/}),TryStatement:sO({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:iO({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>-1,"Statement Property":sO({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),cO.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})}),hw({"get set async static":Mw.modifier,"for while do if else switch try catch finally return throw break continue default case":Mw.controlKeyword,"in of await yield void typeof delete instanceof":Mw.operatorKeyword,"let var const function class extends":Mw.definitionKeyword,"import export from":Mw.moduleKeyword,"with debugger as new":Mw.keyword,TemplateString:Mw.special(Mw.string),Super:Mw.atom,BooleanLiteral:Mw.bool,this:Mw.self,null:Mw.null,Star:Mw.modifier,VariableName:Mw.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Mw.function(Mw.variableName),VariableDefinition:Mw.definition(Mw.variableName),Label:Mw.labelName,PropertyName:Mw.propertyName,PrivatePropertyName:Mw.special(Mw.propertyName),"CallExpression/MemberExpression/PropertyName":Mw.function(Mw.propertyName),"FunctionDeclaration/VariableDefinition":Mw.function(Mw.definition(Mw.variableName)),"ClassDeclaration/VariableDefinition":Mw.definition(Mw.className),PropertyDefinition:Mw.definition(Mw.propertyName),PrivatePropertyDefinition:Mw.definition(Mw.special(Mw.propertyName)),UpdateOp:Mw.updateOperator,LineComment:Mw.lineComment,BlockComment:Mw.blockComment,Number:Mw.number,String:Mw.string,ArithOp:Mw.arithmeticOperator,LogicOp:Mw.logicOperator,BitOp:Mw.bitwiseOperator,CompareOp:Mw.compareOperator,RegExp:Mw.regexp,Equals:Mw.definitionOperator,"Arrow : Spread":Mw.punctuation,"( )":Mw.paren,"[ ]":Mw.squareBracket,"{ }":Mw.brace,"InterpolationStart InterpolationEnd":Mw.special(Mw.brace),".":Mw.derefOperator,", ;":Mw.separator,TypeName:Mw.typeName,TypeDefinition:Mw.definition(Mw.typeName),"type enum interface implements namespace module declare":Mw.definitionKeyword,"abstract global Privacy readonly override":Mw.modifier,"is keyof unique infer":Mw.operatorKeyword,JSXAttributeValue:Mw.attributeValue,JSXText:Mw.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Mw.angleBracket,"JSXIdentifier JSXNameSpacedName":Mw.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Mw.attributeName})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),n_=t_.configure({dialect:"ts"}),r_=t_.configure({dialect:"jsx"}),i_=t_.configure({dialect:"jsx ts"});function o_(e={}){let t=e.jsx?e.typescript?i_:r_:e.typescript?n_:t_;return new Bg(t,t_.data.of({autocomplete:(n=["LineComment","BlockComment","String"],r=Hy(e_),e=>{for(let t=Dg(e.state).resolveInner(e.pos,-1);t;t=t.parent)if(n.indexOf(t.name)>-1)return null;return r(e)})}));var n,r}var s_="index_m_section__2578353d",a_="index_m_expand__2578353d",l_="index_m_body__2578353d",c_="index_m_header__2578353d";function u_({title:e,className:r,children:i,defaultExpand:o}){const[s,a]=t(null!=o&&o);return n.createElement("div",{className:ie(s_,{[a_]:s},r)},n.createElement("div",{className:ie("flex justify-between items-center px-8 py-4",c_)},n.createElement("span",null,e),n.createElement(y,{name:s?"expand_less":"expand_more",clickable:!0,onClick:()=>a((e=>!e))})),n.createElement("div",{className:l_},i))}jl('.index_m_section__2578353d {\n  margin-bottom: 8px;\n}\n\n.index_m_section__2578353d.index_m_expand__2578353d .index_m_body__2578353d {\n  display: flex;\n}\n\n.index_m_section__2578353d .index_m_header__2578353d {\n  background: #F1F5F9;\n  box-shadow: inset 0px -1px 0px #E2E8F0;\n}\n\n.index_m_section__2578353d .index_m_header__2578353d > span::before {\n  content: "";\n  border-left: 2px solid var(--blue-600);\n  margin-right: 4px;\n}\n\n.index_m_section__2578353d .index_m_body__2578353d {\n  display: none;\n  flex-direction: column;\n  background-color: white;\n  padding: 8px 12px;\n}',{});var h_={btnAdd:"index_m_btnAdd__35d11306",modal:"index_m_modal__35d11306",side:"index_m_side__35d11306"};function d_({bound:e,onBind:t,onEdit:r,onUnbind:i}){return e?n.createElement("div",{className:"inline-flex items-center w-full"},n.createElement("span",{className:"border border-gray-100 flex-1 w-100 mr-8 px-8 py-4"},"已绑定"),n.createElement(b,{position:"top",label:"编辑绑定函数"},n.createElement(y,{name:"code",className:"mr-16",clickable:!0,onClick:r})),n.createElement(b,{position:"top",label:"解绑函数"},n.createElement(y,{name:"link",clickable:!0,onClick:i}))):n.createElement("div",{className:h_.btnAdd,onClick:t},n.createElement(y,{name:"add"}),n.createElement("span",null,"绑定动作"))}jl(".index_m_btnAdd__35d11306 {\n  border: 1px dashed #CBD5E1;\n  border-radius: 2px 8px 8px 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  cursor: pointer;\n}\n\n.index_m_btnAdd__35d11306:hover {\n  border: 1px dashed var(--blue-600);\n  color: var(--blue-600);\n}\n\n.index_m_modal__35d11306 {\n  display: grid;\n  grid-template-columns: 212px 1fr;\n  height: 100%;\n}\n\n.index_m_modal__35d11306 .index_m_side__35d11306 {\n  background: #F8FAFC;\n  box-shadow: inset -1px 0px 0px #E2E8F0;\n}",{});const f_={didMount:"页面加载完成时",willUnmount:"页面关闭时"};var p_=Vi((function(e){var r,i;const[o,s]=t(!1),[a,c]=t(""),{page:u}=WA(),{activeElem:h}=u,[d,f]=t("");return l((()=>{const e=X(h.lifecycleHooks,`${a}.body`);f(e||function(){if("didMount"===a)return"// console.log('page load')";if("willUnmount"===a)return"// console.log('page unload')";return""}())}),[a]),n.createElement("div",null,n.createElement(u_,{title:"生命周期",defaultExpand:!0},n.createElement("div",{className:"mb-8"},n.createElement("p",null,"页面加载完成时"),n.createElement(d_,{bound:!!(null==(r=h.lifecycleHooks)?void 0:r.didMount),onEdit:()=>{s(!0),c("didMount")},onBind:()=>{s(!0),c("didMount")},onUnbind:()=>{u.updateElemProperty(h.id||"","lifecycleHooks.didMount",""),f("")}})),n.createElement("div",null,n.createElement("p",null,"页面关闭时"),n.createElement(d_,{bound:!!(null==(i=h.lifecycleHooks)?void 0:i.willUnmount),onEdit:()=>{s(!0),c("willUnmount")},onBind:()=>{s(!0),c("willUnmount")},onUnbind:()=>{u.updateElemProperty(h.id||"","lifecycleHooks.willUnmount",""),f("")}}))),o&&n.createElement(w,{title:`${f_[a]}: 绑定动作`,width:1200,height:600,onClose:()=>s(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>s(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:()=>{var e;(e=d)?(u.updateElemProperty(u.activeElemId,`lifecycleHooks.${a}`,{type:"lifecycle_hook_func_spec",args:"...args",body:e}),s(!1)):S.error("非法的函数定义")},text:"绑定动作"}]},n.createElement("div",{className:h_.modal},n.createElement("div",{className:h_.side},n.createElement("div",{className:"flex justify-between items-center cursor-pointer px-16 py-4 hover:bg-gray-200 bg-gray-200"},n.createElement("span",null,"添加新动作"),n.createElement(y,{name:"check"}))),n.createElement("div",{className:h_.body},n.createElement(vS,{value:d,height:"480px",extensions:[o_()],onChange:e=>{f(e)}})))))}));const m_={name:"page",icon:"apps",label:"页面",category:"basic",component:_,configForm:p_,defaultConfig:{},hidden:!0,acceptChild:!0,defaultStyle:{}};var g_=e=>"checkbox"===e.type,O_=e=>e instanceof Date,v_=e=>null==e;const b_=e=>"object"==typeof e;var y_=e=>!v_(e)&&!Array.isArray(e)&&b_(e)&&!O_(e),x_=e=>e.filter(Boolean),w_=e=>void 0===e,S_=(e,t,n)=>{if(!t||!y_(e))return n;const r=x_(t.split(/[,[\].]+?/)).reduce(((e,t)=>v_(e)?e:e[t]),e);return w_(r)||r===e?w_(e[t])?n:e[t]:r};const __="blur",k_="focusout",E_="onBlur",Q_="onChange",T_="onSubmit",P_="onTouched",C_="all",N_="max",$_="min",A_="maxLength",R_="minLength",j_="pattern",D_="required",I_="validate";var W_=(e,t)=>{const n=Object.assign({},e);return delete n[t],n};n.createContext(null);var M_=e=>y_(e)&&!Object.keys(e).length,L_=e=>Array.isArray(e)?e:[e];var V_=e=>"string"==typeof e,Z_=e=>"function"==typeof e,X_=e=>{for(const t in e)if(Z_(e[t]))return!0;return!1},U_=(e,t,n,r,i)=>t?Object.assign(Object.assign({},n[e]),{types:Object.assign(Object.assign({},n[e]&&n[e].types?n[e].types:{}),{[r]:i||!0})}):{},B_=e=>/^\w*$/.test(e),q_=e=>x_(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Y_(e,t,n){let r=-1;const i=B_(t)?[t]:q_(t),o=i.length,s=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==s){const n=e[t];o=y_(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=o,e=e[t]}return e}const z_=(e,t,n)=>{for(const r of n||Object.keys(e)){const n=S_(e,r);if(n){const e=n._f,r=W_(n,"_f");if(e&&t(e.name)){if(e.ref.focus&&w_(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else y_(r)&&z_(r,t)}}};var G_=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));function F_(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(!n&&!y_(e))return e;t=n?[]:{};for(const n in e){if(Z_(e[n])){t=e;break}t[n]=F_(e[n])}}return t}function H_(){let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var K_=e=>v_(e)||!b_(e);function J_(e,t){if(K_(e)||K_(t))return e===t;if(O_(e)&&O_(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(O_(n)&&O_(e)||y_(n)&&y_(e)||Array.isArray(n)&&Array.isArray(e)?!J_(n,e):n!==e)return!1}}return!0}var ek=e=>({isOnSubmit:!e||e===T_,isOnBlur:e===E_,isOnChange:e===Q_,isOnAll:e===C_,isOnTouch:e===P_}),tk=e=>"boolean"==typeof e,nk=e=>"file"===e.type,rk=e=>e instanceof HTMLElement,ik=e=>"select-multiple"===e.type,ok=e=>"radio"===e.type,sk="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document,ak=e=>rk(e)&&e.isConnected;function lk(e,t){const n=B_(t)?[t]:q_(t),r=1==n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=w_(e)?r++:e[t[r++]];return e}(e,n),i=n[n.length-1];let o;r&&delete r[i];for(let t=0;t<n.slice(0,-1).length;t++){let r,i=-1;const s=n.slice(0,-(t+1)),a=s.length-1;for(t>0&&(o=e);++i<s.length;){const t=s[i];r=r?r[t]:e[t],a===i&&(y_(r)&&M_(r)||Array.isArray(r)&&!r.filter((e=>y_(e)&&!M_(e)||tk(e)||Array.isArray(e)&&e.length)).length)&&(o?delete o[t]:delete e[t]),o=r}}return e}function ck(e,t={}){const n=Array.isArray(e);if(y_(e)||n)for(const n in e)Array.isArray(e[n])||y_(e[n])&&!X_(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ck(e[n],t[n])):v_(e[n])||(t[n]=!0);return t}function uk(e,t,n){const r=Array.isArray(e);if(y_(e)||r)for(const r in e)Array.isArray(e[r])||y_(e[r])&&!X_(e[r])?w_(t)||K_(n[r])?n[r]=Array.isArray(e[r])?ck(e[r],[]):Object.assign({},ck(e[r])):uk(e[r],v_(t)?{}:t[r],n[r]):n[r]=!J_(e[r],t[r]);return n}var hk=(e,t)=>uk(e,t,ck(t));const dk={value:!1,isValid:!1},fk={value:!0,isValid:!0};var pk=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!w_(e[0].attributes.value)?w_(e[0].value)||""===e[0].value?fk:{value:e[0].value,isValid:!0}:fk:dk}return dk},mk=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>w_(e)?e:t?""===e?NaN:+e:n&&V_(e)?new Date(e):r?r(e):e;const gk={isValid:!1,value:null};var Ok=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),gk):gk;function vk(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return nk(t)?t.files:ok(t)?Ok(e.refs).value:ik(t)?[...t.selectedOptions].map((({value:e})=>e)):g_(t)?pk(e.refs).value:mk(w_(t.value)?e.ref.value:t.value,e)}var bk=e=>e instanceof RegExp,yk=e=>w_(e)?void 0:bk(e)?e.source:y_(e)?bk(e.value)?e.value.source:e.value:e;function xk(e,t,n){const r=S_(e,n);if(r||B_(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=S_(t,r),s=S_(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};i.pop()}return{name:n}}var wk=e=>V_(e)||n.isValidElement(e);function Sk(e,t,n="validate"){if(wk(e)||Array.isArray(e)&&e.every(wk)||tk(e)&&!e)return{type:n,message:wk(e)?e:"",ref:t}}var _k=e=>y_(e)&&!bk(e)?e:{value:e,message:""},kk=async(e,t,n,r)=>{const{ref:i,refs:o,required:s,maxLength:a,minLength:l,min:c,max:u,pattern:h,validate:d,name:f,valueAsNumber:p,mount:m,disabled:g}=e._f;if(!m||g)return{};const O=o?o[0]:i,v=e=>{r&&O.reportValidity&&(O.setCustomValidity(tk(e)?"":e||" "),O.reportValidity())},b={},y=ok(i),x=g_(i),w=y||x,S=(p||nk(i))&&!i.value||""===t||Array.isArray(t)&&!t.length,_=U_.bind(null,f,n,b),k=(e,t,n,r=A_,o=R_)=>{const s=e?t:n;b[f]=Object.assign({type:e?r:o,message:s,ref:i},_(e?r:o,s))};if(s&&(!w&&(S||v_(t))||tk(t)&&!t||x&&!pk(o).isValid||y&&!Ok(o).isValid)){const{value:e,message:t}=wk(s)?{value:!!s,message:s}:_k(s);if(e&&(b[f]=Object.assign({type:D_,message:t,ref:O},_(D_,t)),!n))return v(t),b}if(!(S||v_(c)&&v_(u))){let e,r;const o=_k(u),s=_k(c);if(isNaN(t)){const n=i.valueAsDate||new Date(t);V_(o.value)&&(e=n>new Date(o.value)),V_(s.value)&&(r=n<new Date(s.value))}else{const n=i.valueAsNumber||+t;v_(o.value)||(e=n>o.value),v_(s.value)||(r=n<s.value)}if((e||r)&&(k(!!e,o.message,s.message,N_,$_),!n))return v(b[f].message),b}if((a||l)&&!S&&V_(t)){const e=_k(a),r=_k(l),i=!v_(e.value)&&t.length>e.value,o=!v_(r.value)&&t.length<r.value;if((i||o)&&(k(i,e.message,r.message),!n))return v(b[f].message),b}if(h&&!S&&V_(t)){const{value:e,message:r}=_k(h);if(bk(e)&&!t.match(e)&&(b[f]=Object.assign({type:j_,message:r,ref:i},_(j_,r)),!n))return v(r),b}if(d)if(Z_(d)){const e=Sk(await d(t),O);if(e&&(b[f]=Object.assign(Object.assign({},e),_(I_,e.message)),!n))return v(e.message),b}else if(y_(d)){let e={};for(const r in d){if(!M_(e)&&!n)break;const i=Sk(await d[r](t),O,r);i&&(e=Object.assign(Object.assign({},i),_(r,i.message)),v(i.message),n&&(b[f]=e))}if(!M_(e)&&(b[f]=Object.assign({ref:O},e),!n))return b}return v(!0),b};const Ek={mode:T_,reValidateMode:Q_,shouldFocusError:!0};function Qk(e={}){let t,n=Object.assign(Object.assign({},Ek),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=n.defaultValues||{},s=n.shouldUnregister?{}:F_(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={};const h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={watch:H_(),array:H_(),state:H_()},f=ek(n.mode),p=ek(n.reValidateMode),m=n.criteriaMode===C_,g=async e=>{let t=!1;return h.isValid&&(t=n.resolver?M_((await x()).errors):await w(i,!0),e||t===r.isValid||(r.isValid=t,d.state.next({isValid:t}))),t},O=(e,t)=>(Y_(r.errors,e,t),d.state.next({errors:r.errors})),v=(e,t,n,r)=>{const l=S_(i,e);if(l){const i=S_(s,e,w_(n)?S_(o,e):n);w_(i)||r&&r.defaultChecked||t?Y_(s,e,t?i:vk(l._f)):k(e,i),a.mount&&g()}},b=(e,t,n,i,s)=>{let a=!1;const l={name:e},c=S_(r.touchedFields,e);if(h.isDirty){const e=r.isDirty;r.isDirty=l.isDirty=S(),a=e!==l.isDirty}if(h.dirtyFields&&(!n||i)){const n=S_(r.dirtyFields,e);J_(S_(o,e),t)?lk(r.dirtyFields,e):Y_(r.dirtyFields,e,!0),l.dirtyFields=r.dirtyFields,a=a||n!==S_(r.dirtyFields,e)}return n&&!c&&(Y_(r.touchedFields,e,n),l.touchedFields=r.touchedFields,a=a||h.touchedFields&&c!==n),a&&s&&d.state.next(l),a?l:{}},y=async(n,i,o,s,a)=>{const l=S_(r.errors,i),f=h.isValid&&r.isValid!==o;var p,m;if(e.delayError&&s?(t=t||(p=O,m=e.delayError,(...e)=>{clearTimeout(c),c=window.setTimeout((()=>p(...e)),m)}),t(i,s)):(clearTimeout(c),s?Y_(r.errors,i,s):lk(r.errors,i)),((s?!J_(l,s):l)||!M_(a)||f)&&!n){const e=Object.assign(Object.assign(Object.assign({},a),f?{isValid:o}:{}),{errors:r.errors,name:i});r=Object.assign(Object.assign({},r),e),d.state.next(e)}u[i]--,h.isValidating&&!Object.values(u).some((e=>e))&&(d.state.next({isValidating:!1}),u={})},x=async e=>n.resolver?await n.resolver(Object.assign({},s),n.context,((e,t,n,r)=>{const i={};for(const n of e){const e=S_(t,n);e&&Y_(i,n,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)):{},w=async(e,t,i={valid:!0})=>{for(const o in e){const a=e[o];if(a){const e=a._f,o=W_(a,"_f");if(e){const o=await kk(a,S_(s,e.name),m,n.shouldUseNativeValidation);if(o[e.name]&&(i.valid=!1,t))break;t||(o[e.name]?Y_(r.errors,e.name,o[e.name]):lk(r.errors,e.name))}o&&await w(o,t,i)}}return i.valid},S=(e,t)=>(e&&t&&Y_(s,e,t),!J_(C(),o)),_=(e,t,n)=>{const r=Object.assign({},a.mount?s:w_(t)?o:V_(e)?{[e]:t}:t);return((e,t,n,r)=>{const i=Array.isArray(e);return V_(e)?(r&&t.watch.add(e),S_(n,e)):i?e.map((e=>(r&&t.watch.add(e),S_(n,e)))):(r&&(t.watchAll=!0),n)})(e,l,r,n)},k=(e,t,n={})=>{const r=S_(i,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&Y_(s,e,mk(t,n)),o=sk&&rk(n.ref)&&v_(t)?"":t,ik(n.ref)?[...n.ref.options].forEach((e=>e.selected=o.includes(e.value))):n.refs?g_(n.ref)?n.refs.length>1?n.refs.forEach((e=>e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value)):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((e=>e.checked=e.value===o)):nk(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||d.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&b(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&P(e)},E=(e,t,n)=>{for(const r in t){const o=t[r],s=`${e}.${r}`,a=S_(i,s);!l.array.has(e)&&K_(o)&&(!a||a._f)||O_(o)?k(s,o,n):E(s,o,n)}},Q=(e,t,n={})=>{const a=S_(i,e),c=l.array.has(e),u=F_(t);Y_(s,e,u),c?(d.array.next({name:e,values:s}),(h.isDirty||h.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=hk(o,s),d.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:S(e,u)}))):!a||a._f||v_(u)?k(e,u,n):E(e,u,n),G_(e,l)&&d.state.next({}),d.watch.next({name:e})},T=async e=>{const t=e.target;let o=t.name;const a=S_(i,o);if(a){let h,O;const v=t.type?vk(a._f):(e=>y_(e)&&e.target?g_(e.target)?e.target.checked:e.target.value:e)(e),w=e.type===__||e.type===k_,S=!((c=a._f).mount&&(c.required||c.min||c.max||c.maxLength||c.minLength||c.pattern||c.validate)||n.resolver||S_(r.errors,o)||a._f.deps)||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(w,S_(r.touchedFields,o),r.isSubmitted,p,f),_=G_(o,l,w);Y_(s,o,v),w?a._f.onBlur&&a._f.onBlur(e):a._f.onChange&&a._f.onChange(e);const k=b(o,v,w,!1),E=!M_(k)||_;if(!w&&d.watch.next({name:o,type:e.type}),S)return E&&d.state.next(Object.assign({name:o},_?{}:k));if(!w&&_&&d.state.next({}),u[o]=(u[o],1),d.state.next({isValidating:!0}),n.resolver){const{errors:e}=await x([o]),t=xk(r.errors,i,o),n=xk(e,i,t.name||o);h=n.error,o=n.name,O=M_(e)}else h=(await kk(a,S_(s,o),m,n.shouldUseNativeValidation))[o],O=await g(!0);a._f.deps&&P(a._f.deps),y(!1,o,O,h,k)}var c},P=async(e,t={})=>{let o,s;const a=L_(e);if(d.state.next({isValidating:!0}),n.resolver){const t=await(async e=>{const{errors:t}=await x();if(e)for(const n of e){const e=S_(t,n);e?Y_(r.errors,n,e):lk(r.errors,n)}else r.errors=t;return t})(w_(e)?e:a);o=M_(t),s=e?!a.some((e=>S_(t,e))):o}else e?(s=(await Promise.all(a.map((async e=>{const t=S_(i,e);return await w(t&&t._f?{[e]:t}:t)})))).every(Boolean),(s||r.isValid)&&g()):s=o=await w(i);return d.state.next(Object.assign(Object.assign(Object.assign({},!V_(e)||h.isValid&&o!==r.isValid?{}:{name:e}),n.resolver?{isValid:o}:{}),{errors:r.errors,isValidating:!1})),t.shouldFocus&&!s&&z_(i,(e=>S_(r.errors,e)),e?a:l.mount),s},C=e=>{const t=Object.assign(Object.assign({},o),a.mount?s:{});return w_(e)?t:V_(e)?S_(t,e):e.map((e=>S_(t,e)))},N=(e,t)=>({invalid:!!S_((t||r).errors,e),isDirty:!!S_((t||r).dirtyFields,e),isTouched:!!S_((t||r).touchedFields,e),error:S_((t||r).errors,e)}),$=(e,t={})=>{for(const a of e?L_(e):l.mount)l.mount.delete(a),l.array.delete(a),S_(i,a)&&(t.keepValue||(lk(i,a),lk(s,a)),!t.keepError&&lk(r.errors,a),!t.keepDirty&&lk(r.dirtyFields,a),!t.keepTouched&&lk(r.touchedFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&lk(o,a));d.watch.next({}),d.state.next(Object.assign(Object.assign({},r),t.keepDirty?{isDirty:S()}:{})),!t.keepIsValid&&g()},A=(e,t={})=>{let r=S_(i,e);const o=tk(t.disabled);return Y_(i,e,{_f:Object.assign(Object.assign(Object.assign({},r&&r._f?r._f:{ref:{name:e}}),{name:e,mount:!0}),t)}),l.mount.add(e),r?o&&Y_(s,e,t.disabled?void 0:S_(s,e,vk(r._f))):v(e,!0,t.value),Object.assign(Object.assign(Object.assign({},o?{disabled:t.disabled}:{}),n.shouldUseNativeValidation?{required:!!t.required,min:yk(t.min),max:yk(t.max),minLength:yk(t.minLength),maxLength:yk(t.maxLength),pattern:yk(t.pattern)}:{}),{name:e,onChange:T,onBlur:T,ref:o=>{if(o){A(e,t),r=S_(i,e);const n=w_(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,s=(e=>ok(e)||g_(e))(n),a=r._f.refs||[];if(s?a.find((e=>e===n)):n===r._f.ref)return;Y_(i,e,{_f:Object.assign(Object.assign({},r._f),s?{refs:a.concat(n).filter(ak),ref:{type:n.type,name:e}}:{ref:n})}),v(e,!1,void 0,n)}else r=S_(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>[...e].some((e=>(e=>e.substring(0,e.search(/.\d/))||e)(t)===e)))(l.array,e)||!a.action)&&l.unMount.add(e)}})};return{control:{register:A,unregister:$,getFieldState:N,_executeSchema:x,_getWatch:_,_getDirty:S,_updateValid:g,_removeUnmounted:()=>{for(const e of l.unMount){const t=S_(i,e);t&&(t._f.refs?t._f.refs.every((e=>!ak(e))):!ak(t._f.ref))&&$(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],n,l,c=!0,u=!0)=>{if(l&&n){if(a.action=!0,u&&Array.isArray(S_(i,e))){const t=n(S_(i,e),l.argA,l.argB);c&&Y_(i,e,t)}if(h.errors&&u&&Array.isArray(S_(r.errors,e))){const t=n(S_(r.errors,e),l.argA,l.argB);c&&Y_(r.errors,e,t),((e,t)=>{!x_(S_(e,t)).length&&lk(e,t)})(r.errors,e)}if(h.touchedFields&&Array.isArray(S_(r.touchedFields,e))){const t=n(S_(r.touchedFields,e),l.argA,l.argB);c&&Y_(r.touchedFields,e,t)}h.dirtyFields&&(r.dirtyFields=hk(o,s)),d.state.next({isDirty:S(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Y_(s,e,t)},_getFieldArray:t=>x_(S_(a.mount?s:o,t,e.shouldUnregister?S_(o,t,[]):[])),_subjects:d,_proxyFormState:h,get _fields(){return i},get _formValues(){return s},get _stateFlags(){return a},set _stateFlags(e){a=e},get _defaultValues(){return o},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n=Object.assign(Object.assign({},n),e)}},trigger:P,register:A,handleSubmit:(e,t)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let a=!0,c=F_(s);d.state.next({isSubmitting:!0});try{if(n.resolver){const{errors:e,values:t}=await x();r.errors=e,c=t}else await w(i);M_(r.errors)&&Object.keys(r.errors).every((e=>S_(c,e)))?(d.state.next({errors:{},isSubmitting:!0}),await e(c,o)):(t&&await t(Object.assign({},r.errors),o),n.shouldFocusError&&z_(i,(e=>S_(r.errors,e)),l.mount))}catch(e){throw a=!1,e}finally{r.isSubmitted=!0,d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M_(r.errors)&&a,submitCount:r.submitCount+1,errors:r.errors})}},watch:(e,t)=>Z_(e)?d.watch.subscribe({next:n=>e(_(void 0,t),n)}):_(e,t,!0),setValue:Q,getValues:C,reset:(t,n={})=>{const c=t||o,u=F_(c),f=t&&!M_(t)?u:o;if(n.keepDefaultValues||(o=c),!n.keepValues){if(sk&&w_(t))for(const e of l.mount){const t=S_(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{rk(e)&&e.closest("form").reset();break}catch(e){}}}s=e.shouldUnregister?n.keepDefaultValues?F_(o):{}:u,i={},d.array.next({values:f}),d.watch.next({values:f})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!n.keepIsValid,a.watch=!!e.shouldUnregister,d.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty?r.isDirty:!!n.keepDefaultValues&&!J_(t,o),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty?r.dirtyFields:n.keepDefaultValues&&t?Object.entries(t).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n!==S_(o,t)})),{}):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{S_(i,e)&&(w_(t.defaultValue)?Q(e,S_(o,e)):(Q(e,t.defaultValue),Y_(o,e,t.defaultValue)),t.keepTouched||lk(r.touchedFields,e),t.keepDirty||(lk(r.dirtyFields,e),r.isDirty=t.defaultValue?S(e,S_(o,e)):S()),t.keepError||(lk(r.errors,e),h.isValid&&g()),d.state.next(Object.assign({},r)))},clearErrors:e=>{e?L_(e).forEach((e=>lk(r.errors,e))):r.errors={},d.state.next({errors:r.errors})},unregister:$,setError:(e,t,n)=>{const o=(S_(i,e,{_f:{}})._f||{}).ref;Y_(r.errors,e,Object.assign(Object.assign({},t),{ref:o})),d.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&o&&o.focus&&o.focus()},setFocus:(e,t={})=>{const n=S_(i,e)._f,r=n.refs?n.refs[0]:n.ref;t.shouldSelect?r.select():r.focus()},getFieldState:N}}function Tk(e={}){const t=n.useRef(),[r,i]=n.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},Qk(e)),{formState:r});const o=t.current.control,s=n.useCallback((e=>{((e,t,n)=>{const r=W_(e,"name");return M_(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find((e=>t[e]===(!n||C_)))})(e,o._proxyFormState,!0)&&(o._formState=Object.assign(Object.assign({},o._formState),e),i(Object.assign({},o._formState)))}),[o]);return function(e){const t=n.useRef(e);t.current=e,n.useEffect((()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>(e=>{e&&e.unsubscribe()})(n)}),[e.disabled])}({subject:o._subjects.state,callback:s}),n.useEffect((()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()})),t.current.formState=((e,t,n,r=!0)=>{const i={};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t[i]!==C_&&(t[i]=!r||C_),n&&(n[i]=!0),e[i]}});return i})(r,o._proxyFormState),t.current}var Pk=Object.defineProperty,Ck=Object.getOwnPropertySymbols,Nk=Object.prototype.hasOwnProperty,$k=Object.prototype.propertyIsEnumerable,Ak=(e,t,n)=>t in e?Pk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rk=(e,t)=>{for(var n in t||(t={}))Nk.call(t,n)&&Ak(e,n,t[n]);if(Ck)for(var n of Ck(t))$k.call(t,n)&&Ak(e,n,t[n]);return e};const jk={content:"文本",isAllowSelect:!1};var Dk=Vi((function(){const{register:e,getValues:r,reset:i}=Tk(),{page:o}=WA(),[s,a]=t(u()),{activeElem:c}=o;function u(){return Y({},o.activeElemProps,jk)}return l((()=>{o.updateElemProperty(c.id,"props",s)}),[s]),l((()=>{const e=u();a(e),i(e)}),[o.activeElemId]),n.createElement("form",{onChange:function(){const e=r();a(e)}},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",Rk({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("id",{value:s.id||""}))),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{htmlFor:"content",className:"mr-4 text-12 text-gray-600"},"文本内容"),n.createElement(y,{name:"info",color:"gray"})),n.createElement("div",{className:"flex"},n.createElement("textarea",Rk({className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",rows:4},e("content",{value:s.content}))),n.createElement(HA,{name:"content"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"其他")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("input",Rk({type:"checkbox"},e("isAllowSelect",{value:s.isAllowSelect}))),n.createElement("span",{className:"ml-8 text-12 text-gray-900"},"可选中文本")),n.createElement(HA,{name:"isAllowSelect"}))))}));const Ik={name:"text",icon:"text-component",label:"文本",category:"basic",component:k,configForm:Dk,defaultConfig:jk,defaultStyle:{display:"inline"},exportActions:["onClick"],order:1};jl(".config-item {\n  display: flex;\n  align-items: center;\n}\n\n.config-more {\n  margin-right: 8px;\n  margin-bottom: 8px;\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 8px;\n  border-width: 1px;\n  padding-left: 16px;\n  padding-right: 16px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n}",{});var Wk=Object.defineProperty,Mk=Object.defineProperties,Lk=Object.getOwnPropertyDescriptors,Vk=Object.getOwnPropertySymbols,Zk=Object.prototype.hasOwnProperty,Xk=Object.prototype.propertyIsEnumerable,Uk=(e,t,n)=>t in e?Wk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bk=(e,t)=>{for(var n in t||(t={}))Zk.call(t,n)&&Uk(e,n,t[n]);if(Vk)for(var n of Vk(t))Xk.call(t,n)&&Uk(e,n,t[n]);return e},qk=(e,t)=>Mk(e,Lk(t));const Yk=[{label:"铺满",value:"cover"},{label:"适合",value:"contain"},{label:"拉伸",value:"100% 100%"}],zk={imageUrl:"",fillMode:"cover",preview:!1,closeOnMaskClick:!1};var Gk=Vi((function(){const{page:e,designer:r}=WA(),[i,o]=t(Y(e.activeElemProps,zk)),s=g(null),a=g(null);return l((()=>{e.updateElemProperty(e.activeElem.id,"props",i)}),[i]),l((()=>{o(e.activeElemProps)}),[e.activeElemId]),l((()=>{var e;r.imageUrl&&(null==(e=s.current)||e.close(),o(qk(Bk({},i),{imageUrl:r.imageUrl})),r.setUploadImage(""))}),[r.imageUrl]),n.createElement(n.Fragment,null,n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.id,onChange:e=>o(qk(Bk({},i),{id:e.target.value}))}),n.createElement(HA,{name:"id"}))),n.createElement("div",null,"图片填充",n.createElement("div",{className:"config-item"},n.createElement("div",{className:"mr-8 flex-1 relative"},n.createElement("input",{type:"text",className:"w-full h-32 my-8 px-16 truncate border border-gray-300 corner-2-8-8-8",value:i.imageUrl,onChange:e=>o(qk(Bk({},i),{imageUrl:e.target.value}))}),n.createElement("div",{ref:a,className:"absolute cursor-pointer",style:{top:15,right:5}},n.createElement(y,{name:"upload_file"}))),n.createElement(HA,{name:"imageUrl"})),"填充方式",n.createElement("div",{className:"config-item"},n.createElement(E,{className:"my-8 w-full mr-4",options:Yk,value:i.fillMode,onChange:e=>o(qk(Bk({},i),{fillMode:e}))}),n.createElement(HA,{name:"fillMode"})),"更多方式",n.createElement("div",{className:"config-item"},n.createElement("div",{className:"config-more mt-8"},n.createElement("div",{className:"flex items-center"},n.createElement(y,{name:"pageview",className:"mr-4"}),"点击预览大图"),n.createElement(x,{className:"h-24",modifier:i.preview?void 0:"primary",onClick:()=>o(qk(Bk({},i),{preview:!i.preview}))},i.preview?"关闭":"开启")),n.createElement(HA,{name:"preview"})),n.createElement("div",{className:"config-item"},n.createElement("div",{className:"config-more"},n.createElement("div",{className:"flex items-center"},n.createElement(y,{name:"preview",className:"mr-4"}),"点击遮罩关闭图片预览"),n.createElement(x,{className:"h-24",modifier:i.closeOnMaskClick?void 0:"primary",onClick:()=>o(qk(Bk({},i),{closeOnMaskClick:!i.closeOnMaskClick}))},i.closeOnMaskClick?"关闭":"开启")),n.createElement(HA,{name:"closeOnMaskClick"}))),n.createElement(Q,{ref:s,reference:a,trigger:"click"},n.createElement("div",{className:"p-10 bg-white border-2 border-gray-100",style:{width:400,height:200}},n.createElement("div",{className:"w-full h-full flex items-center\n            justify-center border border-dashed border-gray-100"},r.vdoms.uploadImage))))}));const Fk={name:"image",icon:"image-component",label:"图片",category:"basic",component:T,configForm:Gk,defaultConfig:zk,order:3};var Hk=Object.defineProperty,Kk=Object.defineProperties,Jk=Object.getOwnPropertyDescriptors,eE=Object.getOwnPropertySymbols,tE=Object.prototype.hasOwnProperty,nE=Object.prototype.propertyIsEnumerable,rE=(e,t,n)=>t in e?Hk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var iE=n.forwardRef((function(e,t){var r,i=e,{title:o="按钮",style:s}=i,a=((e,t)=>{var n={};for(var r in e)tE.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&eE)for(var r of eE(e))t.indexOf(r)<0&&nE.call(e,r)&&(n[r]=e[r]);return n})(i,["title","style"]);return n.createElement(x,(r=((e,t)=>{for(var n in t||(t={}))tE.call(t,n)&&rE(e,n,t[n]);if(eE)for(var n of eE(t))nE.call(t,n)&&rE(e,n,t[n]);return e})({},a),Kk(r,Jk({ref:t,style:s}))),o)})),oE=Object.defineProperty,sE=Object.defineProperties,aE=Object.getOwnPropertyDescriptors,lE=Object.getOwnPropertySymbols,cE=Object.prototype.hasOwnProperty,uE=Object.prototype.propertyIsEnumerable,hE=(e,t,n)=>t in e?oE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dE=(e,t)=>{for(var n in t||(t={}))cE.call(t,n)&&hE(e,n,t[n]);if(lE)for(var n of lE(t))uE.call(t,n)&&hE(e,n,t[n]);return e},fE=(e,t)=>sE(e,aE(t));const pE=[{label:"主要",value:"primary"},{label:"默认",value:"default"},{label:"危险",value:"danger"}],mE=[{label:"正常",value:"normal"},{label:"紧凑",value:"compact"}],gE=[{label:"按钮",value:"button"},{label:"提交",value:"submit"},{label:"重置",value:"reset"}],OE={title:"按钮",modifier:"primary",type:"button",size:"normal",iconSize:12,iconName:"",preview:!1,closeOnMaskClick:!1,onClick:B};const vE={name:"button",icon:"button-component",label:"按钮",category:"basic",component:iE,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,OE));return l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]),n.createElement("div",null,n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.id||"",onChange:e=>i((t=>fE(dE({},t),{id:e.target.value})))}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"text-12 text-gray-600"},"按钮名称"),n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",{name:"title",className:"px-8 py-4 flex-1 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",maxLength:30,value:r.title||"",onChange:e=>i((t=>fE(dE({},t),{title:e.target.value})))}),n.createElement(HA,{name:"title"}))),n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"按钮类型"),n.createElement("div",{className:"config-item"},n.createElement(E,{className:"w-full mr-4 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",options:pE,value:r.modifier,onChange:e=>i(fE(dE({},r),{modifier:e}))})),n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"按钮功能"),n.createElement("div",{className:"config-item"},n.createElement(E,{className:"w-full mr-4 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",options:gE,value:r.type,onChange:e=>i(fE(dE({},r),{type:e}))})),n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"按钮大小"),n.createElement("div",{className:"config-item"},n.createElement(E,{className:"w-full mr-4 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",options:mE,value:r.size,onChange:e=>i(fE(dE({},r),{size:e}))})),n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"图标名称"),n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",{className:"px-8 py-4 flex-1 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",value:r.iconName,onChange:e=>i(fE(dE({},r),{iconName:e.target.value}))})),n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"图标大小"),n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",{type:"number",min:"0",step:"1",className:"px-8 py-4 flex-1 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",value:r.iconSize,onChange:e=>i(fE(dE({},r),{iconSize:Number(e.target.value)}))}))))},defaultConfig:OE,order:4,defaultStyle:{},exportActions:["onClick"]};var bE=Object.defineProperty,yE=Object.getOwnPropertySymbols,xE=Object.prototype.hasOwnProperty,wE=Object.prototype.propertyIsEnumerable,SE=(e,t,n)=>t in e?bE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_E=(e,t)=>{for(var n in t||(t={}))xE.call(t,n)&&SE(e,n,t[n]);if(yE)for(var n of yE(t))wE.call(t,n)&&SE(e,n,t[n]);return e};const kE={content:"段落文本",maxLength:5,isAllowSelect:!1,isAllowSpace:!1};const EE={name:"para",icon:"text-component",label:"段落",category:"basic",component:P,configForm:function(){const{register:e,getValues:r,formState:{errors:i},reset:o}=Tk(),{page:s}=WA(),[a,c]=t(Y(s.activeElemProps,kE));return l((()=>{s.updateElemProperty(s.activeElem.id,"props",a)}),[a]),l((()=>{const e=s.activeElemProps;c(e),o(e)}),[s.activeElemId]),n.createElement("form",{onChange:function(){const e=r();c(e)}},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",_E({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("id",{value:a.id||""}))),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{htmlFor:"maxLength",className:"mr-4 text-12 text-gray-600"},"最大显示行数")),n.createElement("div",{className:"flex items-center"},n.createElement("input",_E({className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",type:"number",min:1},e("maxLength",{value:a.maxLength}))),n.createElement(HA,{name:"maxLength"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{htmlFor:"content",className:"mr-4 text-12 text-gray-600"},"文本内容")),n.createElement("div",{className:"flex"},n.createElement("textarea",_E({className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",rows:4},e("content",{value:a.content,required:!0,maxLength:30}))),n.createElement(HA,{name:"content"})),i.content&&"required"===i.content.type&&n.createElement("span",{className:"text-12 text-gray-600"},"请输入文本内容")),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"其他")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("input",_E({type:"checkbox"},e("isAllowSelect",{value:a.isAllowSelect}))),n.createElement("span",{className:"ml-8 text-12 text-gray-900"},"可选中文本")),n.createElement(HA,{name:"isAllowSelect"}))))},defaultConfig:kE,order:2,exportActions:["onClick"]};var QE=Object.defineProperty,TE=Object.defineProperties,PE=Object.getOwnPropertyDescriptors,CE=Object.getOwnPropertySymbols,NE=Object.prototype.hasOwnProperty,$E=Object.prototype.propertyIsEnumerable,AE=(e,t,n)=>t in e?QE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RE=(e,t)=>{for(var n in t||(t={}))NE.call(t,n)&&AE(e,n,t[n]);if(CE)for(var n of CE(t))$E.call(t,n)&&AE(e,n,t[n]);return e},jE=(e,t)=>TE(e,PE(t));const DE={content:"链接",linkType:"outside",linkUrl:"",linkPage:"",isBlank:!1};const IE={name:"link",icon:"hyper-link",label:"链接",category:"basic",component:C,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,DE));return l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]),n.createElement("form",null,n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.id||"",onChange:e=>i(jE(RE({},r),{id:e.target.value}))}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"text-12 text-gray-600"},"内容"),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"text",className:"w-full h-32 my-4 px-8 mr-8 border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.content,onChange:e=>i(jE(RE({},r),{content:e.target.value}))}),n.createElement(HA,{name:"content"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"mr-4 text-12 text-gray-600"},"链接地址"),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:"w-full h-32 my-4 px-8 mr-8 border\n                corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.linkUrl,onChange:e=>i(jE(RE({},r),{linkUrl:e.target.value}))}),n.createElement(HA,{name:"linkUrl"}))),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("div",{className:"w-full flex items-center"},n.createElement("input",{type:"checkbox",className:"w-full h-32 my-4 px-8 mr-4",style:{width:15},checked:r.isBlank,onChange:e=>i(jE(RE({},r),{isBlank:e.target.checked}))}),n.createElement("span",{className:"ml-8 text-12 text-gray-900 whitespace-nowrap"},"新开页面")),n.createElement(HA,{name:"isBlank"})))},defaultConfig:DE,order:8};var WE=Object.defineProperty,ME=Object.getOwnPropertySymbols,LE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable,ZE=(e,t,n)=>t in e?WE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var XE=Object.defineProperty,UE=Object.defineProperties,BE=Object.getOwnPropertyDescriptors,qE=Object.getOwnPropertySymbols,YE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,GE=(e,t,n)=>t in e?XE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FE=(e,t)=>{for(var n in t||(t={}))YE.call(t,n)&&GE(e,n,t[n]);if(qE)for(var n of qE(t))zE.call(t,n)&&GE(e,n,t[n]);return e},HE=(e,t)=>UE(e,BE(t));const KE={title:"modal 标题",isOpen:!0,width:"auto",height:"auto",fullscreen:!1,hideFooter:!1,cancelText:"取消",cancelIconName:"close",okText:"确定",okIconName:"check"};const JE={name:"modal",icon:"grid-12",label:"模态框",category:"basic",component:function(e){var t=e,{children:r,hideFooter:i,okIconName:o,okText:s,cancelIconName:a,cancelText:l}=t,c=((e,t)=>{var n={};for(var r in e)LE.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&ME)for(var r of ME(e))t.indexOf(r)<0&&VE.call(e,r)&&(n[r]=e[r]);return n})(t,["children","hideFooter","okIconName","okText","cancelIconName","cancelText"]);return n.createElement(w,((e,t)=>{for(var n in t||(t={}))LE.call(t,n)&&ZE(e,n,t[n]);if(ME)for(var n of ME(t))VE.call(t,n)&&ZE(e,n,t[n]);return e})({controlled:!0,wrapStyle:{position:"absolute",width:"100%",height:"100%",zIndex:1},footerBtns:i?[]:[{key:"close",iconName:a,onClick:c.onCancel||B,text:l},{key:"check",iconName:o,modifier:"primary",onClick:c.onConfirm||B,text:s}]},c),r)},configForm:function(e){const{page:r}=WA(),[i,o]=t(Y(r.activeElemProps,KE));function s(e,t){o(HE(FE({},i),{[t]:e.target.value}))}return l((()=>{r.updateElemProperty(r.activeElem.id,"props",i)}),[i]),l((()=>{o(r.activeElemProps)}),[r.activeElemId]),n.createElement(n.Fragment,null,n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.id,onChange:e=>s(e,"id")}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"标题"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.title,onChange:e=>s(e,"title")}),n.createElement(HA,{name:"title"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"宽度"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.width,onChange:e=>s(e,"width")}),n.createElement(HA,{name:"width"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"高度"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.height,onChange:e=>s(e,"height")}),n.createElement(HA,{name:"height"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"显示对话框"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement(N,{defaultChecked:i.isOpen,onChange:e=>o(HE(FE({},i),{isOpen:e}))}),n.createElement(HA,{name:"isOpen"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"全屏显示"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement(N,{defaultChecked:i.fullscreen,onChange:e=>o(HE(FE({},i),{fullscreen:e}))}),n.createElement(HA,{name:"fullscreen"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"隐藏底部"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement(N,{defaultChecked:i.hideFooter,onChange:e=>o(HE(FE({},i),{hideFooter:e}))}),n.createElement(HA,{name:"hideFooter"}))),!i.hideFooter&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"cancel 文本"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.cancelText,onChange:e=>s(e,"cancelText")}),n.createElement(HA,{name:"cancelText"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"cancel 图标"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.cancelIconName,onChange:e=>s(e,"cancelIconName")}),n.createElement(HA,{name:"cancelIconName"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"confirm 文本"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.okText,onChange:e=>s(e,"okText")}),n.createElement(HA,{name:"okText"}))),n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"confirm 图标"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:i.okIconName,onChange:e=>s(e,"okIconName")}),n.createElement(HA,{name:"okIconName"})))))},defaultConfig:KE,order:9,acceptChild:!0,exportActions:["onClose","onCancel","onConfirm"],defaultStyle:{}};var eQ=Object.freeze({__proto__:null,Page:m_,Text:Ik,Image:Fk,Button:vE,Paragraph:EE,Modal:JE,Link:IE}),tQ=Object.defineProperty,nQ=Object.defineProperties,rQ=Object.getOwnPropertyDescriptors,iQ=Object.getOwnPropertySymbols,oQ=Object.prototype.hasOwnProperty,sQ=Object.prototype.propertyIsEnumerable,aQ=(e,t,n)=>t in e?tQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var lQ=r((function(e,t){var r=e,{children:i,placeholder:o,onSubmit:s,__exposeState:a}=r,c=((e,t)=>{var n={};for(var r in e)oQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&iQ)for(var r of iQ(e))t.indexOf(r)<0&&sQ.call(e,r)&&(n[r]=e[r]);return n})(r,["children","placeholder","onSubmit","__exposeState"]);const u=g(null);function h(){const e=function(e){const t=new FormData(e),n={};return t.forEach(((e,r)=>{n[r]?n[r]=t.getAll(r):n[r]=e})),n}(u.current);null==s||s(e)}return m(t,(()=>u.current)),l((()=>{null==a||a({submit:h})}),[]),n.createElement("form",(d=((e,t)=>{for(var n in t||(t={}))oQ.call(t,n)&&aQ(e,n,t[n]);if(iQ)for(var n of iQ(t))sQ.call(t,n)&&aQ(e,n,t[n]);return e})({},c),nQ(d,rQ({ref:u}))),i,!O.count(i)&&o);var d})),cQ=Object.defineProperty,uQ=Object.defineProperties,hQ=Object.getOwnPropertyDescriptors,dQ=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,pQ=Object.prototype.propertyIsEnumerable,mQ=(e,t,n)=>t in e?cQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gQ=(e,t)=>{for(var n in t||(t={}))fQ.call(t,n)&&mQ(e,n,t[n]);if(dQ)for(var n of dQ(t))pQ.call(t,n)&&mQ(e,n,t[n]);return e},OQ=(e,t)=>uQ(e,hQ(t));const vQ=[{label:"在新窗口打开",value:"_blank"},{label:"在当前窗口打开",value:"_self"}],bQ=[{label:"get",value:"get"},{label:"post",value:"post"}],yQ={name:"",action:"",method:"get",target:"_blank"};var xQ=Vi((function(){const{register:e,getValues:r,reset:i}=Tk(),{page:o}=WA(),[s,a]=t(u()),{activeElem:c}=o;function u(){return Y({},o.activeElemProps,yQ)}return l((()=>{o.updateElemProperty(c.id,"props",s)}),[s]),l((()=>{const e=u();a(e),i(e)}),[o.activeElemId]),n.createElement("form",{onChange:function(){const e=r();a(e)}},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",gQ({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("id",{value:s.id||""}))),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"name")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",gQ({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("name",{value:s.name||""}))),n.createElement(HA,{name:"name"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"action")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",gQ({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("action",{value:s.action||""}))),n.createElement(HA,{name:"action"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"method")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement(E,{className:"my-8 w-full mr-4",options:bQ,value:s.method,onChange:e=>a(OQ(gQ({},s),{method:e}))}),n.createElement(HA,{name:"method"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"target")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement(E,{className:"my-8 w-full mr-4",options:vQ,value:s.target,onChange:e=>a(OQ(gQ({},s),{target:e}))}),n.createElement(HA,{name:"target"}))))}));const wQ={name:"form",icon:"apps",label:"表单",category:"form",component:lQ,configForm:xQ,defaultConfig:yQ,order:3,acceptChild:!0,exportActions:["onSubmit"],defaultStyle:{display:"block"}};var SQ=Object.defineProperty,_Q=Object.defineProperties,kQ=Object.getOwnPropertyDescriptors,EQ=Object.getOwnPropertySymbols,QQ=Object.prototype.hasOwnProperty,TQ=Object.prototype.propertyIsEnumerable,PQ=(e,t,n)=>t in e?SQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const CQ={defaultValue:void 0,value:void 0,placeholder:"请输入内容",type:"text",name:""},NQ="border border-gray-300 corner-2-8-8-8 mr-8 px-8 py-4 w-full text-gray-600";const $Q={name:"input",icon:"text-component",label:"单行文本",category:"form",component:$,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,CQ));l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]);const o=(e,t)=>{i((n=>{return r=((e,t)=>{for(var n in t||(t={}))QQ.call(t,n)&&PQ(e,n,t[n]);if(EQ)for(var n of EQ(t))TQ.call(t,n)&&PQ(e,n,t[n]);return e})({},n),_Q(r,kQ({[e]:t}));var r}))};return n.createElement(n.Fragment,null,n.createElement("div",{className:"mb-8"},n.createElement("p",null,"ID"),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:NQ,value:r.id,onChange:e=>o("id",e.target.value)}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",null,"占位符"),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:NQ,value:r.placeholder,onChange:e=>o("placeholder",e.target.value)}),n.createElement(HA,{name:"placeholder"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",null,"name"),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:NQ,value:r.name,onChange:e=>o("name",e.target.value)}),n.createElement(HA,{name:"name"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"默认值"),n.createElement(b,{position:"top",label:"只设置默认值，该组件将成为非受控组件，如果设置了value将会覆盖默认值"},n.createElement(y,{name:"info"}))),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:NQ,value:r.defaultValue,onChange:e=>o("defaultValue",e.target.value)}),n.createElement(HA,{name:"defaultValue"}))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"值"),n.createElement(b,{position:"top",label:"如果设置了value，该组件将成为受控组件"},n.createElement(y,{name:"info"}))),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:NQ,value:r.value,onChange:e=>o("value",e.target.value)}),n.createElement(HA,{name:"value"}))),n.createElement("div",null,n.createElement("p",null,"input类型："),n.createElement(E,{value:r.type,options:[{label:"文本框",value:"text"},{label:"密码框",value:"password"},{label:"数值",value:"number"}],onChange:e=>o("type",e)})))},defaultConfig:CQ,order:1,exportActions:["onChange","onKeyDown","onBlur","onFocus"],defaultStyle:{display:"inline-block"}};var AQ=Object.defineProperty,RQ=Object.defineProperties,jQ=Object.getOwnPropertyDescriptors,DQ=Object.getOwnPropertySymbols,IQ=Object.prototype.hasOwnProperty,WQ=Object.prototype.propertyIsEnumerable,MQ=(e,t,n)=>t in e?AQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const LQ={placeholder:"请输入内容",cols:40,rows:5,minLength:0,maxLength:300},VQ=[{name:"id",msg:"ID",type:"text"},{name:"placeholder",msg:"占位符",type:"text"},{name:"name",msg:"name",type:"text"},{name:"defaultValue",msg:"默认值",type:"text"},{name:"rows",msg:"行数",type:"number"},{name:"cols",msg:"列数",type:"number"},{name:"minLength",msg:"最小输入字符数",type:"number"},{name:"maxLength",msg:"最大输入字符数",type:"number"}];const ZQ={name:"textarea",icon:"text-component",label:"多行文本",category:"form",component:A,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,LQ));l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]);const o=(e,t)=>{i((n=>{return r=((e,t)=>{for(var n in t||(t={}))IQ.call(t,n)&&MQ(e,n,t[n]);if(DQ)for(var n of DQ(t))WQ.call(t,n)&&MQ(e,n,t[n]);return e})({},n),RQ(r,jQ({[e]:t}));var r}))};return n.createElement("div",{className:"flex flex-col"},VQ.map((({name:e,msg:t,type:i})=>n.createElement("div",{className:"mb-10",key:e},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},t)),n.createElement("div",{className:"flex items-center"},n.createElement("input",{className:"mr-8 px-8 py-4 w-full text-gray-600 border border-gray-300 corner-2-8-8-8",type:i,value:r[e],onChange:t=>o(e,t.target.value)}),n.createElement(HA,{name:e}))))))},defaultConfig:LQ,order:2,defaultStyle:{display:"inline-block"},exportActions:["onChange","onKeyDown","onBlur","onFocus"]};var XQ=Object.defineProperty,UQ=Object.defineProperties,BQ=Object.getOwnPropertyDescriptors,qQ=Object.getOwnPropertySymbols,YQ=Object.prototype.hasOwnProperty,zQ=Object.prototype.propertyIsEnumerable,GQ=(e,t,n)=>t in e?XQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FQ=(e,t)=>{for(var n in t||(t={}))YQ.call(t,n)&&GQ(e,n,t[n]);if(qQ)for(var n of qQ(t))zQ.call(t,n)&&GQ(e,n,t[n]);return e};const HQ={position:"sticky",zIndex:3};function KQ(e,t){let n={};if(!e.fixed)return{};n=FQ({},HQ);const{leftMargin:r,rightMargin:i}=function(e,t){const n=t.findIndex((({id:t})=>t===e));let r=0,i=0;for(let e=0;e<n;e+=1)t[e].fixed&&(r+=t[e].width||100);for(let e=n+1;e<t.length;e+=1)t[e].fixed&&(i+=t[e].width||100);return{leftMargin:r,rightMargin:i}}(e.id,t),o=t.findIndex((({id:t})=>t===e.id)),s=t.length-o+1;var a;return a=FQ({},n),n=UQ(a,BQ({zIndex:s,left:`${r}px`,right:`${i}px`})),n}jl(".ofa-table-wrapper {\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  width: 100%;\n  background-color: white;\n  opacity: 0.999;\n}\n\n.ofa-table-wrapper .table-selector {\n  min-width: 16px;\n}\n\n.ofa-table-wrapper .ofa-table-middle td {\n  padding: 12px;\n}\n\n.ofa-table-wrapper .ofa-table-middle th {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n\n.ofa-table-wrapper .ofa-table {\n  max-height: 100%;\n  overflow: auto;\n}\n\n.ofa-table-wrapper .ofa-table table {\n  width: 100%;\n  table-layout: fixed;\n  text-align: left;\n  color: var(--gray-900);\n  font-size: 12px;\n}\n\n.ofa-table-wrapper .ofa-table td {\n  background-color: white;\n}\n\n.ofa-table-wrapper .ofa-table th,\n.ofa-table-wrapper .ofa-table td {\n  word-break: break-all;\n  vertical-align: middle;\n  border-bottom: 1px solid var(--gray-200);\n  transition: padding 0.3s;\n}\n\n.ofa-table-wrapper .ofa-table th {\n  position: -webkit-sticky;\n  position: sticky;\n  background: #fff;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  top: 0;\n  line-height: 20px;\n  font-weight: 400;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  color: var(--gray-600);\n  z-index: 2;\n}\n\n.ofa-table-wrapper .ofa-table [data-sticky-td] {\n  position: -webkit-sticky;\n  position: sticky;\n}\n\n.ofa-table-wrapper .ofa-table [data-sticky-last-left-td] {\n  box-shadow: 2px 0 3px var(--gray-200);\n}\n\n.ofa-table-wrapper .ofa-table [data-sticky-first-right-td] {\n  box-shadow: -2px 0 3px var(--gray-200);\n}\n\n.ofa-table-wrapper .ofa-table tbody tr:hover td {\n  background-color: var(--blue-100);\n}\n\n.ofa-table-wrapper .ofa-table tbody tr td.table__cell-fixed {\n  position: -webkit-sticky;\n  position: sticky;\n}\n\n.ofa-table-wrapper .ofa-table tbody > tr > .ofa-table-td {\n  padding: 17px 16px;\n  border-bottom: 1px solid;\n  border-color: var(--gray-200);\n  background-color: #fff;\n}\n\n.ofa-table-wrapper .ofa-table-empty {\n  padding: 30px;\n  text-align: center;\n}\n\n.ofa-table-wrapper .ofa-table-empty img {\n  display: inline-block;\n  margin-bottom: 8px;\n}\n\n.ofa-table-wrapper .ofa-table-total-tips {\n  font-size: 12px;\n  line-height: 20px;\n  color: var(--gray-600);\n}\n\n.ofa-table-wrapper .ofa-table-tr:hover .ofa-table-td {\n  background-color: var(--gray-100);\n}",{});var JQ=Object.defineProperty,eT=Object.defineProperties,tT=Object.getOwnPropertyDescriptors,nT=Object.getOwnPropertySymbols,rT=Object.prototype.hasOwnProperty,iT=Object.prototype.propertyIsEnumerable,oT=(e,t,n)=>t in e?JQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var sT=r((function(e,t){var r,i=e,{className:o,cols:s,rows:a,hasBorder:l}=i,c=((e,t)=>{var n={};for(var r in e)rT.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&nT)for(var r of nT(e))t.indexOf(r)<0&&iT.call(e,r)&&(n[r]=e[r]);return n})(i,["className","cols","rows","hasBorder"]);return n.createElement("div",(r=((e,t)=>{for(var n in t||(t={}))rT.call(t,n)&&oT(e,n,t[n]);if(nT)for(var n of nT(t))iT.call(t,n)&&oT(e,n,t[n]);return e})({className:ie("ofa-table-wrapper","relative",o)},c),eT(r,tT({ref:t}))),n.createElement("div",{className:ie("ofa-table",o,"ofa-table-middle")},n.createElement("table",{className:ie("table-fixed","border-collapse",o)},n.createElement("colgroup",null,s.map((e=>{const t=KQ(e,s);return n.createElement("col",{width:e.width||100,key:`col-${e.id}`,span:1,style:t})}))),n.createElement("thead",null,n.createElement("tr",{className:"ofa-table-tr"},(()=>{try{return null==s?void 0:s.map((e=>{const t=KQ(e,s);return n.createElement("th",{className:ie("p-4",l&&"border"),key:e.id,style:t},e.label)}))}catch(e){return[]}})())),n.createElement("tbody",null,(()=>{try{return null==a?void 0:a.map(((e,t)=>{const r=s.map((r=>{const i=e[r.key]||"--",o=KQ(r,s);return n.createElement("td",{className:ie("p-4",l&&"border"),key:`row${t}-col${r.id}`,style:o},i)}));return n.createElement("tr",{className:"ofa-table-tr",key:`row${t}`},r)}))}catch(e){return[]}})()))))}));let aT=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t};var lT=Object.defineProperty,cT=Object.defineProperties,uT=Object.getOwnPropertyDescriptors,hT=Object.getOwnPropertySymbols,dT=Object.prototype.hasOwnProperty,fT=Object.prototype.propertyIsEnumerable,pT=(e,t,n)=>t in e?lT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mT=(e,t)=>{for(var n in t||(t={}))dT.call(t,n)&&pT(e,n,t[n]);if(hT)for(var n of hT(t))fT.call(t,n)&&pT(e,n,t[n]);return e},gT=(e,t)=>cT(e,uT(t));const OT={cols:[{id:`col-${aT(8)}`,key:"",label:"第1列",fixed:!1,width:100}],rows:[],hasBorder:!0};var vT=Vi((function(){const{page:e}=WA(),[r,i]=t(Y({},e.activeElemProps,OT)),[o,s]=t(!1),[a,c]=t(JSON.stringify(null==r?void 0:r.rows)),{activeElem:u}=e;function h(e,t,n){const o=z(r.cols);o[t][e]=n,i(gT(mT({},r),{cols:[...o]}))}return l((()=>{e.updateElemProperty(u.id,"props",r)}),[r]),n.createElement(n.Fragment,null,n.createElement("form",null,n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.id,onChange:e=>i(gT(mT({},r),{id:e.target.value}))}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"单元格边框"),n.createElement("input",{type:"checkbox",name:"border",checked:r.hasBorder,onChange:e=>{i(gT(mT({},r),{hasBorder:!r.hasBorder}))}}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center justify-between"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"列配置"),n.createElement(HA,{name:"cols"})),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"grid grid-cols-4 gap-4"},n.createElement("label",null,"key"),n.createElement("label",null,"名称"),n.createElement("label",null,"宽度"),n.createElement("label",null,"固定")),r.cols.map(((e,t)=>n.createElement("div",{className:"mb-8 flex items-center justify-between",key:e.id},n.createElement("div",{className:"w-full grid grid-cols-4 gap-4"},n.createElement("input",{type:"text",className:"px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:e.key,onChange:e=>h("key",t,e.target.value)}),n.createElement("input",{type:"text",className:"px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:e.label,onChange:e=>h("label",t,e.target.value)}),n.createElement("input",{type:"text",className:"px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:e.width,onChange:e=>h("width",t,e.target.value)}),n.createElement("div",{className:"inline-flex items-center justify-around"},n.createElement("input",{type:"checkbox",className:"mr-8",checked:e.fixed,onChange:n=>h("fixed",t,!e.fixed)}),n.createElement(y,{clickable:!0,name:"delete",disabled:r.cols.length<=1,onClick:()=>function(e){r.cols.length<=1||(r.cols.splice(e,1),i(mT({},r)))}(t)})))))),n.createElement(y,{name:"add",clickable:!0,onClick:function(){i(gT(mT({},r),{cols:[...r.cols,{id:`col-${aT(8)}`,key:"",label:`第${r.cols.length+1}列`,fixed:!1,width:100}]}))}}))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement(x,{onClick:()=>s(!0)},"绑定表格数据"),n.createElement(HA,{name:"rows"})))),o&&n.createElement(w,{title:"绑定表格数据",onClose:()=>s(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>s(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){try{const e=JSON.parse(a);if(null===e)return void s(!1);if(!Array.isArray(e))return void S.error("表格数据必须为数组");i(gT(mT({},r),{rows:e})),s(!1)}catch(e){S.error(e.message)}},text:"绑定"}]},n.createElement(vS,{value:"string"==typeof a?a:JSON.stringify(a),height:"120px",extensions:[o_()],onChange:e=>{c(e)}})))}));const bT={name:"table",icon:"border_all",label:"表格",category:"form",component:sT,configForm:vT,defaultConfig:OT,order:4,defaultStyle:{display:"block"}};var yT=Object.getOwnPropertySymbols,xT=Object.prototype.hasOwnProperty,wT=Object.prototype.propertyIsEnumerable;var ST=n.forwardRef((function(e,t){var r=e,{currentValue:i,disabled:o,radioOptions:s="",onChange:a}=r;((e,t)=>{var n={};for(var r in e)xT.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&yT)for(var r of yT(e))t.indexOf(r)<0&&wT.call(e,r)&&(n[r]=e[r])})(r,["currentValue","disabled","radioOptions","onChange"]);const l=s.split(/\r?\n/).map((e=>e.trim().slice(0,15))).filter(Boolean);return n.createElement(R,{onChange:e=>null==a?void 0:a(e)},l.map((e=>n.createElement(j,{className:"inline-block",key:e,label:e,value:e,disabled:o,defaultChecked:i===e}))))})),_T=Object.defineProperty,kT=Object.defineProperties,ET=Object.getOwnPropertyDescriptors,QT=Object.getOwnPropertySymbols,TT=Object.prototype.hasOwnProperty,PT=Object.prototype.propertyIsEnumerable,CT=(e,t,n)=>t in e?_T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NT=(e,t)=>{for(var n in t||(t={}))TT.call(t,n)&&CT(e,n,t[n]);if(QT)for(var n of QT(t))PT.call(t,n)&&CT(e,n,t[n]);return e},$T=(e,t)=>kT(e,ET(t));const AT={radioOptions:"选项一\n选项二\n选项三",disabled:!1,onChange:B};const RT={name:"radio",icon:"apps",label:"单选",category:"form",component:ST,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,AT));return l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]),n.createElement(n.Fragment,null,n.createElement("div",{className:"mb-8"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",{type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",value:r.id||"",onChange:e=>i($T(NT({},r),{id:e.target.value}))}),n.createElement(HA,{name:"id"}))),n.createElement("div",{className:"text-12 text-gray-600"},"选项"),n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("textarea",{className:"px-8 py-4 flex-1 border corner-2-8-8-8 border-gray-300 focus:border-blue-600 h-152",placeholder:"请填写",maxLength:30,value:r.radioOptions||"",onChange:e=>i($T(NT({},r),{radioOptions:e.target.value}))})))},defaultConfig:AT,order:2,exportActions:["onChange"]};var jT=Object.freeze({__proto__:null,Form:wQ,Input:$Q,Textarea:ZQ,Table:bT,Radio:RT}),DT=Object.defineProperty,IT=Object.defineProperties,WT=Object.getOwnPropertyDescriptors,MT=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,VT=Object.prototype.propertyIsEnumerable,ZT=(e,t,n)=>t in e?DT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XT=(e,t)=>{for(var n in t||(t={}))LT.call(t,n)&&ZT(e,n,t[n]);if(MT)for(var n of MT(t))VT.call(t,n)&&ZT(e,n,t[n]);return e},UT=(e,t)=>IT(e,WT(t));const BT={colRatio:"12:9:3",colGap:"16px",rowGap:"16px"},qT=["12","6:6","3:9","9:3","4:4:4","3:6:3","3:3:3:3","2:2:2:2:2:2"],YT=[{id:1,value:"12",icon:"grid-12"},{id:2,value:"6:6",icon:"grid-6-6"},{id:3,value:"3:9",icon:"grid-3-9"},{id:4,value:"9:3",icon:"grid-9-3"},{id:5,value:"4:4:4",icon:"grid-4-4-4"},{id:6,value:"3:6:3",icon:"grid-3-6-3"},{id:7,value:"3:3:3:3",icon:"grid-4-3"},{id:8,value:"2:2:2:2:2:2",icon:"grid-6-2"}],zT=["8px","12px","16px","20px"].map((e=>({label:e,value:e})));const GT={name:"grid",icon:"layout-container",label:"布局容器",category:"layout",component:D,configForm:function(){const{page:e}=WA(),[r,i]=t(Y(e.activeElemProps,BT));return l((()=>{e.updateElemProperty(e.activeElem.id,"props",r)}),[r]),l((()=>{i(e.activeElemProps)}),[e.activeElemId]),n.createElement("form",{className:"flex flex-col"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"text-12 text-gray-400"},"布局"),n.createElement("ul",{className:"flex items-center flex-wrap"},YT.map((e=>n.createElement("li",{key:e.id,onClick:()=>{return t=e.value,void i(UT(XT({},r),{colRatio:t}));var t},className:ie("border rounded-4 cursor-pointer",{"border-gray-300":e.value!==r.colRatio,"border-blue-600":e.value===r.colRatio}),style:{width:60,height:36,margin:3,padding:3}},n.createElement(y,{name:e.icon,style:{width:52,height:28}})))),!qT.includes(r.colRatio)&&n.createElement("li",{className:"flex flex-col items-center border border-dashed\n              rounded-4 cursor-pointer border-blue-600",style:{width:60,margin:3,padding:3}},n.createElement(y,{name:"edit_road"}),n.createElement("span",{className:"text-12 text-gray-600"},"自定义")))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"text-12 text-gray-400"},"栅格比例"),n.createElement("input",{type:"text",placeholder:"0",className:"mr-8 px-8 py-6 w-full border border-gray-300 corner-2-8-8-8",value:r.colRatio,onChange:e=>i((t=>UT(XT({},t),{colRatio:e.target.value})))})),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"text-12 text-gray-400"},"列间距"),n.createElement(E,{name:"colGap",options:zT,value:r.colGap,onChange:e=>i((t=>UT(XT({},t),{colGap:e})))})),n.createElement("div",null,n.createElement("p",{className:"text-12 text-gray-400"},"行间距"),n.createElement(E,{name:"rowGap",options:zT,value:r.rowGap,onChange:e=>i((t=>UT(XT({},t),{rowGap:e})))})))},defaultConfig:BT,order:1,acceptChild:!0,exportActions:[],defaultStyle:{marginBottom:16}};var FT=Object.defineProperty,HT=Object.getOwnPropertySymbols,KT=Object.prototype.hasOwnProperty,JT=Object.prototype.propertyIsEnumerable,eP=(e,t,n)=>t in e?FT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const tP={};var nP=Vi((function(){const{register:e,getValues:r,reset:i}=Tk(),{page:o}=WA(),[s,a]=t(u()),{activeElem:c}=o;function u(){return Y({},o.activeElemProps,tP)}return l((()=>{o.updateElemProperty(c.id,"props",s)}),[s]),l((()=>{const e=u();a(e),i(e)}),[o.activeElemId]),n.createElement("form",{onChange:function(){const e=r();a(e)}},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"mb-4 flex items-center"},n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID")),n.createElement("div",{className:"mb-8 flex items-center justify-between"},n.createElement("input",((e,t)=>{for(var n in t||(t={}))KT.call(t,n)&&eP(e,n,t[n]);if(HT)for(var n of HT(t))JT.call(t,n)&&eP(e,n,t[n]);return e})({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("id",{value:s.id||""}))),n.createElement(HA,{name:"id"}))))}));const rP={name:"container",icon:"single-container",label:"容器",category:"layout",component:I,configForm:nP,defaultConfig:{},order:2,acceptChild:!0,exportActions:["onClick"],defaultStyle:{}};var iP=Object.freeze({__proto__:null,Grid:GT,Container:rP}),oP=Object.getOwnPropertySymbols,sP=Object.prototype.hasOwnProperty,aP=Object.prototype.propertyIsEnumerable;var lP=n.forwardRef((function(e,t){var r=e,{id:i,className:o,iframeName:s,iframeAddr:a,iframeHeight:l,iframeWidth:c,allowFullscreen:u,sandbox:h,referrerPolicy:d,iframeAllow:f,style:p}=r;const m=((e,t)=>{var n={};for(var r in e)sP.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&oP)for(var r of oP(e))t.indexOf(r)<0&&aP.call(e,r)&&(n[r]=e[r]);return n})(r,["id","className","iframeName","iframeAddr","iframeHeight","iframeWidth","allowFullscreen","sandbox","referrerPolicy","iframeAllow","style"])["data-node-key"]||"";return a?n.createElement("iframe",{"data-node-key":m,id:i,style:p,ref:t,allow:f,referrerPolicy:d,name:s,width:c,height:l,className:ie(o),allowFullScreen:u,src:a,sandbox:h}):n.createElement("div",{"data-node-key":m,id:i,ref:t,style:p,className:"bg-gray-200 h-200 flex justify-center items-center text-20"},"iframe 占位")})),cP=Object.defineProperty,uP=Object.defineProperties,hP=Object.getOwnPropertyDescriptors,dP=Object.getOwnPropertySymbols,fP=Object.prototype.hasOwnProperty,pP=Object.prototype.propertyIsEnumerable,mP=(e,t,n)=>t in e?cP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gP=(e,t)=>{for(var n in t||(t={}))fP.call(t,n)&&mP(e,n,t[n]);if(dP)for(var n of dP(t))pP.call(t,n)&&mP(e,n,t[n]);return e},OP=(e,t)=>uP(e,hP(t));const vP={sandbox:"allow-scripts allow-same-origin allow-forms",iframeName:"",iframeAddr:"",iframeWidth:"auto",iframeHeight:"auto",allowFullscreen:!1,importance:"auto",referrerPolicy:"",iframeAllow:""};const bP={name:"iframe",icon:"iframe-component",label:"Iframe",category:"advanced",component:lP,configForm:function(){const{register:e,getValues:r,reset:i}=Tk(),{page:o}=WA(),[s,a]=t(Y(o.activeElemProps,vP));return l((()=>{const e=o.activeElemProps;i(e),a(e)}),[o.activeElemId]),n.createElement("div",null,n.createElement("form",{className:"flex flex-col gap-10",onChange:function(){const e=r();a(e),o.updateElemProperty(o.activeElem.id,"props",e)}},n.createElement("div",null,n.createElement("label",{className:"mr-4 text-12 text-gray-600"},"ID"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",gP({type:"text",className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600"},e("id",{value:s.id}))),n.createElement(HA,{name:"id"}))),n.createElement("label",{className:"flex flex-col"},"Iframe 地址:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("iframeAddr",{value:s.iframeAddr})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写"})),n.createElement(HA,{name:"iframeAddr"}))),n.createElement("label",{className:"flex flex-col"},"iframe 宽度:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("iframeWidth",{value:s.iframeWidth})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",value:s.iframeWidth})),n.createElement(HA,{name:"iframeWidth"}))),n.createElement("label",{className:"flex flex-col"},"iframe 高度:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("iframeHeight",{value:s.iframeHeight})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",value:s.iframeHeight})),n.createElement(HA,{name:"iframeHeight"}))),n.createElement("label",{className:"flex flex-col"},"iframe 名称:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("iframeName",{value:s.iframeName})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写",value:s.iframeName})),n.createElement(HA,{name:"iframeName"}))),n.createElement("label",{className:"flex flex-col"},"iframe 额外限制:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("sandbox",{value:s.sandbox})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写"})),n.createElement(HA,{name:"sandbox"}))),n.createElement("label",{className:"flex flex-col"},"iframe 允许范围:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("input",OP(gP({},e("iframeAllow",{value:s.iframeAllow})),{className:"mr-8 px-8 py-4 w-full border corner-2-8-8-8 border-gray-300 focus:border-blue-600",placeholder:"请填写"})),n.createElement(HA,{name:"iframeAllow"}))),n.createElement("label",{className:"flex justify-between items-center gap-10"},n.createElement("div",{className:"flex items-center justify-between border-1 border-gray-200 p-6 rounded-8 flex-1"},n.createElement("div",{className:"flex items-center justify-center"},n.createElement("span",{className:"ml-4 text-12 text-gray-900"},"允许激活全屏模式")),n.createElement("div",{className:"flex items-center justify-center gap-10"},n.createElement("input",OP(gP({},e("allowFullscreen",{value:s.allowFullscreen})),{type:"checkbox"})))),n.createElement(HA,{name:"allowFullscreen"})),n.createElement("label",{className:"flex flex-col"},"iframe 推荐配置:",n.createElement("div",{className:"flex justify-between items-center gap-10"},n.createElement("select",OP(gP({},e("referrerPolicy")),{className:"p-6 flex-1 border-1 rounded-8 border-gray-200"}),n.createElement("option",{value:""},"请选择"),n.createElement("option",{value:"no-referrer"},"no-referrer"),n.createElement("option",{value:"no-referrer-when-downgrade"},"no-referrer-when-downgrade"),n.createElement("option",{value:"origin"},"origin"),n.createElement("option",{value:"origin-when-cross-origin"},"origin-when-cross-origin"),n.createElement("option",{value:"same-origin"},"same-origin"),n.createElement("option",{value:"strict-origin"},"strict-origin"),n.createElement("option",{value:"strict-origin-when-cross-origin"},"strict-origin-when-cross-origin"),n.createElement("option",{value:"unsafe-url"},"unsafe-url")),n.createElement(HA,{name:"referrerPolicy"})))))},defaultConfig:vP,order:3};var yP=Object.freeze({__proto__:null,Iframe:bP}),xP=Object.freeze({__proto__:null,basic:eQ,form:jT,layout:iP,advanced:yP}),wP=Object.defineProperty,SP=Object.getOwnPropertyDescriptor,_P=Object.getOwnPropertySymbols,kP=Object.prototype.hasOwnProperty,EP=Object.prototype.propertyIsEnumerable,QP=(e,t,n)=>t in e?wP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TP=(e,t)=>{for(var n in t||(t={}))kP.call(t,n)&&QP(e,n,t[n]);if(_P)for(var n of _P(t))EP.call(t,n)&&QP(e,n,t[n]);return e},PP=(e,t,n,r)=>{for(var i,o=r>1?void 0:r?SP(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wP(t,n,o),o};const CP=U(xP,(e=>Object.entries(e).map((([,e])=>e)).sort(((e,t)=>((null==e?void 0:e.order)||0)-((null==t?void 0:t.order)||0)))));class NP{constructor(){this.elements=TP({},CP),this.countRegisteredElem=0,this.registerElement=(e,t,n)=>{this.countRegisteredElem=this.countRegisteredElem+1;const r=Object.assign({name:e,component:t},{icon:"insert_drive_file",label:`未命名-${this.countRegisteredElem}`,category:"others",defaultConfig:{},configForm:()=>null},n);this.elements[r.category]?this.elements[r.category].push(r):this.elements[r.category]=[r]},this.normalizeType=e=>e?(e.startsWith("elem.")?e.slice("elem.".length):e).toLowerCase():"",this.getLabelByElemType=e=>this.elementMap[this.normalizeType(e)].label||"",this.getElemByType=e=>this.elementMap[this.normalizeType(e)],this.acceptChild=e=>this.elementMap[this.normalizeType(e)].acceptChild,this.toComponentMap=()=>Object.values(TP({},CP)).flat().reduce(((e,t)=>(e[this.normalizeType(t.name)]=t.component,e)),{}),this.reset=()=>{},cr(this)}get elementMap(){return Object.values(this.elements).flat().reduce(((e,t)=>(e[t.name.toLowerCase()]=t,e)),{})}}PP([Tt],NP.prototype,"elements",2),PP([Tt],NP.prototype,"countRegisteredElem",2),PP([$t],NP.prototype,"elementMap",1),PP([Nn],NP.prototype,"registerElement",2),PP([Nn],NP.prototype,"reset",2);var $P=new NP;function AP(e){return[e.replace(/elem\./,"").toLowerCase(),aT(8)].join("-")}function RP(){return"development"===X(window,'"production"')}function jP(e,t,n){var r;if(e&&"object"==typeof e){if(!t||e.id===t)return e;if("loop-container"===e.type)if("composed-node"===(null==(r=e.node)?void 0:r.type)){const{outLayer:r,children:i}=e.node||{};if(r&&r.id===t)return n?e:r;if(i)for(const r of i){const i=jP(r,t,n);if(i)return n?e:i}}else if(X(e,"node.id")===t)return n?e:e.node;if(e.children)for(const r of e.children){const e=jP(r,t,n);if(e)return e}}}function DP(e,t){if(e&&"object"==typeof e&&e.children){const n=e.children.findIndex((e=>{if("react-component"===e.type)return e.id===t;if("loop-container"===e.type){if(e.node&&"composed-node"===e.node.type){const{outLayer:n,children:r}=e.node;if(n&&n.id===t)return n.id===t;r&&DP(e.node,t)}return e.id===t||e.node.id===t}}));if(n>-1){if("grid"===e.exportName){const{colRatio:t}=e.props;if(t&&t.value){const r=t.value.split(":");r.splice(n,1),e.props.colRatio={type:"constant_property",value:r.join(":")}}}e.children.splice(n,1)}else e.children.forEach((e=>{e.children&&DP(e,t)}))}}function IP(e,t,n){if(!e||"object"!=typeof e)return;let r=0,i=!1;e.children&&(e.children.map(((e,o)=>{if(e.id===t)return r=o,void(i=!0);if("loop-container"!==e.type)e.children&&IP(e,t,n);else{const{node:s}=e;if(s){if(s.id===t)return i=!0,void(r=o);if("composed-node"===s.type){const{children:e,outLayer:a}=s;if(a&&a.id===t)return i=!0,void(r=o);let l=!1;return(e||[]).map(((e,n)=>e.id===t?(l=!0,void(r=n)):e)),void(l&&(null==e||e.splice(r,0,n)))}}}})),i&&e.children.splice(r,0,n))}function WP(e,t,n){if(!e||"object"!=typeof e)return;let r=0,i=!1;e.children&&(e.children.map(((e,o)=>{if(e.id===t)return r=o,void(i=!0);if("loop-container"!==e.type)e.children&&WP(e,t,n);else{const{node:s}=e;if(s){if(s.id===t)return i=!0,void(r=o);if("composed-node"===s.type){const{children:e,outLayer:a}=s;if(a&&a.id===t)return i=!0,void(r=o);let l=!1;return(e||[]).map(((e,n)=>e.id===t?(l=!0,void(r=n)):e)),void(l&&(null==e||e.splice(r,1,n)))}}}})),i&&e.children.splice(r,1,n))}function MP(e,t,n,r){if(e&&"object"==typeof e){if("loop-container"===e.type){const{node:i}=e;if(i&&"composed-node"===i.type){const{outLayer:e,children:o=[]}=i;return e&&e.id===t?(e.pid&&n.push(e.pid),void(e.pid&&MP(r,e.pid,n,r))):void o.map((i=>{i.id===t&&e&&e.pid&&i.pid&&(n.push(e.id),MP(r,i.pid,n,r))}))}if(i&&i.id===t)return void(i.pid&&n.push(i.pid))}if(e.id!==t){if(e.children)for(const i of e.children)MP(i,t,n,r)}else e.pid&&(n.push(e.pid),MP(r,e.pid,n,r))}}var LP=function(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}(),VP=Object.defineProperty,ZP=Object.getOwnPropertyDescriptor,XP=Object.getOwnPropertySymbols,UP=Object.prototype.hasOwnProperty,BP=Object.prototype.propertyIsEnumerable,qP=(e,t,n)=>t in e?VP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YP=(e,t)=>{for(var n in t||(t={}))UP.call(t,n)&&qP(e,n,t[n]);if(XP)for(var n of XP(t))BP.call(t,n)&&qP(e,n,t[n]);return e},zP=(e,t,n,r)=>{for(var i,o=r>1?void 0:r?ZP(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&VP(t,n,o),o};const GP={name:"",val:JSON.stringify({key1:"val1"}),desc:""};class FP{constructor(){this.sharedState={},this.apiState={},this.modalOpen=!1,this.curSharedStateKey="",this.curApiStateKey="",this.curApiId="",this.curSharedVal=GP,this.setCurSharedVal=(e,t)=>{"string"==typeof e&&e in this.curSharedVal&&Object.assign(this.curSharedVal,{[e]:t}),"object"==typeof e&&(this.curSharedVal=e)},this.resetCurSharedVal=()=>{this.curSharedVal=YP({},GP)},this.saveSharedState=(e,t,n)=>{if(this.curSharedStateKey){const n=this.curSharedStateKey;if(n===e&&this.sharedState[n]===t)return void S.success("数据未更改");G(this.sharedState,e,t),n!==e&&delete this.sharedState[n]}else G(this.sharedState,e,t);S.success(this.curSharedStateKey?"修改变量成功":"新增变量成功"),this.setModalOpen(!1),this.setCurSharedStateKey(""),this.saveSharedStateToPage(),null==n||n()},this.saveSharedStateToPage=()=>{var e;G(OC.schema,"sharedStatesSpec",(e=Kn(this.sharedState),Object.entries(e).reduce(((e,[t,n])=>{const r=JSON.parse(n);return e[t]={initial:JSON.parse(r.val)},e}),{})))},this.saveApiStateToPage=()=>{var e;G(OC.schema,"apiStateSpec",(e=Kn(this.apiState),Object.entries(e).reduce(((e,[t,n])=>(e[t]={apiID:n},e)),{})))},this.mapSharedStateSpec=()=>Object.entries(OC.schema.sharedStatesSpec).reduce(((e,[t,n])=>{const r={name:t,val:JSON.stringify(Kn(n.initial)),desc:""};return e[t]=JSON.stringify(r),e}),{}),this.mapApiStateSpec=()=>Object.entries(OC.schema.apiStateSpec).reduce(((e,[t,n])=>(e[t]=n.apiID,e)),{}),this.removeSharedState=(e,t)=>{delete this.sharedState[e],this.saveSharedStateToPage(),null==t||t()},this.setModalOpen=e=>{this.modalOpen=e},this.setCurSharedStateKey=e=>{this.curSharedStateKey=e},this.setCurApiId=e=>{this.curApiId=e},this.saveApiState=(e,t,n)=>{G(this.apiState,e,t),S.success("新增API变量成功"),this.setModalOpen(!1),this.curApiStateKey="",this.curApiId="",LP.emit("clear:api-path"),this.saveApiStateToPage(),null==n||n()},this.removeApiState=(e,t)=>{delete this.apiState[e],this.saveApiStateToPage(),null==t||t()},this.reset=()=>{this.sharedState={},this.apiState={},this.modalOpen=!1,this.curSharedStateKey="",this.curApiStateKey="",this.curApiId="",this.curSharedVal=YP({},GP)},cr(this)}get curSharedState(){const e=X(this.sharedState,this.curSharedStateKey);return e?JSON.parse(e):e}get curApiState(){return X(this.apiState,this.curApiStateKey)}}zP([Tt],FP.prototype,"sharedState",2),zP([Tt],FP.prototype,"apiState",2),zP([Tt],FP.prototype,"modalOpen",2),zP([Tt],FP.prototype,"curSharedStateKey",2),zP([Tt],FP.prototype,"curApiStateKey",2),zP([Tt],FP.prototype,"curApiId",2),zP([Tt],FP.prototype,"curSharedVal",2),zP([$t],FP.prototype,"curSharedState",1),zP([$t],FP.prototype,"curApiState",1),zP([Nn],FP.prototype,"setCurSharedVal",2),zP([Nn],FP.prototype,"resetCurSharedVal",2),zP([Nn],FP.prototype,"saveSharedState",2),zP([Nn],FP.prototype,"saveSharedStateToPage",2),zP([Nn],FP.prototype,"saveApiStateToPage",2),zP([Nn],FP.prototype,"removeSharedState",2),zP([Nn],FP.prototype,"setModalOpen",2),zP([Nn],FP.prototype,"setCurSharedStateKey",2),zP([Nn],FP.prototype,"setCurApiId",2),zP([Nn],FP.prototype,"saveApiState",2),zP([Nn],FP.prototype,"removeApiState",2),zP([Nn],FP.prototype,"reset",2);var HP=new FP,KP=Object.defineProperty,JP=Object.defineProperties,eC=Object.getOwnPropertyDescriptors,tC=Object.getOwnPropertySymbols,nC=Object.prototype.hasOwnProperty,rC=Object.prototype.propertyIsEnumerable,iC=(e,t,n)=>t in e?KP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function oC(e){const t=Kn(e);if("loop-container"===t.type){if(Object.assign(t,{id:AP("loop-node")}),t.node){if("composed-node"===t.node.type)return Object.assign(t.node,{id:AP("composed-node")}),t.node.outLayer&&(t.node.outLayer=oC(t.node.outLayer)),t.node.children&&(t.node.children=t.node.children.map(oC)),t;t.node=oC(t.node)}return t}return Object.assign(t,{id:AP(e.exportName)}),t.children&&(t.children=t.children.map(oC)),t}function sC(e,t,n){const r=e,{defaultConfig:i,children:o}=r,{colRatio:s="12"}=n||i,a=s.split(":"),l=(null==o?void 0:o.length)||0;let c=[...o||[]];if(l>a.length&&(c=c.slice(0,a.length)),l<a.length){const e=[];for(let n=0;n<a.length-l;n+=1){const n=AP("container");e.push({id:n,pid:t,type:"react-component",exportName:"container",packageName:"ofa-ui",packageVersion:"latest",label:"容器",props:{style:{type:"constant_property",value:{display:"flex",flexFlow:"column nowrap",justifyContent:"flex-start",alignItems:"stretch",gridArea:"span 1 / span 1 / auto / auto",minWidth:"auto"}},id:{type:"constant_property",value:n}},children:[]})}c=c.concat(e)}return c=c.map(((e,t)=>{const n=Number(a[t])>=12?12:Number(a[t]);var r;return e.props.style.value=(r=((e,t)=>{for(var n in t||(t={}))nC.call(t,n)&&iC(e,n,t[n]);if(tC)for(var n of tC(t))rC.call(t,n)&&iC(e,n,t[n]);return e})({},e.props.style.value||{}),JP(r,eC({gridArea:`span 1 / span ${0===n?1:n} / auto / auto`}))),e})),r.children=c,r}function aC(){return{node:{id:AP("page"),pid:"",type:"react-component",packageName:"ofa-ui",packageVersion:"latest",exportName:"page",label:"页面",props:{style:{type:"constant_property",value:{width:"100%",height:"100%"}}},children:[]},apiStateSpec:{},sharedStatesSpec:{}}}var lC=Object.defineProperty,cC=Object.getOwnPropertyDescriptor,uC=Object.getOwnPropertySymbols,hC=Object.prototype.hasOwnProperty,dC=Object.prototype.propertyIsEnumerable,fC=(e,t,n)=>t in e?lC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pC=(e,t)=>{for(var n in t||(t={}))hC.call(t,n)&&fC(e,n,t[n]);if(uC)for(var n of uC(t))dC.call(t,n)&&fC(e,n,t[n]);return e},mC=(e,t,n,r)=>{for(var i,o=r>1?void 0:r?cC(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lC(t,n,o),o};class gC{constructor(){this.schema=aC(),this.mode="design",this.activeElemId="",this.hoverElemId="",this.dragPos="down",this.schemaElements={},this.parentNodes=[],this.loopType="",this.setSchema=e=>{"html-element"!==e.node.type&&(this.schema=e||aC(),function(e){Mt(e.name,!1,e,this,void 0)}((()=>{HP.sharedState=HP.mapSharedStateSpec(),HP.apiState=HP.mapApiStateSpec()})))},this.setMode=e=>{this.mode=e},this.setActiveElemId=e=>{this.activeElemId=e},this.setDragPos=e=>{this.dragPos=e},this.getRealNode=e=>{if("loop-container"===e.type){const{node:t}=e;return t&&"composed-node"===t.type?(null==t?void 0:t.outLayer)||{}:t}return e},this.appendNode=(e,t,n)=>{const r=this.schema.node.id,i=null==e?void 0:e.id,o=(null==t?void 0:t.id)||this.activeElemId||r;if(o===i)return;const s=jP(this.schema.node,o,!0);let a=s;if("loop-container"===s.type)if(s.node&&"composed-node"===s.node.type){const{children:e,outLayer:t}=s.node;t.id!==o?(e||[]).forEach((e=>{e.id===o&&(this.loopType="composed-node",a=e)})):(this.loopType="composed-node",a=t)}else s.node.id===o&&(this.loopType="loop-container",a=s.node);if("source"===(null==n?void 0:n.from))$P.acceptChild(a.exportName)?this.dragPos="inner":this.dragPos="down";else if("inner"===this.dragPos&&!$P.acceptChild(a.exportName))return;const l=i||AP(e.exportName),c={id:l,pid:"inner"===this.dragPos?a.id:a.pid||r,supportStateExposure:!0,type:"react-component",packageName:"ofa-ui",packageVersion:"latest",props:mc({},pC({id:l},e.defaultConfig||{}))};$P.acceptChild(e.exportName)&&(Object.assign(c,{children:[]}),"grid"===e.exportName&&(c.children=sC(e,c.id||"").children),"modal"===e.exportName&&(c.children=[{id:AP("container"),pid:c.id,type:"react-component",exportName:"container",packageName:"ofa-ui",packageVersion:"latest",label:"容器",props:{},disableActions:!0,children:[]}]));let u=Y({},e,c);const h=jP(this.schema.node,i||u.id);if(h&&(u=Y(z(h),c)),"composed-node"===this.loopType){const e=Object.keys(pc(u.props)).join(",");u.toProps={type:"to_props_function_spec",args:"state",body:`//${e}\nreturn {}`}}a?(window.__isDev__&&console.log("append node: ",Kn(u),Kn(a),this.dragPos),"up"===this.dragPos?this.insertBefore(u,a,n):"inner"===this.dragPos?this.appendChild(u,s,a,n):"down"===this.dragPos&&this.insertAfter(u,a,n),this.loopType=""):window.__isDev__&&console.log("no target node")},this.appendChild=(e,t,n,r)=>{var i,o,s,a,l,c;const u=this.getRealNode(e);if(u.id&&"source"!==(null==r?void 0:r.from)){const e=jP(this.schema.node,u.pid);if(!(null==e?void 0:e.children))return;const t="loop-container"===u.type,r=t?u.node.id:u.id,o=e.children.findIndex((e=>e.id===r||e.id===u.id));o>-1&&(e.children.splice(o,1),t&&G(u,"node.pid",n.id),null==(i=null==n?void 0:n.children)||i.push(Object.assign(u,{pid:n.id})))}else{const e=Object.assign({},u,{pid:n.id});(null==n?void 0:n.children)?null==(o=null==n?void 0:n.children)||o.push(e):"composed-node"===this.loopType&&(null==(a=null==(s=t.node)?void 0:s.outLayer)?void 0:a.id)===n.id&&(null==(c=null==(l=null==t?void 0:t.node)?void 0:l.children)||c.push(e))}},this.insertBefore=(e,t,n)=>{const r=this.getRealNode(e),i=jP(this.schema.node,r.pid),o=jP(this.schema.node,t.pid);let s=-1,a=-1;if(i&&i.children&&(s=i.children.findIndex((t=>t.id===r.id||t.id===e.id))),o&&o.children&&(a=o.children.findIndex((e=>e.id===t.id)),s>-1&&a>-1)){i.children.splice(s,1),G(r,"pid",o.id);const t=Object.assign(e,{pid:o.id});0===a?o.children.unshift(t):(i.id===o.id&&s<a&&(a-=1),o.children.splice(a,0,t))}},this.insertAfter=(e,t,n)=>{const r=this.getRealNode(e),i=jP(this.schema.node,r.pid),o=jP(this.schema.node,t.pid);let s=-1,a=-1;if(i&&i.children&&(s=i.children.findIndex((t=>t.id===r.id||t.id===e.id))),o&&o.children){a=o.children.findIndex((e=>e.id===t.id)),s>-1&&i.children.splice(s,1);const n=Object.assign({},e,{pid:o.id});G(r,"pid",o.id),a>-1?o.children.splice(a+1,0,n):o.children.push(n)}},this.copyNode=e=>{const t=jP(this.schema.node,this.activeElemId,!0);if("loop-container"===t.type&&t.node&&"composed-node"===t.node.type){const{children:n,outLayer:r}=t.node;if(r.id!==e){let t={};if((n||[]).map((n=>(n.id===e&&(t=n),n))),t.id)return void IP(this.schema.node,e,oC(t))}}IP(this.schema.node,e,oC(t))},this.removeNode=e=>{DP(this.schema.node,e),this.activeElemId=""},this.updateElemProperty=(e,t,n,r)=>{var i;const o=jP(this.schema.node,e)||jP(this.schema.node,e,!0);if(!o)return;let s=o;if(!(null==r?void 0:r.useRawNode)&&"loop-container"===o.type)if("composed-node"===o.node.type){const{outLayer:e,children:t}=o.node;e&&e.id===this.activeElemId&&(s=e),t&&e.id!==this.activeElemId&&(s=t.find((e=>e.id===this.activeElemId)))}else s=o.node;"props"===t?(G(s,t,mc(Kn(null==(i=this.activeElem)?void 0:i.props),n)),s.exportName&&"grid"===s.exportName&&G(s,"children",sC(Kn(s),s.id,n).children)):G(s,t,"props.style"===t?{type:"constant_property",value:n}:"lifecycleHooks"===t?U(n,(e=>e?{type:"lifecycle_hook_func_spec",args:"...args",body:e}:"")):n)},this.getElemBoundActions=()=>{var e;const t=$P.getElemByType(null==(e=this.activeElem)?void 0:e.exportName);return["didMount","willUnmount"].concat((null==t?void 0:t.exportActions)||[])},this.replaceNode=(e,t)=>{const n=jP(this.schema.node,this.activeElemId,!0);if("loop-container"===n.type&&n.node&&"composed-node"===n.node.type){const{children:r,outLayer:i}=n.node;if(i.id!==e){let n={};if((r||[]).map((t=>(t.id===e&&(n=t),t))),n.id)return void WP(this.schema.node,e,t)}}WP(this.schema.node,e,t)},this.setNodeAsLoopContainer=(e,t)=>{const n=jP(this.schema.node,e);if(!n)return;const r=z(n),i={id:AP("loop-node"),type:"loop-container",node:r,loopKey:t.loopKey||"id",toProps:{args:"state",body:t.toProps||"return state",type:"to_props_function_spec"},iterableState:t.iterableState||{}};this.replaceNode(e,i)},this.updateCurNodeAsLoopContainer=(e,t)=>{var n;(null==(n=this.rawActiveElem)?void 0:n.iterableState)?this.updateElemProperty(this.activeElemId,e,"toProps"===e?{args:"state",body:t||"return state",type:"to_props_function_spec"}:t,{useRawNode:!0}):this.setNodeAsLoopContainer(this.activeElemId,{[e]:t})},this.unsetLoopNode=e=>{const t=jP(this.schema.node,e,!0);if(t&&"loop-container"===t.type){const n=t.node;this.replaceNode(e,n)}},this.reset=()=>{this.schema=aC(),this.mode="design",this.activeElemId="",this.dragPos="down"},this.setSchemaElements=e=>{this.schemaElements=e},this.setParentNodes=e=>{this.parentNodes=e},this.setNodeAsComposedNode=(e,t)=>{if(!jP(this.schema.node,e))return;const n={id:AP("loop-node"),props:{},type:"loop-container",loopKey:t.loopKey||"id",iterableState:t.iterableState||{},node:t.node||{}};this.replaceNode(e,n)},this.updateCurNodeAsComposedNode=(e,t)=>{this.setNodeAsComposedNode(this.activeElemId,t)},this.unsetComposedNode=e=>{const t=jP(this.schema.node,e,!0);if(t&&"loop-container"===t.type){const{node:n}=t;if(n){const{outLayer:t,children:r}=n;if(t){const n=pC({},t);n.children=r,this.replaceNode(e,n)}}}},this.isLayoutContainerNode=e=>{var t;return"grid"===(null==(t=jP(this.schema.node,e.pid))?void 0:t.exportName)},this.setHoverNode=e=>{this.hoverElemId=e},cr(this)}get rawActiveElem(){return this.activeElemId?jP(this.schema.node,this.activeElemId,!0):null}get activeElem(){return jP(this.schema.node,this.activeElemId)}get activeElemProps(){var e;return pc((null==(e=this.activeElem)?void 0:e.props)||{})}get activeElemParents(){const e=[];return MP(Kn(this.schema.node),this.activeElemId,e,Kn(this.schema.node)),e}findElement(e){return e?jP(this.schema.node,e):null}}mC([Tt],gC.prototype,"schema",2),mC([Tt],gC.prototype,"mode",2),mC([Tt],gC.prototype,"activeElemId",2),mC([Tt],gC.prototype,"hoverElemId",2),mC([Tt],gC.prototype,"dragPos",2),mC([Tt],gC.prototype,"schemaElements",2),mC([Tt],gC.prototype,"parentNodes",2),mC([$t],gC.prototype,"rawActiveElem",1),mC([$t],gC.prototype,"activeElem",1),mC([$t],gC.prototype,"activeElemProps",1),mC([$t],gC.prototype,"activeElemParents",1),mC([Nn],gC.prototype,"setSchema",2),mC([Nn],gC.prototype,"setMode",2),mC([Nn],gC.prototype,"setActiveElemId",2),mC([Nn],gC.prototype,"setDragPos",2),mC([Nn],gC.prototype,"appendNode",2),mC([Nn],gC.prototype,"appendChild",2),mC([Nn],gC.prototype,"insertBefore",2),mC([Nn],gC.prototype,"insertAfter",2),mC([Nn],gC.prototype,"copyNode",2),mC([Nn],gC.prototype,"removeNode",2),mC([Nn],gC.prototype,"updateElemProperty",2),mC([Nn],gC.prototype,"replaceNode",2),mC([Nn],gC.prototype,"setNodeAsLoopContainer",2),mC([Nn],gC.prototype,"updateCurNodeAsLoopContainer",2),mC([Nn],gC.prototype,"unsetLoopNode",2),mC([Nn],gC.prototype,"reset",2),mC([Nn],gC.prototype,"setSchemaElements",2),mC([Nn],gC.prototype,"setParentNodes",2),mC([Nn],gC.prototype,"setNodeAsComposedNode",2),mC([Nn],gC.prototype,"updateCurNodeAsComposedNode",2),mC([Nn],gC.prototype,"unsetComposedNode",2),mC([Nn],gC.prototype,"isLayoutContainerNode",2),mC([Nn],gC.prototype,"setHoverNode",2);var OC=new gC,vC="index_m_elem__39174faa",bC="index_m_isOver__39174faa",yC="index_m_draggingInner__39174faa",xC="index_m_dragging__39174faa",wC="index_m_page__39174faa",SC="index_m_isPage__39174faa",_C="index_m_selected__39174faa",kC="index_m_draggingUp__39174faa",EC="index_m_draggingDown__39174faa",QC="index_m_emptyContainer__39174faa";jl(".index_m_elem__39174faa.index_m_isOver__39174faa > *, .index_m_elem__39174faa.index_m_isOver__39174faa, .index_m_elem__39174faa.index_m_draggingInner__39174faa, .index_m_elem__39174faa.index_m_dragging__39174faa, .index_m_page__39174faa.index_m_isOver__39174faa {\n  background-color: var(--blue-200);\n}\n\n.index_m_page__39174faa {\n  position: relative;\n  width: 100%;\n  padding: 4px;\n  overflow: auto;\n}\n\n.index_m_elem__39174faa > .index_m_toolbar__39174faa {\n  position: absolute;\n  visibility: hidden;\n  display: inline-flex;\n  align-items: center;\n  right: 0;\n  bottom: 0;\n  transform: translateY(100%);\n  width: auto;\n  height: 20px;\n  z-index: 1;\n}\n\n.index_m_elem__39174faa > .index_m_toolbar__39174faa > .index_m_group__39174faa {\n  display: inline-flex;\n  align-items: center;\n  box-shadow: 0px 8px 24px 4px rgba(148, 163, 184, 0.25);\n  border-radius: 0px 0px 4px 4px;\n  height: 20px;\n}\n\n.index_m_elem__39174faa.index_m_isPage__39174faa {\n  transform: translate3d(0, 0, 0);\n}\n\n.index_m_elem__39174faa:hover {\n  outline: 1px dashed var(--blue-400);\n}\n\n.index_m_elem__39174faa.index_m_selected__39174faa {\n  outline: 1px solid var(--blue-400);\n}\n\n.index_m_elem__39174faa.index_m_selected__39174faa > .index_m_toolbar__39174faa {\n  visibility: visible;\n}\n\n.index_m_elem__39174faa.index_m_dragging__39174faa {\n  cursor: move;\n}\n\n.index_m_elem__39174faa.index_m_draggingUp__39174faa {\n  border-top: 2px solid var(--blue-400);\n}\n\n.index_m_elem__39174faa.index_m_draggingDown__39174faa {\n  border-bottom: 2px solid var(--blue-400);\n}\n\n.index_m_elem__39174faa.index_m_forbidden__39174faa {\n  background-color: var(--red-400);\n}\n\n.index_m_emptyContainer__39174faa {\n  display: grid;\n  place-content: center;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  overflow: hidden;\n}",{});const TC=()=>n.createElement("div",{className:"flex flex-col items-center justify-center absolute w-full h-full"},n.createElement(y,{name:"pg-engine-empty",size:120}),n.createElement("p",{className:"text-gray-400 text-12"},"开始构建页面，从左侧 组件库或模版库 面板中拖入元素")),PC=()=>n.createElement("div",{className:QC},"拖拽组件或模板到这里");function CC(){if(RP()){let e=localStorage.getItem("page_schema");try{e=JSON.parse(e)}catch(t){e=null}e&&OC.setSchema(e)}}function NC(e){return`data:image/svg+xml;base64,${t=`<svg xmlns='http://www.w3.org/2000/svg' width='100' height='20'>\n    <rect width='100' height='20' fill='#888' opacity='0.5'></rect>\n    <text x='10' y='15' style='font-family: Roboto, sans-serif;font-size: 12px; fill: #000; text-align: center'>${e}</text>\n    </svg>`,btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))}`;var t}F([function(e){var t,r;const i=$P.getElemByType(e.exportName)||{},o=(null==i?void 0:i.toProps)||H,s=Y({},pc(e.props||{}),null==i?void 0:i.defaultConfig);"react-component"===e.type&&("page"!==e.exportName||(null==(t=e.children)?void 0:t.length)||Object.assign(s,{placeholder:n.createElement(TC)}),"container"!==e.exportName||(null==(r=e.children)?void 0:r.length)||Object.assign(s,{placeholder:n.createElement(PC)}));return o(s)}]);var $C=Vi((function e({node:r,level:i,onSelect:o,onDragMove:s,onDragEnd:a,canNodeDrop:c,canNodeDrag:u,nodeContentRender:h}){var d;const{page:f}=WA(),m=g(null),O="loop-container"===r.type?r.node:r,v=O.children&&O.children.length>0,[b,x]=t(v);l((()=>{O.children&&O.children.length>0&&x(!0)}),[null==(d=O.children)?void 0:d.length]);const[{item:w,canDrop:S},_]=Ka((()=>({accept:"component_tree_node",drop:(e,t)=>{var n,r;const o=e,s=O;let a="";if(!c(o,s))return;const l=null==(r=null==(n=m.current)?void 0:n.parentElement)?void 0:r.getBoundingClientRect(),u=t.getClientOffset(),h=u.x-l.left,d=t.getInitialSourceClientOffset(),f=Math.floor(h/16)-i,p=(d.y-u.y)%32;return a=0===p||p>p/Math.abs(p)*16?"before":"after",{currentDragNode:o,targetDropNode:s,position:a,dropIndent:f}},canDrop:e=>c(e,O),hover:(e,t)=>{var n,r;if(!t.isOver({shallow:!0}))return;const o=e,a=O,l=null==(r=null==(n=m.current)?void 0:n.parentElement)?void 0:r.getBoundingClientRect(),c=t.getClientOffset(),u=c.y-l.top,h=c.x-l.left,d=Math.floor(h/16)-i,f=Math.abs(u/32);null==s||s({level:i,index:f,targetNode:a,currentNode:o,dropIndent:d,canDrop:t.canDrop()})},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),item:e.getItem()})})),[O]),[,k,E]=Ua((()=>({type:"component_tree_node",item:O,canDrag:()=>u(O),end:e=>null==a?void 0:a(e,O)})),[O]),Q=p((()=>{var t;if(O.children&&b)return null==(t=O.children)?void 0:t.map((t=>n.createElement(e,{key:t.id,node:t,level:i+1,onSelect:o,onDragMove:s,canNodeDrop:c,canNodeDrag:u,nodeContentRender:h})))}),[Kn(O)]);return _(k(m)),n.createElement(n.Fragment,null,n.createElement(ea,{connect:E,src:NC(O.label)}),n.createElement("div",{ref:m,style:{paddingLeft:16*i},key:O.id,className:ie("grid group hover:bg-gray-200 duration-100 flex-shrink-0 box-content",{"bg-gray-200":f.activeElemId===O.id,"opacity-30":!S&&w})},n.createElement("div",{className:ie("flex items-center cursor-pointer pr-5 outline-draggable-tree-node"),onClick:()=>{null==o||o(O)},onMouseOver:()=>f.setHoverNode(O.id),onMouseLeave:()=>f.setHoverNode("")},function(){var e;if(O.children&&(null==(e=O.children)?void 0:e.length))return n.createElement(y,{size:16,clickable:!0,className:"box-content flex-shrink-0",name:b?"expand_more":"expand_less",onClick:()=>x(!b),color:"gray"})}(),h?null==h?void 0:h(O):O.label)),Q())}));function AC(e){const{page:r}=WA(),{removeNode:i,setActiveElemId:o,isLayoutContainerNode:s}=r,[a,c]=t(!1),[u,h]=t(e.label),d=g(null);return l((()=>{var e;a&&(null==(e=d.current)||e.focus())}),[a]),n.createElement("div",{className:"h-full group flex items-center flex-1 flex-shrink-0 "},n.createElement(y,{size:16,clickable:!0,color:"gray",name:RC[e.exportName],className:"flex-shrink-0 box-content"}),n.createElement("div",{className:"h-full flex flex-1 items-center pl-4 justify-between"},a?n.createElement("input",{type:"text",className:"w-80 p-4",ref:d,value:u,onBlur:function(){c(!1),u&&r.updateElemProperty(e.id,"label",u)},onChange:function(e){e.preventDefault(),h(e.target.value.trim())}}):n.createElement(n.Fragment,null,n.createElement("div",{className:"w-100 truncate"},e.label),n.createElement(y,{clickable:!0,size:18,color:"gray",name:"mode_edit",className:"opacity-0 group-hover:opacity-100 ml-10 flex-shrink-0 box-content",onClick:e=>{e.stopPropagation(),c((e=>!e))}}))),!s(e)&&"page"!==e.exportName&&n.createElement(y,{clickable:!0,size:18,color:"gray",name:"delete",className:"opacity-0 group-hover:opacity-100 ml-10 flex-shrink-0 box-content",onClick:t=>{var n;t.stopPropagation(),n=e,r.activeElemId||o(n.id),i(n.id)}}))}const RC={page:"insert_drive_file",image:"photo_size_select_actual",text:"text_fields",button:"smart_button",grid:"border_all",para:"text_fields",link:"link",textarea:"text_fields",container:"border_all",iframe:"ballot",input:"text_fields",form:"article",modal:"featured_video"};var jC=Vi((function(){const{page:e}=WA(),{insertAfter:t,insertBefore:r,removeNode:i,appendNode:o,setDragPos:s,setActiveElemId:a,isLayoutContainerNode:l}=e,c=g(null),[,u]=Ka({accept:"component_tree_node",drop:function(e,n){var i;if(null==(i=c.current)||i.clearIndicatorState(),!n.getDropResult())return;const{currentDragNode:a,targetDropNode:u,position:h,dropIndent:d}=n.getDropResult();if(!a||!u)return;const{exportName:f,children:p}=u;if("container"===f&&d<3||l(u)||"page"===f)return(null==p?void 0:p.length)?void r(a,p[0]):(s("inner"),void o(a,u));"before"!==h?t(a,u):r(a,u)}});return n.createElement("div",{ref:u,className:"outline-draggable-tree-view",onMouseLeave:()=>{var e;return null==(e=c.current)?void 0:e.clearIndicatorState()}},n.createElement(fc,{ref:c,rowHeight:32,indent:16}),n.createElement($C,{node:e.schema.node,level:0,onSelect:function(t){e.setActiveElemId(t.id)},canNodeDrop:function(e,t){const{id:n,pid:r}=e,{id:i}=t;return n!==i&&!jP(e,t.id)},canNodeDrag:function(e){return!(!e.pid||l(e))},onDragMove:function({level:e,index:t,targetNode:n,dropIndent:r,canDrop:i}){var o,s,a;if(!i)return void(null==(o=c.current)||o.clearIndicatorState());if(!Math.round(t))return void(null==(s=c.current)||s.clearIndicatorState());const u="grid"!==n.exportName&&n.children&&r<3||l(n)?Math.floor(t):Math.round(t);let h=n.children&&r<3?"over":"between";"container"===n.exportName&&l(n)&&(h="over"),"grid"===n.exportName&&(h="between"),null==(a=c.current)||a.setIndicatorState({type:h,index:u,depth:e})},nodeContentRender:AC}))}));jl(".outline-draggable-tree-view {\n  font-size: 12px;\n}\n\n.outline-draggable-tree-view .outline-draggable-tree-node {\n  min-width: 160px;\n  height: 32px;\n}\n\n.outline-tree-node-indicator {\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  box-sizing: border-box;\n  pointer-events: none;\n  border: 1px solid #2196f3;\n}",{});var DC=Vi((function(){const{page:e}=WA(),[r,i]=t("tree");return n.createElement("div",{className:"w-full h-full flex flex-col items-center overflow-hidden relative page-tree"},n.createElement(W,{listData:[{label:"大纲视图",value:"tree"},{label:"源码视图",value:"code"}],onChange:e=>i(e),currentValue:r}),n.createElement("div",{className:"grid w-full overflow-x-auto relative flex-1 mt-10"},"tree"===r&&n.createElement(jC,null),"code"===r&&n.createElement("pre",{className:"mt-8"},e.schema?JSON.stringify(e.schema,null,2):n.createElement("p",null,"暂无数据"))))}));var IC=function(e,t){var n,r=(n=g(!0)).current?(n.current=!1,!0):n.current;l((function(){if(!r)return e()}),t)};function WC(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=function(e,t){void 0===t&&(t=0);var n=g(!1),r=g(),i=g(e),o=p((function(){return n.current}),[]),s=p((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,i.current()}),t)}),[t]),a=p((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return l((function(){i.current=e}),[e]),l((function(){return s(),a}),[t]),[o,a,s]}(e,t),i=r[0],o=r[1],s=r[2];return l(s,n),[i,o]}var MC={ds:"index_m_ds__807d9522",tabs:"index_m_tabs__807d9522",tabCont:"index_m_tabCont__807d9522",search:"index_m_search__807d9522",input:"index_m_input__807d9522",textarea:"index_m_textarea__807d9522",error:"index_m_error__807d9522",varItem:"index_m_varItem__807d9522",expand:"index_m_expand__807d9522",varCont:"index_m_varCont__807d9522",varName:"index_m_varName__807d9522",bar:"index_m_bar__807d9522",editorModal:"index_m_editorModal__807d9522",hide:"index_m_hide__807d9522"};jl(".index_m_ds__807d9522 .index_m_tabs__807d9522 {\n  height: calc(100% - 60px);\n  overflow: auto;\n}\n\n.index_m_ds__807d9522 .index_m_tabCont__807d9522 {\n  padding: 8px;\n}\n\n.index_m_ds__807d9522 .index_m_search__807d9522 {\n  border: none;\n  padding-left: 0;\n  padding-right: 0;\n  border-bottom: 1px solid var(--gray-300);\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\ninput, textarea {\n  outline: none;\n  border-top-left-radius: 2px;\n  border-top-right-radius: 8px;\n  border-bottom-right-radius: 8px;\n  border-bottom-left-radius: 8px;\n  border-width: 1px;\n}\n\ninput:focus, textarea:focus {\n  box-shadow: 0 0 4px rgba(50, 69, 88, 0.12);\n  border-color: var(--blue-600);\n}\n\n.index_m_input__807d9522, .index_m_textarea__807d9522 {\n  border-radius: 2px 8px 8px 8px !important;\n}\n\n.index_m_input__807d9522.index_m_error__807d9522, .index_m_input__807d9522.index_m_error__807d9522:focus, .index_m_textarea__807d9522.index_m_error__807d9522, .index_m_textarea__807d9522.index_m_error__807d9522:focus {\n  border-color: var(--red-500) !important;\n}\n\n.index_m_varItem__807d9522 {\n  background: #F8FAFC;\n  border-radius: 4px;\n  margin-top: 8px;\n}\n\n.index_m_varItem__807d9522.index_m_expand__807d9522 .index_m_varCont__807d9522 {\n  display: flex;\n}\n\n.index_m_varItem__807d9522 .index_m_varName__807d9522 {\n  flex: 1;\n  font-weight: 500;\n  border-left: 2px solid var(--blue-600);\n}\n\n.index_m_varItem__807d9522 .index_m_varName__807d9522 > span {\n  display: inline-flex;\n  margin-left: 6px;\n}\n\n.index_m_varItem__807d9522 .index_m_bar__807d9522:hover svg:not(:last-of-type) {\n  visibility: visible;\n}\n\n.index_m_varItem__807d9522 .index_m_bar__807d9522 svg {\n  margin-right: 6px;\n}\n\n.index_m_varItem__807d9522 .index_m_bar__807d9522 svg:not(:last-of-type) {\n  visibility: hidden;\n}\n\n.index_m_varItem__807d9522 .index_m_varCont__807d9522 {\n  display: none;\n  flex-direction: column;\n}\n\n.index_m_editorModal__807d9522 {\n  will-change: transform;\n  transition: all 0.3s ease-in-out;\n}\n\n.index_m_editorModal__807d9522.index_m_hide__807d9522 {\n  transform: translateY(-9999px);\n  opacity: 0;\n}",{});var LC=Vi((function({className:e,name:r,conf:i}){const o=WA(),{dataSource:s,page:a}=o,{setCurSharedStateKey:l,setModalOpen:c}=s,u=d((()=>JSON.parse(i)),[i]),[h,f]=t(!1);return n.createElement("div",{className:ie("px-8 py-4",MC.varItem,{[MC.expand]:h},e)},n.createElement("div",{className:ie("flex justify-between cursor-pointer",MC.bar),onClick:()=>f((e=>!e))},n.createElement("div",{className:MC.varName},n.createElement("span",null,r)),n.createElement("div",{className:MC.varActions},n.createElement(y,{name:"content_copy",clickable:!0,onClick:function(e){e.stopPropagation(),l("");const t=Object.keys(s.sharedState).filter((e=>e.startsWith(`${r}_copy`))).length,n=0===t?`${r}_copy`:`${r}_copy${t}`,c=JSON.parse(i);Object.assign(c,{name:n}),s.saveSharedState(n,JSON.stringify(c),(()=>o.onSave(a.schema,{silent:!0})))}}),n.createElement(y,{name:"edit",clickable:!0,onClick:function(e){e.stopPropagation(),l(r),c(!0)}}),n.createElement(y,{name:"delete",clickable:!0,onClick:function(e){e.stopPropagation(),s.removeSharedState(r,(()=>o.onSave(a.schema,{silent:!0})))}}),n.createElement(y,{name:h?"expand_less":"expand_more",clickable:!0,onClick:function(e){e.stopPropagation(),f((e=>!e))}}))),n.createElement("div",{className:MC.varCont},n.createElement("div",{className:"flex items-center mb-8 mt-8"},n.createElement("span",null,"初始值:"),n.createElement("span",{className:"flex-wrap break-all flex-1 ml-6"},"object"==typeof u.val?JSON.stringify(u.val):u.val)),n.createElement("div",{className:"flex items-center"},n.createElement("span",null,"描述:"),n.createElement("span",{className:"flex-wrap break-all flex-1 ml-6"},u.desc))))}));var VC=Vi((function(e){const t=WA(),{dataSource:r,page:i}=t,{formState:{errors:o}}=Tk(),{curSharedState:s,modalOpen:a,setModalOpen:c,curSharedVal:u,setCurSharedVal:h}=r;return l((()=>{a?s&&h(s):r.resetCurSharedVal()}),[a]),a?n.createElement(w,{className:MC.editorModal,title:r.curSharedStateKey?"修改变量参数":"新建变量参数",onClose:()=>c(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>c(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){try{JSON.parse(u.val)}catch(e){return void S.error(`变量值不是合法的 JS 数据: ${e.message}`)}const e=Kn(u);(function(e){if(!e)return S.error("请填写变量名"),!1;if(!/^[\u4e00-\u9fa5_a-zA-Z0-9\-\s]+$/.test(e))return S.error("非法的变量名"),!1;return!0})(e.name)&&r.saveSharedState(e.name,JSON.stringify(e),(()=>{t.onSave(i.schema,{silent:!0})}))},text:"确认"}]},n.createElement("form",{className:"px-40 py-24"},n.createElement("div",{className:"flex flex-col mb-24"},n.createElement("p",null,"参数名称"),n.createElement("input",{type:"text",className:ie("input",MC.input,{[MC.error]:o.name}),maxLength:20,value:u.name,onChange:e=>{h("name",e.target.value||"")}}),n.createElement("p",{className:"text-12 text-gray-600"},"不超过 20 字符，支持字母、数字、下划线、中文，名称不可重复。")),n.createElement("div",{className:"flex flex-col mb-24"},n.createElement("p",null,"变量数据"),n.createElement(vS,{value:u.val,height:"200px",extensions:[o_()],onChange:e=>{h("val",e)}})),n.createElement("div",{className:"flex flex-col"},n.createElement("p",null,"描述"),n.createElement("textarea",{placeholder:"选填（不超过100字符）",maxLength:100,className:ie("textarea",MC.textarea),value:u.desc,onChange:e=>{h("desc",e.target.value||"")},cols:20,rows:3})))):null}));var ZC=Vi((function(){const{dataSource:e}=WA(),[r,i]=t(""),[o,s]=t(""),[a,l]=t(e.sharedState);WC((()=>{s(r)}),500,[r]),IC((()=>{l(K(e.sharedState,((e,t)=>t.toLowerCase().includes(o.toLowerCase()))))}),[o]);const c=!Object.keys(a).length;return n.createElement("div",null,n.createElement(M,{className:MC.search,value:r,onChange:i,placeholder:"搜索参数名称..",actions:n.createElement(b,{position:"top",label:"新建变量参数"},n.createElement(y,{name:"add",clickable:!0,onClick:()=>{e.setCurSharedStateKey(""),e.setModalOpen(!0)}}))}),n.createElement("div",{className:"relative"},c&&n.createElement("div",{className:"flex justify-center items-center h-full text-gray-400",style:{marginTop:"72px"}},"暂无数据"),!c&&n.createElement("div",{className:"flex flex-col h-full"},Object.entries(a).map((([e,t])=>n.createElement(LC,{key:e,name:e,conf:t}))))),n.createElement(VC,null))}));var XC=Vi((function({className:e,name:r,spec:i}){const o=WA(),{dataSource:s,page:a}=o,[l,c]=t(!0),[u,h]=String(i).split(":");return n.createElement("div",{className:ie("px-8 py-4",MC.varItem,{[MC.expand]:l},e)},n.createElement("div",{className:ie("flex justify-between cursor-pointer",MC.bar),onClick:()=>c((e=>!e))},n.createElement("div",{className:ie("flex-1 font-medium",MC.varName)},n.createElement("span",null,r)),n.createElement("div",{className:MC.varActions},n.createElement(y,{name:"delete",clickable:!0,onClick:function(e){e.stopPropagation(),s.removeApiState(r,(()=>o.onSave(a.schema,{silent:!0})))}}),n.createElement(y,{name:l?"expand_less":"expand_more",clickable:!0,onClick:function(e){e.stopPropagation(),c((e=>!e))}}))),n.createElement("div",{className:MC.varCont},n.createElement("div",{className:"flex items-center mb-8 mt-8"},n.createElement("span",null,"路径:"),n.createElement("span",{className:"flex-wrap break-all flex-1 ml-6"},h)),n.createElement("div",{className:"flex items-center mb-8"},n.createElement("span",null,"请求方法:"),n.createElement("span",{className:"flex-wrap break-all flex-1 ml-6"},u.toUpperCase()))))})),UC=Object.defineProperty,BC=Object.getOwnPropertySymbols,qC=Object.prototype.hasOwnProperty,YC=Object.prototype.propertyIsEnumerable,zC=(e,t,n)=>t in e?UC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var GC=Vi((function(e){const r=WA(),{dataSource:i,page:o}=r,{modalOpen:s,setModalOpen:a,curApiState:c,curApiId:u}=i,{register:h,formState:{errors:d},handleSubmit:f,getValues:p,trigger:m,clearErrors:g}=Tk(),[O,v]=t(""),[x,_]=t(""),[k,E]=t(i.apiState);function Q(e){u?i.saveApiState(e.name,u,(()=>r.onSave(o.schema,{silent:!0}))):S.error("请选择一个平台 API")}l((()=>{i.modalOpen||i.setCurApiId("")}),[i.modalOpen]),WC((()=>{_(O)}),500,[O]),IC((()=>{E(K(i.apiState,((e,t)=>t.toLowerCase().includes(x.toLowerCase()))))}),[x]);const T=!Object.keys(k).length;return n.createElement("div",null,n.createElement(M,{className:MC.search,value:O,onChange:v,placeholder:"搜索 API 名称..",actions:n.createElement(b,{position:"top",label:"选中平台 API"},n.createElement(y,{name:"add",clickable:!0,onClick:()=>{a(!0)}}))}),n.createElement("div",{className:"relative"},T&&n.createElement("div",{className:"flex justify-center items-center h-full flex-col text-center px-40 text-gray-400",style:{marginTop:"72px"}},n.createElement("p",null,"暂无数据"),!Object.keys(i.apiState).length&&n.createElement("p",null,"可以选择将该应用的内部API和第三方API数据加入后使用哦！")),!T&&n.createElement("div",{className:"flex flex-col h-full"},Object.entries(k).map((([e,t])=>n.createElement(XC,{key:e,name:e,spec:t}))))),s&&n.createElement(w,{title:"选择平台 API",width:800,onClose:()=>a(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>a(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:()=>{m().then((e=>{e&&Q(p())}))},text:"确定导入"}]},n.createElement("form",{className:"px-40 py-24",onSubmit:f(Q),onChange:()=>{m().then((e=>{e&&g()}))}},n.createElement("div",{className:"mb-24"},n.createElement("p",{className:"text-12 text-gray-600"},"API变量名称"),n.createElement("input",((e,t)=>{for(var n in t||(t={}))qC.call(t,n)&&zC(e,n,t[n]);if(BC)for(var n of BC(t))YC.call(t,n)&&zC(e,n,t[n]);return e})({type:"text",style:{width:"259px"},className:ie("input",MC.input,{[MC.error]:d.name}),maxLength:20,defaultValue:c?c.name:""},h("name",{shouldUnregister:!0,validate:e=>e?!!/^[\u4e00-\u9fa5_a-zA-Z0-9\-\s]+$/.test(e)||(S.error("非法的变量名"),!1):(S.error("请填写变量名"),!1)}))),n.createElement("p",{className:"text-12 text-gray-600"},"不超过 20 字符，支持字母、数字、下划线、中文，名称不可重复。")),n.createElement("div",null,r.designer.vdoms.platformApis),n.createElement("div",{className:"hidden"},r.designer.vdoms.apiStateDetail))))}));function FC(e){return n.createElement("div",{className:MC.ds},n.createElement(L,{className:MC.tabs,contentClassName:MC.tabCont,items:[{id:"sharedState",name:"变量参数",content:n.createElement(ZC,null)},{id:"apiState",name:"API",content:n.createElement(GC,null)}]}))}var HC=Object.defineProperty,KC=Object.defineProperties,JC=Object.getOwnPropertyDescriptors,eN=Object.getOwnPropertySymbols,tN=Object.prototype.hasOwnProperty,nN=Object.prototype.propertyIsEnumerable,rN=(e,t,n)=>t in e?HC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var iN=Vi((function(){const{designer:e}=WA(),{activeGroup:t,panelPinned:r,panelOpen:i}=e,o=g(null),s=p(J((function(t){var n;(null==(n=o.current)?void 0:n.contains(t.target))||e.panelPinned||e.setPanelOpen(!1)}),100),[]),a=p((t=>{e.setActiveGroup(t),e.setPanelOpen(!0)}),[]);return l((()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)})),[]),n.createElement("div",{className:"flex relative",ref:o},n.createElement("div",{className:ie(Ml,"flex flex-col items-center relative")},Xl.map((e=>{return n.createElement(Zl,(r=((e,t)=>{for(var n in t||(t={}))tN.call(t,n)&&rN(e,n,t[n]);if(eN)for(var n of eN(t))nN.call(t,n)&&rN(e,n,t[n]);return e})({},e),i={key:e.name,active:t===e.name,onHover:()=>a(e.name)},KC(r,JC(i))));var r,i}))),n.createElement(V,{title:Ul[t],style:{transform:"translateX(55px)"},onClose:()=>e.setPanelOpen(!1),onPin:()=>e.setPanelPinned(!r),visible:i,pinned:r,closable:!0,pinnable:!0},"comps"===e.activeGroup?n.createElement(dc,null):"page_tree"===e.activeGroup?n.createElement(DC,null):"data_source"===e.activeGroup?n.createElement(FC,null):null))})),oN=Object.defineProperty,sN=Object.defineProperties,aN=Object.getOwnPropertyDescriptors,lN=Object.getOwnPropertySymbols,cN=Object.prototype.hasOwnProperty,uN=Object.prototype.propertyIsEnumerable,hN=(e,t,n)=>t in e?oN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dN=(e,t)=>{for(var n in t||(t={}))cN.call(t,n)&&hN(e,n,t[n]);if(lN)for(var n of lN(t))uN.call(t,n)&&hN(e,n,t[n]);return e};function fN({classNames:e,title:r,children:i,setValue:o,styles:s,register:a,keywords:l,initValues:c,setKey:u="margin"}){const[h,d]=t(function(e){if("margin"===u)return{marginTop:e.marginTop||0,marginRight:e.marginRight||0,marginBottom:e.marginBottom||0,marginLeft:e.marginLeft||0};return{paddingTop:e.paddingTop||0,paddingRight:e.paddingRight||0,paddingBottom:e.paddingBottom||0,paddingLeft:e.paddingLeft||0}}(c)),[f,p]=t(!1);function m(e,t){const n=Number(e.target.value)||1,r=Number(h[t])||0,i={};if(!f)return void d((s=dN({},h),a={[t]:n},sN(s,aN(a))));var s,a;if(0===r){const e={},i=Number(n-r);return l.filter((e=>e!==t)).map((t=>{e[t]=parseFloat(((Number(h[t])||0)+i).toString()),o(t,e[t])})),void d(dN({[t]:n},e))}const c=Number((r/n).toFixed(2));l.filter((e=>e!==t)).map((e=>{i[e]=parseFloat(((Number(h[e])||0)/c).toString()),o(e,i[e])})),d(dN({[t]:n},i))}return n.createElement("div",{className:ie("px-4",e),style:s},n.createElement("div",{className:"h-28 flex items-center justify-center relative"},n.createElement("span",{className:"absolute left-0 text-12 text-gray-400"},r),n.createElement("input",dN({type:"text",className:"input-number bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},a(l[0],{value:c[l[0]]||"",onBlur:e=>m(e,l[0])}))),n.createElement(y,{className:"absolute right-0 cursor-pointer",name:"link",color:f?"blue":"gray",onClick:function(){p(!f)}})),n.createElement("div",{className:"flex items-center "},n.createElement("div",{className:"w-32"},n.createElement("input",dN({type:"text",className:"w-full bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},a(l[1],{value:c[l[1]]||"",onBlur:e=>m(e,l[1])})))),i,n.createElement("div",{className:"w-32"},n.createElement("input",dN({type:"text",className:"w-full bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},a(l[2],{value:c[l[2]]||"",onBlur:e=>m(e,l[2])}))))),n.createElement("div",{className:"h-28 flex items-center justify-center"},n.createElement("input",dN({type:"text",className:"bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},a(l[3],{value:c[l[3]]||"",onBlur:e=>m(e,l[3])})))))}var pN=Object.defineProperty,mN=Object.defineProperties,gN=Object.getOwnPropertyDescriptors,ON=Object.getOwnPropertySymbols,vN=Object.prototype.hasOwnProperty,bN=Object.prototype.propertyIsEnumerable,yN=(e,t,n)=>t in e?pN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xN=(e,t)=>{for(var n in t||(t={}))vN.call(t,n)&&yN(e,n,t[n]);if(ON)for(var n of ON(t))bN.call(t,n)&&yN(e,n,t[n]);return e};function wN({register:e,initValues:r,setValue:i}){const{width:o,widthUnit:s,height:a,heightUnit:l}=r,[c,u]=t({width:Number(o)||0,height:Number(a)||0}),[h,d]=t(!1);function f(e,t){const n=Number(e.target.value)||1;var r;if(h)if("width"===t){const e=Number(c.width)||1,t=Number(c.height)||1,r=Number((e/n).toFixed(2)),o=parseFloat((t/r).toString());i("height",o),u({width:n,height:o})}else{const e=Number(c.width)||1,t=Number(c.height)||1,r=Number((t/n).toFixed(2)),o=parseFloat((e/r).toString());i("width",o),u({width:o,height:t})}else u((r=xN({},c),mN(r,gN({[t]:n}))))}function p(e,t){const n=e.target.value;i(`${t}Unit`,n),"auto"!==n?"%"!==n?"px"!==n||i(t,""):i(t,"100"):i(t,"auto")}return n.createElement(n.Fragment,null,n.createElement("div",{className:"p-8 border border-gray-300 rounded-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"w-1/2 flex items-center"},n.createElement("span",{className:"mr-8 text-12 text-gray-400 whitespace-nowrap"},"宽度"),n.createElement("div",{className:"relative flex",style:{width:50}},n.createElement("input",xN({type:"auto"===o?"hidden":"number",disabled:"auto"===o,min:0,className:"w-full border-none focus:outline-none",style:{background:"none"}},e("width",{value:o||"",onBlur:e=>f(e,"width")}))),"auto"===o&&n.createElement("span",{className:"ml-4 w-16 bg-white text-12 text-gray-400"},o),n.createElement("div",{className:"ml-4 w-16 absolute right-0 top-0 bg-white text-12 text-gray-400"},n.createElement("select",{onChange:e=>p(e,"width"),value:s||"px"},n.createElement("option",{label:"px",value:"px"}),n.createElement("option",{label:"%",value:"%"}),n.createElement("option",{label:"auto",value:"auto"}))))),n.createElement("div",{className:"w-1/2 flex items-center"},n.createElement("span",{className:"mr-8 text-12 text-gray-400 whitespace-nowrap"},"高度"),n.createElement("div",{className:"relative",style:{width:50}},n.createElement("input",xN({type:"auto"===a?"hidden":"number",disabled:"auto"===a,className:"w-full border-none focus:outline-none",style:{background:"none"}},e("height",{value:a||"",onBlur:e=>f(e,"height")}))),"auto"===a&&n.createElement("span",{className:"ml-4 w-16 bg-white text-12 text-gray-400"},a),n.createElement("div",{className:"ml-4 w-16 absolute right-0 top-0 bg-white text-12 text-gray-400"},n.createElement("select",{onChange:e=>p(e,"height"),value:l||"px"},n.createElement("option",null,"px"),n.createElement("option",null,"%"),n.createElement("option",null,"auto"))))),n.createElement(y,{name:"link",className:"cursor-pointer",color:h?"blue":"gray",onClick:function(){d(!h)}}))),n.createElement("div",{className:"mt-8"},n.createElement(fN,{classNames:"border border-dashed border-gray-400 bg-blue-200 rounded-4",title:"margin",register:e,initValues:r,setKey:"margin",setValue:i,keywords:["marginTop","marginLeft","marginRight","marginBottom"]},n.createElement(fN,{classNames:"w-full border border-dashed border-gray-400",title:"padding",styles:{height:98,backgroundColor:"#F0FDF4"},register:e,initValues:r,setKey:"padding",setValue:i,keywords:["paddingTop","paddingLeft","paddingRight","paddingBottom"]},n.createElement("div",{className:"w-full h-full bg-blue-200 text-12 text-center text-gray-400",style:{height:42,lineHeight:"42px"}},"1440 X 900")))))}var SN=Object.defineProperty,_N=Object.getOwnPropertySymbols,kN=Object.prototype.hasOwnProperty,EN=Object.prototype.propertyIsEnumerable,QN=(e,t,n)=>t in e?SN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TN=(e,t)=>{for(var n in t||(t={}))kN.call(t,n)&&QN(e,n,t[n]);if(_N)for(var n of _N(t))EN.call(t,n)&&QN(e,n,t[n]);return e};const PN=[{value:"static",label:"默认"},{value:"relative",label:"相对"},{value:"absolute",label:"绝对"},{value:"fixed",label:"固定"}];function CN({initValues:e,register:r,setValue:i}){const[o,s]=t("static"),{position:a}=e;return l((()=>{s(a||"static")}),[a]),n.createElement("div",null,n.createElement("div",{className:"text-12 text-gray-600 mb-4"},"定位"),n.createElement(W,{listData:PN,onChange:e=>function(e){const t=e;"static"===t&&(i("top",""),i("left",""),i("right",""),i("bottom","")),s(t),i("position",t)}(e),currentValue:o}),"static"!==o&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mt-8 px-4 border border-dashed border-gray-400 bg-blue-200 rounded-4"},n.createElement("div",{className:"h-28 flex items-center justify-center"},n.createElement("input",TN({type:"text",className:"input-number bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},r("top",{value:e.top||""})))),n.createElement("div",{className:"flex items-center "},n.createElement("div",{className:"w-32"},n.createElement("input",TN({type:"text",className:"w-full bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},r("left",{value:e.left||""})))),n.createElement("div",{className:"w-full h-full bg-white text-12 text-center text-gray-400 rounded-4",style:{height:42}}),n.createElement("div",{className:"w-32"},n.createElement("input",TN({type:"text",className:"w-full bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},r("right",{value:e.right||""}))))),n.createElement("div",{className:"h-28 flex items-center justify-center"},n.createElement("input",TN({type:"text",className:"bg-transparent text-center focus:outline-none",style:{backgroundColor:"transparent"},placeholder:"0"},r("bottom",{value:e.bottom||""}))))),n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"text-12 text-gray-600"},"层级"),n.createElement("input",TN({type:"number",placeholder:"0",className:"mr-8 px-8 py-6 w-full border border-gray-300 corner-2-8-8-8"},r("zIndex",{value:e.zIndex||""}))))))}var NN=Object.defineProperty,$N=Object.defineProperties,AN=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,jN=Object.prototype.hasOwnProperty,DN=Object.prototype.propertyIsEnumerable,IN=(e,t,n)=>t in e?NN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WN=(e,t)=>{for(var n in t||(t={}))jN.call(t,n)&&IN(e,n,t[n]);if(RN)for(var n of RN(t))DN.call(t,n)&&IN(e,n,t[n]);return e},MN=(e,t)=>$N(e,AN(t));const LN=[{value:"block",label:"块级"},{value:"inline",label:"行内"},{value:"inline-block",label:"行内块"},{value:"flex",label:"弹"}],VN=[{value:"row",label:n.createElement(b,{position:"top",label:"Direction:row"},n.createElement(y,{name:"direction_row",color:"gray"}))},{value:"column",label:n.createElement(b,{position:"top",label:"Direction:column"},n.createElement(y,{name:"direction_column",color:"gray"}))},{value:"row-reverse",label:n.createElement(b,{position:"top",label:"Direction:row-reverse"},n.createElement(y,{name:"direction_row-reverse",color:"gray"}))},{value:"column-reverse",label:n.createElement(b,{position:"top",label:"Direction:column-reverse"},n.createElement(y,{name:"direction_column-reverse",color:"gray"}))}],ZN=[{value:"nowrap",label:n.createElement(b,{position:"top",label:"Wrap:nowrap"},n.createElement(y,{name:"direction_row",color:"gray"}))},{value:"wrap",label:n.createElement(b,{position:"top",label:"Wrap:wrap"},n.createElement(y,{name:"direction_column",color:"gray"}))},{value:"wrap-reverse",label:n.createElement(b,{position:"top",label:"Wrap:wrap-reverse"},n.createElement(y,{name:"direction_row-reverse",color:"gray"}))},{value:"initial",label:n.createElement(b,{position:"top",label:"Wrap:initial"},n.createElement(y,{name:"direction_column-reverse",color:"gray"}))},{value:"inherit",label:n.createElement(b,{position:"top",label:"Wrap:inherit"},n.createElement(y,{name:"direction_column-reverse",color:"gray"}))}],XN={row:["row_align_flex-start","row_align_center","row_align_flex-end","row_align_stretch","row_align_baseline","row_justify_flex-start","row_justify_center","row_justify_flex-end","row_justify_stretch","row_justify_baseline"],column:["col_align_flex-start","col_align_center","col_align_flex-end","col_align_stretch","col_align_baseline","col_justify_flex-start","col_justify_center","col_justify_flex-end","col_justify_stretch","col_justify_baseline"],"row-reverse":["row-re_align_flex-start","row-re_align_center","row-re_align_flex-end","row-re_align_stretch","row-re_align_baseline","row-re_justify_flex-start","row-re_justify_center","row-re_justify_flex-end","row-re_justify_stretch","row-re_justify_baseline"],"column-reverse":["col-re_align_flex-start","col-re_align_center","col-re_align_flex-end","col-re_align_stretch","col-re_align_baseline","col-re_justify_flex-start","col-re_justify_center","col-re_justify_flex-end","col-re_justify_stretch","col-re_justify_baseline"]};function UN({initValues:e,register:r,setValue:i}){const{display:o,flexDirection:s,alignItems:a,justifyContent:c}=e,[u,h]=t({display:"block",flexDirection:"row",flexWrap:"nowrap",alignItems:"",justifyContent:""});function d(e,t){const n=e;u[t]!==n&&("display"===t&&"flex"!==e&&(i("flexDirection",""),i("alignItems",""),i("justifyContent",""),i("flexWrap","nowrap")),i(t,n),h(MN(WN({},u),{[t]:n})))}l((()=>{h(MN(WN({},u),{display:o||"block",flexDirection:s||"row",alignItems:a||"",justifyContent:c||""}))}),[o,s,a,c]);let f=[],p=[];return"flex"===u.display&&(f=[{value:"flex-start",label:n.createElement(b,{position:"top",label:"Align:flex-start"},n.createElement(y,{name:XN[u.flexDirection][0],color:"gray"}))},{value:"center",label:n.createElement(b,{position:"top",label:"Align:center"},n.createElement(y,{name:XN[u.flexDirection][1],color:"gray"}))},{value:"flex-end",label:n.createElement(b,{position:"top",label:"Align:flex-end"},n.createElement(y,{name:XN[u.flexDirection][2],color:"gray"}))},{value:"stretch",label:n.createElement(b,{position:"top",label:"Align:stretch"},n.createElement(y,{name:XN[u.flexDirection][3],color:"gray"}))},{value:"baseline",label:n.createElement(b,{position:"top",label:"Align:baseline"},n.createElement(y,{name:XN[u.flexDirection][4],color:"gray"}))}],p=[{value:"flex-start",label:n.createElement(b,{position:"top",label:"Justify:flex-start"},n.createElement(y,{name:XN[u.flexDirection][5],color:"gray"}))},{value:"center",label:n.createElement(b,{position:"top",label:"Justify:center"},n.createElement(y,{name:XN[u.flexDirection][6],color:"gray"}))},{value:"flex-end",label:n.createElement(b,{position:"top",label:"Justify:flex-end"},n.createElement(y,{name:XN[u.flexDirection][7],color:"gray"}))},{value:"space-between",label:n.createElement(b,{position:"top",label:"Justify:space-between"},n.createElement(y,{name:XN[u.flexDirection][8],color:"gray"}))},{value:"space-around",label:n.createElement(b,{position:"top",label:"Justify:space-around"},n.createElement(y,{name:XN[u.flexDirection][9],color:"gray"}))}]),n.createElement("div",null,n.createElement("input",WN({type:"hidden"},r("display",{value:o||"block"}))),n.createElement("input",WN({type:"hidden"},r("flexDirection",{value:s||""}))),n.createElement("input",WN({type:"hidden"},r("alignItems",{value:a||""}))),n.createElement("input",WN({type:"hidden"},r("justifyContent",{value:c||""}))),n.createElement("div",{className:"text-12 text-gray-600"},"填充类型"),n.createElement(W,{listData:LN,onChange:e=>d(e,"display"),currentValue:u.display}),"flex"===u.display&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mt-8 text-12 text-gray-600"},"弹性布局"),n.createElement("div",null,n.createElement(W,{className:"w-full",listData:VN,onChange:e=>d(e,"flexDirection"),currentValue:u.flexDirection})),n.createElement("div",{className:"mt-4"},n.createElement(W,{className:"w-full",listData:ZN,onChange:e=>d(e,"flexWrap"),currentValue:u.flexWrap})),n.createElement("div",{className:"mt-4"},n.createElement(W,{listData:f,onChange:e=>d(e,"alignItems"),currentValue:u.alignItems})),n.createElement("div",{className:"mt-4"},n.createElement(W,{listData:p,onChange:e=>d(e,"justifyContent"),currentValue:u.justifyContent}))))}var BN=Object.defineProperty,qN=Object.defineProperties,YN=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,GN=Object.prototype.hasOwnProperty,FN=Object.prototype.propertyIsEnumerable,HN=(e,t,n)=>t in e?BN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KN=(e,t)=>{for(var n in t||(t={}))GN.call(t,n)&&HN(e,n,t[n]);if(zN)for(var n of zN(t))FN.call(t,n)&&HN(e,n,t[n]);return e};const{formatRgba:JN}=Z,e$=[{value:"none",label:"无"},{value:"color",label:"颜色填充"},{value:"img",label:"图片填充"}],t$=[{value:"repeat",label:"re"},{value:"repeat-x",label:"re-x"},{value:"repeat-y",label:"re-y"},{value:"no-repeat",label:"no-re"}],n$=[{value:"fixed",label:"fixed"},{value:"scroll",label:"scroll"}],r$={leftTop:"0% 0%",centerTop:"50% 0%",rightTop:"100% 0%",leftCenter:"0% 50%",center:"50% 50%",rightCenter:"100% 50%",leftBottom:"0% 100%",centerBottom:"50% 100%",rightBottom:"100% 100%"};function i$({initValues:e,register:r,setValue:i,onFormChange:o}){const[s,a]=t("none"),[c,u]=t("repeat"),[h,d]=t("scroll"),[f,p]=t({x:"",y:""}),[m,g]=t(""),{backgroundColor:O,backgroundImage:v,backgroundPosition:x,backgroundSize:w,backgroundRepeat:S,backgroundAttachment:_}=e;function k(e){const t=e.split(" "),n=[];t.map((e=>{n.push(e.substring(0,e.length-1))}));const[r="",s=""]=n;p({x:r,y:s}),i("backgroundPosition",e),o()}function E(e,t){const n=(r=KN({},f),o={[t]:e.target.value},qN(r,YN(o)));var r,o;p(n);const{x:s,y:a}=n;i("backgroundPosition",`${s}% ${a}%`)}function Q(e){g(e),i("backgroundSize",e),o()}function T(e,t){const n=e.target.value,{x:r="",y:s=""}=m,a={x:r,y:s,[t]:n};g(a);i("backgroundSize",`${a.x}% ${a.y}%`),o()}l((()=>{if(v&&!O&&a("img"),O&&!v&&a("color"),O||v||a("none"),x){const e=x.split(" "),t=[];e.map((e=>{t.push(e.substring(0,e.length-1))}));const[n="",r=""]=t;p({x:n,y:r})}if(w)if(["cover","contain"].includes(w))g(w);else{const e=w.split(" "),t=[];e.map((e=>{t.push(e.substring(0,e.length-1))}));const[n="",r=""]=t;g({x:n,y:r})}S&&u(S),_&&d(_)}),[O,v,x,w,S,_]);const P=function(){const{x:e,y:t}=f,n=`${e}% ${t}%`;let r="";return Object.entries(r$).forEach((e=>{const[t,i]=e;i===n&&(r=t)})),r}();return n.createElement("div",null,n.createElement("div",{className:"text-12 text-gray-600"},"填充类型"),n.createElement(W,{listData:e$,onChange:e=>function(e){const t=e;s!==t&&("none"===t&&(i("backgroundColor",""),i("backgroundImage",""),i("backgroundPosition",""),i("backgroundSize",""),i("backgroundAttachment",""),i("backgroundRepeat",""),u("repeat"),d("scroll"),g(""),p({x:"",y:""})),"color"===t&&(i("backgroundImage",""),i("backgroundPosition",""),i("backgroundSize",""),i("backgroundAttachment",""),i("backgroundRepeat",""),u("repeat"),d("scroll"),g(""),p({x:"",y:""})),"img"===t&&i("backgroundColor",""),a(t))}(e),currentValue:s}),n.createElement("input",KN({type:"hidden"},r("backgroundColor",{value:O||""}))),n.createElement("input",KN({type:"hidden"},r("backgroundImage",{value:v||""}))),"color"===s&&n.createElement("div",{className:"mt-8 px-8 py-6 border border-gray-300 rounded-4 flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement(Z,{value:O,onChange:function(e){const{rgb:t}=e,n=JN(t);i("backgroundColor",n),o()}}),n.createElement("span",{className:"ml-8 text-12 text-gray-900"},O)))),"img"===s&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"text-12 text-gray-600"},"图片地址"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",KN({type:"text",className:"mr-8 px-8 py-6 w-full border border-gray-300 corner-2-8-8-8"},r("backgroundImage",{value:v||""}))),n.createElement(y,{name:"code",color:"gray"}))),v&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"p-4 flex items-center justify-between border border-gray-300 rounded-4"},n.createElement("div",{className:"flex items-center flex-wrap",style:{width:70,height:70}},n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"leftTop"===P}),onClick:()=>k(r$.leftTop)},n.createElement(b,{position:"top",label:"左上"},n.createElement(y,{name:"left-top",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"centerTop"===P}),style:{left:"50%"},onClick:()=>k(r$.centerTop)},n.createElement(b,{position:"top",label:"中上"},n.createElement(y,{name:"center-top",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"rightTop"===P}),onClick:()=>k(r$.rightTop)},n.createElement(b,{position:"top",label:"右上"},n.createElement(y,{name:"right-top",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"leftCenter"===P}),style:{top:"50%"},onClick:()=>k(r$.leftCenter)},n.createElement(b,{position:"top",label:"左中"},n.createElement(y,{name:"left-center",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"center"===P}),style:{top:"50%",left:"50%"},onClick:()=>k(r$.center)},n.createElement(b,{position:"top",label:"中心"},n.createElement(y,{name:"center-center",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"rightCenter"===P}),style:{top:"50%"},onClick:()=>k(r$.rightCenter)},n.createElement(b,{position:"top",label:"右中"},n.createElement(y,{name:"right-center",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"leftBottom"===P}),onClick:()=>k(r$.leftBottom)},n.createElement(b,{position:"top",label:"左下"},n.createElement(y,{name:"left-bottom",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"centerBottom"===P}),style:{left:"50%"},onClick:()=>k(r$.centerBottom)},n.createElement(b,{position:"top",label:"中下"},n.createElement(y,{name:"center-bottom",color:"gray"}))),n.createElement("span",{className:ie("p-2 cursor-pointer",{"bg-gray-300":"rightBottom"===P}),onClick:()=>k(r$.rightBottom)},n.createElement(b,{position:"top",label:"右下"},n.createElement(y,{name:"right-bottom",color:"gray"})))),n.createElement("div",{className:"ml-10 flex flex-col flex-1"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"mr-8 flex items-center"},n.createElement(y,{name:"row-deviation",color:"gray",className:"mr-4"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"横向偏移")),n.createElement("div",{className:"relative "},n.createElement("input",{type:"number",placeholder:"0",className:"px-8 py-6 w-full border border-gray-300 corner-2-8-8-8",value:f.x,onChange:e=>E(e,"x")}),n.createElement("div",{className:"px-4 absolute bg-gray-100 top-2 flex items-center",style:{bottom:2,right:4}},"%"))),n.createElement("div",{className:"mt-4 flex items-center"},n.createElement("div",{className:"mr-8 flex items-center"},n.createElement(y,{name:"col-deviation",color:"gray",className:"mr-4"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"横向偏移")),n.createElement("div",{className:"relative "},n.createElement("input",{type:"number",placeholder:"0",value:f.y,className:"px-8 py-6 w-full border border-gray-300 corner-2-8-8-8",onChange:e=>E(e,"y")}),n.createElement("div",{className:"px-4 absolute bg-gray-100 top-2 flex items-center",style:{bottom:2,right:4}},"%")))))),n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"text-12 text-gray-600"},"大小"),n.createElement("div",{className:"p-4 flex items-center justify-between border border-gray-300 rounded-4"},n.createElement("div",{className:"flex flex-col items-center "},n.createElement("div",{onClick:()=>Q("cover"),className:ie("px-8 py-2 flex items-center border","bg-gray-50 rounded-4 cursor-pointer",{"border-blue-600":"cover"===m,"border-gray-300":"cover"!==m})},n.createElement(y,{name:"size-image",color:"gray",className:"mr-8"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"覆盖")),n.createElement("div",{onClick:()=>Q("contain"),className:ie("px-8 py-2 flex items-center border","bg-gray-50 rounded-4 cursor-pointer mt-8",{"border-blue-600":"contain"===m,"border-gray-300":"contain"!==m})},n.createElement(y,{name:"size-image",color:"gray",className:"mr-8"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"适合"))),n.createElement("div",{className:"ml-10 flex flex-col"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"mr-8 flex items-center"},n.createElement(y,{name:"size-width",color:"gray",className:"mr-4"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"宽度")),n.createElement("div",{className:"relative "},n.createElement("input",{type:"number",placeholder:"auto",min:0,className:"px-8 py-6 w-full border border-gray-300 corner-2-8-8-8",value:m.x||"",onChange:e=>T(e,"x")}),n.createElement("div",{className:"px-4 absolute bg-gray-100 top-2 flex items-center",style:{bottom:2,right:4}},"%"))),n.createElement("div",{className:"mt-4 flex items-center"},n.createElement("div",{className:"mr-8 flex items-center"},n.createElement(y,{name:"size-height",color:"gray",className:"mr-4"}),n.createElement("span",{className:"text-12 text-gray-400 whitespace-nowrap"},"宽度")),n.createElement("div",{className:"relative "},n.createElement("input",{type:"number",min:0,placeholder:"auto",className:"px-8 py-6 w-full border border-gray-300 corner-2-8-8-8",value:m.y||"",onChange:e=>T(e,"y")}),n.createElement("div",{className:"px-4 absolute bg-gray-100 top-2 flex items-center",style:{bottom:2,right:4}},"%")))))),n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"text-12 text-gray-600"},"平铺"),n.createElement(W,{listData:t$,onChange:e=>function(e){const t=e;i("backgroundRepeat",t),u(t),o()}(e),currentValue:c})),n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"text-12 text-gray-600"},"固定"),n.createElement(W,{listData:n$,onChange:e=>function(e){const t=e;i("backgroundAttachment",t),d(t),o()}(e),currentValue:h})))))}var o$=Object.defineProperty,s$=Object.getOwnPropertySymbols,a$=Object.prototype.hasOwnProperty,l$=Object.prototype.propertyIsEnumerable,c$=(e,t,n)=>t in e?o$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u$=(e,t)=>{for(var n in t||(t={}))a$.call(t,n)&&c$(e,n,t[n]);if(s$)for(var n of s$(t))l$.call(t,n)&&c$(e,n,t[n]);return e};const h$=[{label:"100",value:100},{label:"200",value:200},{label:"300",value:300},{label:"400",value:400},{label:"500",value:500},{label:"600",value:600},{label:"700",value:700},{label:"800",value:800},{label:"900",value:900}],d$=[{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"},{label:"justify",value:"justify"}];function f$({initValues:e,register:t,setValue:r,onFormChange:i}){const{fontSize:o,lineHeight:s,fontWeight:a,textAlign:l,color:c}=e;return n.createElement("div",{className:"mt-8 py-8 border border-gray-300 rounded-4"},n.createElement("div",{className:"mb-8 flex items-center justify-content"},n.createElement("div",{className:"w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"大小"),n.createElement("div",{className:"relative flex",style:{width:50}},n.createElement("input",u$({type:"number",className:"w-full focus:outline-none"},t("fontSize",{value:o||""}))),n.createElement("div",{className:"w-20 absolute right-0 top-0 bg-white\n              text-12 text-gray-400 cursor-pointer"},"px"))),n.createElement("div",{className:"mr-8 w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"行高"),n.createElement("div",{className:"relative flex",style:{width:50}},n.createElement("input",u$({type:"number",className:"w-full focus:outline-none"},t("lineHeight",{value:s||""}))),n.createElement("div",{className:"w-20 absolute right-0 top-0 bg-white\n              text-12 text-gray-400 cursor-pointer"},"px")))),n.createElement("div",{className:"mb-8 flex items-center justify-content"},n.createElement("div",{className:"w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"字重"),n.createElement("input",u$({type:"hidden",className:"w-full focus:outline-none"},t("fontWeight",{value:a||400}))),n.createElement(E,{style:{padding:0,minWidth:73},border:!1,options:h$,value:Number(a)||400,onChange:function(e){r("fontWeight",e),i()}})),n.createElement("div",{className:"mr-20 w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"对齐"),n.createElement("input",u$({type:"hidden"},t("textAlign",{value:l||""}))),n.createElement(E,{style:{padding:0,minWidth:73},border:!1,options:d$,value:l||"left",onChange:function(e){r("textAlign",e),i()}}))),n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"颜色"),n.createElement("input",u$({readOnly:!0,type:"hidden"},t("color",{value:c||""}))),n.createElement(Z,{value:c||"",onChange:function(e){r("color",e.hex),i()}}),n.createElement("span",{className:"ml-8 text-12 text-gray-900"},c||""))))}var p$=Object.defineProperty,m$=Object.getOwnPropertySymbols,g$=Object.prototype.hasOwnProperty,O$=Object.prototype.propertyIsEnumerable,v$=(e,t,n)=>t in e?p$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b$=(e,t)=>{for(var n in t||(t={}))g$.call(t,n)&&v$(e,n,t[n]);if(m$)for(var n of m$(t))O$.call(t,n)&&v$(e,n,t[n]);return e};const y$=[{value:"none",label:"无"},{value:"solid",label:"实线"},{value:"dashed",label:"虚线"}];function x$({initValues:e,register:r,setValue:i,onFormChange:o}){const{borderStyle:s,borderWidth:a,borderTopLeftRadius:c,borderTopRightRadius:u,borderBottomLeftRadius:h,borderBottomRightRadius:d}=e,[f,p]=t("none"),[m,g]=t(!1),[O,v]=t(0);return l((()=>{const e=s||"none";c===u&&c===d&&c===h?(g(!1),v(Number(c)||0)):g(!0),p(e)}),[s]),n.createElement("div",null,n.createElement("div",{className:"text-12 text-gray-600"},"填充类型"),n.createElement(W,{listData:y$,onChange:e=>function(e){const t=e||"";f!==t&&("none"===f&&(i("borderTopLeftRadius",0),i("borderTopRightRadius",0),i("borderBottomRightRadius",0),i("borderBottomLeftRadius",0),v(0)),i("borderStyle",t),p(t),o())}(e+""),currentValue:f}),"none"!==f&&n.createElement("div",{className:"mt-8 p-8 border border-gray-300 rounded-4"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"mr-8 w-2/5 flex items-center"},n.createElement("span",{className:"mr-8 text-12 text-gray-400 whitespace-nowrap"},"宽度"),n.createElement("input",b$({type:"number",className:"px-8 w-full border-none focus:outline-none"},r("borderWidth",{value:a||1})))),n.createElement("div",{className:"mr-32 w-2/5 flex items-center"},n.createElement("span",{className:"mr-8 text-12 text-gray-400 whitespace-nowrap"},"边角"),m?n.createElement("span",{className:"text-12 text-gray-400"},"-"):n.createElement("input",{type:"text",className:"px-8 w-full border-none focus:outline-none",value:O,onChange:function(e){const t=Number(e.target.value)||0;v(t),i("borderTopLeftRadius",t),i("borderTopRightRadius",t),i("borderBottomRightRadius",t),i("borderBottomLeftRadius",t),o()}})),n.createElement(y,{name:"fullscreen",onClick:function(){g(!m)},color:m?"blue":"gray"})),m&&n.createElement("div",{className:"mt-8 flex items-center"},n.createElement("span",{className:"mr-8 text-12 text-gray-400 whitespace-nowrap"},"边角大小"),n.createElement("ul",{className:"w-full flex items-center justify-around"},n.createElement("li",{style:{width:30}},n.createElement("input",b$({type:"text",className:"w-full text-center border-none focus:outline-none"},r("borderTopLeftRadius",{value:c||0})))),n.createElement("li",{style:{width:30}},n.createElement("input",b$({type:"text",className:"w-full text-center border-none focus:outline-none"},r("borderTopRightRadius",{value:u||0})))),n.createElement("li",{style:{width:30}},n.createElement("input",b$({type:"text",className:"w-full text-center border-none focus:outline-none"},r("borderBottomRightRadius",{value:d||0})))),n.createElement("li",{style:{width:30}},n.createElement("input",b$({type:"text",className:"w-full text-center border-none focus:outline-none"},r("borderBottomLeftRadius",{value:h||0}))))))))}var w$=Object.defineProperty,S$=Object.defineProperties,_$=Object.getOwnPropertyDescriptors,k$=Object.getOwnPropertySymbols,E$=Object.prototype.hasOwnProperty,Q$=Object.prototype.propertyIsEnumerable,T$=(e,t,n)=>t in e?w$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P$=(e,t)=>{for(var n in t||(t={}))E$.call(t,n)&&T$(e,n,t[n]);if(k$)for(var n of k$(t))Q$.call(t,n)&&T$(e,n,t[n]);return e},C$=(e,t)=>S$(e,_$(t));const{formatRgba:N$}=Z;function $$({initValues:e,setValue:r,onFormChange:i}){const[o,s]=t(function(e){const t={color:"rgba(0, 0, 0, 1)",x:"",y:"",blur:"",spread:""};if("none"===e)return t;return t}(e.boxShadow||""));function a(e){let t="";const{color:n,x:o,y:s,blur:a,spread:l}=e;n&&(t+=n),o&&(t+=` ${Number(o)||0}px`),s&&(t+=` ${Number(s)||0}px`),o&&s&&(a&&(t+=` ${Number(a)||0}px`),l&&(t+=` ${Number(l)||0}px`),r("boxShadow",t),i())}function l(e,t){const n=C$(P$({},o),{[t]:e.target.value});s(n),a(n)}return n.createElement("div",{className:"mt-8 py-8 border border-gray-300 rounded-4"},n.createElement("div",{className:"mb-8 flex items-center justify-content"},n.createElement("div",{className:"w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"X轴"),n.createElement("input",{className:"w-full focus:outline-none",type:"text",placeholder:"0",onChange:e=>l(e,"x")})),n.createElement("div",{className:"mr-8 w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"Y轴"),n.createElement("input",{className:"w-full focus:outline-none",type:"text",placeholder:"0",onChange:e=>l(e,"y")}))),n.createElement("div",{className:"mb-8 flex items-center justify-content"},n.createElement("div",{className:"w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"模糊"),n.createElement("input",{className:"w-full focus:outline-none",type:"text",placeholder:"0",onChange:e=>l(e,"blur")})),n.createElement("div",{className:"mr-8 w-2/4 flex items-center"},n.createElement("span",{className:"px-8 text-12 text-gray-400 whitespace-nowrap"},"扩展"),n.createElement("input",{className:"w-full focus:outline-none",type:"text",placeholder:"0",onChange:e=>l(e,"spread")}))),n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"ml-8 flex items-center"},n.createElement(Z,{value:o.color,onChange:function(e){const{rgb:t}=e,n=N$(t),r=C$(P$({},o),{color:n});s(r),a(r)}}),n.createElement("span",{className:"ml-8 text-12 text-gray-900"},o.color))))}const A$=["width","height","fontSize","lineHeight","borderWidth","fontWeight","marginTop","marginLeft","marginRight","marginBottom","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","paddingTop","paddingLeft","paddingRight","paddingBottom","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","zIndex"],R$=["width","height","fontSize","lineHeight","top","left","right","bottom"];function j$(e){const t={};return"object"!=typeof e||null===e||Object.entries(e).forEach((e=>{const[n,r]=e;if("backgroundImage"!==n){if(R$.includes(n)){const e=D$(r);return t[n]=e.value,void(t[`${n}Unit`]=e.unit)}t[n]=r}else t[n]=function(e){let t="";0===e.indexOf("url")&&(t=e.substring(4,e.length-1));if("none"===e)return t;return t}(r)})),t}function D$(e){const t={value:"",unit:"px"};if(0===e||!e||!["string","number"].includes(typeof e))return t;if("number"==typeof e)return t.value=e.toString(),t.unit="px",t;if("auto"===e)return t.value="auto",t.unit="auto",t;if(e.indexOf("px")>=0){const n=e.indexOf("px");return t.value=e.substring(0,n),t}if(e.indexOf("%")>=0){const n=e.indexOf("%");return t.value=e.substring(0,n),t.unit="%",t}return t}var I$={};jl("",{});var W$=Vi((function({className:e}){const{register:r,getValues:i,setValue:o,reset:s}=Tk(),{page:a}=WA(),[c,u]=t({}),[h,d]=t(!1),[f,p]=t({});function m(e){let t=e;return O(t)||(t={}),JSON.stringify(e,null,2)}function g(){if(a.activeElem){const e=a.activeElem.props.style&&a.activeElem.props.style.value||{};p(m(e));return j$(e)}return{}}function O(e){try{return"string"==typeof e&&JSON.parse(e),!0}catch(e){return S.error(`错误的 CSS值，请填写 JSX 格式的 JSON object: ${e.message}`),!1}}if(l((()=>{a.activeElemId&&(u(g()),s(g()))}),[a.activeElemId]),!a.activeElem)return n.createElement("div",{className:"flex justify-center items-center flex-col h-full"},n.createElement("p",null,"当前层级没有内容"),n.createElement("p",null,"请在左侧画布选中其他元素"));function v(){const e=i();u(e);const t=(e=>{const t={};return"object"!=typeof e||null===e||Object.entries(e).forEach((n=>{const[r,i]=n;if(""!==i&&0!==i&&!(r.indexOf("Unit")>=0))if("backgroundImage"!==r)if(R$.includes(r)){const n=function(e,t="px"){const n="";return 0!==e&&e?"auto"===e?"auto":"px"===t||"%"===t?e.toString()+t:n:"0"+t}(i,e[`${r}Unit`]||"px");t[r]=n}else A$.includes(r)?t[r]=Number(i)||0:t[r]=i;else{if("none"===i)return;t[r]=`url(${i})`}})),t})(e);a.updateElemProperty(a.activeElem.id,"props.style",t),p(m(t))}return n.createElement("div",{className:ie(I$.stylePanel,e)},n.createElement("div",{className:"mb-8"},n.createElement(x,{className:"flex items-center",onClick:()=>d(!0)},n.createElement(y,{name:"code"}),"源码编辑")),n.createElement("form",{onChange:v},n.createElement(u_,{title:"画布",defaultExpand:!0},n.createElement(wN,{initValues:c,register:r,setValue:o})),n.createElement(u_,{title:"显示布局",defaultExpand:!0},n.createElement(UN,{initValues:c,register:r,setValue:o})),n.createElement(u_,{title:"定位",defaultExpand:!0},n.createElement(CN,{initValues:c,register:r,setValue:o})),n.createElement(u_,{title:"字体",defaultExpand:!0},n.createElement(f$,{initValues:c,register:r,setValue:o,onFormChange:v})),n.createElement(u_,{title:"背景",defaultExpand:!0},n.createElement(i$,{initValues:c,register:r,setValue:o,onFormChange:v})),n.createElement(u_,{title:"边框",defaultExpand:!0},n.createElement(x$,{initValues:c,register:r,setValue:o,onFormChange:v})),n.createElement(u_,{title:"阴影",defaultExpand:!0},n.createElement($$,{initValues:c,register:r,setValue:o,onFormChange:v}))),h&&n.createElement(w,{title:"编辑样式",onClose:()=>d(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>d(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){if(O(f)){d(!1);const e=JSON.parse(f),t=j$(e);u(t),s(t),a.updateElemProperty(a.activeElem.id,"props.style",e)}},text:"确认"}]},n.createElement(vS,{value:f,height:"480px",theme:"light",extensions:[o_()],onChange:e=>p(e)})))}));function M$({name:e,bound:t,onBind:r,onEdit:i,onUnbind:o}){return t?n.createElement("div",{className:"inline-flex items-center w-full"},n.createElement("span",{className:"border border-gray-100 flex-1 w-100 mr-8 px-8 py-4"},"已绑定 ",e),n.createElement(b,{position:"top",label:"编辑绑定函数"},n.createElement(y,{name:"code",className:"mr-16",clickable:!0,onClick:i})),n.createElement(b,{position:"top",label:"解绑函数"},n.createElement(y,{name:"link",clickable:!0,onClick:o}))):null}var L$={modal:"index_m_modal__7be1dbd8",eventType:"index_m_eventType__7be1dbd8",side:"index_m_side__7be1dbd8"};jl(".index_m_modal__7be1dbd8 {\n  display: grid;\n  grid-template-columns: 180px 212px 1fr;\n  height: 100%;\n}\n\n.index_m_modal__7be1dbd8 .index_m_eventType__7be1dbd8 {\n  box-shadow: inset -1px 0px 0px #E2E8F0;\n  padding: 8px;\n}\n\n.index_m_modal__7be1dbd8 .index_m_side__7be1dbd8 {\n  background: #F8FAFC;\n  box-shadow: inset -1px 0px 0px #E2E8F0;\n}",{});const V$=["didMount","willUnmount"];var Z$=Vi((function({className:e}){const{page:r}=WA(),[i,o]=t("custom"),[s,a]=t(!1),[c,u]=t(""),[h,d]=t(""),f=r.activeElem.props;function p(e){return V$.includes(e)?!!X(r.activeElem.lifecycleHooks,e):"functional_property"===X(f,`${e}.type`)}return l((()=>{if(c){let e="";e=V$.includes(c)?X(r.activeElem.lifecycleHooks,`${c}.body`):X(r.activeElem,`props.${c}.func.body`),d(e||"// this.apiStates['get-apps'].fetch()")}}),[r.activeElemId,c,s]),n.createElement("div",{className:ie(L$.eventPanel,e)},n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"text-12 text-gray-600"},"触发条件"),n.createElement(E,{options:r.getElemBoundActions().map((e=>({label:e,value:e}))),value:c,onChange:u})),function(){const e=r.getElemBoundActions();return n.createElement(n.Fragment,null,c&&!p(c)&&n.createElement("div",{className:"mb-8"},n.createElement(x,{modifier:"primary",iconName:"add",className:L$.btnAddAction,onClick:()=>a(!0)},"绑定动作")),e.filter(p).length>0&&n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"text-12 text-gray-600"},"已绑定事件"),n.createElement("div",null,e.map((e=>n.createElement(M$,{key:e,name:e,bound:p(e),onEdit:()=>{u(e),a(!0)},onUnbind:()=>{V$.includes(e)?r.updateElemProperty(r.activeElemId,`lifecycleHooks.${e}`,""):r.updateElemProperty(r.activeElem.id,`props.${e}`,""),d("")}}))))))}(),s&&n.createElement(w,{title:"事件绑定",width:1200,height:600,onClose:()=>a(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>a(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:()=>{var e;(e=h)?(V$.includes(c)?r.updateElemProperty(r.activeElemId,`lifecycleHooks.${c}`,{type:"lifecycle_hook_func_spec",args:"...args",body:e}):r.updateElemProperty(r.activeElemId,`props.${c}`,{type:"functional_property",func:{type:"",args:"...args",body:e}}),a(!1)):S.error("非法的函数定义")},text:"绑定动作"}]},n.createElement("div",{className:L$.modal},n.createElement("div",{className:L$.eventType},n.createElement("p",{className:"text-12 text-gray-600"},"动作类型"),n.createElement(R,{onChange:e=>o(e)},n.createElement(j,{key:"custom",label:"自定义方法",value:"custom",defaultChecked:"custom"===i}))),n.createElement("div",{className:L$.side},n.createElement("div",{className:"flex justify-between items-center cursor-pointer px-16 py-4 hover:bg-gray-200 bg-gray-200"},n.createElement("span",null,"添加新动作"),n.createElement(y,{name:"check"}))),n.createElement("div",{className:L$.body},n.createElement(vS,{value:h,height:"400px",extensions:[o_()],onChange:e=>{d(e)}})))))})),X$="index_m_renderPanel__b3ccee1c",U$="index_m_boundConst__b3ccee1c";jl(".index_m_renderPanel__b3ccee1c .index_m_btnAdd__b3ccee1c {\n  border: 1px dashed #CBD5E1;\n  border-radius: 2px 8px 8px 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  cursor: pointer;\n}\n\n.index_m_renderPanel__b3ccee1c .index_m_btnAdd__b3ccee1c:hover {\n  border: 1px dashed var(--blue-600);\n  color: var(--blue-600);\n}\n\n.index_m_renderPanel__b3ccee1c .index_m_boundConst__b3ccee1c {\n  background-color: var(--blue-400);\n}",{});var B$=Object.defineProperty,q$=Object.getOwnPropertySymbols,Y$=Object.prototype.hasOwnProperty,z$=Object.prototype.propertyIsEnumerable,G$=(e,t,n)=>t in e?B$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F$=(e,t)=>{for(var n in t||(t={}))Y$.call(t,n)&&G$(e,n,t[n]);if(q$)for(var n of q$(t))z$.call(t,n)&&G$(e,n,t[n]);return e};const H$="return state",K$="id";var J$=Vi((function(){const{page:e}=WA(),[r,i]=t(H$),[o,s]=t(K$),[a,c]=t(!1),[u,h]=t("null"),[d,f]=t(!1);function p(){const t=e.rawActiveElem;if("loop-container"===t.type){const e="constant_property"===X(t,"iterableState.type"),n=X(t,"iterableState.value");if(!e)return!1;try{const e="string"==typeof n?JSON.parse(n):n;return Array.isArray(e)}catch(e){return!1}}return!1}return l((()=>{const t=e.rawActiveElem;if("loop-container"===t.type){const{iterableState:e,loopKey:n,toProps:r}=ee(t,["iterableState","loopKey","toProps"]);let o=t.node;"composed-node"===t.node.type&&(o=t.node.outLayer);const a=Object.keys(pc(o.props)).join(",");i(X(r,"body",`//${a}\nreturn state`)),s(n),f(t.node&&"composed-node"===t.node.type),"constant_property"===(null==e?void 0:e.type)&&h(e.value)}else{const e=t.toProps,n=Object.keys(pc(t.props)).join(",");i(X(e,"body",`//${n}\nreturn state`))}}),[e.activeElemId]),IC((()=>{"loop-container"===e.rawActiveElem.type&&(e.updateCurNodeAsLoopContainer("loopKey",o||K$),e.updateCurNodeAsLoopContainer("toProps",r||H$))}),[r,o]),IC((()=>{e.updateCurNodeAsLoopContainer("loopKey",o||K$),e.updateCurNodeAsLoopContainer("toProps",r||H$)}),[u]),n.createElement(n.Fragment,null,n.createElement("div",{className:X$},n.createElement(u_,{title:"条件展示",defaultExpand:!0},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("label",null,"绑定变量"),n.createElement(HA,{name:"shouldRender",unBind:()=>{e.updateElemProperty(e.activeElem.id,"shouldRender",{type:"constant_property",value:!0})},isRootProps:!0}))),n.createElement(u_,{title:"循环展示",defaultExpand:!0},n.createElement("form",{className:"flex flex-col"},n.createElement("div",{className:"mb-8"},n.createElement("p",null,"循环数据"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement(x,{className:ie({[U$]:p()}),onClick:()=>c(!0)},p()?"已绑定常量数据":"绑定常量数据"),n.createElement(HA,{name:"loop-node",isLoopNode:!0,isComposedNode:d}))),n.createElement("div",{className:"mb-8"},n.createElement("p",null,"循环 Key"),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("input",{className:"mr-8 pg-input",placeholder:"默认为 id",value:o,onChange:e=>{s(e.target.value)}}))),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("span",{className:"mr-8"},"组件属性映射函数(toProps)"),n.createElement(b,{position:"top",label:"将当前循环数据映射到组件属性"},n.createElement(y,{name:"info"}))),n.createElement("div",{className:"text-12"},n.createElement("p",null,"示例:"),n.createElement("pre",{className:"text-12 text-blue-400 bg-gray-100"},"// 将当前循环数据作为组件props\n 1. return state\n\n// 将当前循环数据的data属性\n// 作为组件的app属性\n 2. return { app: state.data }"),n.createElement("div",{className:"text-gray-400"},n.createElement("p",null,"state 为页面引擎传入的当前变量(请勿修改名称)，您只需修改state的表达式即可。"),n.createElement("p",null,"代码编辑器只接收函数体的表达式，不需要填写完整的函数定义, 注意表达式需带上 return 关键字"))),n.createElement(vS,{value:r,height:"120px",extensions:[o_()],onChange:e=>{i(e)}}))))),a&&n.createElement(w,{title:"绑定常量循环数据",onClose:()=>c(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>c(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){try{const t=JSON.parse(u);if(null===t)return void c(!1);if(!Array.isArray(t))return void S.error("循环数据必须为数组");const{exportName:n,children:r}=e.activeElem,i=(r||[]).every((e=>"react-component"===e.type));if("container"===n&&i){const n=(r||[]).map((e=>{const t=Object.keys(pc(e.props)).join(","),{type:n,args:r,body:i}=e.toProps||{};return e.toProps={type:n||"to_props_function_spec",args:r||"state",body:i||`// ${t} \nreturn {}`},e})),i={type:"constant_property",value:t},o=Kn(e.activeElem),s=F$({},o);delete s.children,e.updateCurNodeAsComposedNode("iterableState",{iterableState:i,node:{id:AP("composed-node"),type:"composed-node",outLayer:F$({},s),children:n}})}else e.updateCurNodeAsLoopContainer("iterableState",{type:"constant_property",value:t});c(!1)}catch(e){S.error(e.message)}},text:"绑定"}]},n.createElement(vS,{value:"string"==typeof u?u:JSON.stringify(u),height:"120px",extensions:[o_()],onChange:e=>{h(e)}})))})),eA="index_m_modal__08aba627",tA="index_m_side__08aba627",nA="index_m_active__08aba627",rA="index_m_body__08aba627";jl(".index_m_modal__08aba627 {\n  display: grid;\n  grid-template-columns: 212px 1fr;\n  height: 100%;\n}\n\n.index_m_modal__08aba627 .index_m_side__08aba627 {\n  background: #F8FAFC;\n  box-shadow: inset -1px 0px 0px #E2E8F0;\n}\n\n.index_m_modal__08aba627 .index_m_side__08aba627 > div.index_m_active__08aba627 {\n  background-color: var(--gray-200);\n}\n\n.index_m_modal__08aba627 .index_m_body__08aba627 {\n  padding-left: 8px;\n  padding-right: 8px;\n}",{});var iA=Vi((function(e){const{designer:r,dataSource:i,page:o}=WA(),{setModalBindStateOpen:s,activeFieldName:a,isLoopNode:c,isRootProps:u}=r,[h,d]=t(null),[f,p]=t(""),[m,g]=t("state");return l((()=>{let e;if(c)e=X(o.rawActiveElem,"iterableState",{});else{const t=u?a:`props.${a}`;e=X(o.activeElem,t,{})}if("shared_state_property"===e.type){const t=`states['${e.stateID}']`;p(t),g(X(e,"convertor.expression",""))}if("api_result_property"===e.type){const t=`apiStates['${e.stateID}']`;p(t),g(X(e,"convertor.expression",""))}e.type}),[o.activeElemId]),n.createElement(w,{title:"变量绑定",onClose:()=>s(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>s(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){if(!f)return void S.error("变量表达式不能为空");if(!m)return void S.error("变量转换函数不能为空");if(m.indexOf("state")<0)return void S.error("变量转换函数必须包含 state 来引用当前变量值");const e=f.match(/states\['(.+)'\]/i);if(!e||!e[1])return void S.error(`无效的 stateID: ${f}`);const t=f.includes("apiStates[")?"api_result_property":"shared_state_property";if(c){const n={type:t,stateID:e[1],fallback:[],convertor:{type:"state_convert_expression",expression:m}};o.updateCurNodeAsLoopContainer("iterableState",n)}else{const n=u?a:`props.${a}`,r=X(o.activeElem,n+".value");o.updateElemProperty(o.activeElem.id,n,{type:t,stateID:e[1],fallback:r,convertor:{type:"state_convert_expression",expression:m}})}s(!1)},text:"确定"}]},n.createElement("div",{className:eA},n.createElement("div",{className:tA},Object.entries(i.sharedState).map((([e,t])=>{const r=(null==h?void 0:h.name)===e||f.includes(`['${e}']`);return n.createElement("div",{key:e,className:ie("flex justify-between items-center cursor-pointer px-16 py-4 hover:bg-gray-200",{[nA]:r}),onClick:()=>{d({name:e,conf:t}),p(`states['${e}']`)}},n.createElement("span",{className:"flex-1 flex flex-wrap items-center"},e,n.createElement("span",{className:"ml-8 border border-gray-100 text-12 text-gray-400"},"普通变量")),r&&n.createElement(y,{name:"check"}))})),Object.entries(i.apiState).map((([e,t])=>{const r=(null==h?void 0:h.name)===e||f.includes(`['${e}']`);return n.createElement("div",{key:e,className:ie("flex justify-between items-center cursor-pointer px-16 py-4 hover:bg-gray-200",{[nA]:r}),onClick:()=>{d({name:e,conf:t}),p(`apiStates['${e}']`)}},n.createElement("span",{className:"flex-1 flex flex-wrap items-center"},e,n.createElement("span",{className:"ml-8 border border-gray-100 text-12 text-gray-400"},"API 变量")),r&&n.createElement(y,{name:"check"}))}))),n.createElement("div",{className:rA},n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("span",{className:"mr-8"},"变量表达式"),n.createElement(b,{position:"top",label:"请选择普通变量 或 api变量"},n.createElement(y,{name:"info"}))),n.createElement(vS,{value:f,height:"200px",extensions:[o_()],onChange:p})),n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("span",{className:"mr-8"},"变量转换函数(state convertor)"),n.createElement(b,{position:"top",label:"将初始变量进行一次转换，一般用于 api 变量"},n.createElement(y,{name:"info"}))),n.createElement("div",{className:"text-12"},n.createElement("p",null,"示例:"),n.createElement("pre",{className:"text-12 text-blue-400 bg-gray-100"},"state.user_name"),n.createElement("div",{className:"text-gray-400"},n.createElement("p",null,"state 为页面引擎传入的当前变量(请勿修改名称)，您只需修改state的表达式即可。"),n.createElement("p",null,"代码编辑器只接收函数体的表达式，不需要填写完整的函数定义"))),n.createElement(vS,{value:m,height:"120px",extensions:[o_()],onChange:g})))))})),oA=Object.defineProperty,sA=Object.getOwnPropertySymbols,aA=Object.prototype.hasOwnProperty,lA=Object.prototype.propertyIsEnumerable,cA=(e,t,n)=>t in e?oA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uA=(e,t)=>{for(var n in t||(t={}))aA.call(t,n)&&cA(e,n,t[n]);if(sA)for(var n of sA(t))lA.call(t,n)&&cA(e,n,t[n]);return e};var hA=Vi((function(){const{designer:e,dataSource:r,page:i}=WA(),[o,s]=t(null),[a,c]=t([]),[u,h]=t(""),[d,f]=t(""),[p,m]=t(""),[g,O]=t([]),{setModalComponentNodeOpen:v,activeFieldName:x,isComponentNode:_}=e;return l((()=>{if(i.activeElem){const e=function(e){let t=[],n=[];if("loop-container"===e.type){const{children:t=[]}=e&&e.node;n=[...t]}else n=e.children||[];n&&(t=(n||[]).map((e=>{const t=Object.keys(pc(e.props)).join(","),{type:n,args:r,body:i}=e.toProps||{};return e.toProps={type:n||"to_props_function_spec",args:r||"state",body:i||`//${t}\nreturn {}`},e})));return t}(Kn(i.rawActiveElem||{})),t=e.map((e=>({label:e.label,value:e.id})));O(t),c(e),t.length>0&&(f(t[0].value||""),m(e[0].toProps.body||""))}}),[]),l((()=>{let e;if(e=_?X(i.rawActiveElem,"iterableState",{}):X(i.activeElem,`props.${x}`,{}),"shared_state_property"===e.type){const t=`states['${e.stateID}']`;h(t)}if("api_result_property"===e.type){const t=`apiStates['${e.stateID}']`;h(t)}e.type}),[i.activeElemId]),n.createElement(w,{title:"设置循环规则",onClose:()=>v(!1),footerBtns:[{key:"close",iconName:"close",onClick:()=>v(!1),text:"取消"},{key:"check",iconName:"check",modifier:"primary",onClick:function(){const e=[...a];if(e.map((e=>(e.id===d&&(e.toProps.body=p),e))),!u)return void S.error("变量表达式不能为空");const t=u.match(/states\['(.+)'\]/i);if(!t||!t[1])return void S.error(`无效的 stateID: ${u}`);const n={type:u.includes("apiStates[")?"api_result_property":"shared_state_property",stateID:t[1],fallback:[],convertor:{type:"state_convert_expression",expression:"state"}},r=Kn(i.activeElem),o=uA({},r);delete o.children,i.updateCurNodeAsComposedNode("iterableState",{iterableState:n,node:{id:AP("composed-node"),type:"composed-node",outLayer:uA({},o),children:e}}),v(!1)},text:"确定"}]},n.createElement("div",{className:"grid h-full",style:{gridTemplateColumns:"212px 1fr"}},n.createElement("div",{className:"bg-gray-50 border"},Object.entries(r.sharedState).map((([e,t])=>{const r=(null==o?void 0:o.name)===e||u.includes(`['${e}']`);return n.createElement("div",{key:e,className:ie("flex justify-between items-center","cursor-pointer px-16 py-4 hover:bg-gray-200",{"bg-gray-200":r}),onClick:()=>{s({name:e,conf:t}),h(`states['${e}']`)}},n.createElement("span",{className:"flex-1 flex flex-wrap items-center"},e,n.createElement("span",{className:"ml-8 border border-gray-100 text-12 text-gray-400"},"普通变量")),r&&n.createElement(y,{name:"check"}))})),Object.entries(r.apiState).map((([e,t])=>{const r=(null==o?void 0:o.name)===e||u.includes(`['${e}']`);return n.createElement("div",{key:e,className:ie("flex justify-between items-center","cursor-pointer px-16 py-4 hover:bg-gray-200",{"bg-gray-200":r}),onClick:()=>{s({name:e,conf:t}),h(`apiStates['${e}']`)}},n.createElement("span",{className:"flex-1 flex flex-wrap items-center"},e,n.createElement("span",{className:"ml-8 border border-gray-100 text-12 text-gray-400"},"API 变量")),r&&n.createElement(y,{name:"check"}))}))),n.createElement("div",{className:"px-8"},n.createElement("div",{className:"mb-8"},n.createElement("p",{className:"flex items-center"},n.createElement("span",{className:"mr-8"},"变量表达式"),n.createElement(b,{position:"top",label:"请选择普通变量 或 api变量"},n.createElement(y,{name:"info"}))),n.createElement(vS,{value:u,height:"200px",extensions:[o_()],onChange:h})),g.length>0&&n.createElement("div",{className:"mt-8"},n.createElement("div",{className:"flex items-center"},n.createElement("span",null,"当前组件："),n.createElement("select",{value:d,onChange:function(e){const t=[...a],n=e.target.value;let r="";t.map((e=>e.id===d?(e.toProps.body=p,e):(e.id===n&&(r=e.toProps.body||""),e))),m(r),c(t),f(n)}},g.map((e=>n.createElement("option",{key:e.value,value:e.value},e.label))))),n.createElement(vS,{value:p,height:"200px",extensions:[o_()],onChange:function(e){m(e)}})))))})),dA="index_m_panel__aaa2a3d0",fA="index_m_curElem__aaa2a3d0",pA="index_m_tabs__aaa2a3d0",mA="index_m_tabCont__aaa2a3d0";jl(".index_m_panel__aaa2a3d0 {\n  position: relative;\n  width: var(--pg-setting-panel-wid);\n  background: var(--pg-panel-bg-color);\n  box-shadow: var(--pg-box-shadow);\n}\n\n.index_m_panel__aaa2a3d0 .index_m_curElem__aaa2a3d0 {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 0 4px;\n  box-shadow: inset 0px -1px 0px #e2e8f0;\n}\n\n.index_m_panel__aaa2a3d0 .index_m_tabs__aaa2a3d0 {\n  height: calc(100vh - 60px);\n  overflow: auto;\n}\n\n.index_m_panel__aaa2a3d0 .index_m_tabCont__aaa2a3d0 {\n  padding: 8px;\n}",{});var gA=Vi((function(){const{page:e,designer:t,registry:r}=WA(),i=p((()=>{var t;const r=[{id:"props",name:"属性",content:o()},{id:"style",name:"样式",content:n.createElement(W$,null)}];return"page"===(null==(t=e.activeElem)?void 0:t.exportName)?r:r.concat([{id:"event",name:"事件",content:n.createElement(Z$,null)},{id:"renderer",name:"动态渲染",content:n.createElement(J$,null)}])}),[e.activeElemId]);function o(){const t=r.getElemByType(e.activeElem.exportName);if(!t)return n.createElement("div",{className:"flex justify-center items-center flex-col h-full"},n.createElement("p",null,"当前节点暂无属性配置"));const i=t.configForm;return n.createElement(i,null)}return l((()=>{var n;"page"!==(null==(n=e.activeElem)?void 0:n.exportName)||["props","style"].includes(t.activePanel)||t.setActivePanel("props")}),[e.activeElemId]),n.createElement("div",{className:dA},function(){var r;return e.activeElem?n.createElement(n.Fragment,null,n.createElement("div",{className:fA},n.createElement("span",{className:"mr-8"},null==(r=e.activeElem)?void 0:r.label," ID: "),n.createElement("span",null,e.activeElemId)),n.createElement(L,{className:pA,contentClassName:mA,items:i(),currentKey:t.activePanel,onChange:t.setActivePanel})):n.createElement("div",{className:"flex justify-center items-center flex-col h-full"},n.createElement("p",null,"当前层级没有内容"),n.createElement("p",null,"请在左侧画布选中其他元素"))}(),t.modalBindStateOpen&&n.createElement(iA,null),t.modalComponentNodeOpen&&n.createElement(hA,null))})),OA=Object.defineProperty,vA=Object.defineProperties,bA=Object.getOwnPropertyDescriptors,yA=Object.getOwnPropertySymbols,xA=Object.prototype.hasOwnProperty,wA=Object.prototype.propertyIsEnumerable,SA=(e,t,n)=>t in e?OA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const _A={container:"拖拽组件或模版到这里",form:"拖拽表单组件到这里"};var kA=Vi((function e({schema:t}){if("object"!=typeof t||!t)return null;let r;if("loop-container"===t.type){if(r=t.node,"composed-node"===r.type){if(!r.outLayer)return n.createElement(n.Fragment,null,...[].concat(r.children).map(((t,i)=>n.createElement(e,{key:r.id+i,schema:t}))));i=((e,t)=>{for(var n in t||(t={}))xA.call(t,n)&&SA(e,n,t[n]);if(yA)for(var n of yA(t))wA.call(t,n)&&SA(e,n,t[n]);return e})({},Kn(r.outLayer)),o={children:Kn(r.children)},r=vA(i,bA(o))}}else r=t;var i,o;const{exportName:s,id:a=AP(r.exportName),pid:l="",label:c=""}=r,{page:u,registry:h,dataSource:d}=WA(),f=g(null),[{isDragging:p},m,O]=Ua((()=>({type:"elem",canDrag:"page"!==s,item:{id:a,pid:l,exportName:s,label:h.getLabelByElemType(s)},collect:e=>({isDragging:e.isDragging()}),end:(e,t)=>{const n=t.getDropResult();(null==n?void 0:n.exportName)&&(window.__isDev__&&console.log("[elem] dropped %o onto: %o, pos: %s",e,n,u.dragPos),u.appendNode(e,n))}})),[u.activeElemId,u.dragPos,u.schema]),[{isOver:v},b]=Ka((()=>({accept:["elem","source_elem"],drop:(e,t)=>{if(!t.didDrop()&&e.id!==a)return{id:a,pid:l,exportName:s,label:h.getLabelByElemType(s)}},hover:(e,t)=>{if(t.isOver({shallow:!0})&&e.id!==a){const{top:e,bottom:n,left:r,right:i}=f.current&&f.current.getBoundingClientRect(),o=(n-e)/2,{x:s,y:a}=t.getSourceClientOffset(),l=a-e;let c="up";Math.abs(l)<=o/2?c="inner":l<0&&Math.abs(l)>o/2?c="up":l>0&&Math.abs(l)>o/2&&(c="down"),u.setDragPos(c)}},collect:e=>({isOver:e.isOver({shallow:!0})})})),[u.activeElemId,u.dragPos,u.schema]);m(b(f));const x=F([function(e){var t,r;const i=h.getElemByType(e.exportName)||{},o=(null==i?void 0:i.toProps)||H,s=Y({},pc(e.props||{}),null==i?void 0:i.defaultConfig);if("react-component"===e.type&&("page"!==e.exportName||(null==(t=e.children)?void 0:t.length)||Object.assign(s,{placeholder:n.createElement("div",{className:"flex flex-col items-center justify-center absolute w-full h-full"},n.createElement(y,{name:"pg-engine-empty",size:120}),n.createElement("p",{className:"text-gray-400 text-12"},"开始构建页面，从左侧 组件库或模版库 面板中拖入元素"))}),_A[e.exportName]&&!(null==(r=e.children)?void 0:r.length))){const t=e.props.style||{type:"constant_property",value:{}},{height:r,backgroundColor:i,backgroundImage:o}=t.value,a=D$(r);Object.assign(s,{placeholder:n.createElement("div",{className:ie("border border-dashed flex items-center justify-center w-full h-full",{"bg-gray-100":!i&&!o}),style:{minHeight:a.value&&Number(a.value)<60&&"px"===a.unit?Number(a.value):60,backgroundColor:i,backgroundImage:o}},a.value&&Number(a.value)<60&&"px"===a.unit?"":_A[e.exportName])})}return Object.assign({},o(s),{"data-node-key":e.id,ref:f,className:ie(vC,{[SC]:"page"===e.exportName,[xC]:p,[bC]:v||u.hoverElemId===a,[_C]:u.activeElemId===a,[kC]:v&&"up"===u.dragPos,[yC]:v&&"inner"===u.dragPos,[EC]:v&&"down"===u.dragPos}),draggable:!0})}]);return n.createElement(n.Fragment,null,n.createElement(ea,{connect:O,src:NC(c)}),n.createElement(function(e){var t,n,r;const{type:i}=e;if("react-component"===i)return(null==(n=null==(t=h.elementMap)?void 0:t[e.exportName])?void 0:n.component)||i;if("loop-container"===i){const t=X(e,"node.exportName");return null==(r=h.elementMap[t])?void 0:r.component}return"html-element"===i&&e.name||"div"}(r),x(Kn(r)),...(r.children||[]).filter(Boolean).map(((t,i)=>n.createElement(e,{key:r.id+i,schema:t})))))})),EA=Object.defineProperty,QA=Object.defineProperties,TA=Object.getOwnPropertyDescriptors,PA=Object.getOwnPropertySymbols,CA=Object.prototype.hasOwnProperty,NA=Object.prototype.propertyIsEnumerable,$A=(e,t,n)=>t in e?EA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AA=(e,t)=>{for(var n in t||(t={}))CA.call(t,n)&&$A(e,n,t[n]);if(PA)for(var n of PA(t))NA.call(t,n)&&$A(e,n,t[n]);return e},RA=(e,t)=>QA(e,TA(t));var jA=Vi(n.forwardRef((function(e,r){var i,o,s;const a=g(null),c=g(null),u=g(null),{page:d,designer:f}=WA(),[p,O]=t({width:0,height:0,x:0,y:0});function v(){if(!d.activeElemId)return;const e=d.schemaElements[d.activeElemId];!function(e){if(e){const{x:t,y:n,width:r,height:i}=e.getBoundingClientRect(),o=document.querySelector(".pge-canvas"),s=o.getBoundingClientRect();O({width:Math.max(r,e.scrollWidth),height:Math.max(i,e.scrollHeight),x:t-s.x+o.scrollLeft,y:n-s.y+o.scrollTop})}}(e&&e.element)}m(r,(()=>({computedPlace:v}))),l((()=>{window.addEventListener("resize",v)}),[]),h((()=>{v()}),[f.panelPinned,d.activeElemId]),h((()=>{setTimeout(v,500)}),[d.activeElemProps]);const{width:b,height:x,x:w,y:S}=p;return n.createElement("div",{className:"absolute top-0 left-0 bottom-0 right-0 overflow-visible z-10 inline-block",style:{transform:"translate(0px 0px)",pointerEvents:"none"}},d.activeElemId&&n.createElement(n.Fragment,null,n.createElement("div",{style:{width:b,height:x,border:"1px solid #197aff",transform:`translate3d(${w}px, ${S}px, 0px)`,zIndex:10,pointerEvents:"none",willChange:"width, height, transform"}},n.createElement("div",{ref:u,className:"h-20 border border-black flex absolute z-10",style:Object.assign(AA({right:"0",pointerEvents:"all"},function(){let e={right:"-2px",top:"-22px"};if(u.current){const t=u.current.getBoundingClientRect(),{element:n}=d.schemaElements[d.activeElemId]||{},r=document.querySelector(".pge-canvas").getBoundingClientRect();if(n){const i=n.getBoundingClientRect();i.width<t.width&&(e=RA(AA({},e),{left:"-2px",right:void 0})),Math.abs(i.y-r.y)<t.height&&(e=RA(AA({},e),{bottom:"-22px",top:void 0})),d.activeElemId.indexOf("page")>=0&&(e=RA(AA({},e),{right:"1px",top:"1px",left:void 0}))}}return e}()))},n.createElement("div",{className:"px-4 flex items-center rounded-2 cursor-pointer",style:{backgroundColor:"#006cff",borderRadius:2},ref:c},n.createElement(y,{name:"insert_drive_file",color:"white",className:"mr-4",clickable:!0}),n.createElement("span",{className:"text-12 text-white whitespace-nowrap"},null==(i=d.activeElem)?void 0:i.label)),n.createElement("div",{className:"px-4 flex items-center justify-around corner-0-0-4-4 bg-white"},"page"!==(null==(o=d.activeElem)?void 0:o.exportName)&&!(null==(s=d.activeElem)?void 0:s.disableActions)&&n.createElement(n.Fragment,null,n.createElement(y,{name:"content_copy",size:14,className:"mr-4",clickable:!0,onClick:()=>{d.copyNode(d.activeElemId)}}),n.createElement(y,{name:"delete",clickable:!0,onClick:()=>d.removeNode(d.activeElemId)}))))),n.createElement(Q,{ref:a,reference:c,trigger:"hover"},n.createElement("ul",null,d.activeElemParents.map((e=>{const t=d.findElement(e);return{value:e,label:t&&t.label||"容器"}})).map((e=>n.createElement("li",{className:"mb-2",key:e.value,onClick:t=>{t.stopPropagation(),d.setActiveElemId(e.value)}},n.createElement("div",{className:"px-4 flex items-center rounded-2 cursor-pointer",style:{backgroundColor:"#94A3B8",borderRadius:2}},n.createElement(y,{name:"insert_drive_file",color:"white",className:"mr-4",clickable:!0}),n.createElement("span",{className:"text-12 text-white whitespace-nowrap"},e.label)))))))))})));var DA=Vi((function({schema:e,className:t}){const{page:r,registry:i,dataSource:o,designer:s}=WA(),a=g(),[{isOver:c},u]=Ka((()=>({accept:["elem","source_elem"],drop:(e,t)=>{t.didDrop()||(console.log("dropped %o onto canvas: ",e),r.appendNode(e,null))},collect:e=>({isOver:e.isOver({shallow:!0})})})));function d(e,t){e.map((e=>{const n=e.getAttribute("data-node-key"),r=Array.from(e.children);n&&(t[n]={element:e,position:e.getBoundingClientRect()}),r.length>0&&d(r,t)}))}return l((()=>{CC(),e&&r.setSchema(e)}),[]),h((()=>{const e=document.querySelector(".pge-canvas"),t={};d(Array.from(e.children||[]),t),r.setSchemaElements(t),a.current.computedPlace()}),[Kn(r.schema.node)]),n.createElement("div",{className:ie("relative pge-canvas",wC,t),onClick:function(e){var t,n;e.stopPropagation(),e.preventDefault();const i=(null==(n=null==(t=e.target)?void 0:t.closest("[data-node-key]"))?void 0:n.getAttribute("data-node-key"))||"";i&&r.setActiveElemId(i),!s.panelPinned&&s.setPanelOpen(!1)},ref:u},n.createElement(kA,{schema:r.schema.node}),n.createElement(jA,{ref:a}))}));const IA=a({});function WA(){return f(IA)}var MA=Object.defineProperty,LA=Object.getOwnPropertyDescriptor,VA=(e,t,n,r)=>{for(var i,o=r>1?void 0:r?LA(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&MA(t,n,o),o};class ZA{constructor(){this.activeGroup="",this.panelOpen=!1,this.panelPinned=!1,this.activePanel="props",this.vdoms={},this.modalBindStateOpen=!1,this.activeFieldName="",this.modalBindRenderOpen=!1,this.isLoopNode=!1,this.modalComponentNodeOpen=!1,this.isComponentNode=!1,this.imageUrl="",this.isRootProps=!1,this.setActiveGroup=e=>{this.activeGroup=e},this.setPanelOpen=e=>{this.panelOpen=e,e||this.setPanelPinned(!1)},this.setPanelPinned=e=>{this.panelPinned=e},this.checkPanel=()=>{this.panelPinned||this.setPanelOpen(!1)},this.setActivePanel=e=>{this.activePanel=e},this.setVdom=(e,t)=>{this.vdoms[e]=t},this.setModalBindStateOpen=e=>{this.modalBindStateOpen=e},this.openDataBinding=(e,t,n)=>{this.modalBindStateOpen=!0,this.activeFieldName=e,this.isLoopNode=!!t,this.isRootProps=!!n},this.setModalBindRender=e=>{this.modalBindRenderOpen=e},this.reset=()=>{this.activeGroup="",this.panelOpen=!1,this.panelPinned=!1,this.activePanel="props",this.vdoms={},this.activeFieldName="",this.isLoopNode=!1},this.setModalComponentNodeOpen=e=>{this.modalComponentNodeOpen=e},this.openComponentNodeBinding=(e,t)=>{this.modalComponentNodeOpen=!0,this.activeFieldName=e,this.isComponentNode=!!t},cr(this)}setUploadImage(e){this.imageUrl=e}}VA([Tt],ZA.prototype,"activeGroup",2),VA([Tt],ZA.prototype,"panelOpen",2),VA([Tt],ZA.prototype,"panelPinned",2),VA([Tt],ZA.prototype,"activePanel",2),VA([Tt],ZA.prototype,"vdoms",2),VA([Tt],ZA.prototype,"modalBindStateOpen",2),VA([Tt],ZA.prototype,"activeFieldName",2),VA([Tt],ZA.prototype,"modalBindRenderOpen",2),VA([Tt],ZA.prototype,"isLoopNode",2),VA([Tt],ZA.prototype,"modalComponentNodeOpen",2),VA([Tt],ZA.prototype,"isComponentNode",2),VA([Tt],ZA.prototype,"imageUrl",2),VA([Tt],ZA.prototype,"isRootProps",2),VA([Nn],ZA.prototype,"setActiveGroup",2),VA([Nn],ZA.prototype,"setPanelOpen",2),VA([Nn],ZA.prototype,"setPanelPinned",2),VA([Nn],ZA.prototype,"setActivePanel",2),VA([Nn],ZA.prototype,"setVdom",2),VA([Nn],ZA.prototype,"setModalBindStateOpen",2),VA([Nn],ZA.prototype,"openDataBinding",2),VA([Nn],ZA.prototype,"setModalBindRender",2),VA([Nn],ZA.prototype,"reset",2),VA([Nn],ZA.prototype,"setModalComponentNodeOpen",2),VA([Nn],ZA.prototype,"openComponentNodeBinding",2),VA([Nn],ZA.prototype,"setUploadImage",1);var XA=new ZA;const UA={page:OC,registry:$P,designer:XA,dataSource:HP,eventBus:LP};var BA="index_m_designer__404069d0",qA="index_m_body__404069d0",YA="index_m_pinned__404069d0",zA="index_m_canvas__404069d0";jl(":root {\n  /* toolbar */\n  --pg-header-height: 44px;\n  /* canvas */\n  --pg-bg-color: #E6ECF9;\n  /* panels */\n  --pg-panel-bg-color: #fff;\n  --pg-source-panel-wid: 56px;\n  --pg-setting-panel-wid: 282px;\n  /* misc */\n  --pg-box-shadow: inset -1px 0px 0px #E2E8F0;\n}\n\n.index_m_designer__404069d0 {\n  font-weight: normal;\n  font-size: 12px;\n  background-color: var(--pg-bg-color);\n  height: 100vh;\n}\n\n.index_m_designer__404069d0 .index_m_body__404069d0 {\n  position: relative;\n  top: var(--pg-header-height);\n  overflow: hidden;\n  display: grid;\n  width: 100%;\n  height: calc(100vh - var(--pg-header-height));\n  grid-template-columns: 56px 1fr 282px;\n  grid-column-gap: 8px;\n}\n\n.index_m_designer__404069d0 .index_m_body__404069d0.index_m_pinned__404069d0 {\n  grid-template-columns: 324px 1fr 282px;\n}\n\n.index_m_canvas__404069d0 {\n  width: 100%;\n  background: white;\n  overflow: auto;\n}\n\n.btn {\n  height: 32px;\n  padding: 0 16px;\n  font-size: 12px;\n  font-weight: normal;\n}\n\n.pg-input {\n  padding: 4px 8px;\n  width: 100%;\n  border: 1px solid var(--gray-300);\n  border-radius: 2px 8px 8px;\n}",{}),Ln({isolateGlobalState:!0});e("Designer",Vi((function({className:e,onSave:t,docLink:r,hideTestPreview:i}){const{designer:o}=UA;return l((()=>(Object.assign(UA,{onSave:t}),RP()&&Object.assign(window,{_ctx:UA,__isDev__:!0}),()=>{Object.entries(UA).forEach((([,e])=>{"function"==typeof(null==e?void 0:e.reset)&&e.reset()}))})),[]),n.createElement(Ks,{backend:$l},n.createElement(IA.Provider,{value:UA},n.createElement("div",{className:ie(BA,e)},n.createElement(Wl,{docLink:r,hideTestPreview:i}),n.createElement("div",{className:ie(qA,{[YA]:o.panelOpen&&o.panelPinned})},n.createElement(iN,null),n.createElement(DA,{className:ie("my-8",zA)}),n.createElement(gA,null)))))})));const GA=["shared_state_property","api_result_property","constant_property"],FA=["shared_state_property","api_result_property"];var HA=e("DataBind",Vi((function({name:e,isRootProps:t,isLoopNode:r,isComposedNode:i,unBind:o}){const{designer:s,page:a}=WA();let l;if(r){const e=X(a.rawActiveElem,"iterableState.type");l=GA.includes(e)}else{const n=t?`${e}.type`:`props.${e}.type`,r=X(a.activeElem,n);l=FA.includes(r)}return n.createElement("div",{className:"inline-flex items-center"},n.createElement(b,{position:"top",label:l?"编辑绑定":"绑定变量"},n.createElement(y,{name:"code",color:"gray",clickable:!0,onClick:function(){const{exportName:n}=a.activeElem;"container"===n&&r?s.openComponentNodeBinding(e,r):s.openDataBinding(e,r,t)},className:ie("mr-8",l?"bg-blue-200":"")})),l&&n.createElement(b,{position:"top",label:"解绑"},n.createElement(y,{name:"link",clickable:!0,onClick:o||function(){if(r&&!i)a.unsetLoopNode(a.activeElemId);else if(i)a.unsetComposedNode(a.activeElemId);else{const n=t?e:`props.${e}`,{fallback:r}=X(a.activeElem,n,{});a.updateElemProperty(a.activeElem.id,n,{type:"constant_property",value:r})}}})))})));e("getStore",(()=>UA))}}}));
