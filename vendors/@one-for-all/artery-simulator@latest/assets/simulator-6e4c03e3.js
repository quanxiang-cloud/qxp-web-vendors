System.register(["react-dom","react","@one-for-all/artery-renderer","TEMPORARY_PATCH_FOR_ARTERY_PLUGINS","@one-for-all/elements-radar","@one-for-all/utils","@one-for-all/artery-utils","@one-for-all/artery-engine","@one-for-all/headless-ui","@one-for-all/icon"],function(){"use strict";var pn,p,wt,Zt,$,N,we,er,rr,dn,nr,ir,_n,te,pt,vn,be,ee,yn,mn,gn,wn,bn,Sn,En,In,An,or;return{setters:[function(y){pn=y.default},function(y){p=y.default,wt=y.useContext,Zt=y.useRef,$=y.useEffect,N=y.useState,we=y.useCallback,er=y.useMemo},function(y){rr=y.useInstantiateProps,dn=y.useNodeComponent,nr=y.useBootResult},function(y){ir=y.default},function(y){_n=y.default},function(y){te=y.logger},function(y){pt=y.byArbitrary,vn=y._appendTo,be=y._insertLeftSiblingTo,ee=y._insertRightSiblingTo,yn=y.travel,mn=y.parentIdsSeq,gn=y.keyPathById,wn=y.deleteByID,bn=y.insertAfter,Sn=y.getFirstLevelConcreteChildren,En=y.nodeHasChildNodes},function(y){In=y.generateNodeId},function(y){An=y.usePopper},function(y){or=y.default}],execute:function(){/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.

            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.

            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */var y=function(t,e){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},y(t,e)};function st(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");y(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Jo(t,e,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(c){try{f(n.next(c))}catch(h){u(h)}}function s(c){try{f(n.throw(c))}catch(h){u(h)}}function f(c){c.done?o(c.value):i(c.value).then(a,s)}f((n=n.apply(t,e||[])).next())})}function On(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(f){return function(c){return s([f,c])}}function s(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(c){f=[6,c],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function qt(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return o}function ct(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Dt(t){return this instanceof Dt?(this.v=t,this):new Dt(t)}function Xo(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(l){n[l]&&(i[l]=function(d){return new Promise(function(_,v){o.push([l,d,_,v])>1||a(l,d)})})}function a(l,d){try{s(n[l](d))}catch(_){h(o[0][3],_)}}function s(l){l.value instanceof Dt?Promise.resolve(l.value.v).then(f,c):h(o[0][2],l)}function f(l){a("next",l)}function c(l){a("throw",l)}function h(l,d){l(d),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Qo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof qt=="function"?qt(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(u){return new Promise(function(a,s){u=t[o](u),i(a,s,u.done,u.value)})}}function i(o,u,a,s){Promise.resolve(s).then(function(f){o({value:f,done:a})},u)}}function x(t){return typeof t=="function"}function xn(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var ur=xn(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Se(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var bt=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=qt(u),s=a.next();!s.done;s=a.next()){var f=s.value;f.remove(this)}}catch(v){e={error:v}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else u.remove(this);var c=this.initialTeardown;if(x(c))try{c()}catch(v){o=v instanceof ur?v.errors:[v]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=qt(h),d=l.next();!d.done;d=l.next()){var _=d.value;try{Pn(_)}catch(v){o=o!=null?o:[],v instanceof ur?o=ct(ct([],ft(o)),ft(v.errors)):o.push(v)}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}if(o)throw new ur(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Pn(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Se(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Se(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Mn=bt.EMPTY;function zn(t){return t instanceof bt||t&&"closed"in t&&x(t.remove)&&x(t.add)&&x(t.unsubscribe)}function Pn(t){x(t)?t():t.unsubscribe()}var Ee={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ie={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Ie.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ct([t,e],ft(r))):setTimeout.apply(void 0,ct([t,e],ft(r)))},clearTimeout:function(t){var e=Ie.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Nn(t){Ie.setTimeout(function(){throw t})}function re(){}var Zo=function(){return ar("C",void 0,void 0)}();function tu(t){return ar("E",void 0,t)}function eu(t){return ar("N",t,void 0)}function ar(t,e,r){return{kind:t,value:e,error:r}}var Ae=null;function Oe(t){if(Ee.useDeprecatedSynchronousErrorHandling){var e=!Ae;if(e&&(Ae={errorThrown:!1,error:null}),t(),e){var r=Ae,n=r.errorThrown,i=r.error;if(Ae=null,n)throw i}}else t()}var sr=function(t){st(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,zn(r)&&r.add(n)):n.destination=ou,n}return e.create=function(r,n,i){return new cr(r,n,i)},e.prototype.next=function(r){this.isStopped?hr(eu(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?hr(tu(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?hr(Zo,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(bt),ru=Function.prototype.bind;function fr(t,e){return ru.call(t,e)}var nu=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){xe(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){xe(n)}else xe(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){xe(r)}},t}(),cr=function(t){st(e,t);function e(r,n,i){var o=t.call(this)||this,u;if(x(r)||!r)u={next:r!=null?r:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var a;o&&Ee.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},u={next:r.next&&fr(r.next,a),error:r.error&&fr(r.error,a),complete:r.complete&&fr(r.complete,a)}):u=r}return o.destination=new nu(u),o}return e}(sr);function xe(t){Nn(t)}function iu(t){throw t}function hr(t,e){var r=Ee.onStoppedNotification;r&&Ie.setTimeout(function(){return r(t,e)})}var ou={closed:!0,next:re,error:iu,complete:re},lr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ne(t){return t}function uu(t){return t.length===0?ne:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var T=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=su(e)?e:new cr(e,r,n);return Oe(function(){var u=i,a=u.operator,s=u.source;o.add(a?a.call(o,s):s?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Tn(r),new r(function(i,o){var u=new cr({next:function(a){try{e(a)}catch(s){o(s),u.unsubscribe()}},error:o,complete:i});n.subscribe(u)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[lr]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uu(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Tn(e),new e(function(n,i){var o;r.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function Tn(t){var e;return(e=t!=null?t:Ee.Promise)!==null&&e!==void 0?e:Promise}function au(t){return t&&x(t.next)&&x(t.error)&&x(t.complete)}function su(t){return t&&t instanceof sr||au(t)&&zn(t)}function fu(t){return x(t==null?void 0:t.lift)}function J(t){return function(e){if(fu(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(t,e,r,n,i){return new cu(t,e,r,n,i)}var cu=function(t){st(e,t);function e(r,n,i,o,u,a){var s=t.call(this,r)||this;return s.onFinalize=u,s.shouldUnsubscribe=a,s._next=n?function(f){try{n(f)}catch(c){r.error(c)}}:t.prototype._next,s._error=o?function(f){try{o(f)}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=i?function(){try{i()}catch(f){r.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,s}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(sr),Rn={now:function(){return(Rn.delegate||performance).now()},delegate:void 0},Me={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=Me.delegate;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=e(function(o){r=void 0,t(o)});return new bt(function(){return r==null?void 0:r(i)})},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Me.delegate;return((r==null?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,ct([],ft(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Me.delegate;return((r==null?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,ct([],ft(t)))},delegate:void 0};function pr(t){return t?qn(t):hu}function qn(t){var e=Me.schedule;return new T(function(r){var n=new bt,i=t||Rn,o=i.now(),u=function(a){var s=i.now();r.next({timestamp:t?s:a,elapsed:s-o}),r.closed||n.add(e(u))};return n.add(e(u)),n})}var hu=qn(),lu=xn(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),St=function(t){st(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new Dn(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new lu},e.prototype.next=function(r){var n=this;Oe(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var u=qt(n.currentObservers),a=u.next();!a.done;a=u.next()){var s=a.value;s.next(r)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;Oe(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;Oe(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,u=i.isStopped,a=i.observers;return o||u?Mn:(this.currentObservers=null,a.push(r),new bt(function(){n.currentObservers=null,Se(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,u=n.isStopped;i?r.error(o):u&&r.complete()},e.prototype.asObservable=function(){var r=new T;return r.source=this,r},e.create=function(r,n){return new Dn(r,n)},e}(T),Dn=function(t){st(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:Mn},e}(St),z=function(t){st(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(St),Cn={now:function(){return(Cn.delegate||Date).now()},delegate:void 0},pu=function(t){st(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(bt),ze={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ze.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,ct([t,e],ft(r))):setInterval.apply(void 0,ct([t,e],ft(r)))},clearInterval:function(t){var e=ze.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},du=function(t){st(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),ze.setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;ze.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(u){i=!0,o=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Se(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(pu),$n=function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=Cn.now,t}(),_u=function(t){st(e,t);function e(r,n){n===void 0&&(n=$n.now);var i=t.call(this,r,n)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}($n),Ln=new _u(du),vu=Ln,yu=new T(function(t){return t.complete()});function kn(t){return t&&x(t.schedule)}function jn(t){return t[t.length-1]}function mu(t){return x(jn(t))?t.pop():void 0}function gu(t){return kn(jn(t))?t.pop():void 0}var Fn=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Bn(t){return x(t==null?void 0:t.then)}function Un(t){return x(t[lr])}function Yn(t){return Symbol.asyncIterator&&x(t==null?void 0:t[Symbol.asyncIterator])}function Kn(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function wu(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wn=wu();function Hn(t){return x(t==null?void 0:t[Wn])}function Gn(t){return Xo(this,arguments,function(){var r,n,i,o;return On(this,function(u){switch(u.label){case 0:r=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,Dt(r.read())];case 3:return n=u.sent(),i=n.value,o=n.done,o?[4,Dt(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,Dt(i)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Vn(t){return x(t==null?void 0:t.getReader)}function Ct(t){if(t instanceof T)return t;if(t!=null){if(Un(t))return bu(t);if(Fn(t))return Su(t);if(Bn(t))return Eu(t);if(Yn(t))return Jn(t);if(Hn(t))return Iu(t);if(Vn(t))return Au(t)}throw Kn(t)}function bu(t){return new T(function(e){var r=t[lr]();if(x(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Su(t){return new T(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function Eu(t){return new T(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Nn)})}function Iu(t){return new T(function(e){var r,n;try{for(var i=qt(t),o=i.next();!o.done;o=i.next()){var u=o.value;if(e.next(u),e.closed)return}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function Jn(t){return new T(function(e){Ou(t,e).catch(function(r){return e.error(r)})})}function Au(t){return Jn(Gn(t))}function Ou(t,e){var r,n,i,o;return Jo(this,void 0,void 0,function(){var u,a;return On(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),r=Qo(t),s.label=1;case 1:return[4,r.next()];case 2:if(n=s.sent(),!!n.done)return[3,4];if(u=n.value,e.next(u),e.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),i={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function dt(t,e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function Xn(t,e){return e===void 0&&(e=0),J(function(r,n){r.subscribe(B(n,function(i){return dt(n,t,function(){return n.next(i)},e)},function(){return dt(n,t,function(){return n.complete()},e)},function(i){return dt(n,t,function(){return n.error(i)},e)}))})}function Qn(t,e){return e===void 0&&(e=0),J(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function xu(t,e){return Ct(t).pipe(Qn(e),Xn(e))}function Mu(t,e){return Ct(t).pipe(Qn(e),Xn(e))}function zu(t,e){return new T(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function Pu(t,e){return new T(function(r){var n;return dt(r,e,function(){n=t[Wn](),dt(r,e,function(){var i,o,u;try{i=n.next(),o=i.value,u=i.done}catch(a){r.error(a);return}u?r.complete():r.next(o)},0,!0)}),function(){return x(n==null?void 0:n.return)&&n.return()}})}function Zn(t,e){if(!t)throw new Error("Iterable cannot be null");return new T(function(r){dt(r,e,function(){var n=t[Symbol.asyncIterator]();dt(r,e,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function Nu(t,e){return Zn(Gn(t),e)}function Tu(t,e){if(t!=null){if(Un(t))return xu(t,e);if(Fn(t))return zu(t,e);if(Bn(t))return Mu(t,e);if(Yn(t))return Zn(t,e);if(Hn(t))return Pu(t,e);if(Vn(t))return Nu(t,e)}throw Kn(t)}function dr(t,e){return e?Tu(t,e):Ct(t)}function Ru(t){return t instanceof Date&&!isNaN(t)}function A(t,e){return J(function(r,n){var i=0;r.subscribe(B(n,function(o){n.next(t.call(e,o,i++))}))})}var qu=Array.isArray;function Du(t,e){return qu(e)?t.apply(void 0,ct([],ft(e))):t(e)}function Cu(t){return A(function(e){return Du(t,e)})}var $u=Array.isArray,Lu=Object.getPrototypeOf,ku=Object.prototype,ju=Object.keys;function Fu(t){if(t.length===1){var e=t[0];if($u(e))return{args:e,keys:null};if(Bu(e)){var r=ju(e);return{args:r.map(function(n){return e[n]}),keys:r}}}return{args:t,keys:null}}function Bu(t){return t&&typeof t=="object"&&Lu(t)===ku}function Uu(t,e){return t.reduce(function(r,n,i){return r[n]=e[i],r},{})}function Yu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=gu(t),n=mu(t),i=Fu(t),o=i.args,u=i.keys;if(o.length===0)return dr([],r);var a=new T(Ku(o,r,u?function(s){return Uu(u,s)}:ne));return n?a.pipe(Cu(n)):a}function Ku(t,e,r){return r===void 0&&(r=ne),function(n){ti(e,function(){for(var i=t.length,o=new Array(i),u=i,a=i,s=function(c){ti(e,function(){var h=dr(t[c],e),l=!1;h.subscribe(B(n,function(d){o[c]=d,l||(l=!0,a--),a||n.next(r(o.slice()))},function(){--u||n.complete()}))},n)},f=0;f<i;f++)s(f)},n)}}function ti(t,e,r){t?dt(r,t,e):e()}function Wu(t,e,r){t===void 0&&(t=0),r===void 0&&(r=vu);var n=-1;return e!=null&&(kn(e)?r=e:n=e),new T(function(i){var o=Ru(t)?+t-r.now():t;o<0&&(o=0);var u=0;return r.schedule(function(){i.closed||(i.next(u++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function Hu(t,e){return t===void 0&&(t=0),e===void 0&&(e=Ln),t<0&&(t=0),Wu(t,t,e)}function Et(t,e){return J(function(r,n){var i=0;r.subscribe(B(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}function _r(t){return J(function(e,r){var n=!1,i=null,o=null,u=!1,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var f=i;i=null,r.next(f)}u&&r.complete()},s=function(){o=null,u&&r.complete()};e.subscribe(B(r,function(f){n=!0,i=f,o||Ct(t(f)).subscribe(o=B(r,a,s))},function(){u=!0,(!n||!o||o.closed)&&r.complete()}))})}function Gu(t){return t<=0?function(){return yu}:J(function(e,r){var n=0;e.subscribe(B(r,function(i){++n<=t&&(r.next(i),t<=n&&r.complete())}))})}function It(t,e){return e===void 0&&(e=ne),t=t!=null?t:Vu,J(function(r,n){var i,o=!0;r.subscribe(B(n,function(u){var a=e(u);(o||!t(i,a))&&(o=!1,i=a,n.next(u))}))})}function Vu(t,e){return t===e}function Ju(t,e){return J(Xu(t,e,"value"))}function Xu(t,e,r){var n=r==="index";return function(i,o){var u=0;i.subscribe(B(o,function(a){var s=u++;t.call(e,a,s,i)&&(o.next(n?s:a),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}function Qu(t,e){return J(function(r,n){var i=null,o=0,u=!1,a=function(){return u&&!i&&n.complete()};r.subscribe(B(n,function(s){i==null||i.unsubscribe();var f=0,c=o++;Ct(t(s,c)).subscribe(i=B(n,function(h){return n.next(e?e(s,h,c,f++):h)},function(){i=null,a()}))},function(){u=!0,a()}))})}function Zu(t){return J(function(e,r){Ct(t).subscribe(B(r,function(){return r.complete()},re)),!r.closed&&e.subscribe(r)})}function vr(t,e,r){var n=x(t)||e||r?{next:t,error:e,complete:r}:t;return n?J(function(i,o){var u;(u=n.subscribe)===null||u===void 0||u.call(n);var a=!0;i.subscribe(B(o,function(s){var f;(f=n.next)===null||f===void 0||f.call(n,s),o.next(s)},function(){var s;a=!1,(s=n.complete)===null||s===void 0||s.call(n),o.complete()},function(s){var f;a=!1,(f=n.error)===null||f===void 0||f.call(n,s),o.error(s)},function(){var s,f;a&&((s=n.unsubscribe)===null||s===void 0||s.call(n)),(f=n.finalize)===null||f===void 0||f.call(n)}))}):ne}var ie=p.createContext(new z(new Set));function ta(t,e){const r=new Set;return Array.from(t.entries()).map(([n,{relativeRect:i,raw:o}])=>{const u=n.dataset.simulatorNodeId;if(!u||r.has(u))return;r.add(u);const a=parseInt(n.dataset.simulatorNodeDepth||"0")||0,{x:s,y:f}=document.body.getBoundingClientRect();return{id:u,depth:a,raw:o,relativeRect:i,executor:n.dataset.simulatorNodeExecutor||"",absolutePosition:{height:i.height,width:i.width,x:e?i.x:i.x-s,y:e?i.y:i.y-f}}}).filter(n=>!!n)}function ei(t,e){const r=wt(ie),n=Zt();return $(()=>{const i=new _n(e);n.current=i,r.pipe(Et(u=>!!u.size)).subscribe(u=>i.track(Array.from(u)));const o=i.getReport$().pipe(A(u=>ta(u,e))).subscribe(t);return()=>{o.unsubscribe()}},[e]),n}function ea({nodes:t,ctx:e}){return t.length?p.createElement(p.Fragment,null,t.map((r,n)=>p.createElement(Ze,{key:`${r.id}-${n}`,node:r,ctx:e}))):null}var yr=ea,At=p.createContext(0);function ri(t,e){const r=e.value;e.next(r.add(t))}function mr(t,e){const r=e.value;r.delete(t),e.next(r)}var Pe="delete",b=5,W=1<<b,R=W-1,m={};function gr(){return{value:!1}}function H(t){t&&(t.value=!0)}function wr(){}function $t(t){return t.size===void 0&&(t.size=t.__iterate(ni)),t.size}function _t(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?$t(t)+e:e}function ni(){return!0}function Ne(t,e,r){return(t===0&&!oi(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function oe(t,e){return ii(t,e,0)}function Te(t,e){return ii(t,e,e)}function ii(t,e,r){return t===void 0?r:oi(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function oi(t){return t<0||t===0&&1/t===-1/0}var ui="@@__IMMUTABLE_ITERABLE__@@";function L(t){return Boolean(t&&t[ui])}var ai="@@__IMMUTABLE_KEYED__@@";function E(t){return Boolean(t&&t[ai])}var si="@@__IMMUTABLE_INDEXED__@@";function q(t){return Boolean(t&&t[si])}function Re(t){return E(t)||q(t)}var O=function(e){return L(e)?e:j(e)},X=function(t){function e(r){return E(r)?r:vt(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),Ot=function(t){function e(r){return q(r)?r:et(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),Lt=function(t){function e(r){return L(r)&&!Re(r)?r:Ft(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O);O.Keyed=X,O.Indexed=Ot,O.Set=Lt;var fi="@@__IMMUTABLE_SEQ__@@";function br(t){return Boolean(t&&t[fi])}var ra="@@__IMMUTABLE_RECORD__@@";function Sr(t){return Boolean(t&&t[ra])}function it(t){return L(t)||Sr(t)}var kt="@@__IMMUTABLE_ORDERED__@@";function Q(t){return Boolean(t&&t[kt])}var ue=0,Z=1,tt=2,Er=typeof Symbol=="function"&&Symbol.iterator,ci="@@iterator",Ir=Er||ci,g=function(e){this.next=e};g.prototype.toString=function(){return"[Iterator]"},g.KEYS=ue,g.VALUES=Z,g.ENTRIES=tt,g.prototype.inspect=g.prototype.toSource=function(){return this.toString()},g.prototype[Ir]=function(){return this};function I(t,e,r,n){var i=t===0?e:t===1?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function k(){return{value:void 0,done:!0}}function Ar(t){return Array.isArray(t)?!0:!!qe(t)}function hi(t){return t&&typeof t.next=="function"}function Or(t){var e=qe(t);return e&&e.call(t)}function qe(t){var e=t&&(Er&&t[Er]||t[ci]);if(typeof e=="function")return e}function na(t){var e=qe(t);return e&&e===t.entries}function ia(t){var e=qe(t);return e&&e===t.keys}var jt=Object.prototype.hasOwnProperty;function xr(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var j=function(t){function e(r){return r==null?zr():it(r)?r.toSeq():ua(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,i){var o=this._cache;if(o){for(var u=o.length,a=0;a!==u;){var s=o[i?u-++a:a++];if(n(s[1],s[0],this)===!1)break}return a}return this.__iterateUncached(n,i)},e.prototype.__iterator=function(n,i){var o=this._cache;if(o){var u=o.length,a=0;return new g(function(){if(a===u)return k();var s=o[i?u-++a:a++];return I(n,s[0],s[1])})}return this.__iteratorUncached(n,i)},e}(O),vt=function(t){function e(r){return r==null?zr().toKeyedSeq():L(r)?E(r)?r.toSeq():r.fromEntrySeq():Sr(r)?r.toSeq():pi(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(j),et=function(t){function e(r){return r==null?zr():L(r)?E(r)?r.entrySeq():r.toIndexedSeq():Sr(r)?r.toSeq().entrySeq():di(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(j),Ft=function(t){function e(r){return(L(r)&&!Re(r)?r:et(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(j);j.isSeq=br,j.Keyed=vt,j.Set=Ft,j.Indexed=et,j.prototype[fi]=!0;var xt=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return this.has(n)?this._array[_t(this,n)]:i},e.prototype.__iterate=function(n,i){for(var o=this._array,u=o.length,a=0;a!==u;){var s=i?u-++a:a++;if(n(o[s],s,this)===!1)break}return a},e.prototype.__iterator=function(n,i){var o=this._array,u=o.length,a=0;return new g(function(){if(a===u)return k();var s=i?u-++a:a++;return I(n,s,o[s])})},e}(et),Mr=function(t){function e(r){var n=Object.keys(r);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return i!==void 0&&!this.has(n)?i:this._object[n]},e.prototype.has=function(n){return jt.call(this._object,n)},e.prototype.__iterate=function(n,i){for(var o=this._object,u=this._keys,a=u.length,s=0;s!==a;){var f=u[i?a-++s:s++];if(n(o[f],f,this)===!1)break}return s},e.prototype.__iterator=function(n,i){var o=this._object,u=this._keys,a=u.length,s=0;return new g(function(){if(s===a)return k();var f=u[i?a-++s:s++];return I(n,f,o[f])})},e}(vt);Mr.prototype[kt]=!0;var oa=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,i){if(i)return this.cacheResult().__iterate(n,i);var o=this._collection,u=Or(o),a=0;if(hi(u))for(var s;!(s=u.next()).done&&n(s.value,a++,this)!==!1;);return a},e.prototype.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=this._collection,u=Or(o);if(!hi(u))return new g(k);var a=0;return new g(function(){var s=u.next();return s.done?s:I(n,a++,s.value)})},e}(et),li;function zr(){return li||(li=new xt([]))}function pi(t){var e=Pr(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new Mr(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function di(t){var e=Pr(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ua(t){var e=Pr(t);if(e)return na(t)?e.fromEntrySeq():ia(t)?e.toSetSeq():e;if(typeof t=="object")return new Mr(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function Pr(t){return xr(t)?new xt(t):Ar(t)?new oa(t):void 0}var _i="@@__IMMUTABLE_MAP__@@";function Nr(t){return Boolean(t&&t[_i])}function vi(t){return Nr(t)&&Q(t)}function yi(t){return Boolean(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function U(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(yi(t)&&yi(e)&&t.equals(e))}var ae=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,i=r&65535;return n*i+((e>>>16)*i+n*(r>>>16)<<16>>>0)|0};function De(t){return t>>>1&1073741824|t&3221225471}var aa=Object.prototype.valueOf;function Y(t){if(t==null)return mi(t);if(typeof t.hashCode=="function")return De(t.hashCode(t));var e=pa(t);if(e==null)return mi(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return sa(e);case"string":return e.length>da?fa(e):Tr(e);case"object":case"function":return ha(e);case"symbol":return ca(e);default:if(typeof e.toString=="function")return Tr(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function mi(t){return t===null?1108378658:1108378659}function sa(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return De(e)}function fa(t){var e=$r[t];return e===void 0&&(e=Tr(t),Cr===_a&&(Cr=0,$r={}),Cr++,$r[t]=e),e}function Tr(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return De(e)}function ca(t){var e=Si[t];return e!==void 0||(e=bi(),Si[t]=e),e}function ha(t){var e;if(Rr&&(e=qr.get(t),e!==void 0)||(e=t[Mt],e!==void 0)||!wi&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Mt],e!==void 0||(e=la(t),e!==void 0)))return e;if(e=bi(),Rr)qr.set(t,e);else{if(gi!==void 0&&gi(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(wi)Object.defineProperty(t,Mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Mt]=e;else if(t.nodeType!==void 0)t[Mt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var gi=Object.isExtensible,wi=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function la(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function pa(t){return t.valueOf!==aa&&typeof t.valueOf=="function"?t.valueOf(t):t}function bi(){var t=++Dr;return Dr&1073741824&&(Dr=0),t}var Rr=typeof WeakMap=="function",qr;Rr&&(qr=new WeakMap);var Si=Object.create(null),Dr=0,Mt="__immutablehash__";typeof Symbol=="function"&&(Mt=Symbol(Mt));var da=16,_a=255,Cr=0,$r={},Ce=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return this._iter.get(n,i)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,i=Lr(this,!0);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().reverse()}),i},e.prototype.map=function(n,i){var o=this,u=xi(this,n,i);return this._useKeys||(u.valueSeq=function(){return o._iter.toSeq().map(n,i)}),u},e.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u,a){return n(u,a,o)},i)},e.prototype.__iterator=function(n,i){return this._iter.__iterator(n,i)},e}(vt);Ce.prototype[kt]=!0;var Ei=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,i){var o=this,u=0;return i&&$t(this),this._iter.__iterate(function(a){return n(a,i?o.size-++u:u++,o)},i)},e.prototype.__iterator=function(n,i){var o=this,u=this._iter.__iterator(Z,i),a=0;return i&&$t(this),new g(function(){var s=u.next();return s.done?s:I(n,i?o.size-++a:a++,s.value,s)})},e}(et),Ii=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u){return n(u,u,o)},i)},e.prototype.__iterator=function(n,i){var o=this._iter.__iterator(Z,i);return new g(function(){var u=o.next();return u.done?u:I(n,u.value,u.value,u)})},e}(Ft),Ai=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,i){var o=this;return this._iter.__iterate(function(u){if(u){Ti(u);var a=L(u);return n(a?u.get(1):u[1],a?u.get(0):u[0],o)}},i)},e.prototype.__iterator=function(n,i){var o=this._iter.__iterator(Z,i);return new g(function(){for(;;){var u=o.next();if(u.done)return u;var a=u.value;if(a){Ti(a);var s=L(a);return I(n,s?a.get(0):a[0],s?a.get(1):a[1],u)}}})},e}(vt);Ei.prototype.cacheResult=Ce.prototype.cacheResult=Ii.prototype.cacheResult=Ai.prototype.cacheResult=jr;function Oi(t){var e=ot(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=jr,e.__iterateUncached=function(r,n){var i=this;return t.__iterate(function(o,u){return r(u,o,i)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===tt){var i=t.__iterator(r,n);return new g(function(){var o=i.next();if(!o.done){var u=o.value[0];o.value[0]=o.value[1],o.value[1]=u}return o})}return t.__iterator(r===Z?ue:Z,n)},e}function xi(t,e,r){var n=ot(t);return n.size=t.size,n.has=function(i){return t.has(i)},n.get=function(i,o){var u=t.get(i,m);return u===m?o:e.call(r,u,i,t)},n.__iterateUncached=function(i,o){var u=this;return t.__iterate(function(a,s,f){return i(e.call(r,a,s,f),s,u)!==!1},o)},n.__iteratorUncached=function(i,o){var u=t.__iterator(tt,o);return new g(function(){var a=u.next();if(a.done)return a;var s=a.value,f=s[0];return I(i,f,e.call(r,s[1],f,t),a)})},n}function Lr(t,e){var r=this,n=ot(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var i=Oi(t);return i.reverse=function(){return t.flip()},i}),n.get=function(i,o){return t.get(e?i:-1-i,o)},n.has=function(i){return t.has(e?i:-1-i)},n.includes=function(i){return t.includes(i)},n.cacheResult=jr,n.__iterate=function(i,o){var u=this,a=0;return o&&$t(t),t.__iterate(function(s,f){return i(s,e?f:o?u.size-++a:a++,u)},!o)},n.__iterator=function(i,o){var u=0;o&&$t(t);var a=t.__iterator(tt,!o);return new g(function(){var s=a.next();if(s.done)return s;var f=s.value;return I(i,e?f[0]:o?r.size-++u:u++,f[1],s)})},n}function Mi(t,e,r,n){var i=ot(t);return n&&(i.has=function(o){var u=t.get(o,m);return u!==m&&!!e.call(r,u,o,t)},i.get=function(o,u){var a=t.get(o,m);return a!==m&&e.call(r,a,o,t)?a:u}),i.__iterateUncached=function(o,u){var a=this,s=0;return t.__iterate(function(f,c,h){if(e.call(r,f,c,h))return s++,o(f,n?c:s-1,a)},u),s},i.__iteratorUncached=function(o,u){var a=t.__iterator(tt,u),s=0;return new g(function(){for(;;){var f=a.next();if(f.done)return f;var c=f.value,h=c[0],l=c[1];if(e.call(r,l,h,t))return I(o,n?h:s++,l,f)}})},i}function va(t,e,r){var n=Yt().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(u){return u+1})}),n.asImmutable()}function ya(t,e,r){var n=E(t),i=(Q(t)?lt():Yt()).asMutable();t.__iterate(function(u,a){i.update(e.call(r,u,a,t),function(s){return s=s||[],s.push(n?[a,u]:u),s})});var o=Ri(t);return i.map(function(u){return w(t,o(u))}).asImmutable()}function kr(t,e,r,n){var i=t.size;if(Ne(e,r,i))return t;var o=oe(e,i),u=Te(r,i);if(o!==o||u!==u)return kr(t.toSeq().cacheResult(),e,r,n);var a=u-o,s;a===a&&(s=a<0?0:a);var f=ot(t);return f.size=s===0?s:t.size&&s||void 0,!n&&br(t)&&s>=0&&(f.get=function(c,h){return c=_t(this,c),c>=0&&c<s?t.get(c+o,h):h}),f.__iterateUncached=function(c,h){var l=this;if(s===0)return 0;if(h)return this.cacheResult().__iterate(c,h);var d=0,_=!0,v=0;return t.__iterate(function(K,at){if(!(_&&(_=d++<o)))return v++,c(K,n?at:v-1,l)!==!1&&v!==s}),v},f.__iteratorUncached=function(c,h){if(s!==0&&h)return this.cacheResult().__iterator(c,h);if(s===0)return new g(k);var l=t.__iterator(c,h),d=0,_=0;return new g(function(){for(;d++<o;)l.next();if(++_>s)return k();var v=l.next();return n||c===Z||v.done?v:c===ue?I(c,_-1,void 0,v):I(c,_-1,v.value[1],v)})},f}function ma(t,e,r){var n=ot(t);return n.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var a=0;return t.__iterate(function(s,f,c){return e.call(r,s,f,c)&&++a&&i(s,f,u)}),a},n.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(tt,o),s=!0;return new g(function(){if(!s)return k();var f=a.next();if(f.done)return f;var c=f.value,h=c[0],l=c[1];return e.call(r,l,h,u)?i===tt?f:I(i,h,l,f):(s=!1,k())})},n}function zi(t,e,r,n){var i=ot(t);return i.__iterateUncached=function(o,u){var a=this;if(u)return this.cacheResult().__iterate(o,u);var s=!0,f=0;return t.__iterate(function(c,h,l){if(!(s&&(s=e.call(r,c,h,l))))return f++,o(c,n?h:f-1,a)}),f},i.__iteratorUncached=function(o,u){var a=this;if(u)return this.cacheResult().__iterator(o,u);var s=t.__iterator(tt,u),f=!0,c=0;return new g(function(){var h,l,d;do{if(h=s.next(),h.done)return n||o===Z?h:o===ue?I(o,c++,void 0,h):I(o,c++,h.value[1],h);var _=h.value;l=_[0],d=_[1],f&&(f=e.call(r,d,l,a))}while(f);return o===tt?h:I(o,l,d,h)})},i}function ga(t,e){var r=E(t),n=[t].concat(e).map(function(u){return L(u)?r&&(u=X(u)):u=r?pi(u):di(Array.isArray(u)?u:[u]),u}).filter(function(u){return u.size!==0});if(n.length===0)return t;if(n.length===1){var i=n[0];if(i===t||r&&E(i)||q(t)&&q(i))return i}var o=new xt(n);return r?o=o.toKeyedSeq():q(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=n.reduce(function(u,a){if(u!==void 0){var s=a.size;if(s!==void 0)return u+s}},0),o}function Pi(t,e,r){var n=ot(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var u=0,a=!1;function s(f,c){f.__iterate(function(h,l){return(!e||c<e)&&L(h)?s(h,c+1):(u++,i(h,r?l:u-1,n)===!1&&(a=!0)),!a},o)}return s(t,0),u},n.__iteratorUncached=function(i,o){if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(i,o),a=[],s=0;return new g(function(){for(;u;){var f=u.next();if(f.done!==!1){u=a.pop();continue}var c=f.value;if(i===tt&&(c=c[1]),(!e||a.length<e)&&L(c))a.push(u),u=c.__iterator(i,o);else return r?f:I(i,s++,c,f)}return k()})},n}function wa(t,e,r){var n=Ri(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}function ba(t,e){var r=ot(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,i){var o=this,u=0;return t.__iterate(function(a){return(!u||n(e,u++,o)!==!1)&&n(a,u++,o)!==!1},i),u},r.__iteratorUncached=function(n,i){var o=t.__iterator(Z,i),u=0,a;return new g(function(){return(!a||u%2)&&(a=o.next(),a.done)?a:u%2?I(n,u++,e):I(n,u++,a.value,a)})},r}function Bt(t,e,r){e||(e=qi);var n=E(t),i=0,o=t.toSeq().map(function(u,a){return[a,u,i++,r?r(u,a,t):u]}).valueSeq().toArray();return o.sort(function(u,a){return e(u[3],a[3])||u[2]-a[2]}).forEach(n?function(u,a){o[a].length=2}:function(u,a){o[a]=u[1]}),n?vt(o):q(t)?et(o):Ft(o)}function $e(t,e,r){if(e||(e=qi),r){var n=t.toSeq().map(function(i,o){return[i,r(i,o,t)]}).reduce(function(i,o){return Ni(e,i[1],o[1])?o:i});return n&&n[0]}return t.reduce(function(i,o){return Ni(e,i,o)?o:i})}function Ni(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function Le(t,e,r,n){var i=ot(t),o=new xt(r).map(function(u){return u.size});return i.size=n?o.max():o.min(),i.__iterate=function(u,a){for(var s=this.__iterator(Z,a),f,c=0;!(f=s.next()).done&&u(f.value,c++,this)!==!1;);return c},i.__iteratorUncached=function(u,a){var s=r.map(function(h){return h=O(h),Or(a?h.reverse():h)}),f=0,c=!1;return new g(function(){var h;return c||(h=s.map(function(l){return l.next()}),c=n?h.every(function(l){return l.done}):h.some(function(l){return l.done})),c?k():I(u,f++,e.apply(null,h.map(function(l){return l.value})))})},i}function w(t,e){return t===e?t:br(t)?e:t.constructor(e)}function Ti(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ri(t){return E(t)?X:q(t)?Ot:Lt}function ot(t){return Object.create((E(t)?vt:q(t)?et:Ft).prototype)}function jr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):j.prototype.cacheResult.call(this)}function qi(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function ut(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function Di(t,e){if(!t)throw new Error(e)}function G(t){Di(t!==1/0,"Cannot perform this action with an infinite size.")}function Ci(t){if(xr(t)&&typeof t!="string")return t;if(Q(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var Sa=Object.prototype.toString;function $i(t){if(!t||typeof t!="object"||Sa.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function yt(t){return typeof t=="object"&&(it(t)||Array.isArray(t)||$i(t))}function ke(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Ea(t,e){return it(t)?t.has(e):yt(t)&&jt.call(t,e)}function Li(t,e,r){return it(t)?t.get(e,r):Ea(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function je(t){if(Array.isArray(t))return ut(t);var e={};for(var r in t)jt.call(t,r)&&(e[r]=t[r]);return e}function Ia(t,e){if(!yt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(it(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!jt.call(t,e))return t;var r=je(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Aa(t,e,r){if(!yt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(it(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(jt.call(t,e)&&r===t[e])return t;var n=je(t);return n[e]=r,n}function Ut(t,e,r,n){n||(n=r,r=void 0);var i=ki(it(t),t,Ci(e),0,r,n);return i===m?r:i}function ki(t,e,r,n,i,o){var u=e===m;if(n===r.length){var a=u?i:e,s=o(a);return s===a?e:s}if(!u&&!yt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(ke)+"]: "+e);var f=r[n],c=u?m:Li(e,f,m),h=ki(c===m?t:it(c),c,r,n+1,i,o);return h===c?e:h===m?Ia(e,f):Aa(u?t?rt():{}:e,f,h)}function Oa(t,e,r){return Ut(t,e,m,function(){return r})}function ji(t,e){return Oa(this,t,e)}function Fi(t,e){return Ut(t,e,function(){return m})}function Bi(t){return Fi(this,t)}function Ui(t,e,r,n){return Ut(t,[e],r,n)}function Yi(t,e,r){return arguments.length===1?t(this):Ui(this,t,e,r)}function Ki(t,e,r){return Ut(this,t,e,r)}function xa(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Wi(this,t)}function Ma(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return Wi(this,e,t)}function Wi(t,e,r){for(var n=[],i=0;i<e.length;i++){var o=X(e[i]);o.size!==0&&n.push(o)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(u){for(var a=r?function(f,c){Ui(u,c,m,function(h){return h===m?f:r(h,f,c)})}:function(f,c){u.set(c,f)},s=0;s<n.length;s++)n[s].forEach(a)})}function Fr(t,e,r){return Br(t,e,za(r))}function Br(t,e,r){if(!yt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(it(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,o=n?Ot:X,u=n?function(s){i===t&&(i=je(i)),i.push(s)}:function(s,f){var c=jt.call(i,f),h=c&&r?r(i[f],s,f):s;(!c||h!==i[f])&&(i===t&&(i=je(i)),i[f]=h)},a=0;a<e.length;a++)o(e[a]).forEach(u);return i}function za(t){function e(r,n,i){return yt(r)&&yt(n)&&Pa(r,n)?Br(r,[n],e):t?t(r,n,i):n}return e}function Pa(t,e){var r=j(t),n=j(e);return q(r)===q(n)&&E(r)===E(n)}function Na(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Fr(this,t)}function Ta(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Fr(this,e,t)}function Hi(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ut(this,t,rt(),function(n){return Br(n,e)})}function Gi(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ut(this,t,rt(),function(n){return Fr(n,e)})}function Fe(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Be(){return this.__ownerID?this:this.__ensureOwner(new wr)}function Ue(){return this.__ensureOwner()}function Ur(){return this.__altered}var Yt=function(t){function e(r){return r==null?rt():Nr(r)&&!Q(r)?r:rt().withMutations(function(n){var i=t(r);G(i.size),i.forEach(function(o,u){return n.set(u,o)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return rt().withMutations(function(o){for(var u=0;u<n.length;u+=2){if(u+1>=n.length)throw new Error("Missing value for key: "+n[u]);o.set(n[u],n[u+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,i){return this._root?this._root.get(0,void 0,n,i):i},e.prototype.set=function(n,i){return Xi(this,n,i)},e.prototype.remove=function(n){return Xi(this,n,m)},e.prototype.deleteAll=function(n){var i=O(n);return i.size===0?this:this.withMutations(function(o){i.forEach(function(u){return o.remove(u)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):rt()},e.prototype.sort=function(n){return lt(Bt(this,n))},e.prototype.sortBy=function(n,i){return lt(Bt(this,i,n))},e.prototype.map=function(n,i){var o=this;return this.withMutations(function(u){u.forEach(function(a,s){u.set(s,n.call(i,a,s,o))})})},e.prototype.__iterator=function(n,i){return new Ra(this,n,i)},e.prototype.__iterate=function(n,i){var o=this,u=0;return this._root&&this._root.iterate(function(a){return u++,n(a[1],a[0],o)},i),u},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Kr(this.size,this._root,n,this.__hash):this.size===0?rt():(this.__ownerID=n,this.__altered=!1,this)},e}(X);Yt.isMap=Nr;var S=Yt.prototype;S[_i]=!0,S[Pe]=S.remove,S.removeAll=S.deleteAll,S.setIn=ji,S.removeIn=S.deleteIn=Bi,S.update=Yi,S.updateIn=Ki,S.merge=S.concat=xa,S.mergeWith=Ma,S.mergeDeep=Na,S.mergeDeepWith=Ta,S.mergeIn=Hi,S.mergeDeepIn=Gi,S.withMutations=Fe,S.wasAltered=Ur,S.asImmutable=Ue,S["@@transducer/init"]=S.asMutable=Be,S["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},S["@@transducer/result"]=function(t){return t.asImmutable()};var se=function(e,r){this.ownerID=e,this.entries=r};se.prototype.get=function(e,r,n,i){for(var o=this.entries,u=0,a=o.length;u<a;u++)if(U(n,o[u][0]))return o[u][1];return i},se.prototype.update=function(e,r,n,i,o,u,a){for(var s=o===m,f=this.entries,c=0,h=f.length;c<h&&!U(i,f[c][0]);c++);var l=c<h;if(l?f[c][1]===o:s)return this;if(H(a),(s||!l)&&H(u),!(s&&f.length===1)){if(!l&&!s&&f.length>=ka)return qa(e,f,i,o);var d=e&&e===this.ownerID,_=d?f:ut(f);return l?s?c===h-1?_.pop():_[c]=_.pop():_[c]=[i,o]:_.push([i,o]),d?(this.entries=_,this):new se(e,_)}};var Kt=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};Kt.prototype.get=function(e,r,n,i){r===void 0&&(r=Y(n));var o=1<<((e===0?r:r>>>e)&R),u=this.bitmap;return(u&o)===0?i:this.nodes[Zi(u&o-1)].get(e+b,r,n,i)},Kt.prototype.update=function(e,r,n,i,o,u,a){n===void 0&&(n=Y(i));var s=(r===0?n:n>>>r)&R,f=1<<s,c=this.bitmap,h=(c&f)!==0;if(!h&&o===m)return this;var l=Zi(c&f-1),d=this.nodes,_=h?d[l]:void 0,v=Wr(_,e,r+b,n,i,o,u,a);if(v===_)return this;if(!h&&v&&d.length>=ja)return Ca(e,d,c,s,v);if(h&&!v&&d.length===2&&Qi(d[l^1]))return d[l^1];if(h&&v&&d.length===1&&Qi(v))return v;var K=e&&e===this.ownerID,at=h?v?c:c^f:c|f,Rt=h?v?to(d,l,v,K):La(d,l,K):$a(d,l,v,K);return K?(this.bitmap=at,this.nodes=Rt,this):new Kt(e,at,Rt)};var fe=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};fe.prototype.get=function(e,r,n,i){r===void 0&&(r=Y(n));var o=(e===0?r:r>>>e)&R,u=this.nodes[o];return u?u.get(e+b,r,n,i):i},fe.prototype.update=function(e,r,n,i,o,u,a){n===void 0&&(n=Y(i));var s=(r===0?n:n>>>r)&R,f=o===m,c=this.nodes,h=c[s];if(f&&!h)return this;var l=Wr(h,e,r+b,n,i,o,u,a);if(l===h)return this;var d=this.count;if(!h)d++;else if(!l&&(d--,d<Fa))return Da(e,c,d,s);var _=e&&e===this.ownerID,v=to(c,s,l,_);return _?(this.count=d,this.nodes=v,this):new fe(e,d,v)};var Wt=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Wt.prototype.get=function(e,r,n,i){for(var o=this.entries,u=0,a=o.length;u<a;u++)if(U(n,o[u][0]))return o[u][1];return i},Wt.prototype.update=function(e,r,n,i,o,u,a){n===void 0&&(n=Y(i));var s=o===m;if(n!==this.keyHash)return s?this:(H(a),H(u),Hr(this,e,r,n,[i,o]));for(var f=this.entries,c=0,h=f.length;c<h&&!U(i,f[c][0]);c++);var l=c<h;if(l?f[c][1]===o:s)return this;if(H(a),(s||!l)&&H(u),s&&h===2)return new ht(e,this.keyHash,f[c^1]);var d=e&&e===this.ownerID,_=d?f:ut(f);return l?s?c===h-1?_.pop():_[c]=_.pop():_[c]=[i,o]:_.push([i,o]),d?(this.entries=_,this):new Wt(e,this.keyHash,_)};var ht=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};ht.prototype.get=function(e,r,n,i){return U(n,this.entry[0])?this.entry[1]:i},ht.prototype.update=function(e,r,n,i,o,u,a){var s=o===m,f=U(i,this.entry[0]);if(f?o===this.entry[1]:s)return this;if(H(a),s){H(u);return}return f?e&&e===this.ownerID?(this.entry[1]=o,this):new ht(e,this.keyHash,[i,o]):(H(u),Hr(this,e,r,Y(i),[i,o]))},se.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(t(r[e?i-n:n])===!1)return!1},Kt.prototype.iterate=fe.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&o.iterate(t,e)===!1)return!1}},ht.prototype.iterate=function(t,e){return t(this.entry)};var Ra=function(t){function e(r,n,i){this._type=n,this._reverse=i,this._stack=r._root&&Vi(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,i=this._stack;i;){var o=i.node,u=i.index++,a=void 0;if(o.entry){if(u===0)return Yr(n,o.entry)}else if(o.entries){if(a=o.entries.length-1,u<=a)return Yr(n,o.entries[this._reverse?a-u:u])}else if(a=o.nodes.length-1,u<=a){var s=o.nodes[this._reverse?a-u:u];if(s){if(s.entry)return Yr(n,s.entry);i=this._stack=Vi(s,i)}continue}i=this._stack=this._stack.__prev}return k()},e}(g);function Yr(t,e){return I(t,e[0],e[1])}function Vi(t,e){return{node:t,index:0,__prev:e}}function Kr(t,e,r,n){var i=Object.create(S);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var Ji;function rt(){return Ji||(Ji=Kr(0))}function Xi(t,e,r){var n,i;if(t._root){var o=gr(),u=gr();if(n=Wr(t._root,t.__ownerID,0,void 0,e,r,o,u),!u.value)return t;i=t.size+(o.value?r===m?-1:1:0)}else{if(r===m)return t;i=1,n=new se(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Kr(i,n):rt()}function Wr(t,e,r,n,i,o,u,a){return t?t.update(e,r,n,i,o,u,a):o===m?t:(H(a),H(u),new ht(e,n,[i,o]))}function Qi(t){return t.constructor===ht||t.constructor===Wt}function Hr(t,e,r,n,i){if(t.keyHash===n)return new Wt(e,n,[t.entry,i]);var o=(r===0?t.keyHash:t.keyHash>>>r)&R,u=(r===0?n:n>>>r)&R,a,s=o===u?[Hr(t,e,r+b,n,i)]:(a=new ht(e,n,i),o<u?[t,a]:[a,t]);return new Kt(e,1<<o|1<<u,s)}function qa(t,e,r,n){t||(t=new wr);for(var i=new ht(t,Y(r),[r,n]),o=0;o<e.length;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}function Da(t,e,r,n){for(var i=0,o=0,u=new Array(r),a=0,s=1,f=e.length;a<f;a++,s<<=1){var c=e[a];c!==void 0&&a!==n&&(i|=s,u[o++]=c)}return new Kt(t,i,u)}function Ca(t,e,r,n,i){for(var o=0,u=new Array(W),a=0;r!==0;a++,r>>>=1)u[a]=r&1?e[o++]:void 0;return u[n]=i,new fe(t,o+1,u)}function Zi(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function to(t,e,r,n){var i=n?t:ut(t);return i[e]=r,i}function $a(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),u=0,a=0;a<i;a++)a===e?(o[a]=r,u=-1):o[a]=t[a+u];return o}function La(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,u=0;u<n;u++)u===e&&(o=1),i[u]=t[u+o];return i}var ka=W/4,ja=W/2,Fa=W/4,eo="@@__IMMUTABLE_LIST__@@";function ro(t){return Boolean(t&&t[eo])}var Gr=function(t){function e(r){var n=Ye();if(r==null)return n;if(ro(r))return r;var i=t(r),o=i.size;return o===0?n:(G(o),o>0&&o<W?he(0,o,b,null,new mt(i.toArray())):n.withMutations(function(u){u.setSize(o),i.forEach(function(a,s){return u.set(s,a)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,i){if(n=_t(this,n),n>=0&&n<this.size){n+=this._origin;var o=oo(this,n);return o&&o.array[n&R]}return i},e.prototype.set=function(n,i){return Ba(this,n,i)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,i){return this.splice(n,0,i)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=b,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Ye()},e.prototype.push=function(){var n=arguments,i=this.size;return this.withMutations(function(o){gt(o,0,i+n.length);for(var u=0;u<n.length;u++)o.set(i+u,n[u])})},e.prototype.pop=function(){return gt(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(i){gt(i,-n.length);for(var o=0;o<n.length;o++)i.set(o,n[o])})},e.prototype.shift=function(){return gt(this,1)},e.prototype.concat=function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++){var u=n[o],a=t(typeof u!="string"&&Ar(u)?u:[u]);a.size!==0&&i.push(a)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(s){i.forEach(function(f){return f.forEach(function(c){return s.push(c)})})})},e.prototype.setSize=function(n){return gt(this,0,n)},e.prototype.map=function(n,i){var o=this;return this.withMutations(function(u){for(var a=0;a<o.size;a++)u.set(a,n.call(i,u.get(a),a,o))})},e.prototype.slice=function(n,i){var o=this.size;return Ne(n,i,o)?this:gt(this,oe(n,o),Te(i,o))},e.prototype.__iterator=function(n,i){var o=i?this.size:0,u=no(this,i);return new g(function(){var a=u();return a===ce?k():I(n,i?--o:o++,a)})},e.prototype.__iterate=function(n,i){for(var o=i?this.size:0,u=no(this,i),a;(a=u())!==ce&&n(a,i?--o:o++,this)!==!1;);return o},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?he(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Ye():(this.__ownerID=n,this.__altered=!1,this)},e}(Ot);Gr.isList=ro;var M=Gr.prototype;M[eo]=!0,M[Pe]=M.remove,M.merge=M.concat,M.setIn=ji,M.deleteIn=M.removeIn=Bi,M.update=Yi,M.updateIn=Ki,M.mergeIn=Hi,M.mergeDeepIn=Gi,M.withMutations=Fe,M.wasAltered=Ur,M.asImmutable=Ue,M["@@transducer/init"]=M.asMutable=Be,M["@@transducer/step"]=function(t,e){return t.push(e)},M["@@transducer/result"]=function(t){return t.asImmutable()};var mt=function(e,r){this.array=e,this.ownerID=r};mt.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var i=n>>>r&R;if(i>=this.array.length)return new mt([],e);var o=i===0,u;if(r>0){var a=this.array[i];if(u=a&&a.removeBefore(e,r-b,n),u===a&&o)return this}if(o&&!u)return this;var s=Ht(this,e);if(!o)for(var f=0;f<i;f++)s.array[f]=void 0;return u&&(s.array[i]=u),s},mt.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var i=n-1>>>r&R;if(i>=this.array.length)return this;var o;if(r>0){var u=this.array[i];if(o=u&&u.removeAfter(e,r-b,n),o===u&&i===this.array.length-1)return this}var a=Ht(this,e);return a.array.splice(i+1),o&&(a.array[i]=o),a};var ce={};function no(t,e){var r=t._origin,n=t._capacity,i=le(n),o=t._tail;return u(t._root,t._level,0);function u(f,c,h){return c===0?a(f,h):s(f,c,h)}function a(f,c){var h=c===i?o&&o.array:f&&f.array,l=c>r?0:r-c,d=n-c;return d>W&&(d=W),function(){if(l===d)return ce;var _=e?--d:l++;return h&&h[_]}}function s(f,c,h){var l,d=f&&f.array,_=h>r?0:r-h>>c,v=(n-h>>c)+1;return v>W&&(v=W),function(){for(;;){if(l){var K=l();if(K!==ce)return K;l=null}if(_===v)return ce;var at=e?--v:_++;l=u(d&&d[at],c-b,h+(at<<c))}}}}function he(t,e,r,n,i,o,u){var a=Object.create(M);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=u,a.__altered=!1,a}var io;function Ye(){return io||(io=he(0,0,b))}function Ba(t,e,r){if(e=_t(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(u){e<0?gt(u,e).set(0,r):gt(u,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=gr();return e>=le(t._capacity)?n=Vr(n,t.__ownerID,0,e,r,o):i=Vr(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):he(t._origin,t._capacity,t._level,i,n):t}function Vr(t,e,r,n,i,o){var u=n>>>r&R,a=t&&u<t.array.length;if(!a&&i===void 0)return t;var s;if(r>0){var f=t&&t.array[u],c=Vr(f,e,r-b,n,i,o);return c===f?t:(s=Ht(t,e),s.array[u]=c,s)}return a&&t.array[u]===i?t:(o&&H(o),s=Ht(t,e),i===void 0&&u===s.array.length-1?s.array.pop():s.array[u]=i,s)}function Ht(t,e){return e&&t&&e===t.ownerID?t:new mt(t?t.array.slice():[],e)}function oo(t,e){if(e>=le(t._capacity))return t._tail;if(e<1<<t._level+b){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&R],n-=b;return r}}function gt(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new wr,i=t._origin,o=t._capacity,u=i+e,a=r===void 0?o:r<0?o+r:i+r;if(u===i&&a===o)return t;if(u>=a)return t.clear();for(var s=t._level,f=t._root,c=0;u+c<0;)f=new mt(f&&f.array.length?[void 0,f]:[],n),s+=b,c+=1<<s;c&&(u+=c,i+=c,a+=c,o+=c);for(var h=le(o),l=le(a);l>=1<<s+b;)f=new mt(f&&f.array.length?[f]:[],n),s+=b;var d=t._tail,_=l<h?oo(t,a-1):l>h?new mt([],n):d;if(d&&l>h&&u<o&&d.array.length){f=Ht(f,n);for(var v=f,K=s;K>b;K-=b){var at=h>>>K&R;v=v.array[at]=Ht(v.array[at],n)}v.array[h>>>b&R]=d}if(a<o&&(_=_&&_.removeAfter(n,0,a)),u>=l)u-=l,a-=l,s=b,f=null,_=_&&_.removeBefore(n,0,u);else if(u>i||l<h){for(c=0;f;){var Rt=u>>>s&R;if(Rt!==l>>>s&R)break;Rt&&(c+=(1<<s)*Rt),s-=b,f=f.array[Rt]}f&&u>i&&(f=f.removeBefore(n,s,u-c)),f&&l<h&&(f=f.removeAfter(n,s,l-c)),c&&(u-=c,a-=c)}return t.__ownerID?(t.size=a-u,t._origin=u,t._capacity=a,t._level=s,t._root=f,t._tail=_,t.__hash=void 0,t.__altered=!0,t):he(u,a,s,f,_)}function le(t){return t<W?0:t-1>>>b<<b}var lt=function(t){function e(r){return r==null?pe():vi(r)?r:pe().withMutations(function(n){var i=X(r);G(i.size),i.forEach(function(o,u){return n.set(u,o)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,i){var o=this._map.get(n);return o!==void 0?this._list.get(o)[1]:i},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):pe()},e.prototype.set=function(n,i){return ao(this,n,i)},e.prototype.remove=function(n){return ao(this,n,m)},e.prototype.__iterate=function(n,i){var o=this;return this._list.__iterate(function(u){return u&&n(u[1],u[0],o)},i)},e.prototype.__iterator=function(n,i){return this._list.fromEntrySeq().__iterator(n,i)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n),o=this._list.__ensureOwner(n);return n?Jr(i,o,n,this.__hash):this.size===0?pe():(this.__ownerID=n,this.__altered=!1,this._map=i,this._list=o,this)},e}(Yt);lt.isOrderedMap=vi,lt.prototype[kt]=!0,lt.prototype[Pe]=lt.prototype.remove;function Jr(t,e,r,n){var i=Object.create(lt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var uo;function pe(){return uo||(uo=Jr(rt(),Ye()))}function ao(t,e,r){var n=t._map,i=t._list,o=n.get(e),u=o!==void 0,a,s;if(r===m){if(!u)return t;i.size>=W&&i.size>=n.size*2?(s=i.filter(function(f,c){return f!==void 0&&o!==c}),a=s.toKeyedSeq().map(function(f){return f[0]}).flip().toMap(),t.__ownerID&&(a.__ownerID=s.__ownerID=t.__ownerID)):(a=n.remove(e),s=o===i.size-1?i.pop():i.set(o,void 0))}else if(u){if(r===i.get(o)[1])return t;a=n,s=i.set(o,[e,r])}else a=n.set(e,i.size),s=i.set(i.size,[e,r]);return t.__ownerID?(t.size=a.size,t._map=a,t._list=s,t.__hash=void 0,t.__altered=!0,t):Jr(a,s)}var so="@@__IMMUTABLE_STACK__@@";function Xr(t){return Boolean(t&&t[so])}var Qr=function(t){function e(r){return r==null?Ke():Xr(r)?r:Ke().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,i){var o=this._head;for(n=_t(this,n);o&&n--;)o=o.next;return o?o.value:i},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,o=this._head,u=arguments.length-1;u>=0;u--)o={value:n[u],next:o};return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):de(i,o)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&Xr(n))return n;G(n.size);var i=this.size,o=this._head;return n.__iterate(function(u){i++,o={value:u,next:o}},!0),this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):de(i,o)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ke()},e.prototype.slice=function(n,i){if(Ne(n,i,this.size))return this;var o=oe(n,this.size),u=Te(i,this.size);if(u!==this.size)return t.prototype.slice.call(this,n,i);for(var a=this.size-o,s=this._head;o--;)s=s.next;return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):de(a,s)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?de(this.size,this._head,n,this.__hash):this.size===0?Ke():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,i){var o=this;if(i)return new xt(this.toArray()).__iterate(function(s,f){return n(s,f,o)},i);for(var u=0,a=this._head;a&&n(a.value,u++,this)!==!1;)a=a.next;return u},e.prototype.__iterator=function(n,i){if(i)return new xt(this.toArray()).__iterator(n,i);var o=0,u=this._head;return new g(function(){if(u){var a=u.value;return u=u.next,I(n,o++,a)}return k()})},e}(Ot);Qr.isStack=Xr;var D=Qr.prototype;D[so]=!0,D.shift=D.pop,D.unshift=D.push,D.unshiftAll=D.pushAll,D.withMutations=Fe,D.wasAltered=Ur,D.asImmutable=Ue,D["@@transducer/init"]=D.asMutable=Be,D["@@transducer/step"]=function(t,e){return t.unshift(e)},D["@@transducer/result"]=function(t){return t.asImmutable()};function de(t,e,r,n){var i=Object.create(D);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var fo;function Ke(){return fo||(fo=de(0))}var co="@@__IMMUTABLE_SET__@@";function Zr(t){return Boolean(t&&t[co])}function ho(t){return Zr(t)&&Q(t)}function lo(t,e){if(t===e)return!0;if(!L(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||E(t)!==E(e)||q(t)!==q(e)||Q(t)!==Q(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!Re(t);if(Q(t)){var n=t.entries();return e.every(function(s,f){var c=n.next().value;return c&&U(c[1],s)&&(r||U(c[0],f))})&&n.next().done}var i=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,a=e.__iterate(function(s,f){if(r?!t.has(s):i?!U(s,t.get(f,m)):!U(t.get(f,m),s))return u=!1,!1});return u&&t.size===a}function zt(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function tn(t){if(!t||typeof t!="object")return t;if(!L(t)){if(!yt(t))return t;t=j(t)}if(E(t)){var e={};return t.__iterate(function(n,i){e[i]=tn(n)}),e}var r=[];return t.__iterate(function(n){r.push(tn(n))}),r}var _e=function(t){function e(r){return r==null?ve():Zr(r)&&!Q(r)?r:ve().withMutations(function(n){var i=t(r);G(i.size),i.forEach(function(o){return n.add(o)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(X(n).keySeq())},e.intersect=function(n){return n=O(n).toArray(),n.length?P.intersect.apply(e(n.pop()),n):ve()},e.union=function(n){return n=O(n).toArray(),n.length?P.union.apply(e(n.pop()),n):ve()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return We(this,this._map.set(n,n))},e.prototype.remove=function(n){return We(this,this._map.remove(n))},e.prototype.clear=function(){return We(this,this._map.clear())},e.prototype.map=function(n,i){var o=this,u=!1,a=We(this,this._map.mapEntries(function(s){var f=s[1],c=n.call(i,f,f,o);return c!==f&&(u=!0),[c,c]},i));return u?a:this},e.prototype.union=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return n=n.filter(function(o){return o.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(o){for(var u=0;u<n.length;u++)t(n[u]).forEach(function(a){return o.add(a)})})},e.prototype.intersect=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(u){return t(u)});var o=[];return this.forEach(function(u){n.every(function(a){return a.includes(u)})||o.push(u)}),this.withMutations(function(u){o.forEach(function(a){u.remove(a)})})},e.prototype.subtract=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(u){return t(u)});var o=[];return this.forEach(function(u){n.some(function(a){return a.includes(u)})&&o.push(u)}),this.withMutations(function(u){o.forEach(function(a){u.remove(a)})})},e.prototype.sort=function(n){return me(Bt(this,n))},e.prototype.sortBy=function(n,i){return me(Bt(this,i,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,i){var o=this;return this._map.__iterate(function(u){return n(u,u,o)},i)},e.prototype.__iterator=function(n,i){return this._map.__iterator(n,i)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n);return n?this.__make(i,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=i,this)},e}(Lt);_e.isSet=Zr;var P=_e.prototype;P[co]=!0,P[Pe]=P.remove,P.merge=P.concat=P.union,P.withMutations=Fe,P.asImmutable=Ue,P["@@transducer/init"]=P.asMutable=Be,P["@@transducer/step"]=function(t,e){return t.add(e)},P["@@transducer/result"]=function(t){return t.asImmutable()},P.__empty=ve,P.__make=po;function We(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function po(t,e){var r=Object.create(P);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var _o;function ve(){return _o||(_o=po(rt()))}var Ua=function(t){function e(r,n,i){if(!(this instanceof e))return new e(r,n,i);if(Di(i!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),i=i===void 0?1:Math.abs(i),n<r&&(i=-i),this._start=r,this._end=n,this._step=i,this.size=Math.max(0,Math.ceil((n-r)/i-1)+1),this.size===0){if(en)return en;en=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,i){return this.has(n)?this._start+_t(this,n)*this._step:i},e.prototype.includes=function(n){var i=(n-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},e.prototype.slice=function(n,i){return Ne(n,i,this.size)?this:(n=oe(n,this.size),i=Te(i,this.size),i<=n?new e(0,0):new e(this.get(n,this._end),this.get(i,this._end),this._step))},e.prototype.indexOf=function(n){var i=n-this._start;if(i%this._step===0){var o=i/this._step;if(o>=0&&o<this.size)return o}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,i){for(var o=this.size,u=this._step,a=i?this._start+(o-1)*u:this._start,s=0;s!==o&&n(a,i?o-++s:s++,this)!==!1;)a+=i?-u:u;return s},e.prototype.__iterator=function(n,i){var o=this.size,u=this._step,a=i?this._start+(o-1)*u:this._start,s=0;return new g(function(){if(s===o)return k();var f=a;return a+=i?-u:u,I(n,i?o-++s:s++,f)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:lo(this,n)},e}(et),en;function vo(t,e,r){for(var n=Ci(e),i=0;i!==n.length;)if(t=Li(t,n[i++],m),t===m)return r;return t}function Ya(t,e){return vo(this,t,e)}function Ka(t,e){return vo(t,e,m)!==m}function Wa(t){return Ka(this,t)}function yo(){G(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}O.isIterable=L,O.isKeyed=E,O.isIndexed=q,O.isAssociative=Re,O.isOrdered=Q,O.Iterator=g,zt(O,{toArray:function(){G(this.size);var e=new Array(this.size||0),r=E(this),n=0;return this.__iterate(function(i,o){e[n++]=r?[o,i]:i}),e},toIndexedSeq:function(){return new Ei(this)},toJS:function(){return tn(this)},toKeyedSeq:function(){return new Ce(this,!0)},toMap:function(){return Yt(this.toKeyedSeq())},toObject:yo,toOrderedMap:function(){return lt(this.toKeyedSeq())},toOrderedSet:function(){return me(E(this)?this.valueSeq():this)},toSet:function(){return _e(E(this)?this.valueSeq():this)},toSetSeq:function(){return new Ii(this)},toSeq:function(){return q(this)?this.toIndexedSeq():E(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Qr(E(this)?this.valueSeq():this)},toList:function(){return Gr(E(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return w(this,ga(this,e))},includes:function(e){return this.some(function(r){return U(r,e)})},entries:function(){return this.__iterator(tt)},every:function(e,r){G(this.size);var n=!0;return this.__iterate(function(i,o,u){if(!e.call(r,i,o,u))return n=!1,!1}),n},filter:function(e,r){return w(this,Mi(this,e,r,!0))},find:function(e,r,n){var i=this.findEntry(e,r);return i?i[1]:n},forEach:function(e,r){return G(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){G(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(i){n?n=!1:r+=e,r+=i!=null?i.toString():""}),r},keys:function(){return this.__iterator(ue)},map:function(e,r){return w(this,xi(this,e,r))},reduce:function(e,r,n){return mo(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return mo(this,e,r,n,arguments.length<2,!0)},reverse:function(){return w(this,Lr(this,!0))},slice:function(e,r){return w(this,kr(this,e,r,!0))},some:function(e,r){return!this.every(He(e),r)},sort:function(e){return w(this,Bt(this,e))},values:function(){return this.__iterator(Z)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return $t(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return va(this,e,r)},equals:function(e){return lo(this,e)},entrySeq:function(){var e=this;if(e._cache)return new xt(e._cache);var r=e.toSeq().map(Ga).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(He(e),r)},findEntry:function(e,r,n){var i=n;return this.__iterate(function(o,u,a){if(e.call(r,o,u,a))return i=[u,o],!1}),i},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(ni,null,e)},flatMap:function(e,r){return w(this,wa(this,e,r))},flatten:function(e){return w(this,Pi(this,e,!0))},fromEntrySeq:function(){return new Ai(this)},get:function(e,r){return this.find(function(n,i){return U(i,e)},void 0,r)},getIn:Ya,groupBy:function(e,r){return ya(this,e,r)},has:function(e){return this.get(e,m)!==m},hasIn:Wa,isSubset:function(e){return e=typeof e.includes=="function"?e:O(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:O(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return U(r,e)})},keySeq:function(){return this.toSeq().map(Ha).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return $e(this,e)},maxBy:function(e,r){return $e(this,r,e)},min:function(e){return $e(this,e?go(e):bo)},minBy:function(e,r){return $e(this,r?go(r):bo,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return w(this,zi(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(He(e),r)},sortBy:function(e,r){return w(this,Bt(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return w(this,ma(this,e,r))},takeUntil:function(e,r){return this.takeWhile(He(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Va(this))}});var F=O.prototype;F[ui]=!0,F[Ir]=F.values,F.toJSON=F.toArray,F.__toStringMapper=ke,F.inspect=F.toSource=function(){return this.toString()},F.chain=F.flatMap,F.contains=F.includes,zt(X,{flip:function(){return w(this,Oi(this))},mapEntries:function(e,r){var n=this,i=0;return w(this,this.toSeq().map(function(o,u){return e.call(r,[u,o],i++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return w(this,this.toSeq().flip().map(function(i,o){return e.call(r,i,o,n)}).flip())}});var ye=X.prototype;ye[ai]=!0,ye[Ir]=F.entries,ye.toJSON=yo,ye.__toStringMapper=function(t,e){return ke(e)+": "+ke(t)},zt(Ot,{toKeyedSeq:function(){return new Ce(this,!1)},filter:function(e,r){return w(this,Mi(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return w(this,Lr(this,!1))},slice:function(e,r){return w(this,kr(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=oe(e,e<0?this.count():this.size);var i=this.slice(0,e);return w(this,n===1?i:i.concat(ut(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return w(this,Pi(this,e,!1))},get:function(e,r){return e=_t(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,i){return i===e},void 0,r)},has:function(e){return e=_t(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return w(this,ba(this,e))},interleave:function(){var e=[this].concat(ut(arguments)),r=Le(this.toSeq(),et.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),w(this,n)},keySeq:function(){return Ua(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return w(this,zi(this,e,r,!1))},zip:function(){var e=[this].concat(ut(arguments));return w(this,Le(this,wo,e))},zipAll:function(){var e=[this].concat(ut(arguments));return w(this,Le(this,wo,e,!0))},zipWith:function(e){var r=ut(arguments);return r[0]=this,w(this,Le(this,e,r))}});var Gt=Ot.prototype;Gt[si]=!0,Gt[kt]=!0,zt(Lt,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Vt=Lt.prototype;Vt.has=F.includes,Vt.contains=Vt.includes,Vt.keys=Vt.values,zt(vt,ye),zt(et,Gt),zt(Ft,Vt);function mo(t,e,r,n,i,o){return G(t.size),t.__iterate(function(u,a,s){i?(i=!1,r=u):r=e.call(n,r,u,a,s)},o),r}function Ha(t,e){return e}function Ga(t,e){return[e,t]}function He(t){return function(){return!t.apply(this,arguments)}}function go(t){return function(){return-t.apply(this,arguments)}}function wo(){return ut(arguments)}function bo(t,e){return t<e?1:t>e?-1:0}function Va(t){if(t.size===1/0)return 0;var e=Q(t),r=E(t),n=e?1:0,i=t.__iterate(r?e?function(o,u){n=31*n+So(Y(o),Y(u))|0}:function(o,u){n=n+So(Y(o),Y(u))|0}:e?function(o){n=31*n+Y(o)|0}:function(o){n=n+Y(o)|0});return Ja(i,n)}function Ja(t,e){return e=ae(e,3432918353),e=ae(e<<15|e>>>-15,461845907),e=ae(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=ae(e^e>>>16,2246822507),e=ae(e^e>>>13,3266489909),e=De(e^e>>>16),e}function So(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var me=function(t){function e(r){return r==null?rn():ho(r)?r:rn().withMutations(function(n){var i=Lt(r);G(i.size),i.forEach(function(o){return n.add(o)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(X(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(_e);me.isOrderedSet=ho;var Pt=me.prototype;Pt[kt]=!0,Pt.zip=Gt.zip,Pt.zipWith=Gt.zipWith,Pt.zipAll=Gt.zipAll,Pt.__empty=rn,Pt.__make=Eo;function Eo(t,e){var r=Object.create(Pt);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var Io;function rn(){return Io||(Io=Eo(pe()))}function Ao(t,e){return Oo([],e||Xa,t,"",e&&e.length>2?[]:void 0,{"":t})}function Oo(t,e,r,n,i,o){if(typeof r!="string"&&!it(r)&&(xr(r)||Ar(r)||$i(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),i&&n!==""&&i.push(n);var u=e.call(o,n,j(r).map(function(a,s){return Oo(t,e,a,s,i,r)}),i&&i.slice());return t.pop(),i&&i.pop(),u}return r}function Xa(t,e){return q(e)?e.toList():E(e)?e.toMap():e.toSet()}const xo="simulator_dragging_node_id",Qa="artery_node",Mo="artery",zo="active_node",Za="active_over_layer_node_id",ts="check_node_support_children",Po="dummy_artery_root_node_id",No=new Image;No.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function es(t){t.setDragImage(No,0,0)}function Ge(t){return t.type==="html-element"?`html-element:${t.name}`:t.type==="react-component"?`react_component:${t.packageName}:${t.packageVersion}:${t.exportName}`:""}function V(t){const[e,r]=N(t.value);return $(()=>{const n=t.subscribe(r);return()=>{n.unsubscribe()}},[t]),e}function rs(t){try{return JSON.parse(t)}catch{return}}function ns({rootNode:t,nodeID:e,greenZone:r}){let n=t;const i=pt(t,e);if(!i)return;const o=t.getIn(i);if(!!o)return n=Fi(t,i),To({rootNode:n,node:o,greenZone:r})}function To({rootNode:t,node:e,greenZone:r}){if(r.type==="node_without_children"&&(r.position==="inner"||r.position==="inner-left"||r.position==="inner-right"))return vn(t,r.contour.id,e);if(r.type==="node_without_children"&&r.position==="left")return be(t,r.contour.id,e);if(r.type==="node_without_children"&&r.position==="right")return ee(t,r.contour.id,e);if(r.type==="adjacent-with-parent"&&r.edge==="left")return be(t,r.child.id,e);if(r.type==="adjacent-with-parent"&&r.edge==="right")return ee(t,r.child.id,e);if(r.type==="between-nodes")return r.left.absolutePosition.height<r.right.absolutePosition.height?ee(t,r.left.id,e):r.left.absolutePosition.height>r.right.absolutePosition.height?be(t,r.right.id,e):ee(t,r.left.id,e)}function Nt(t){return t.id=In(t.type),t}function Ro(t){return yn(t,{htmlNode:r=>Nt(r),reactComponentNode:r=>Nt(r),loopContainerNode:r=>Nt(r),composedNode:r=>Nt(r),refNode:r=>Nt(r),jsxNode:r=>Nt(r),routeNode:r=>Nt(r)})}function is(t){const e=t.getData(xo);if(e)return{type:"move_node_request",nodeID:e};const r=rs(t.getData(Qa));if(r)return{type:"insert_node_request",node:Ro(r)}}function os(t,e,r){const n=rr(t,e),[i,o]=N(),u=wt(ie);return $(()=>(i&&ri(i,u),()=>{i&&mr(i,u)}),[i]),{...n,ref:a=>a&&o(a),"data-simulator-node-id":t.id,"data-simulator-node-depth":r,"data-simulator-node-executor":Ge(t)}}function us(){return p.createElement("div",null,"\u8BF7\u62D6\u62FD\u7EC4\u4EF6\u5230\u6B64\u5904\uFF01")}function as(){return p.createElement("div",{className:"placeholder-for-container-node-children"},p.createElement(us))}var qo=as;const nn=new Map;new z(_e());function ss(t,e){const r=Ge(t);nn.set(r,e)}function on(t){return nn.get(Ge(t))}function Do(t){return!!window.__OVER_LAYER_COMPONENTS.find(({packageName:e,exportName:r})=>r===t.exportName)}class fs{constructor(e,r){if(this.seq=0,this.connected=!1,this.responderMap={},this.target=e,this.name=r,this.send$=new St,this.receive$=new St,window===e)throw new Error("Messenger: target can not be same as current window");this.isSubWin=window.parent===e,window.addEventListener("message",n=>{if(n.origin!==window.origin||this.name===n.data.name)return;const i=performance.now();this.receive$.next(n.data);const o=performance.now()-i;o>10&&te.log(this.name,"execute on message cost:",o,"message type:",n.data.type)}),this.send$.subscribe(n=>{this.target.postMessage(n,window.origin)})}addResponders(e){Object.entries(e).forEach(([r,n])=>{const i=this.receive$.pipe(Et(o=>o.type?o.type===r:!1),Qu(({message:o,seq:u})=>dr(Promise.all([n(o),Promise.resolve(u)]))),A(([o,u])=>({type:`echo_${r}`,message:o,echoSeq:u,seq:this.nextSeq(),name:this.name}))).subscribe(this.send$);this.responderMap[r]&&this.responderMap[r].unsubscribe(),this.responderMap[r]=i})}waitForReady(){return new Promise((e,r)=>{let n;const i=setTimeout(()=>{n==null||n.unsubscribe(),r(new Error(`${this.name} messenger connection timeout`))},5e3);this.isSubWin?n=Hu(200).pipe(vr(()=>this.send("ping","ping")),Zu(this.listen("ping"))).subscribe({complete:()=>{n==null||n.unsubscribe(),clearTimeout(i),this.connected=!0,e()}}):this.listen("ping").pipe(Gu(1)).subscribe(()=>{this.send("ping","ping"),clearTimeout(i),this.connected=!0,e()})})}nextSeq(){return this.seq=this.seq+1,this.seq}send(e,r){this.send$.next({type:e,message:r,seq:this.nextSeq(),name:this.name})}listen(e){return this.receive$.pipe(Et(r=>r.type?r.type===e:!1),A(({message:r})=>r))}request(e,r){const n=this.nextSeq(),i=new Promise((o,u)=>{const a=setTimeout(()=>{u(new Error(`messenger request timeout, request message type is: ${e}`))},5e3),s=this.receive$.pipe(Ju(({echoSeq:f})=>f===n)).subscribe(f=>{if(s.unsubscribe(),clearTimeout(a),!f){u(new Error("fatal"));return}o(f.message)})});return this.send$.next({type:e,message:r,seq:n,name:this.name}),i}}const Ve=new z(void 0),un=new St,Co=new z(void 0),Je=new z(""),$o=new St,Xe=new z(""),Jt=new z(!1),Xt=new z(void 0),an=new z(void 0),Lo=new St,cs={node:{id:Po,type:"html-element",name:"div"}},C=new z(Ao({id:"initial",type:"html",nam:"div"})),nt=new z(cs),sn=new z(void 0),Qt=new z(void 0),Qe=new z(void 0),ko=new z(void 0),jo=new z(void 0),hs=C.pipe(A(t=>t.getIn(["id"])),It()),ls=Lo.pipe(Et(()=>!!Xt.value),A(t=>is(t.dataTransfer)),Et(t=>!!t),A(t=>{if(!!Xt.value){if(t.type==="move_node_request")return ns({rootNode:C.value,nodeID:t.nodeID,greenZone:Xt.value});if(t.type==="insert_node_request")return To({rootNode:C.value,node:t.node,greenZone:Xt.value})}}),A(t=>t?t.toJS():void 0),Et(t=>!!t));function fn(){const[t,e]=N("");return $(()=>{const r=hs.subscribe(e);return()=>{r.unsubscribe()}},[]),t}nt.pipe(A(t=>Ao(t.node))).subscribe(C),Je.pipe(A(t=>{if(!!t)return pt(C.value,t)})).subscribe(Co),Qe.pipe(A(t=>{if(!t)return;const e=pt(C.value,t);return e?C.value.getIn(e).toJS():void 0}),A(t=>{if(!!t)return{node:t,apiStateSpec:nt.value.apiStateSpec,sharedStatesSpec:nt.value.sharedStatesSpec}})).subscribe(jo),Yu({activeNode:sn,contourNodesReport:Ve,modalLayerContourNodesReport:an,activeOverLayerNodeID:Qe}).pipe(A(({activeNode:t,contourNodesReport:e,modalLayerContourNodesReport:r,activeOverLayerNodeID:n})=>n?r==null?void 0:r.find(({id:i})=>i===(t==null?void 0:t.id)):e==null?void 0:e.find(({id:i})=>i===(t==null?void 0:t.id))),It((t,e)=>(t==null?void 0:t.id)===(e==null?void 0:e.id))).subscribe(Qt),Qt.pipe(Et(t=>!!t),A(({absolutePosition:t,relativeRect:e})=>{const{x:r,y:n,height:i}=t;return(e==null?void 0:e.y)<40?{transform:`translate(${r+4}px, ${n+i}px)`}:{transform:`translate(${r+4}px, ${n}px)`}})).subscribe(ko);const Tt=new fs(window.parent,"iframe-side");Tt.waitForReady().then(()=>{}).catch(re),Tt.listen(Mo).subscribe(nt),Tt.listen(zo).pipe(It((t,e)=>(t==null?void 0:t.id)===(e==null?void 0:e.id))).subscribe(sn),Tt.listen(Za).subscribe(Qe);function cn(t){Tt.send(zo,t)}function hn(t){Tt.send(Mo,t)}function ps(t){return Tt.request(ts,t)}ls.subscribe(t=>{hn({...nt.value,node:t})});function ds(t){const e=on(t);return e!==void 0?Promise.resolve(e):ps(t).then(r=>(ss(t,r),r))}function _s(t){return t.type==="html-element"?{type:"html-element",name:t.name}:{type:"react-component",packageName:t.packageName,packageVersion:t.packageVersion,exportName:t.exportName}}function Fo(t){const[e,r]=N(!0);return $(()=>{let n=!1;return ds(_s(t)).then(()=>{n||r(!1)}).catch(re),()=>{n=!0}},[]),e}function vs({node:t,ctx:e}){const r=wt(At)+1,n=os(t,e,r);return Fo(t)?null:t.name?!t.children||!t.children.length?p.createElement(t.name,n,on(t)?p.createElement(qo,{parent:t}):void 0):p.createElement(At.Provider,{value:r},p.createElement(t.name,n,p.createElement(yr,{nodes:t.children||[],ctx:e}))):(te.error("name property is required in html node spec,",`please check the spec of node: ${t.id}.`),null)}var Bo=vs;const ys={childList:!0};function ms(t){return e=>{for(const{type:r,target:n}of e){if(r!=="childList"||n.nodeType!==Node.ELEMENT_NODE)return;const i=n.firstElementChild;if(!i)return;t(i)}}}function gs(t){const[e,r]=N(()=>t!=null&&t.firstElementChild?t==null?void 0:t.firstElementChild:null);return $(()=>{if(!t)return;t.firstElementChild&&r(t.firstElementChild);const n=new MutationObserver(ms(r));return n.observe(t,ys),()=>{n.disconnect()}},[t]),e}function ws(t,e){const[r,n]=N(),i=gs(r),o=Zt(),u=wt(ie);return $(()=>{if(o.current&&mr(o.current,u),!!i)return i.dataset.simulatorNodeId=t.id,i.dataset.simulatorNodeExecutor=Ge(t),i.dataset.simulatorNodeDepth=`${e}`,ri(i,u),o.current=i,()=>{i&&mr(i,u)}},[i]),n}function bs(t,e,r){const n=rr(t,e),i=ws(t,r);return{nodeProps:n,wrapperProps:{style:{display:"contents"},ref:i}}}var Ss=bs;class Uo extends p.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,r){te.error("failed to render component:",e)}render(){return this.state.hasError?null:this.props.children}}function Es({node:t,ctx:e}){const r=wt(At)+1,{nodeProps:n,wrapperProps:i}=Ss(t,e,r),o=dn(t,e.plugins),u=Fo(t),a=r===1;return u||!o||!a&&Do(t)?null:(a&&Do(t)&&(n.isOpen=!0,n.container="inside"),!t.children||!t.children.length?p.createElement(Uo,{},p.createElement("div",i,p.createElement(o,n,on(t)?p.createElement(qo,{parent:t}):void 0))):p.createElement(At.Provider,{value:r},p.createElement(Uo,{},p.createElement("div",i,p.createElement(o,n,p.createElement(yr,{nodes:t.children||[],ctx:e}))))))}var Is=Es;function As({node:t,ctx:e}){var r;const n=t.nodes||t.children;if(((r=t.outLayer)==null?void 0:r.type)==="html-element"){const i={...t.outLayer,children:t.nodes||t.children};p.createElement(Bo,{node:i,ctx:e})}return p.createElement(yr,{nodes:n,ctx:e})}function Os({node:t,ctx:e}){return p.createElement(Ze,{node:t.node,ctx:e})}var xs=Os;function Ms({node:t,ctx:e}){const r=wt(At);return t.type==="route-node"||t.type==="jsx-node"||t.type==="ref-node"?(te.debug("simulator skip render unsupported node:",t),null):t.type==="html-element"?p.createElement(At.Provider,{value:r},p.createElement(Bo,{node:t,ctx:e})):t.type==="react-component"?p.createElement(At.Provider,{value:r},p.createElement(Is,{node:t,ctx:e})):t.type==="composed-node"?p.createElement(As,{node:t,ctx:e}):t.type==="loop-container"?p.createElement(xs,{node:t,ctx:e}):null}var Ze=Ms;const zs=new z(new Set);function Ps({artery:t}){const{ctx:e,rootNode:r}=nr(t,ir)||{},n=we(i=>an.next(i),[]);return ei(n),!e||!r?null:p.createElement("div",{className:"simulator-background-layer"},p.createElement(Ze,{node:r,ctx:e}))}function Ns(){const t=V(jo);return t?p.createElement(ie.Provider,{value:zs},p.createElement(Ps,{artery:t})):null}var Ts=Ns;const Rs=new z(new Set);function qs({rootElement:t}){const e=V(nt),{ctx:r,rootNode:n}=nr(e,ir)||{},i=we(o=>Ve.next(o),[]);return ei(i,t),!r||!n?null:p.createElement(Ze,{node:n,ctx:r})}function Ds(){const[t,e]=N();return p.createElement(ie.Provider,{value:Rs},p.createElement("div",{className:"simulator-background-layer",ref:r=>{r&&e(r)}},t&&p.createElement(qs,{rootElement:t})))}function Cs(){return p.createElement(p.Fragment,null,p.createElement(Ds,null),p.createElement(Ts,null))}var $s=Cs,Yo={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(!!o){var u=typeof o;if(u==="string"||u==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var a=r.apply(null,o);a&&n.push(a)}}else if(u==="object")if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&n.push(s);else n.push(o.toString())}}return n.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(Yo);var ln=Yo.exports;function Ls({depth:t,absolutePosition:e}){const{height:r,width:n,x:i,y:o}=e;return er(()=>({zIndex:t,height:r,width:n,transform:`translate(${i}px, ${o}px)`}),[r,n,i,o,t])}function ks(t){const e=Zt(),r=V(Je),n=V(Co);return we(i=>i.dataTransfer.types.includes("artery_node")?!0:!r||!n||r===t?!1:(e.current===void 0&&(e.current=!!pt(n,t)),!e.current),[r,n])}function tr(t){return t.preventDefault(),t.stopPropagation(),!1}function js(t){const[e,r]=N(!1);return $(()=>{const n=Qt.pipe(A(i=>(i==null?void 0:i.id)===t),It()).subscribe(r);return()=>{n.unsubscribe()}},[]),e}function Fs({contourNode:t}){const e=V(Xe),r=fn(),n=Ls(t),i=ks(t.id),o=js(t.id),[u,a]=N(!1);return p.createElement(p.Fragment,null,p.createElement("div",{id:`contour-${t.id}`,style:n,onClick:()=>{const s=pt(C.value,t.id);if(!s)return;const f=C.value.getIn(s);!f||cn(f.toJS())},draggable:t.id!==r,onDragStart:s=>{s.dataTransfer.effectAllowed="move",s.dataTransfer.setData(xo,t.id),Je.next(t.id),a(!0),es(s.dataTransfer)},onDragEnd:()=>{Je.next(""),a(!0),Jt.next(!1)},onDragOver:s=>{!i(s)||(Jt.next(!0),tr(s),un.next({x:s.clientX,y:s.clientY}))},onDrag:s=>{tr(s),Jt.next(!0)},onDragEnter:s=>{if(!!i(s))return $o.next(t),tr(s),!1},onDragLeave:()=>{Jt.next(!1)},onDrop:s=>(tr(s),Lo.next(s),Jt.next(!1),!1),className:ln("contour-node",{"contour-node--root":r===t.id,"contour-node--active":o,"contour-node--hover-as-parent":e===t.id,"contour-node--dragging":u})}))}var Bs=Fs;function Us({currentNodeID:t,onParentClick:e}){const r=V(nt),[n,i]=N([]);return $(()=>{const o=mn(C.value,t);if(!o)return;const u=o.map(a=>{const s=gn(C.value,a);if(!!s)return C.value.getIn(s)}).filter(a=>{if(!a)return!1;const s=a.getIn(["type"]);return s==="html-element"||s==="react-component"}).toJS();i((u==null?void 0:u.reverse().slice(0,5))||[])},[r]),n.length?p.createElement("div",{className:"active-node-parents"},n.map(o=>{const{id:u,label:a}=o;return p.createElement("span",{key:u,className:"active-node-parents__parent",onMouseEnter:()=>{Xe.next(u)},onMouseLeave:()=>{Xe.next("")},onClick:s=>{s.stopPropagation(),Xe.next(""),cn(o),e()}},a||u)})):null}var Ys=Us;function Ks(t){return er(()=>t?t.label?t==null?void 0:t.label:"exportName"in t?t.exportName.toUpperCase():"name"in t?t.name.toUpperCase():t.id:"untitled",[t])}const Ws=[{name:"offset",options:{offset:[0,4]}}];function Hs(){const t=V(sn),e=V(Qt),{referenceRef:r,Popper:n,handleMouseEnter:i,handleMouseLeave:o,close:u}=An(),a=Zt(null),s=V(ko),f=Ks(t),c=fn();function h(){if(!Qt.value)return;const d=wn(nt.value.node,Qt.value.id);hn({...nt.value,node:d}),cn(void 0)}function l(){if(!t)return;const d=Ro(t),_=bn(nt.value.node,t.id,d);!_||hn({...nt.value,node:_})}return!e||e.id===c?null:p.createElement("div",{ref:a,className:"active-contour-node-toolbar",style:s},p.createElement("span",{ref:r,className:"active-contour-node-toolbar__parents",onMouseEnter:i(),onMouseLeave:o()},f),p.createElement("span",{onClick:l,className:"active-contour-node-toolbar__action",title:"\u590D\u5236"},p.createElement(or,{name:"content_copy",size:16})),p.createElement("span",{onClick:h,className:"active-contour-node-toolbar__action",title:"\u5220\u9664"},p.createElement(or,{name:"delete_forever",size:16})),p.createElement(n,{placement:"bottom-start",modifiers:Ws,container:a.current},p.createElement(Ys,{currentNodeID:e.id,onParentClick:u})))}var Gs=Hs,Ko=[],ge=[];function Wo(t,e){if(t&&typeof document!="undefined"){var r,n=e.prepend===!0?"prepend":"append",i=e.singleTag===!0,o=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(i){var u=Ko.indexOf(o);u===-1&&(u=Ko.push(o)-1,ge[u]={}),r=ge[u]&&ge[u][n]?ge[u][n]:ge[u][n]=a()}else r=a();t.charCodeAt(0)===65279&&(t=t.substring(1)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(document.createTextNode(t))}function a(){var s=document.createElement("style");if(s.setAttribute("type","text/css"),e.attributes)for(var f=Object.keys(e.attributes),c=0;c<f.length;c++)s.setAttribute(f[c],e.attributes[f[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(h,s),s}}var Vs=`.contour-nodes {
  position: absolute;
  top: 0;
  z-index: 1;
}

.contour-node {
  position: absolute;
  top: 0;
  border-width: 1px;
  border-color: transparent;
}
.contour-node:hover:not(.contour-node--root, .contour-node--active) {
  outline: 1px dashed #0084ff;
}

.contour-node--active {
  box-shadow: inset 0 0 0 2px #0084ff;
}

.contour-node--hover-as-parent {
  border-color: #f85900;
  border-style: dashed;
}

.contour-node--dragging {
  opacity: 0.7;
  background-color: white;
}

.active-contour-node-toolbar {
  position: absolute;
  display: flex;
  align-items: center;
  top: -30px;
  z-index: 1;
}
.active-contour-node-toolbar .active-contour-node-toolbar__parents,
.active-contour-node-toolbar .active-contour-node-toolbar__action {
  padding: 4px;
  margin-right: 4px;
  color: white;
  font-size: 12px;
  border-radius: 1px;
  background-color: #0084ff;
}
.active-contour-node-toolbar .active-contour-node-toolbar__parents {
  display: inline-block;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.active-contour-node-toolbar .active-contour-node-toolbar__action {
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  fill: white;
}

.active-node-parents {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
}
.active-node-parents .active-node-parents__parent {
  max-width: 200px;
  padding: 4px;
  margin-bottom: 4px;
  color: white;
  background-color: #0084ff;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.active-node-parents .active-node-parents__parent:hover {
  background-color: #f85900;
}`;Wo(Vs,{});function Js(){const t=V(Ve)||[],e=V(an)||[];return V(Qe)?e||[]:t||[]}function Xs(){const t=Js();return p.createElement(p.Fragment,null,p.createElement("div",{className:"contour-nodes"},t.map(e=>p.createElement(Bs,{key:`contour-${e.id}`,contourNode:e}))),p.createElement(Gs,null))}var Qs=Xs;function Zs(t,e,r){const n=pt(t,e);if(!n)return[];const i=t.getIn(n);if(!i)return[];const o=Sn(i).map(u=>u.getIn(["id"]));return r.filter(({id:u})=>o.includes(u))}const tf=2;function ef(t,e){return e.filter(r=>!(r.id===t.id||t.raw.x+t.raw.width+tf>r.raw.x||t.raw.y>r.raw.y+r.raw.height||t.raw.y+t.raw.height<r.raw.y))}function rf(t,e){return e.map(r=>{const n={x:t.absolutePosition.x+t.absolutePosition.width,y:Math.min(t.absolutePosition.y,r.absolutePosition.y),width:r.absolutePosition.x-(t.absolutePosition.x+t.absolutePosition.width),height:Math.min(Math.abs(t.absolutePosition.y-(r.absolutePosition.y+r.absolutePosition.height)),Math.abs(t.absolutePosition.y+t.absolutePosition.height-r.absolutePosition.y))},i={x:t.raw.x+t.absolutePosition.width,y:Math.min(t.raw.y,r.raw.y),width:n.width,height:n.height};return{left:t,right:r,absolutePosition:n,type:"between-nodes",raw:i}})}function Ho(t,e){const r=[t.x,t.x+t.width],n=[e.x,e.x+e.width],i=[t.y,t.y+t.height],o=[e.y,e.y+e.height],u=Math.max(r[0],n[0]),a=Math.min(r[1],n[1]),s=Math.max(i[0],o[0]),f=Math.min(i[1],o[1]);return u<a&&s<f}function nf(t,e){return t.filter(({absolutePosition:r})=>!e.some(i=>Ho(i.absolutePosition,r)))}function of(t,e){const r=e.map(i=>{const o={x:t.raw.x,y:i.raw.y,height:i.absolutePosition.height,width:i.absolutePosition.x-t.absolutePosition.x};return{type:"adjacent-with-parent",parent:t,child:i,edge:"left",raw:o,absolutePosition:{x:t.absolutePosition.x,y:i.absolutePosition.y,height:i.absolutePosition.height,width:i.absolutePosition.x-t.absolutePosition.x}}}),n=e.map(i=>{const o=i.absolutePosition.x+i.absolutePosition.width;return{raw:{x:i.raw.x+i.absolutePosition.width,y:i.raw.y,height:i.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-o},type:"adjacent-with-parent",parent:t,child:i,edge:"right",absolutePosition:{x:o,y:i.absolutePosition.y,height:i.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-o}}});return r.concat(n).filter(i=>i.absolutePosition.height<4||i.absolutePosition.width<4?!1:!e.some(({absolutePosition:o})=>Ho(o,i.absolutePosition)))}function uf(t,e,r){const n=Zs(t,e.id,r),i=n.map(a=>{const s=ef(a,n);return rf(a,s)}).reduce((a,s)=>a.concat(s),[]),o=nf(i,n),u=of(e,n);return[...o,...u]}function af(){const[t,e]=N([]);return $(()=>{const r=$o.pipe(It(),_r(()=>pr()),A(n=>{if(!n)return[];const i=Ve.value;if(!(i!=null&&i.length))return[];const o=pt(C.value,n.id);if(!o)return[];const u=C.value.getIn(o);return En(u)?uf(C.value,n,i):{contour:n,type:"node_without_children",position:"left"}})).subscribe(e);return()=>{r.unsubscribe()}},[]),t}function sf(t,e,r){return e?t<r.x+8?"left":t>r.x+r.width-8?"right":"inner":Math.abs(t-r.x)>r.width/2?"right":"left"}function ff(t,e){const{height:r,width:n,x:i,y:o}=e,u=r-4,a=o+2;if(t==="inner")return{height:u,width:n-4,transform:`translate(${i+2}px, ${a}px)`};if(t==="left")return{height:u,width:"8px",transform:`translate(${Math.max(i-9,0)}px, ${a}px)`};if(t==="right")return{height:u,width:"8px",transform:`translate(${Math.min(i+n+2,window.innerWidth-9)}px, ${a}px)`}}function cf({greenZone:t}){const[e,r]=N(),n=!!nn.get(t.contour.executor);return $(()=>{const i=un.pipe(_r(()=>pr()),A(({x:o})=>sf(o,n,t.contour.raw)),vr(o=>Xt.next({position:o,contour:t.contour,type:"node_without_children"})),A(o=>ff(o,t.contour.absolutePosition))).subscribe(r);return()=>{i.unsubscribe()}},[t]),p.createElement("div",{className:"green-zone green-zone-for-node-without-children",style:e})}function hf(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function Go(t){return t.type==="adjacent-with-parent"?`adjacent-${t.parent.id}-${t.child.id}-${t.edge}`:`between-${t.left.id}-${t.right.id}`}function lf(t){const[e,r]=N("");return $(()=>{const n=un.pipe(_r(()=>pr()),A(i=>t.filter(({raw:o})=>hf(i,o))),A(i=>i.length?i[0]:void 0),vr(i=>Xt.next(i)),A(i=>i?Go(i):""),It()).subscribe(r);return()=>{n.unsubscribe()}},[t]),e}function pf({greenZones:t}){const e=lf(t);return p.createElement(p.Fragment,null,t.map(r=>{const n=Go(r);if(r.type==="between-nodes"){const{absolutePosition:i}=r;return p.createElement("div",{key:n,className:ln("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":n===e}),style:{height:i.height,width:i.width,transform:`translate(${i.x}px, ${i.y}px)`}})}return p.createElement("div",{key:n,className:ln("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":n===e}),style:{height:r.absolutePosition.height,width:r.absolutePosition.width,transform:`translate(${r.absolutePosition.x}px, ${r.absolutePosition.y}px)`}})}))}function df(){const[t,e]=N(!1);return $(()=>{const r=Jt.pipe(It()).subscribe(e);return()=>{r.unsubscribe()}},[]),t}function _f(){const t=af();return!df()||!t?null:Array.isArray(t)?p.createElement(pf,{greenZones:t}):p.createElement(cf,{greenZone:t})}var vf=_f,yf=`html,
body {
  width: 100%;
  height: auto;
}

* {
  box-sizing: border-box;
}

.simulator-background-layer {
  position: relative;
  z-index: 0;
}

.artery-simulator-root--modal-open {
  height: 100vh;
  overflow: hidden;
}

.green-zone {
  top: 0;
  position: absolute;
  will-change: width, height, transform;
}

.green-zone-for-node-without-children {
  background-color: rgba(0, 128, 0, 0.3607843137);
  outline: 1px solid #008000;
}

.green-zone-between-nodes {
  outline: 1px dashed #008000;
}

.green-zone-between-nodes--focused {
  background-color: rgba(0, 128, 0, 0.3607843137);
}

.placeholder-for-container-node-children {
  padding: 8px;
  color: #94a3b8;
  text-align: center;
  background-color: #f8fafc;
}`;Wo(yf,{});function mf(){return fn()===Po?null:p.createElement(p.Fragment,null,p.createElement($s,null),p.createElement(vf,null),p.createElement(Qs,null))}const Vo=document.createElement("div");document.body.appendChild(Vo),pn.render(p.createElement(mf,null),Vo)}}});
