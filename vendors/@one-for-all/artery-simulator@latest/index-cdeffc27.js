System.register(["react-dom","react","@one-for-all/artery-renderer","TEMPORARY_PATCH_FOR_ARTERY_PLUGINS","rxjs","@one-for-all/elements-radar","rxjs/operators","@one-for-all/utils","@one-for-all/artery-utils","@one-for-all/artery-engine","./inject-css-21fbd19e.js","@one-for-all/headless-ui","@one-for-all/icon"],(function(){"use strict";var t,e,n,r,i,o,u,a,s,c,f,h,l,p,d,_,v,y,m,g,w,b,x,E,z,S,I,O,A,M,k,D,q,P,j,N,R,C,T,L,B,U,K,$,W,H,F,J,Z,V,Y,G,Q;return{setters:[function(e){t=e.default},function(t){e=t.default,n=t.useContext,r=t.useRef,i=t.useEffect,o=t.useState,u=t.useCallback,a=t.useMemo},function(t){s=t.useInstantiateProps,c=t.useNodeComponent,f=t.useBootResult},function(t){h=t.default},function(t){l=t.BehaviorSubject,p=t.Subject,d=t.map,_=t.distinctUntilChanged,v=t.filter,y=t.combineLatest,m=t.noop,g=t.audit,w=t.animationFrames,b=t.tap},function(t){x=t.default},function(t){E=t.filter,z=t.map,S=t.audit,I=t.tap,O=t.distinctUntilChanged},function(t){A=t.logger},function(t){M=t.byArbitrary,k=t._appendTo,D=t._insertLeftSiblingTo,q=t._insertRightSiblingTo,P=t.travel,j=t.parentIdsSeq,N=t.keyPathById,R=t.deleteByID,C=t.insertAfter,T=t.getFirstLevelConcreteChildren,L=t.nodeHasChildNodes},function(t){B=t.generateNodeId},function(t){U=t.D,K=t.f,$=t.g,W=t.d,H=t.c,F=t.b,J=t.a,Z=t.M,V=t.e,Y=t.n},function(t){G=t.usePopper},function(t){Q=t.default}],execute:function(){var X=e.createContext(new l(new Set));function tt(t,e){const o=n(X),u=r();return i((()=>{const n=new x(e);u.current=n,o.pipe(E((t=>!!t.size))).subscribe((t=>n.track(Array.from(t))));const r=n.getReport$().pipe(z((t=>function(t,e){const n=new Set;return Array.from(t.entries()).map((([t,{relativeRect:r,raw:i}])=>{const o=t.dataset.simulatorNodeId;if(!o)return;if(n.has(o))return;n.add(o);const u=parseInt(t.dataset.simulatorNodeDepth||"0")||0,{x:a,y:s}=document.body.getBoundingClientRect();return{id:o,depth:u,raw:i,relativeRect:r,executor:t.dataset.simulatorNodeExecutor||"",absolutePosition:{height:r.height,width:r.width,x:e?r.x:r.x-a,y:e?r.y:r.y-s}}})).filter((t=>!!t))}(t,e)))).subscribe(t);return()=>{r.unsubscribe()}}),[e]),u}var et=function({nodes:t,ctx:n}){return t.length?e.createElement(e.Fragment,null,t.map(((t,r)=>e.createElement(Ji,{key:`${t.id}-${r}`,node:t,ctx:n})))):null};var nt=e.createContext(0);function rt(t,e){const n=e.value;e.next(n.add(t))}function it(t,e){const n=e.value;n.delete(t),e.next(n)}var ot=32,ut=31,at={};function st(t){t&&(t.value=!0)}function ct(){}function ft(t){return void 0===t.size&&(t.size=t.__iterate(lt)),t.size}function ht(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?ft(t)+e:e}function lt(){return!0}function pt(t,e,n){return(0===t&&!yt(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function dt(t,e){return vt(t,e,0)}function _t(t,e){return vt(t,e,e)}function vt(t,e,n){return void 0===t?n:yt(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function yt(t){return t<0||0===t&&1/t==-1/0}var mt="@@__IMMUTABLE_ITERABLE__@@";function gt(t){return Boolean(t&&t[mt])}var wt="@@__IMMUTABLE_KEYED__@@";function bt(t){return Boolean(t&&t[wt])}var xt="@@__IMMUTABLE_INDEXED__@@";function Et(t){return Boolean(t&&t[xt])}function zt(t){return bt(t)||Et(t)}var St=function(t){return gt(t)?t:Jt(t)},It=function(t){function e(t){return bt(t)?t:Zt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(St),Ot=function(t){function e(t){return Et(t)?t:Vt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(St),At=function(t){function e(t){return gt(t)&&!zt(t)?t:Yt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(St);St.Keyed=It,St.Indexed=Ot,St.Set=At;var Mt="@@__IMMUTABLE_SEQ__@@";function kt(t){return Boolean(t&&t[Mt])}function Dt(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}function qt(t){return gt(t)||Dt(t)}var Pt="@@__IMMUTABLE_ORDERED__@@";function jt(t){return Boolean(t&&t[Pt])}var Nt="function"==typeof Symbol&&Symbol.iterator,Rt="@@iterator",Ct=Nt||Rt,Tt=function(t){this.next=t};function Lt(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function Bt(){return{value:void 0,done:!0}}function Ut(t){return!!Array.isArray(t)||!!Wt(t)}function Kt(t){return t&&"function"==typeof t.next}function $t(t){var e=Wt(t);return e&&e.call(t)}function Wt(t){var e=t&&(Nt&&t[Nt]||t["@@iterator"]);if("function"==typeof e)return e}Tt.prototype.toString=function(){return"[Iterator]"},Tt.KEYS=0,Tt.VALUES=1,Tt.ENTRIES=2,Tt.prototype.inspect=Tt.prototype.toSource=function(){return this.toString()},Tt.prototype[Ct]=function(){return this};var Ht=Object.prototype.hasOwnProperty;function Ft(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var Jt=function(t){function e(t){return null==t?ee():qt(t)?t.toSeq():function(t){var e=ie(t);if(e)return(r=Wt(n=t))&&r===n.entries?e.fromEntrySeq():function(t){var e=Wt(t);return e&&e===t.keys}(t)?e.toSetSeq():e;var n,r;if("object"==typeof t)return new Qt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new Tt((function(){if(i===r)return{value:void 0,done:!0};var o=n[e?r-++i:i++];return Lt(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(St),Zt=function(t){function e(t){return null==t?ee().toKeyedSeq():gt(t)?bt(t)?t.toSeq():t.fromEntrySeq():Dt(t)?t.toSeq():ne(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Jt),Vt=function(t){function e(t){return null==t?ee():gt(t)?bt(t)?t.entrySeq():t.toIndexedSeq():Dt(t)?t.toSeq().entrySeq():re(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Jt),Yt=function(t){function e(t){return(gt(t)&&!zt(t)?t:Vt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Jt);Jt.isSeq=kt,Jt.Keyed=Zt,Jt.Set=Yt,Jt.Indexed=Vt,Jt.prototype[Mt]=!0;var Gt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[ht(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new Tt((function(){if(i===r)return{value:void 0,done:!0};var o=e?r-++i:i++;return Lt(t,o,n[o])}))},e}(Vt),Qt=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Ht.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var u=r[e?i-++o:o++];if(!1===t(n[u],u,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new Tt((function(){if(o===i)return{value:void 0,done:!0};var u=r[e?i-++o:o++];return Lt(t,u,n[u])}))},e}(Zt);Qt.prototype[Pt]=!0;var Xt,te=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=$t(this._collection),r=0;if(Kt(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=$t(this._collection);if(!Kt(n))return new Tt(Bt);var r=0;return new Tt((function(){var e=n.next();return e.done?e:Lt(t,r++,e.value)}))},e}(Vt);function ee(){return Xt||(Xt=new Gt([]))}function ne(t){var e=ie(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new Qt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function re(t){var e=ie(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ie(t){return Ft(t)?new Gt(t):Ut(t)?new te(t):void 0}var oe="@@__IMMUTABLE_MAP__@@";function ue(t){return Boolean(t&&t[oe])}function ae(t){return ue(t)&&jt(t)}function se(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function ce(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(se(t)&&se(e)&&t.equals(e))}var fe="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function he(t){return t>>>1&1073741824|3221225471&t}var le=Object.prototype.valueOf;function pe(t){if(null==t)return de(t);if("function"==typeof t.hashCode)return he(t.hashCode(t));var e,n=(e=t).valueOf!==le&&"function"==typeof e.valueOf?e.valueOf(e):e;if(null==n)return de(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return he(e)}(n);case"string":return n.length>ze?function(t){var e=Oe[t];void 0===e&&(e=_e(t),Ie===Se&&(Ie=0,Oe={}),Ie++,Oe[t]=e);return e}(n):_e(n);case"object":case"function":return function(t){var e;if(we&&void 0!==(e=ge.get(t)))return e;if(void 0!==(e=t[Ee]))return e;if(!ye){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ee]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=me(),we)ge.set(t,e);else{if(void 0!==ve&&!1===ve(t))throw new Error("Non-extensible objects are not allowed as keys.");if(ye)Object.defineProperty(t,Ee,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ee]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Ee]=e}}return e}(n);case"symbol":return function(t){var e=be[t];if(void 0!==e)return e;return e=me(),be[t]=e,e}(n);default:if("function"==typeof n.toString)return _e(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function de(t){return null===t?1108378658:1108378659}function _e(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return he(e)}var ve=Object.isExtensible,ye=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function me(){var t=++xe;return 1073741824&xe&&(xe=0),t}var ge,we="function"==typeof WeakMap;we&&(ge=new WeakMap);var be=Object.create(null),xe=0,Ee="__immutablehash__";"function"==typeof Symbol&&(Ee=Symbol(Ee));var ze=16,Se=255,Ie=0,Oe={},Ae=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=je(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=Pe(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e,r){return t(e,r,n)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Zt);Ae.prototype[Pt]=!0;var Me=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&ft(this),this._iter.__iterate((function(i){return t(i,e?n.size-++r:r++,n)}),e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(1,e),i=0;return e&&ft(this),new Tt((function(){var o=r.next();return o.done?o:Lt(t,e?n.size-++i:i++,o.value,o)}))},e}(Vt),ke=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new Tt((function(){var e=n.next();return e.done?e:Lt(t,e.value,e.value,e)}))},e}(Yt),De=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){He(e);var r=gt(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new Tt((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){He(r);var i=gt(r);return Lt(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}}))},e}(Zt);function qe(t){var e=Je(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ze,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new Tt((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function Pe(t,e,n){var r=Je(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,at);return o===at?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate((function(t,i,u){return!1!==r(e.call(n,t,i,u),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(2,i);return new Tt((function(){var i=o.next();if(i.done)return i;var u=i.value,a=u[0];return Lt(r,a,e.call(n,u[1],a,t),i)}))},r}function je(t,e){var n=this,r=Je(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=qe(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ze,r.__iterate=function(n,r){var i=this,o=0;return r&&ft(t),t.__iterate((function(t,u){return n(t,e?u:r?i.size-++o:o++,i)}),!r)},r.__iterator=function(r,i){var o=0;i&&ft(t);var u=t.__iterator(2,!i);return new Tt((function(){var t=u.next();if(t.done)return t;var a=t.value;return Lt(r,e?a[0]:i?n.size-++o:o++,a[1],t)}))},r}function Ne(t,e,n,r){var i=Je(t);return r&&(i.has=function(r){var i=t.get(r,at);return i!==at&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,at);return o!==at&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var u=this,a=0;return t.__iterate((function(t,o,s){if(e.call(n,t,o,s))return a++,i(t,r?o:a-1,u)}),o),a},i.__iteratorUncached=function(i,o){var u=t.__iterator(2,o),a=0;return new Tt((function(){for(;;){var o=u.next();if(o.done)return o;var s=o.value,c=s[0],f=s[1];if(e.call(n,f,c,t))return Lt(i,r?c:a++,f,o)}}))},i}function Re(t,e,n,r){var i=t.size;if(pt(e,n,i))return t;var o=dt(e,i),u=_t(n,i);if(o!=o||u!=u)return Re(t.toSeq().cacheResult(),e,n,r);var a,s=u-o;s==s&&(a=s<0?0:s);var c=Je(t);return c.size=0===a?a:t.size&&a||void 0,!r&&kt(t)&&a>=0&&(c.get=function(e,n){return(e=ht(this,e))>=0&&e<a?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var u=0,s=!0,c=0;return t.__iterate((function(t,n){if(!s||!(s=u++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==a})),c},c.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);if(0===a)return new Tt(Bt);var i=t.__iterator(e,n),u=0,s=0;return new Tt((function(){for(;u++<o;)i.next();if(++s>a)return{value:void 0,done:!0};var t=i.next();return r||1===e||t.done?t:Lt(e,s-1,0===e?void 0:t.value[1],t)}))},c}function Ce(t,e,n,r){var i=Je(t);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,s=0;return t.__iterate((function(t,o,c){if(!a||!(a=e.call(n,t,o,c)))return s++,i(t,r?o:s-1,u)})),s},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(2,o),s=!0,c=0;return new Tt((function(){var t,o,f;do{if((t=a.next()).done)return r||1===i?t:Lt(i,c++,0===i?void 0:t.value[1],t);var h=t.value;o=h[0],f=h[1],s&&(s=e.call(n,f,o,u))}while(s);return 2===i?t:Lt(i,o,f,t)}))},i}function Te(t,e){var n=bt(t),r=[t].concat(e).map((function(t){return gt(t)?n&&(t=It(t)):t=n?ne(t):re(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&bt(i)||Et(t)&&Et(i))return i}var o=new Gt(r);return n?o=o.toKeyedSeq():Et(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=r.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),o}function Le(t,e,n){var r=Je(t);return r.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var u=0,a=!1;return function t(s,c){s.__iterate((function(o,s){return(!e||c<e)&&gt(o)?t(o,c+1):(u++,!1===i(o,n?s:u-1,r)&&(a=!0)),!a}),o)}(t,0),u},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),u=[],a=0;return new Tt((function(){for(;o;){var t=o.next();if(!1===t.done){var s=t.value;if(2===r&&(s=s[1]),e&&!(u.length<e)||!gt(s))return n?t:Lt(r,a++,s,t);u.push(o),o=s.__iterator(r,i)}else o=u.pop()}return{value:void 0,done:!0}}))},r}function Be(t,e,n){e||(e=Ve);var r=bt(t),i=0,o=t.toSeq().map((function(e,r){return[r,e,i++,n?n(e,r,t):e]})).valueSeq().toArray();return o.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Zt(o):Et(t)?Vt(o):Yt(o)}function Ue(t,e,n){if(e||(e=Ve),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return Ke(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return Ke(e,t,n)?n:t}))}function Ke(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function $e(t,e,n,r){var i=Je(t),o=new Gt(n).map((function(t){return t.size}));return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map((function(t){return t=St(t),$t(i?t.reverse():t)})),u=0,a=!1;return new Tt((function(){var n;return a||(n=o.map((function(t){return t.next()})),a=r?n.every((function(t){return t.done})):n.some((function(t){return t.done}))),a?{value:void 0,done:!0}:Lt(t,u++,e.apply(null,n.map((function(t){return t.value}))))}))},i}function We(t,e){return t===e?t:kt(t)?e:t.constructor(e)}function He(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Fe(t){return bt(t)?It:Et(t)?Ot:At}function Je(t){return Object.create((bt(t)?Zt:Et(t)?Vt:Yt).prototype)}function Ze(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Jt.prototype.cacheResult.call(this)}function Ve(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ye(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function Ge(t,e){if(!t)throw new Error(e)}function Qe(t){Ge(t!==1/0,"Cannot perform this action with an infinite size.")}function Xe(t){if(Ft(t)&&"string"!=typeof t)return t;if(jt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Me.prototype.cacheResult=Ae.prototype.cacheResult=ke.prototype.cacheResult=De.prototype.cacheResult=Ze;var tn=Object.prototype.toString;function en(t){if(!t||"object"!=typeof t||"[object Object]"!==tn.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e,r=Object.getPrototypeOf(e);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===e}function nn(t){return"object"==typeof t&&(qt(t)||Array.isArray(t)||en(t))}function rn(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function on(t,e,n){return qt(t)?t.get(e,n):function(t,e){return qt(t)?t.has(e):nn(t)&&Ht.call(t,e)}(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function un(t){if(Array.isArray(t))return Ye(t);var e={};for(var n in t)Ht.call(t,n)&&(e[n]=t[n]);return e}function an(t,e,n,r){r||(r=n,n=void 0);var i=sn(qt(t),t,Xe(e),0,n,r);return i===at?n:i}function sn(t,e,n,r,i,o){var u=e===at;if(r===n.length){var a=u?i:e,s=o(a);return s===a?e:s}if(!u&&!nn(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(rn)+"]: "+e);var c=n[r],f=u?at:on(e,c,at),h=sn(f===at?t:qt(f),f,n,r+1,i,o);return h===f?e:h===at?function(t,e){if(!nn(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(qt(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Ht.call(t,e))return t;var n=un(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}(e,c):function(t,e,n){if(!nn(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(qt(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(Ht.call(t,e)&&n===t[e])return t;var r=un(t);return r[e]=n,r}(u?t?Rn():{}:e,c,h)}function cn(t,e){return function(t,e,n){return an(t,e,at,(function(){return n}))}(this,t,e)}function fn(t,e){return an(t,e,(function(){return at}))}function hn(t){return fn(this,t)}function ln(t,e,n,r){return an(t,[e],n,r)}function pn(t,e,n){return 1===arguments.length?t(this):ln(this,t,e,n)}function dn(t,e,n){return an(this,t,e,n)}function _n(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=It(e[i]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var e=n?function(e,r){ln(t,r,at,(function(t){return t===at?e:n(t,e,r)}))}:function(e,n){t.set(n,e)},i=0;i<r.length;i++)r[i].forEach(e)})):t.constructor(r[0])}function vn(t,e,n){return yn(t,e,function(t){function e(n,r,i){return nn(n)&&nn(r)&&(o=r,u=Jt(n),a=Jt(o),Et(u)===Et(a)&&bt(u)===bt(a))?yn(n,[r],e):t?t(n,r,i):r;var o,u,a}return e}(n))}function yn(t,e,n){if(!nn(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(qt(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?Ot:It,u=r?function(e){i===t&&(i=un(i)),i.push(e)}:function(e,r){var o=Ht.call(i,r),u=o&&n?n(i[r],e,r):e;o&&u===i[r]||(i===t&&(i=un(i)),i[r]=u)},a=0;a<e.length;a++)o(e[a]).forEach(u);return i}function mn(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return an(this,t,Rn(),(function(t){return yn(t,e)}))}function gn(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return an(this,t,Rn(),(function(t){return vn(t,e)}))}function wn(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function bn(){return this.__ownerID?this:this.__ensureOwner(new ct)}function xn(){return this.__ensureOwner()}function En(){return this.__altered}var zn=function(t){function e(e){return null==e?Rn():ue(e)&&!jt(e)?e:Rn().withMutations((function(n){var r=t(e);Qe(r.size),r.forEach((function(t,e){return n.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Rn().withMutations((function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Cn(this,t,e)},e.prototype.remove=function(t){return Cn(this,t,at)},e.prototype.deleteAll=function(t){var e=St(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Rn()},e.prototype.sort=function(t){return sr(Be(this,t))},e.prototype.sortBy=function(t,e){return sr(Be(this,e,t))},e.prototype.map=function(t,e){var n=this;return this.withMutations((function(r){r.forEach((function(i,o){r.set(o,t.call(e,i,o,n))}))}))},e.prototype.__iterator=function(t,e){return new qn(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Nn(this.size,this._root,t,this.__hash):0===this.size?Rn():(this.__ownerID=t,this.__altered=!1,this)},e}(It);zn.isMap=ue;var Sn=zn.prototype;Sn[oe]=!0,Sn.delete=Sn.remove,Sn.removeAll=Sn.deleteAll,Sn.setIn=cn,Sn.removeIn=Sn.deleteIn=hn,Sn.update=pn,Sn.updateIn=dn,Sn.merge=Sn.concat=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return _n(this,t)},Sn.mergeWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return _n(this,e,t)},Sn.mergeDeep=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return vn(this,t)},Sn.mergeDeepWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return vn(this,e,t)},Sn.mergeIn=mn,Sn.mergeDeepIn=gn,Sn.withMutations=wn,Sn.wasAltered=En,Sn.asImmutable=xn,Sn["@@transducer/init"]=Sn.asMutable=bn,Sn["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Sn["@@transducer/result"]=function(t){return t.asImmutable()};var In=function(t,e){this.ownerID=t,this.entries=e};In.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(ce(n,i[o][0]))return i[o][1];return r},In.prototype.update=function(t,e,n,r,i,o,u){for(var a=i===at,s=this.entries,c=0,f=s.length;c<f&&!ce(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===i:a)return this;if(st(u),(a||!h)&&st(o),!a||1!==s.length){if(!h&&!a&&s.length>=$n)return function(t,e,n,r){t||(t=new ct);for(var i=new kn(t,pe(n),[n,r]),o=0;o<e.length;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}(t,s,r,i);var l=t&&t===this.ownerID,p=l?s:Ye(s);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),l?(this.entries=p,this):new In(t,p)}};var On=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};On.prototype.get=function(t,e,n,r){void 0===e&&(e=pe(n));var i=1<<((0===t?e:e>>>t)&ut),o=this.bitmap;return 0==(o&i)?r:this.nodes[Un(o&i-1)].get(t+5,e,n,r)},On.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=pe(r));var a=(0===e?n:n>>>e)&ut,s=1<<a,c=this.bitmap,f=0!=(c&s);if(!f&&i===at)return this;var h=Un(c&s-1),l=this.nodes,p=f?l[h]:void 0,d=Tn(p,t,e+5,n,r,i,o,u);if(d===p)return this;if(!f&&d&&l.length>=Wn)return function(t,e,n,r,i){for(var o=0,u=new Array(ot),a=0;0!==n;a++,n>>>=1)u[a]=1&n?e[o++]:void 0;return u[r]=i,new An(t,o+1,u)}(t,l,c,a,d);if(f&&!d&&2===l.length&&Ln(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&Ln(d))return d;var _=t&&t===this.ownerID,v=f?d?c:c^s:c|s,y=f?d?Kn(l,h,d,_):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,u=0;u<r;u++)u===e&&(o=1),i[u]=t[u+o];return i}(l,h,_):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),u=0,a=0;a<i;a++)a===e?(o[a]=n,u=-1):o[a]=t[a+u];return o}(l,h,d,_);return _?(this.bitmap=v,this.nodes=y,this):new On(t,v,y)};var An=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};An.prototype.get=function(t,e,n,r){void 0===e&&(e=pe(n));var i=(0===t?e:e>>>t)&ut,o=this.nodes[i];return o?o.get(t+5,e,n,r):r},An.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=pe(r));var a=(0===e?n:n>>>e)&ut,s=i===at,c=this.nodes,f=c[a];if(s&&!f)return this;var h=Tn(f,t,e+5,n,r,i,o,u);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<Hn)return function(t,e,n,r){for(var i=0,o=0,u=new Array(n),a=0,s=1,c=e.length;a<c;a++,s<<=1){var f=e[a];void 0!==f&&a!==r&&(i|=s,u[o++]=f)}return new On(t,i,u)}(t,c,l,a)}else l++;var p=t&&t===this.ownerID,d=Kn(c,a,h,p);return p?(this.count=l,this.nodes=d,this):new An(t,l,d)};var Mn=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};Mn.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(ce(n,i[o][0]))return i[o][1];return r},Mn.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=pe(r));var a=i===at;if(n!==this.keyHash)return a?this:(st(u),st(o),Bn(this,t,e,n,[r,i]));for(var s=this.entries,c=0,f=s.length;c<f&&!ce(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===i:a)return this;if(st(u),(a||!h)&&st(o),a&&2===f)return new kn(t,this.keyHash,s[1^c]);var l=t&&t===this.ownerID,p=l?s:Ye(s);return h?a?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,i]:p.push([r,i]),l?(this.entries=p,this):new Mn(t,this.keyHash,p)};var kn=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};kn.prototype.get=function(t,e,n,r){return ce(n,this.entry[0])?this.entry[1]:r},kn.prototype.update=function(t,e,n,r,i,o,u){var a=i===at,s=ce(r,this.entry[0]);return(s?i===this.entry[1]:a)?this:(st(u),a?void st(o):s?t&&t===this.ownerID?(this.entry[1]=i,this):new kn(t,this.keyHash,[r,i]):(st(o),Bn(this,t,e,pe(r),[r,i])))},In.prototype.iterate=Mn.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},On.prototype.iterate=An.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},kn.prototype.iterate=function(t,e){return t(this.entry)};var Dn,qn=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&jn(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return Pn(t,n.entry)}else if(n.entries){if(r<=(i=n.entries.length-1))return Pn(t,n.entries[this._reverse?i-r:r])}else if(r<=(i=n.nodes.length-1)){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Pn(t,o.entry);e=this._stack=jn(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(Tt);function Pn(t,e){return Lt(t,e[0],e[1])}function jn(t,e){return{node:t,index:0,__prev:e}}function Nn(t,e,n,r){var i=Object.create(Sn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Rn(){return Dn||(Dn=Nn(0))}function Cn(t,e,n){var r,i;if(t._root){var o={value:!1},u={value:!1};if(r=Tn(t._root,t.__ownerID,0,void 0,e,n,o,u),!u.value)return t;i=t.size+(o.value?n===at?-1:1:0)}else{if(n===at)return t;i=1,r=new In(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Nn(i,r):Rn()}function Tn(t,e,n,r,i,o,u,a){return t?t.update(e,n,r,i,o,u,a):o===at?t:(st(a),st(u),new kn(e,r,[i,o]))}function Ln(t){return t.constructor===kn||t.constructor===Mn}function Bn(t,e,n,r,i){if(t.keyHash===r)return new Mn(e,r,[t.entry,i]);var o,u=(0===n?t.keyHash:t.keyHash>>>n)&ut,a=(0===n?r:r>>>n)&ut,s=u===a?[Bn(t,e,n+5,r,i)]:(o=new kn(e,r,i),u<a?[t,o]:[o,t]);return new On(e,1<<u|1<<a,s)}function Un(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Kn(t,e,n,r){var i=r?t:Ye(t);return i[e]=n,i}var $n=8,Wn=16,Hn=8,Fn="@@__IMMUTABLE_LIST__@@";function Jn(t){return Boolean(t&&t[Fn])}var Zn=function(t){function e(e){var n=er();if(null==e)return n;if(Jn(e))return e;var r=t(e),i=r.size;return 0===i?n:(Qe(i),i>0&&i<ot?tr(0,i,5,null,new Yn(r.toArray())):n.withMutations((function(t){t.setSize(i),r.forEach((function(e,n){return t.set(n,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=ht(this,t))>=0&&t<this.size){var n=ir(this,t+=this._origin);return n&&n.array[t&ut]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=ht(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?or(t,e).set(0,n):or(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,i=t._root,o={value:!1};e>=ur(t._capacity)?r=nr(r,t.__ownerID,0,e,n,o):i=nr(i,t.__ownerID,t._level,e,n,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t;return tr(t._origin,t._capacity,t._level,i,r)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):er()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){or(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},e.prototype.pop=function(){return or(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){or(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},e.prototype.shift=function(){return or(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!=typeof i&&Ut(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(t){n.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(n[0])},e.prototype.setSize=function(t){return or(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations((function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,n))}))},e.prototype.slice=function(t,e){var n=this.size;return pt(t,e,n)?this:or(this,dt(t,n),_t(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=Xn(this,e);return new Tt((function(){var i=r();return i===Qn?{value:void 0,done:!0}:Lt(t,e?--n:n++,i)}))},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=Xn(this,e);(n=i())!==Qn&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?tr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?er():(this.__ownerID=t,this.__altered=!1,this)},e}(Ot);Zn.isList=Jn;var Vn=Zn.prototype;Vn[Fn]=!0,Vn.delete=Vn.remove,Vn.merge=Vn.concat,Vn.setIn=cn,Vn.deleteIn=Vn.removeIn=hn,Vn.update=pn,Vn.updateIn=dn,Vn.mergeIn=mn,Vn.mergeDeepIn=gn,Vn.withMutations=wn,Vn.wasAltered=En,Vn.asImmutable=xn,Vn["@@transducer/init"]=Vn.asMutable=bn,Vn["@@transducer/step"]=function(t,e){return t.push(e)},Vn["@@transducer/result"]=function(t){return t.asImmutable()};var Yn=function(t,e){this.array=t,this.ownerID=e};Yn.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&ut;if(r>=this.array.length)return new Yn([],t);var i,o=0===r;if(e>0){var u=this.array[r];if((i=u&&u.removeBefore(t,e-5,n))===u&&o)return this}if(o&&!i)return this;var a=rr(this,t);if(!o)for(var s=0;s<r;s++)a.array[s]=void 0;return i&&(a.array[r]=i),a},Yn.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&ut;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-5,n))===o&&i===this.array.length-1)return this}var u=rr(this,t);return u.array.splice(i+1),r&&(u.array[i]=r),u};var Gn,Qn={};function Xn(t,e){var n=t._origin,r=t._capacity,i=ur(r),o=t._tail;return u(t._root,t._level,0);function u(t,a,s){return 0===a?function(t,u){var a=u===i?o&&o.array:t&&t.array,s=u>n?0:n-u,c=r-u;c>ot&&(c=ot);return function(){if(s===c)return Qn;var t=e?--c:s++;return a&&a[t]}}(t,s):function(t,i,o){var a,s=t&&t.array,c=o>n?0:n-o>>i,f=1+(r-o>>i);f>ot&&(f=ot);return function(){for(;;){if(a){var t=a();if(t!==Qn)return t;a=null}if(c===f)return Qn;var n=e?--f:c++;a=u(s&&s[n],i-5,o+(n<<i))}}}(t,a,s)}}function tr(t,e,n,r,i,o,u){var a=Object.create(Vn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=u,a.__altered=!1,a}function er(){return Gn||(Gn=tr(0,0,5))}function nr(t,e,n,r,i,o){var u,a=r>>>n&ut,s=t&&a<t.array.length;if(!s&&void 0===i)return t;if(n>0){var c=t&&t.array[a],f=nr(c,e,n-5,r,i,o);return f===c?t:((u=rr(t,e)).array[a]=f,u)}return s&&t.array[a]===i?t:(o&&st(o),u=rr(t,e),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function rr(t,e){return e&&t&&e===t.ownerID?t:new Yn(t?t.array.slice():[],e)}function ir(t,e){if(e>=ur(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&ut],r-=5;return n}}function or(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new ct,i=t._origin,o=t._capacity,u=i+e,a=void 0===n?o:n<0?o+n:i+n;if(u===i&&a===o)return t;if(u>=a)return t.clear();for(var s=t._level,c=t._root,f=0;u+f<0;)c=new Yn(c&&c.array.length?[void 0,c]:[],r),f+=1<<(s+=5);f&&(u+=f,i+=f,a+=f,o+=f);for(var h=ur(o),l=ur(a);l>=1<<s+5;)c=new Yn(c&&c.array.length?[c]:[],r),s+=5;var p=t._tail,d=l<h?ir(t,a-1):l>h?new Yn([],r):p;if(p&&l>h&&u<o&&p.array.length){for(var _=c=rr(c,r),v=s;v>5;v-=5){var y=h>>>v&ut;_=_.array[y]=rr(_.array[y],r)}_.array[h>>>5&ut]=p}if(a<o&&(d=d&&d.removeAfter(r,0,a)),u>=l)u-=l,a-=l,s=5,c=null,d=d&&d.removeBefore(r,0,u);else if(u>i||l<h){for(f=0;c;){var m=u>>>s&ut;if(m!==l>>>s&ut)break;m&&(f+=(1<<s)*m),s-=5,c=c.array[m]}c&&u>i&&(c=c.removeBefore(r,s,u-f)),c&&l<h&&(c=c.removeAfter(r,s,l-f)),f&&(u-=f,a-=f)}return t.__ownerID?(t.size=a-u,t._origin=u,t._capacity=a,t._level=s,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):tr(u,a,s,c,d)}function ur(t){return t<ot?0:t-1>>>5<<5}var ar,sr=function(t){function e(t){return null==t?fr():ae(t)?t:fr().withMutations((function(e){var n=It(t);Qe(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):fr()},e.prototype.set=function(t,e){return hr(this,t,e)},e.prototype.remove=function(t){return hr(this,t,at)},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?cr(e,n,t,this.__hash):0===this.size?fr():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=n,this)},e}(zn);function cr(t,e,n,r){var i=Object.create(sr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function fr(){return ar||(ar=cr(Rn(),er()))}function hr(t,e,n){var r,i,o=t._map,u=t._list,a=o.get(e),s=void 0!==a;if(n===at){if(!s)return t;u.size>=ot&&u.size>=2*o.size?(r=(i=u.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===u.size-1?u.pop():u.set(a,void 0))}else if(s){if(n===u.get(a)[1])return t;r=o,i=u.set(a,[e,n])}else r=o.set(e,u.size),i=u.set(u.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t.__altered=!0,t):cr(r,i)}sr.isOrderedMap=ae,sr.prototype[Pt]=!0,sr.prototype.delete=sr.prototype.remove;var lr="@@__IMMUTABLE_STACK__@@";function pr(t){return Boolean(t&&t[lr])}var dr=function(t){function e(t){return null==t?mr():pr(t)?t:mr().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=ht(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):yr(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&pr(e))return e;Qe(e.size);var n=this.size,r=this._head;return e.__iterate((function(t){n++,r={value:t,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):yr(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):mr()},e.prototype.slice=function(e,n){if(pt(e,n,this.size))return this;var r=dt(e,this.size);if(_t(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):yr(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?yr(this.size,this._head,t,this.__hash):0===this.size?mr():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new Gt(this.toArray()).__iterate((function(e,r){return t(e,r,n)}),e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new Gt(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new Tt((function(){if(r){var e=r.value;return r=r.next,Lt(t,n++,e)}return{value:void 0,done:!0}}))},e}(Ot);dr.isStack=pr;var _r,vr=dr.prototype;function yr(t,e,n,r){var i=Object.create(vr);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function mr(){return _r||(_r=yr(0))}vr[lr]=!0,vr.shift=vr.pop,vr.unshift=vr.push,vr.unshiftAll=vr.pushAll,vr.withMutations=wn,vr.wasAltered=En,vr.asImmutable=xn,vr["@@transducer/init"]=vr.asMutable=bn,vr["@@transducer/step"]=function(t,e){return t.unshift(e)},vr["@@transducer/result"]=function(t){return t.asImmutable()};var gr="@@__IMMUTABLE_SET__@@";function wr(t){return Boolean(t&&t[gr])}function br(t){return wr(t)&&jt(t)}function xr(t,e){if(t===e)return!0;if(!gt(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||bt(t)!==bt(e)||Et(t)!==Et(e)||jt(t)!==jt(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!zt(t);if(jt(t)){var r=t.entries();return e.every((function(t,e){var i=r.next().value;return i&&ce(i[1],t)&&(n||ce(i[0],e))}))&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,a=e.__iterate((function(e,r){if(n?!t.has(e):i?!ce(e,t.get(r,at)):!ce(t.get(r,at),e))return u=!1,!1}));return u&&t.size===a}function Er(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function zr(t){if(!t||"object"!=typeof t)return t;if(!gt(t)){if(!nn(t))return t;t=Jt(t)}if(bt(t)){var e={};return t.__iterate((function(t,n){e[n]=zr(t)})),e}var n=[];return t.__iterate((function(t){n.push(zr(t))})),n}var Sr=function(t){function e(e){return null==e?kr():wr(e)&&!jt(e)?e:kr().withMutations((function(n){var r=t(e);Qe(r.size),r.forEach((function(t){return n.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(It(t).keySeq())},e.intersect=function(t){return(t=St(t).toArray()).length?Or.intersect.apply(e(t.pop()),t):kr()},e.union=function(t){return(t=St(t).toArray()).length?Or.union.apply(e(t.pop()),t):kr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Ar(this,this._map.set(t,t))},e.prototype.remove=function(t){return Ar(this,this._map.remove(t))},e.prototype.clear=function(){return Ar(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=!1,i=Ar(this,this._map.mapEntries((function(i){var o=i[1],u=t.call(e,o,o,n);return u!==o&&(r=!0),[u,u]}),e));return r?i:this},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach((function(t){return n.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Jr(Be(this,t))},e.prototype.sortBy=function(t,e){return Jr(Be(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(At);Sr.isSet=wr;var Ir,Or=Sr.prototype;function Ar(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Mr(t,e){var n=Object.create(Or);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function kr(){return Ir||(Ir=Mr(Rn()))}Or[gr]=!0,Or.delete=Or.remove,Or.merge=Or.concat=Or.union,Or.withMutations=wn,Or.asImmutable=xn,Or["@@transducer/init"]=Or.asMutable=bn,Or["@@transducer/step"]=function(t,e){return t.add(e)},Or["@@transducer/result"]=function(t){return t.asImmutable()},Or.__empty=kr,Or.__make=Mr;var Dr,qr=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Ge(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Dr)return Dr;Dr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+ht(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return pt(t,n,this.size)?this:(t=dt(t,this.size),(n=_t(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new Tt((function(){if(o===n)return{value:void 0,done:!0};var u=i;return i+=e?-r:r,Lt(t,e?n-++o:o++,u)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:xr(this,t)},e}(Vt);function Pr(t,e,n){for(var r=Xe(e),i=0;i!==r.length;)if((t=on(t,r[i++],at))===at)return n;return t}function jr(){Qe(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t}St.isIterable=gt,St.isKeyed=bt,St.isIndexed=Et,St.isAssociative=zt,St.isOrdered=jt,St.Iterator=Tt,Er(St,{toArray:function(){Qe(this.size);var t=new Array(this.size||0),e=bt(this),n=0;return this.__iterate((function(r,i){t[n++]=e?[i,r]:r})),t},toIndexedSeq:function(){return new Me(this)},toJS:function(){return zr(this)},toKeyedSeq:function(){return new Ae(this,!0)},toMap:function(){return zn(this.toKeyedSeq())},toObject:jr,toOrderedMap:function(){return sr(this.toKeyedSeq())},toOrderedSet:function(){return Jr(bt(this)?this.valueSeq():this)},toSet:function(){return Sr(bt(this)?this.valueSeq():this)},toSetSeq:function(){return new ke(this)},toSeq:function(){return Et(this)?this.toIndexedSeq():bt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return dr(bt(this)?this.valueSeq():this)},toList:function(){return Zn(bt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return We(this,Te(this,t))},includes:function(t){return this.some((function(e){return ce(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Qe(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1})),n},filter:function(t,e){return We(this,Ne(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Qe(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Qe(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return We(this,Pe(this,t,e))},reduce:function(t,e,n){return Lr(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Lr(this,t,e,n,arguments.length<2,!0)},reverse:function(){return We(this,je(this,!0))},slice:function(t,e){return We(this,Re(this,t,e,!0))},some:function(t,e){return!this.every(Kr(t),e)},sort:function(t){return We(this,Be(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return ft(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=zn().asMutable();return t.__iterate((function(i,o){r.update(e.call(n,i,o,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return xr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Gt(t._cache);var e=t.toSeq().map(Ur).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Kr(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(lt,null,t)},flatMap:function(t,e){return We(this,function(t,e,n){var r=Fe(t);return t.toSeq().map((function(i,o){return r(e.call(n,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return We(this,Le(this,t,!0))},fromEntrySeq:function(){return new De(this)},get:function(t,e){return this.find((function(e,n){return ce(n,t)}),void 0,e)},getIn:function(t,e){return Pr(this,t,e)},groupBy:function(t,e){return function(t,e,n){var r=bt(t),i=(jt(t)?sr():zn()).asMutable();t.__iterate((function(o,u){i.update(e.call(n,o,u,t),(function(t){return(t=t||[]).push(r?[u,o]:o),t}))}));var o=Fe(t);return i.map((function(e){return We(t,o(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,at)!==at},hasIn:function(t){return Pr(this,t,at)!==at},isSubset:function(t){return t="function"==typeof t.includes?t:St(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:St(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return ce(e,t)}))},keySeq:function(){return this.toSeq().map(Br).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ue(this,t)},maxBy:function(t,e){return Ue(this,e,t)},min:function(t){return Ue(this,t?$r(t):Hr)},minBy:function(t,e){return Ue(this,e?$r(e):Hr,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return We(this,Ce(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Kr(t),e)},sortBy:function(t,e){return We(this,Be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return We(this,function(t,e,n){var r=Je(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var u=0;return t.__iterate((function(t,i,a){return e.call(n,t,i,a)&&++u&&r(t,i,o)})),u},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var u=t.__iterator(2,i),a=!0;return new Tt((function(){if(!a)return{value:void 0,done:!0};var t=u.next();if(t.done)return t;var i=t.value,s=i[0],c=i[1];return e.call(n,c,s,o)?2===r?t:Lt(r,s,c,t):(a=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Kr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=jt(t),n=bt(t),r=e?1:0;return function(t,e){return e=fe(e,3432918353),e=fe(e<<15|e>>>-15,461845907),e=fe(e<<13|e>>>-13,5),e=fe((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=he((e=fe(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Fr(pe(t),pe(e))|0}:function(t,e){r=r+Fr(pe(t),pe(e))|0}:e?function(t){r=31*r+pe(t)|0}:function(t){r=r+pe(t)|0}),r)}(this))}});var Nr=St.prototype;Nr[mt]=!0,Nr[Ct]=Nr.values,Nr.toJSON=Nr.toArray,Nr.__toStringMapper=rn,Nr.inspect=Nr.toSource=function(){return this.toString()},Nr.chain=Nr.flatMap,Nr.contains=Nr.includes,Er(It,{flip:function(){return We(this,qe(this))},mapEntries:function(t,e){var n=this,r=0;return We(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return We(this,this.toSeq().flip().map((function(r,i){return t.call(e,r,i,n)})).flip())}});var Rr=It.prototype;Rr[wt]=!0,Rr[Ct]=Nr.entries,Rr.toJSON=jr,Rr.__toStringMapper=function(t,e){return rn(e)+": "+rn(t)},Er(Ot,{toKeyedSeq:function(){return new Ae(this,!1)},filter:function(t,e){return We(this,Ne(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return We(this,je(this,!1))},slice:function(t,e){return We(this,Re(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=dt(t,t<0?this.count():this.size);var r=this.slice(0,t);return We(this,1===n?r:r.concat(Ye(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return We(this,Le(this,t,!1))},get:function(t,e){return(t=ht(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=ht(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return We(this,function(t,e){var n=Je(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate((function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(1,r),u=0;return new Tt((function(){return(!i||u%2)&&(i=o.next()).done?i:u%2?Lt(n,u++,e):Lt(n,u++,i.value,i)}))},n}(this,t))},interleave:function(){var t=[this].concat(Ye(arguments)),e=$e(this.toSeq(),Vt.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),We(this,n)},keySeq:function(){return qr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return We(this,Ce(this,t,e,!1))},zip:function(){var t=[this].concat(Ye(arguments));return We(this,$e(this,Wr,t))},zipAll:function(){var t=[this].concat(Ye(arguments));return We(this,$e(this,Wr,t,!0))},zipWith:function(t){var e=Ye(arguments);return e[0]=this,We(this,$e(this,t,e))}});var Cr=Ot.prototype;Cr[xt]=!0,Cr[Pt]=!0,Er(At,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Tr=At.prototype;function Lr(t,e,n,r,i,o){return Qe(t.size),t.__iterate((function(t,o,u){i?(i=!1,n=t):n=e.call(r,n,t,o,u)}),o),n}function Br(t,e){return e}function Ur(t,e){return[e,t]}function Kr(t){return function(){return!t.apply(this,arguments)}}function $r(t){return function(){return-t.apply(this,arguments)}}function Wr(){return Ye(arguments)}function Hr(t,e){return t<e?1:t>e?-1:0}function Fr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Tr.has=Nr.includes,Tr.contains=Tr.includes,Tr.keys=Tr.values,Er(Zt,Rr),Er(Vt,Cr),Er(Yt,Tr);var Jr=function(t){function e(t){return null==t?Gr():br(t)?t:Gr().withMutations((function(e){var n=At(t);Qe(n.size),n.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(It(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Sr);Jr.isOrderedSet=br;var Zr,Vr=Jr.prototype;function Yr(t,e){var n=Object.create(Vr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Gr(){return Zr||(Zr=Yr(fr()))}function Qr(t,e){return Xr([],e||ti,t,"",e&&e.length>2?[]:void 0,{"":t})}function Xr(t,e,n,r,i,o){if("string"!=typeof n&&!qt(n)&&(Ft(n)||Ut(n)||en(n))){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==r&&i.push(r);var u=e.call(o,r,Jt(n).map((function(r,o){return Xr(t,e,r,o,i,n)})),i&&i.slice());return t.pop(),i&&i.pop(),u}return n}function ti(t,e){return Et(e)?e.toList():bt(e)?e.toMap():e.toSet()}Vr[Pt]=!0,Vr.zip=Cr.zip,Vr.zipWith=Cr.zipWith,Vr.zipAll=Cr.zipAll,Vr.__empty=Gr,Vr.__make=Yr;const ei=new Image;function ni(t){return"html-element"===t.type?`html-element:${t.name}`:"react-component"===t.type?`react_component:${t.packageName}:${t.packageVersion}:${t.exportName}`:""}function ri(t){const[e,n]=o(t.value);return i((()=>{const e=t.subscribe(n);return()=>{e.unsubscribe()}}),[t]),e}function ii({rootNode:t,node:e,greenZone:n}){return"node_without_children"!==n.type||"inner"!==n.position&&"inner-left"!==n.position&&"inner-right"!==n.position?"node_without_children"===n.type&&"left"===n.position?D(t,n.contour.id,e):"node_without_children"===n.type&&"right"===n.position?q(t,n.contour.id,e):"adjacent-with-parent"===n.type&&"left"===n.edge?D(t,n.child.id,e):"adjacent-with-parent"===n.type&&"right"===n.edge?q(t,n.child.id,e):"between-nodes"===n.type?n.left.absolutePosition.height<n.right.absolutePosition.height?q(t,n.left.id,e):n.left.absolutePosition.height>n.right.absolutePosition.height?D(t,n.right.id,e):q(t,n.left.id,e):void 0:k(t,n.contour.id,e)}function oi(t){return t.id=B(t.type),t}function ui(t){return P(t,{htmlNode:t=>oi(t),reactComponentNode:t=>oi(t),loopContainerNode:t=>oi(t),composedNode:t=>oi(t),refNode:t=>oi(t),jsxNode:t=>oi(t),routeNode:t=>oi(t)})}function ai(t){const e=t.getData(U);if(e)return{type:"move_node_request",nodeID:e};const n=function(t){try{return JSON.parse(t)}catch(t){return}}(t.getData(K));return n?{type:"insert_node_request",node:ui(n)}:void 0}function si(){return e.createElement("div",null,"请拖拽组件到此处！")}ei.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ci=function(){return e.createElement("div",{className:"placeholder-for-container-node-children"},e.createElement(si))};const fi=new Map;function hi(t){return fi.get(ni(t))}function li(t){return!!window.__OVER_LAYER_COMPONENTS.find((({packageName:e,exportName:n})=>n===t.exportName))}new l(Sr());const pi=new l(void 0),di=new p,_i=new l(void 0),vi=new l(""),yi=new p,mi=new l(""),gi=new l(!1),wi=new l(void 0),bi=new l(void 0),xi=new p,Ei={node:{id:$,type:"html-element",name:"div"}},zi=new l(Qr({id:"initial",type:"html",nam:"div"})),Si=new l(Ei),Ii=new l(void 0),Oi=new l(void 0),Ai=new l(void 0),Mi=new l(void 0),ki=new l(void 0),Di=zi.pipe(d((t=>t.getIn(["id"]))),_()),qi=xi.pipe(v((()=>!!wi.value)),d((t=>ai(t.dataTransfer))),v((t=>!!t)),d((t=>{if(wi.value)return"move_node_request"===t.type?function({rootNode:t,nodeID:e,greenZone:n}){let r=t;const i=M(t,e);if(!i)return;const o=t.getIn(i);return o?(r=fn(t,i),ii({rootNode:r,node:o,greenZone:n})):void 0}({rootNode:zi.value,nodeID:t.nodeID,greenZone:wi.value}):"insert_node_request"===t.type?ii({rootNode:zi.value,node:t.node,greenZone:wi.value}):void 0})),d((t=>t?t.toJS():void 0)),v((t=>!!t)));function Pi(){const[t,e]=o("");return i((()=>{const t=Di.subscribe(e);return()=>{t.unsubscribe()}}),[]),t}Si.pipe(d((t=>Qr(t.node)))).subscribe(zi),vi.pipe(d((t=>{if(t)return M(zi.value,t)}))).subscribe(_i),Ai.pipe(d((t=>{if(!t)return;const e=M(zi.value,t);if(!e)return;return zi.value.getIn(e).toJS()})),d((t=>{if(t)return{node:t,apiStateSpec:Si.value.apiStateSpec,sharedStatesSpec:Si.value.sharedStatesSpec}}))).subscribe(ki),y({activeNode:Ii,contourNodesReport:pi,modalLayerContourNodesReport:bi,activeOverLayerNodeID:Ai}).pipe(d((({activeNode:t,contourNodesReport:e,modalLayerContourNodesReport:n,activeOverLayerNodeID:r})=>r?null==n?void 0:n.find((({id:e})=>e===(null==t?void 0:t.id))):null==e?void 0:e.find((({id:e})=>e===(null==t?void 0:t.id))))),_(((t,e)=>(null==t?void 0:t.id)===(null==e?void 0:e.id)))).subscribe(Oi),Oi.pipe(v((t=>!!t)),d((({absolutePosition:t,relativeRect:e})=>{const{x:n,y:r,height:i}=t;return(null==e?void 0:e.y)<40?{transform:`translate(${n+4}px, ${r+i}px)`}:{transform:`translate(${n+4}px, ${r}px)`}}))).subscribe(Mi);const ji=new W(window.parent,"iframe-side");function Ni(t){ji.send(F,t)}function Ri(t){ji.send(H,t)}function Ci(t){const e=hi(t);return void 0!==e?Promise.resolve(e):function(t){return ji.request(Z,t)}(t).then((e=>(function(t,e){const n=ni(t);fi.set(n,e)}(t,e),e)))}function Ti(t){const[e,n]=o(!0);return i((()=>{let e=!1;return Ci(function(t){return"html-element"===t.type?{type:"html-element",name:t.name}:{type:"react-component",packageName:t.packageName,packageVersion:t.packageVersion,exportName:t.exportName}}(t)).then((()=>{e||n(!1)})).catch(m),()=>{e=!0}}),[]),e}ji.waitForReady().then((()=>{})).catch(m),ji.listen(H).subscribe(Si),ji.listen(F).pipe(_(((t,e)=>(null==t?void 0:t.id)===(null==e?void 0:e.id)))).subscribe(Ii),ji.listen(J).subscribe(Ai),qi.subscribe((t=>{Ri({...Si.value,node:t})}));var Li=function({node:t,ctx:r}){const u=n(nt)+1,a=function(t,e,r){const u=s(t,e),[a,c]=o(),f=n(X);return i((()=>(a&&rt(a,f),()=>{a&&it(a,f)})),[a]),{...u,ref:t=>t&&c(t),"data-simulator-node-id":t.id,"data-simulator-node-depth":r,"data-simulator-node-executor":ni(t)}}(t,r,u);return Ti(t)?null:t.name?t.children&&t.children.length?e.createElement(nt.Provider,{value:u},e.createElement(t.name,a,e.createElement(et,{nodes:t.children||[],ctx:r}))):e.createElement(t.name,a,hi(t)?e.createElement(ci,{parent:t}):void 0):(A.error("name property is required in html node spec,",`please check the spec of node: ${t.id}.`),null)};const Bi={childList:!0};function Ui(t){const[e,n]=o((()=>(null==t?void 0:t.firstElementChild)?null==t?void 0:t.firstElementChild:null));return i((()=>{if(!t)return;t.firstElementChild&&n(t.firstElementChild);const e=new MutationObserver(function(t){return e=>{for(const{type:n,target:r}of e){if("childList"!==n)return;if(r.nodeType!==Node.ELEMENT_NODE)return;const e=r.firstElementChild;if(!e)return;t(e)}}}(n));return e.observe(t,Bi),()=>{e.disconnect()}}),[t]),e}var Ki=function(t,e,u){const a=s(t,e),c=function(t,e){const[u,a]=o(),s=Ui(u),c=r(),f=n(X);return i((()=>{if(c.current&&it(c.current,f),s)return s.dataset.simulatorNodeId=t.id,s.dataset.simulatorNodeExecutor=ni(t),s.dataset.simulatorNodeDepth=`${e}`,rt(s,f),c.current=s,()=>{s&&it(s,f)}}),[s]),a}(t,u);return{nodeProps:a,wrapperProps:{style:{display:"contents"},ref:c}}};class $i extends e.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(t){super(t),this.state={hasError:!1}}componentDidCatch(t,e){A.error("failed to render component:",t)}render(){return this.state.hasError?null:this.props.children}}var Wi=function({node:t,ctx:r}){const i=n(nt)+1,{nodeProps:o,wrapperProps:u}=Ki(t,r,i),a=c(t,r.plugins),s=1===i;return Ti(t)||!a||!s&&li(t)?null:(s&&li(t)&&(o.isOpen=!0,o.container="inside"),t.children&&t.children.length?e.createElement(nt.Provider,{value:i},e.createElement($i,{},e.createElement("div",u,e.createElement(a,o,e.createElement(et,{nodes:t.children||[],ctx:r}))))):e.createElement($i,{},e.createElement("div",u,e.createElement(a,o,hi(t)?e.createElement(ci,{parent:t}):void 0))))};function Hi({node:t,ctx:n}){var r;const i=t.nodes||t.children;if("html-element"===(null==(r=t.outLayer)?void 0:r.type)){const r={...t.outLayer,children:t.nodes||t.children};e.createElement(Li,{node:r,ctx:n})}return e.createElement(et,{nodes:i,ctx:n})}var Fi=function({node:t,ctx:n}){return e.createElement(Ji,{node:t.node,ctx:n})};var Ji=function({node:t,ctx:r}){const i=n(nt);return"route-node"===t.type||"jsx-node"===t.type||"ref-node"===t.type?(A.debug("simulator skip render unsupported node:",t),null):"html-element"===t.type?e.createElement(nt.Provider,{value:i},e.createElement(Li,{node:t,ctx:r})):"react-component"===t.type?e.createElement(nt.Provider,{value:i},e.createElement(Wi,{node:t,ctx:r})):"composed-node"===t.type?e.createElement(Hi,{node:t,ctx:r}):"loop-container"===t.type?e.createElement(Fi,{node:t,ctx:r}):null};const Zi=new l(new Set);function Vi({artery:t}){const{ctx:n,rootNode:r}=f(t,h)||{};return tt(u((t=>bi.next(t)),[])),n&&r?e.createElement("div",{className:"simulator-background-layer"},e.createElement(Ji,{node:r,ctx:n})):null}var Yi=function(){const t=ri(ki);return t?e.createElement(X.Provider,{value:Zi},e.createElement(Vi,{artery:t})):null};const Gi=new l(new Set);function Qi({rootElement:t}){const n=ri(Si),{ctx:r,rootNode:i}=f(n,h)||{};return tt(u((t=>pi.next(t)),[]),t),r&&i?e.createElement(Ji,{node:i,ctx:r}):null}function Xi(){const[t,n]=o();return e.createElement(X.Provider,{value:Gi},e.createElement("div",{className:"simulator-background-layer",ref:t=>{t&&n(t)}},t&&e.createElement(Qi,{rootElement:t})))}var to=function(){return e.createElement(e.Fragment,null,e.createElement(Xi,null),e.createElement(Yi,null))};function eo(t){return t.preventDefault(),t.stopPropagation(),!1}var no=function({contourNode:t}){const n=ri(mi),s=Pi(),c=function({depth:t,absolutePosition:e}){const{height:n,width:r,x:i,y:o}=e;return a((()=>({zIndex:t,height:n,width:r,transform:`translate(${i}px, ${o}px)`})),[n,r,i,o,t])}(t),f=function(t){const e=r(),n=ri(vi),i=ri(_i);return u((r=>!!r.dataTransfer.types.includes("artery_node")||!(!n||!i)&&n!==t&&(void 0===e.current&&(e.current=!!M(i,t)),!e.current)),[n,i])}(t.id),h=function(t){const[e,n]=o(!1);return i((()=>{const e=Oi.pipe(d((e=>(null==e?void 0:e.id)===t)),_()).subscribe(n);return()=>{e.unsubscribe()}}),[]),e}(t.id),[l,p]=o(!1);return e.createElement(e.Fragment,null,e.createElement("div",{id:`contour-${t.id}`,style:c,onClick:()=>{const e=M(zi.value,t.id);if(!e)return;const n=zi.value.getIn(e);n&&Ni(n.toJS())},draggable:t.id!==s,onDragStart:e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData(U,t.id),vi.next(t.id),p(!0),e.dataTransfer.setDragImage(ei,0,0)},onDragEnd:()=>{vi.next(""),p(!1),gi.next(!1)},onDragOver:t=>{f(t)&&(gi.next(!0),eo(t),di.next({x:t.clientX,y:t.clientY}))},onDrag:t=>{eo(t),gi.next(!0)},onDragEnter:e=>{if(f(e))return yi.next(t),eo(e),!1},onDragLeave:()=>{gi.next(!1)},onDrop:t=>(eo(t),xi.next(t),gi.next(!1),!1),className:V("contour-node",{"contour-node--root":s===t.id,"contour-node--active":h,"contour-node--hover-as-parent":n===t.id,"contour-node--dragging":l})}))};var ro=function({currentNodeID:t,onParentClick:n}){const r=ri(Si),[u,a]=o([]);return i((()=>{const e=j(zi.value,t);if(!e)return;const n=e.map((t=>{const e=N(zi.value,t);if(e)return zi.value.getIn(e)})).filter((t=>{if(!t)return!1;const e=t.getIn(["type"]);return"html-element"===e||"react-component"===e})).toJS();a((null==n?void 0:n.reverse().slice(0,5))||[])}),[r]),u.length?e.createElement("div",{className:"active-node-parents"},u.map((t=>{const{id:r,label:i}=t;return e.createElement("span",{key:r,className:"active-node-parents__parent",onMouseEnter:()=>{mi.next(r)},onMouseLeave:()=>{mi.next("")},onClick:e=>{e.stopPropagation(),mi.next(""),Ni(t),n()}},i||r)}))):null};const io=[{name:"offset",options:{offset:[0,4]}}];var oo=function(){const t=ri(Ii),n=ri(Oi),{referenceRef:i,Popper:o,handleMouseEnter:u,handleMouseLeave:s,close:c}=G(),f=r(null),h=ri(Mi),l=a((()=>p?p.label?null==p?void 0:p.label:"exportName"in p?p.exportName.toUpperCase():"name"in p?p.name.toUpperCase():p.id:"untitled"),[p=t]);var p;const d=Pi();return n&&n.id!==d?e.createElement("div",{ref:f,className:"active-contour-node-toolbar",style:h},e.createElement("span",{ref:i,className:"active-contour-node-toolbar__parents",onMouseEnter:u(),onMouseLeave:s()},l),e.createElement("span",{onClick:function(){if(!t)return;const e=ui(t),n=C(Si.value.node,t.id,e);n&&Ri({...Si.value,node:n})},className:"active-contour-node-toolbar__action",title:"复制"},e.createElement(Q,{name:"content_copy",size:16})),e.createElement("span",{onClick:function(){if(!Oi.value)return;const t=R(Si.value.node,Oi.value.id);Ri({...Si.value,node:t}),Ni(void 0)},className:"active-contour-node-toolbar__action",title:"删除"},e.createElement(Q,{name:"delete_forever",size:16})),e.createElement(o,{placement:"bottom-start",modifiers:io,container:f.current},e.createElement(ro,{currentNodeID:n.id,onParentClick:c}))):null};Y(".contour-nodes {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n}\n\n.contour-node {\n  position: absolute;\n  top: 0;\n  border-width: 1px;\n  border-color: transparent;\n}\n.contour-node:hover:not(.contour-node--root, .contour-node--active) {\n  outline: 1px dashed #0084ff;\n}\n\n.contour-node--active {\n  box-shadow: inset 0 0 0 2px #0084ff;\n}\n\n.contour-node--hover-as-parent {\n  border-color: #f85900;\n  border-style: dashed;\n}\n\n.contour-node--dragging {\n  opacity: 0.7;\n  background-color: white;\n}\n\n.active-contour-node-toolbar {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  top: -30px;\n  z-index: 1;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__parents,\n.active-contour-node-toolbar .active-contour-node-toolbar__action {\n  padding: 4px;\n  margin-right: 4px;\n  color: white;\n  font-size: 12px;\n  border-radius: 1px;\n  background-color: #0084ff;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__parents {\n  display: inline-block;\n  max-width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.active-contour-node-toolbar .active-contour-node-toolbar__action {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  fill: white;\n}\n\n.active-node-parents {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n}\n.active-node-parents .active-node-parents__parent {\n  max-width: 200px;\n  padding: 4px;\n  margin-bottom: 4px;\n  color: white;\n  background-color: #0084ff;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.active-node-parents .active-node-parents__parent:hover {\n  background-color: #f85900;\n}",{});var uo=function(){const t=function(){const t=ri(pi)||[],e=ri(bi)||[];return ri(Ai)?e||[]:t||[]}();return e.createElement(e.Fragment,null,e.createElement("div",{className:"contour-nodes"},t.map((t=>e.createElement(no,{key:`contour-${t.id}`,contourNode:t})))),e.createElement(oo,null))};function ao(t,e){const n=[t.x,t.x+t.width],r=[e.x,e.x+e.width],i=[t.y,t.y+t.height],o=[e.y,e.y+e.height],u=Math.max(n[0],r[0]),a=Math.min(n[1],r[1]),s=Math.max(i[0],o[0]),c=Math.min(i[1],o[1]);return u<a&&s<c}function so(t,e,n){const r=function(t,e,n){const r=M(t,e);if(!r)return[];const i=t.getIn(r);if(!i)return[];const o=T(i).map((t=>t.getIn(["id"])));return n.filter((({id:t})=>o.includes(t)))}(t,e.id,n),i=r.map((t=>{const e=function(t,e){return e.filter((e=>!(e.id===t.id||t.raw.x+t.raw.width+2>e.raw.x||t.raw.y>e.raw.y+e.raw.height||t.raw.y+t.raw.height<e.raw.y)))}(t,r);return function(t,e){return e.map((e=>{const n={x:t.absolutePosition.x+t.absolutePosition.width,y:Math.min(t.absolutePosition.y,e.absolutePosition.y),width:e.absolutePosition.x-(t.absolutePosition.x+t.absolutePosition.width),height:Math.min(Math.abs(t.absolutePosition.y-(e.absolutePosition.y+e.absolutePosition.height)),Math.abs(t.absolutePosition.y+t.absolutePosition.height-e.absolutePosition.y))},r={x:t.raw.x+t.absolutePosition.width,y:Math.min(t.raw.y,e.raw.y),width:n.width,height:n.height};return{left:t,right:e,absolutePosition:n,type:"between-nodes",raw:r}}))}(t,e)})).reduce(((t,e)=>t.concat(e)),[]);var o;return[...(o=r,i.filter((({absolutePosition:t})=>!o.some((e=>ao(e.absolutePosition,t)))))),...function(t,e){const n=e.map((e=>{const n={x:t.raw.x,y:e.raw.y,height:e.absolutePosition.height,width:e.absolutePosition.x-t.absolutePosition.x};return{type:"adjacent-with-parent",parent:t,child:e,edge:"left",raw:n,absolutePosition:{x:t.absolutePosition.x,y:e.absolutePosition.y,height:e.absolutePosition.height,width:e.absolutePosition.x-t.absolutePosition.x}}})),r=e.map((e=>{const n=e.absolutePosition.x+e.absolutePosition.width;return{raw:{x:e.raw.x+e.absolutePosition.width,y:e.raw.y,height:e.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-n},type:"adjacent-with-parent",parent:t,child:e,edge:"right",absolutePosition:{x:n,y:e.absolutePosition.y,height:e.absolutePosition.height,width:t.absolutePosition.x+t.absolutePosition.width-n}}}));return n.concat(r).filter((t=>!(t.absolutePosition.height<4||t.absolutePosition.width<4||e.some((({absolutePosition:e})=>ao(e,t.absolutePosition))))))}(e,r)]}function co({greenZone:t}){const[n,r]=o(),u=!!fi.get(t.contour.executor);return i((()=>{const e=di.pipe(g((()=>w())),d((({x:e})=>function(t,e,n){return e?t<n.x+8?"left":t>n.x+n.width-8?"right":"inner":Math.abs(t-n.x)>n.width/2?"right":"left"}(e,u,t.contour.raw))),b((e=>wi.next({position:e,contour:t.contour,type:"node_without_children"}))),d((e=>function(t,e){const{height:n,width:r,x:i,y:o}=e,u=n-4,a=o+2;return"inner"===t?{height:u,width:r-4,transform:`translate(${i+2}px, ${a}px)`}:"left"===t?{height:u,width:"8px",transform:`translate(${Math.max(i-9,0)}px, ${a}px)`}:"right"===t?{height:u,width:"8px",transform:`translate(${Math.min(i+r+2,window.innerWidth-9)}px, ${a}px)`}:void 0}(e,t.contour.absolutePosition)))).subscribe(r);return()=>{e.unsubscribe()}}),[t]),e.createElement("div",{className:"green-zone green-zone-for-node-without-children",style:n})}function fo(t){return"adjacent-with-parent"===t.type?`adjacent-${t.parent.id}-${t.child.id}-${t.edge}`:`between-${t.left.id}-${t.right.id}`}function ho({greenZones:t}){const n=function(t){const[e,n]=o("");return i((()=>{const e=di.pipe(S((()=>w())),z((e=>t.filter((({raw:t})=>function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}(e,t))))),z((t=>t.length?t[0]:void 0)),I((t=>wi.next(t))),z((t=>t?fo(t):"")),O()).subscribe(n);return()=>{e.unsubscribe()}}),[t]),e}(t);return e.createElement(e.Fragment,null,t.map((t=>{const r=fo(t);if("between-nodes"===t.type){const{absolutePosition:i}=t;return e.createElement("div",{key:r,className:V("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":r===n}),style:{height:i.height,width:i.width,transform:`translate(${i.x}px, ${i.y}px)`}})}return e.createElement("div",{key:r,className:V("green-zone green-zone-between-nodes",{"green-zone-between-nodes--focused":r===n}),style:{height:t.absolutePosition.height,width:t.absolutePosition.width,transform:`translate(${t.absolutePosition.x}px, ${t.absolutePosition.y}px)`}})})))}var lo=function(){const t=function(){const[t,e]=o([]);return i((()=>{const t=yi.pipe(_(),g((()=>w())),d((t=>{if(!t)return[];const e=pi.value;if(!(null==e?void 0:e.length))return[];const n=M(zi.value,t.id);if(!n)return[];const r=zi.value.getIn(n);return L(r)?so(zi.value,t,e):{contour:t,type:"node_without_children",position:"left"}}))).subscribe(e);return()=>{t.unsubscribe()}}),[]),t}();return function(){const[t,e]=o(!1);return i((()=>{const t=gi.pipe(_()).subscribe(e);return()=>{t.unsubscribe()}}),[]),t}()&&t?Array.isArray(t)?e.createElement(ho,{greenZones:t}):e.createElement(co,{greenZone:t}):null};function po(){return Pi()===$?null:e.createElement(e.Fragment,null,e.createElement(to,null),e.createElement(lo,null),e.createElement(uo,null))}Y("html,\nbody {\n  width: 100%;\n  height: auto;\n}\n\n* {\n  box-sizing: border-box;\n}\n\n.simulator-background-layer {\n  position: relative;\n  z-index: 0;\n}\n\n.artery-simulator-root--modal-open {\n  height: 100vh;\n  overflow: hidden;\n}\n\n.green-zone {\n  top: 0;\n  position: absolute;\n  will-change: width, height, transform;\n}\n\n.green-zone-for-node-without-children {\n  background-color: rgba(0, 128, 0, 0.3607843137);\n  outline: 1px solid #008000;\n}\n\n.green-zone-between-nodes {\n  outline: 1px dashed #008000;\n}\n\n.green-zone-between-nodes--focused {\n  background-color: rgba(0, 128, 0, 0.3607843137);\n}\n\n.placeholder-for-container-node-children {\n  padding: 8px;\n  color: #94a3b8;\n  text-align: center;\n  background-color: #f8fafc;\n}",{});const _o=document.createElement("div");document.body.appendChild(_o),t.render(e.createElement(po,null),_o)}}}));
